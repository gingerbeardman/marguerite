bg_color='#008020';button_color='rgb(132, 148, 120)';button_text='#000';about_BGcolor='#040';nobutton_color='#888';menu_border='#0f0';score_bgcolor='#000';function setColors(){var e;try { e=document.getElementById('___MENUBAR'); } catch(e){;}if(dark_mode<0){bg_color='#0000aa';nobutton_color='#888';button_text='#000';button_color='rgb(192, 222, 255)';menu_bgcolor='#ccc';menu_txcolor='#000';menu_border='#0cf';score_bgcolor='#000';about_BGcolor='#00f';if(e) e.style.background=menu_bgcolor;return;}if(dark_mode){bg_color='#000000';nobutton_color='#222';button_color='#004400';button_text='#fff';menu_bgcolor='#222';menu_txcolor='#fff';menu_border='#020';score_bgcolor='#222';about_BGcolor='#040';if(e) e.style.background=menu_bgcolor;return;}bg_color='#008020';nobutton_color='#888';button_text='#000';button_color='rgb(198, 222, 180)';menu_bgcolor='#ccc';menu_txcolor='#000';menu_border='#0f0';score_bgcolor='#000';about_BGcolor='#0a0';if(e) e.style.background=menu_bgcolor;}function BALANCE_DISP(){var jia, i, j, k, y, x, s, t, yy;var e, f, hd, fff='', dx=dw=0;removeTextArea('GOSHUGI_TBL0');removeTextArea('GOSHUGI_TBL1');removeTextArea('GOSHUGI_TBL2');removeTextArea('GOSHUGI_TBL3');jia=players; while(--jia>=0){if(rule.goshugi && !scoreCardMode && lang==''){dw=120;if(players==4){x=332; y=365;if(!grMode){if(jia==1){ x=342; y=54; }else if(jia==2){ x=37; y=41;}else if(jia==3){ x=28; y=351; }}else {x=498; y=312;if(jia==1){ x=669; y=158; }else if(jia==2){ x=498; y=4; }else if(jia==3){ x=345; y=158; }dw=148;}}else {x=332; y=315;if(!grMode){if(jia==1){ x=342; y=4; }else if(jia==2){ x=28; y=301; }}else {x=498; y=262;if(jia==1){ x=669; y=108; }else if(jia==2){ x=345; y=108; }dw=148;}}j=0; i=shugi_name.length; while(--i>0){if(shugiB[jia][i]) j++;}if(j>4 && shugiB[jia][2] && shugiB[jia][3]){fff=shugi_name[2];shugi_name[2]='裏ﾄﾞﾗ･赤';shugiB[jia][2]+=shugiB[jia][3];shugiB[jia][3]=0;}var www=dw-42;newTextArea('GOSHUGI_TBL'+jia, x, y, www, 120, 24, '#000', '#fff');var e=document.getElementById('GOSHUGI_TBL'+jia);e.style.border='solid '+Math.floor(2*rRatio)+'px rgb(255, 247, 206)';e.style.padding=Math.floor(14*rRatio)+'px';i=''; j=k=0; yy=16; while(++j<shugi_name.length){if(!shugiB[jia][j]) continue;i+='<div style="position: absolute; top: '+Math.floor(yy*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(www*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #0ff; font-size: '+Math.floor(24*rRatio)+'px; text-align: left; font-family: serif; line-height: 1em; certical-align: text-top: ">'+shugi_name[j]+'</div>'+'<div style="position: absolute; top: '+Math.floor(yy*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(www*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #fff; font-size: '+Math.floor(24*rRatio)+'px; text-align: right; font-family: serif; line-height: 1em; certical-align: text-top: "><span style="background: #000; ">'+shugiB[jia][j]+'</span></div>';k+=shugiB[jia][j];yy+=28;}if(fff!=''){shugi_name[2]=fff;}s='チップ'; yy=104; if(!k){ yy=62; }if(!grMode) s='ﾁｯﾌﾟ';i+='<div style="position: absolute; top: '+Math.floor(yy*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(www*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #0ff; font-size: '+Math.floor(24*rRatio)+'px; text-align: left; font-family: serif; line-height: 1em; certical-align: text-top: ">'+s+'</div>'+'<div style="position: absolute; top: '+Math.floor(yy*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(www*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #fff; font-size: '+Math.floor(24*rRatio)+'px; text-align: right; font-family: serif; line-height: 1em; certical-align: text-top: "><span style="background: #000; ">'+shugi[jia]+'</span></div>';e.innerHTML=i;}i=160;if(lang!=''){x=124; y=355;if(jia==1){ x=240; y=203; }if(jia==2){ x=124; y=51; }if(jia==3){ x=8; y=203; }i=200;if(grMode){x=364; y=248;if(jia==1){ x=600; y=168; }if(jia==2){ x=364; y=88; }if(jia==3){ x=128; y=168; }}}else {if(players==4){x=144; y=365;if(!grMode){if(jia==1){ x=260; y=203; }else if(jia==2){ x=144; y=41; }else if(jia==3){ x=28; y=203; }}else {x=384; y=312;if(jia==1){ x=480; y=158; }else if(jia==2){x=384; y=4;if(dw) x=309;}else if(jia==3){x=288; y=158;if(dw) x=156;}else {if(dw) x=309;}}}else {x=144; y=315;if(!grMode){if(jia==1){ x=260; y=153; }else if(jia==2){ x=28; y=153; }}else {x=384; y=262;if(jia==1){ x=480; y=108; }else if(jia==2){x=288; y=108;if(dw) x=156;}else {if(dw) x=309;}}}}newTextArea('BALANCE_TBL'+jia, x, y, i, 120, 24, '#000', '#fff');var e=document.getElementById('BALANCE_TBL'+jia);e.style.border='solid '+Math.floor(2*rRatio)+'px rgb(255, 247, 206)';e.style.padding=Math.floor(14*rRatio)+'px';y=16;if(scoreCardMode){if(lang==''){if(gameModeSpecial & GAMEMODE_SPECIAL_AOTENJYO){yy=y;i='<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(72*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #0ff; font-size: '+Math.floor(24*rRatio)+'px; text-align: left; font-family: serif; line-height: 1em; certical-align: text-top: ">今回</div>'+'<div style="position: absolute; top: '+Math.floor((y+28)*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(160*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #fff; font-size: '+Math.floor(24*rRatio)+'px; text-align: right; font-family: serif; line-height: 1em; certical-align: text-top: "><span style="background: #000; ">'+POINT_STRING3(scre[jia])+'</span></div>';y=yy+90;e.innerHTML=i+'<div style="position: absolute; top: '+Math.floor((y-28)*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(72*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #0ff; font-size: '+Math.floor(24*rRatio)+'px; text-align: left; font-family: serif; line-height: 1em; certical-align: text-top: ">累計</div>'+'<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(160*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #fff; font-size: '+Math.floor(24*rRatio)+'px; text-align: right; font-family: serif; line-height: 1em; certical-align: text-top: ">'+POINT_STRING3(sctt[jia])+'</div>';continue;}s=scre[jia].toString(10);if(gameMode==GAMEMODE_ARSHIAR || gameMode==GAMEMODE_GUOJI){t=s.substring(0, s.length-1);s=s.substring(s.length-1, s.length);if(t=='' || t=='-') t=t+'0';s=t+'.'+s;}i='<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(72*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #0ff; font-size: '+Math.floor(24*rRatio)+'px; text-align: left; font-family: serif; line-height: 1em; certical-align: text-top: ">今回</div>'+'<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(88*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(88*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #fff; font-size: '+Math.floor(24*rRatio)+'px; text-align: right; font-family: serif; line-height: 1em; certical-align: text-top: ">'+s+'</div>';if((gameMode==GAMEMODE_BOO || gameMode==GAMEMODE_EASTERN_BOO) && boo_scbd[jia]){y+=28;i+='<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(72*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #0ff; font-size: '+Math.floor(24*rRatio)+'px; text-align: left; font-family: serif; line-height: 1em; certical-align: text-top: ">場代</div>'+'<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(88*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(88*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #fff; font-size: '+Math.floor(24*rRatio)+'px; text-align: right; font-family: serif; line-height: 1em; certical-align: text-top: ">'+boo_scbd[jia]+'</div>';}s=sctt[jia].toString(10);if(gameMode==GAMEMODE_ARSHIAR || gameMode==GAMEMODE_GUOJI){t=s.substring(0, s.length-1);s=s.substring(s.length-1, s.length);if(t=='' || t=='-') t=t+'0';s=t+'.'+s;}y=108;i+='<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(72*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #0ff; font-size: '+Math.floor(24*rRatio)+'px; text-align: left; font-family: serif; line-height: 1em; certical-align: text-top: ">累計</div>'+'<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(88*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(88*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #fff; font-size: '+Math.floor(24*rRatio)+'px; text-align: right; font-family: serif; line-height: 1em; certical-align: text-top: ">'+s+'</div>';e.innerHTML=i;continue;}s=scre[jia].toString(10);if(gameMode==GAMEMODE_GUOJI){t=s.substring(0, s.length-1);s=s.substring(s.length-1, s.length);if(t=='' || t=='-') t=t+'0';s=t+'.'+s;}y=16;i='<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(168*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #0ff; font-size: '+Math.floor(24*rRatio)+'px; text-align: left; font-family: serif; line-height: 1em; certical-align: text-top: ">Result of the Game</div>'+'<div style="position: absolute; top: '+Math.floor((y+28)*rRatio)+'px; left: 0px; padding: 0; margin: 0; width: '+Math.floor(212*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #fff; font-size: '+Math.floor(24*rRatio)+'px; text-align: right; font-family: serif; line-height: 1em; certical-align: text-top: ">'+s+'</div>';s=sctt[jia].toString(10);if(gameMode==GAMEMODE_GUOJI){t=s.substring(0, s.length-1);s=s.substring(s.length-1, s.length);if(t=='' || t=='-') t=t+'0';s=t+'.'+s;}y=108-28;i+='<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(72*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #0ff; font-size: '+Math.floor(24*rRatio)+'px; text-align: left; font-family: serif; line-height: 1em; certical-align: text-top: ">Total</div>'+'<div style="position: absolute; top: '+Math.floor((y+28)*rRatio)+'px; left: 0px; padding: 0; margin: 0; width: '+Math.floor(212*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #fff; font-size: '+Math.floor(24*rRatio)+'px; text-align: right; font-family: serif; line-height: 1em; certical-align: text-top: ">'+s+'</div>';e.innerHTML=i;continue;}if(!bl[jia] && !bl_b[jia]){y=62;if(gameMode==GAMEMODE_PENGLI ||    (gameModeSpecial & GAMEMODE_SPECIAL_AOTENJYO)){e.innerHTML='<div style="position: absolute; top: '+Math.floor((y-14)*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(72*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #0ff; font-size: '+Math.floor(24*rRatio)+'px; text-align: left; font-family: serif; line-height: 1em; certical-align: text-top: ">現在</div>'+'<div style="position: absolute; top: '+Math.floor((y+14)*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(160*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #fff; font-size: '+Math.floor(24*rRatio)+'px; text-align: right; font-family: serif; line-height: 1em; certical-align: text-top: ">'+POINT_STRING2(sc[jia])+'</div>';continue;}if(lang==''){e.innerHTML='<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(72*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #0ff; font-size: '+Math.floor(24*rRatio)+'px; text-align: left; font-family: serif; line-height: 1em; certical-align: text-top: ">現在</div>'+'<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(160*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #fff; font-size: '+Math.floor(24*rRatio)+'px; text-align: right; font-family: serif; line-height: 1em; certical-align: text-top: "><span style="background: #000; ">'+POINT_STRING2(sc[jia])+'</span></div>';continue;}e.innerHTML='<div style="position: absolute; top: '+Math.floor((y-14)*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(200*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #0ff; font-size: '+Math.floor(24*rRatio)+'px; text-align: left; font-family: serif; line-height: 1em; certical-align: text-top: ">Current Score:</div>'+'<div style="position: absolute; top: '+Math.floor((y+14)*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(200*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #fff; font-size: '+Math.floor(24*rRatio)+'px; text-align: right; font-family: serif; line-height: 1em; certical-align: text-top: ">'+POINT_STRING2(sc[jia])+'</div>';continue;}if(bl_b[jia]){if(gameModeSpecial & GAMEMODE_SPECIAL_AOTENJYO){i='聴牌料'; if(bl_b[jia]<0) i='不聴罰';yy=y;i='<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(72*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #0ff; font-size: '+Math.floor(24*rRatio)+'px; text-align: left; font-family: serif; line-height: 1em; certical-align: text-top: ">'+i+'</div>'+'<div style="position: absolute; top: '+Math.floor((y+28)*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(160*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #fff; font-size: '+Math.floor(24*rRatio)+'px; text-align: right; font-family: serif; line-height: 1em; certical-align: text-top: "><span style="background: #000; ">'+POINT_STRING2(bl_b[jia])+'</span></div>';y=yy+90;e.innerHTML=i+'<div style="position: absolute; top: '+Math.floor((y-28)*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(72*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #0ff; font-size: '+Math.floor(24*rRatio)+'px; text-align: left; font-family: serif; line-height: 1em; certical-align: text-top: ">収支後</div>'+'<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(160*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #fff; font-size: '+Math.floor(24*rRatio)+'px; text-align: right; font-family: serif; line-height: 1em; certical-align: text-top: ">'+POINT_STRING2(sc[jia])+'</div>';continue;}if(lang==''){i='聴牌料'; if(bl_b[jia]<0) i='不聴罰';i='<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(72*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #0ff; font-size: '+Math.floor(24*rRatio)+'px; text-align: left; font-family: serif; line-height: 1em; certical-align: text-top: ">'+i+'</div>'+'<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(88*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(88*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #fff; font-size: '+Math.floor(24*rRatio)+'px; text-align: right; font-family: serif; line-height: 1em; certical-align: text-top: ">'+POINT_STRING2(bl_b[jia])+'</div>';y=108;i+='<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(72*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #0ff; font-size: '+Math.floor(24*rRatio)+'px; text-align: left; font-family: serif; line-height: 1em; certical-align: text-top: ">収支後</div>'+'<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(160*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #fff; font-size: '+Math.floor(24*rRatio)+'px; text-align: right; font-family: serif; line-height: 1em; certical-align: text-top: ">'+POINT_STRING2(sc[jia])+'</div>';e.innerHTML=i;continue;}i='Ready-to-Win Bonus'; if(bl_b[jia]<0) i='Not-Ready Penalty';i='<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(168*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #0ff; font-size: '+Math.floor(24*rRatio)+'px; text-align: left; font-family: serif; line-height: 1em; certical-align: text-top: ">'+i+'</div>'+'<div style="position: absolute; top: '+Math.floor((y+28)*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(200*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #fff; font-size: '+Math.floor(24*rRatio)+'px; text-align: right; font-family: serif; line-height: 1em; certical-align: text-top: ">'+POINT_STRING2(bl_b[jia])+'</div>';y+=92;i+='<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(168*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #0ff; font-size: '+Math.floor(24*rRatio)+'px; text-align: left; font-family: serif; line-height: 1em; certical-align: text-top: ">Score</div>'+'<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(200*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #fff; font-size: '+Math.floor(24*rRatio)+'px; text-align: right; font-family: serif; line-height: 1em; certical-align: text-top: ">'+POINT_STRING2(sc[jia])+'</div>';e.innerHTML=i;continue;}if(gameMode==GAMEMODE_PENGLI ||    (gameModeSpecial & GAMEMODE_SPECIAL_AOTENJYO)){yy=y;i='<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(72*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #0ff; font-size: '+Math.floor(24*rRatio)+'px; text-align: left; font-family: serif; line-height: 1em; certical-align: text-top: ">得失点</div>'+'<div style="position: absolute; top: '+Math.floor((y+28)*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(160*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #fff; font-size: '+Math.floor(24*rRatio)+'px; text-align: right; font-family: serif; line-height: 1em; certical-align: text-top: "><span style="background: #000; ">'+POINT_STRING2(bl[jia]+bl_t[jia]+bl_r[jia])+'</span></div>';y=yy+90;e.innerHTML=i+'<div style="position: absolute; top: '+Math.floor((y-28)*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(72*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #0ff; font-size: '+Math.floor(24*rRatio)+'px; text-align: left; font-family: serif; line-height: 1em; certical-align: text-top: ">収支後</div>'+'<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(160*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #fff; font-size: '+Math.floor(24*rRatio)+'px; text-align: right; font-family: serif; line-height: 1em; certical-align: text-top: ">'+POINT_STRING2(sc[jia])+'</div>';continue;}if(lang==''){yy=y;i='<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(72*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #0ff; font-size: '+Math.floor(24*rRatio)+'px; text-align: left; font-family: serif; line-height: 1em; certical-align: text-top: ">和了点</div>'+'<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(160*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #fff; font-size: '+Math.floor(24*rRatio)+'px; text-align: right; font-family: serif; line-height: 1em; certical-align: text-top: "><span style="background: #000; ">'+POINT_STRING2(bl[jia])+'</span></div>';y+=28;if(bl_t[jia]){var s='積み点';if(gameMode==GAMEMODE_TAIWAN){s='連荘点';if(cmmd[zhuangjia]!=25) s='拉荘点';}i+='<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(72*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #0ff; font-size: '+Math.floor(24*rRatio)+'px; text-align: left; font-family: serif; line-height: 1em; certical-align: text-top: ">'+s+'</div>'+'<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(88*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(88*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #fff; font-size: '+Math.floor(24*rRatio)+'px; text-align: right; font-family: serif; line-height: 1em; certical-align: text-top: ">'+POINT_STRING2(bl_t[jia])+'</div>';y+=28;}if(bl_r[jia]){var s='供託点'; if(gameMode==GAMEMODE_TAIWAN) s='荘家点';i+='<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(72*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #0ff; font-size: '+Math.floor(24*rRatio)+'px; text-align: left; font-family: serif; line-height: 1em; certical-align: text-top: ">'+s+'</div>'+'<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(88*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(88*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #fff; font-size: '+Math.floor(24*rRatio)+'px; text-align: right; font-family: serif; line-height: 1em; certical-align: text-top: ">'+POINT_STRING2(bl_r[jia])+'</div>';y+=28;}if(gameMode==GAMEMODE_BOO){if(boo_bl_dora[jia] && boo_bl_menqian[jia] && bl_t[jia]){i+='<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(144*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #0ff; font-size: '+Math.floor(24*rRatio)+'px; text-align: left; font-family: serif; line-height: 1em; certical-align: text-top: ">門前・ドラ'+boo_ydora+'</div>'+'<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(88*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(88*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #fff; font-size: '+Math.floor(24*rRatio)+'px; text-align: right; font-family: serif; line-height: 1em; certical-align: text-top: ">'+POINT_STRING2(boo_bl_dora[jia]+boo_bl_menqian[jia])+'</div>';y+=28;}else {if(boo_bl_dora[jia]){i+='<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(72*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #0ff; font-size: '+Math.floor(24*rRatio)+'px; text-align: left; font-family: serif; line-height: 1em; certical-align: text-top: ">ドラ '+boo_ydora+'</div>'+'<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(88*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(88*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #fff; font-size: '+Math.floor(24*rRatio)+'px; text-align: right; font-family: serif; line-height: 1em; certical-align: text-top: ">'+POINT_STRING2(boo_bl_dora[jia])+'</div>';y+=28;}if(boo_bl_menqian[jia]){i+='<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(72*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #0ff; font-size: '+Math.floor(24*rRatio)+'px; text-align: left; font-family: serif; line-height: 1em; certical-align: text-top: ">門前点</div>'+'<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(88*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(88*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #fff; font-size: '+Math.floor(24*rRatio)+'px; text-align: right; font-family: serif; line-height: 1em; certical-align: text-top: ">'+POINT_STRING2(boo_bl_menqian[jia])+'</div>';y+=28;}}}y=yy+90;e.innerHTML=i+'<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(72*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #0ff; font-size: '+Math.floor(24*rRatio)+'px; text-align: left; font-family: serif; line-height: 1em; certical-align: text-top: ">収支後</div>'+'<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(160*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #fff; font-size: '+Math.floor(24*rRatio)+'px; text-align: right; font-family: serif; line-height: 1em; certical-align: text-top: ">'+POINT_STRING2(sc[jia])+'</div>';continue;}yy=y;i='<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(168*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #0ff; font-size: '+Math.floor(24*rRatio)+'px; text-align: left; font-family: serif; line-height: 1em; certical-align: text-top: ">Points</div>'+'<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(200*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #fff; font-size: '+Math.floor(24*rRatio)+'px; text-align: right; font-family: serif; line-height: 1em; certical-align: text-top: ">'+POINT_STRING2(bl[jia])+'</div>';y+=28;if(bl_t[jia]){i+='<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(168*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #0ff; font-size: '+Math.floor(24*rRatio)+'px; text-align: left; font-family: serif; line-height: 1em; certical-align: text-top: ">Counted</div>'+'<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(200*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #fff; font-size: '+Math.floor(24*rRatio)+'px; text-align: right; font-family: serif; line-height: 1em; certical-align: text-top: "><span style="background: #000; ">'+POINT_STRING2(bl_t[jia])+'</span></div>';y+=28;}if(bl_r[jia]){i+='<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(168*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #0ff; font-size: '+Math.floor(24*rRatio)+'px; text-align: left; font-family: serif; line-height: 1em; certical-align: text-top: ">Bets</div>'+'<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(200*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #fff; font-size: '+Math.floor(24*rRatio)+'px; text-align: right; font-family: serif; line-height: 1em; certical-align: text-top: ">'+POINT_STRING2(bl_r[jia])+'</div>';}y=yy+92;i+='<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(168*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #0ff; font-size: '+Math.floor(24*rRatio)+'px; text-align: left; font-family: serif; line-height: 1em; certical-align: text-top: ">Score</div>'+'<div style="position: absolute; top: '+Math.floor(y*rRatio)+'px; left: '+Math.floor(16*rRatio)+'px; padding: 0; margin: 0; width: '+Math.floor(200*rRatio)+'px; height: '+Math.floor(28*rRatio)+'px; color: #fff; font-size: '+Math.floor(24*rRatio)+'px; text-align: right; font-family: serif; line-height: 1em; certical-align: text-top: ">'+POINT_STRING2(sc[jia])+'</div>';e.innerHTML=i;}}function BALANCE_ERASE(){removeTextArea('BALANCE_TBL0');removeTextArea('BALANCE_TBL1');removeTextArea('BALANCE_TBL2');removeTextArea('BALANCE_TBL3');}function STATUS_DISP(str){var y=grMode ? 470 : 522;var x=grMode ? 144 : 0;newTextArea('STATUS_AREA', x, y, dWidth-x, 24, 24, 'transparent', button_text);var e=document.getElementById('STATUS_AREA');if(e){e.style.textAlign=grMode ? 'left' : 'right';e.style.whiteSpace='nowrap';e.style.padding=Math.floor(4*rRatio)+'px 0';e.style.color=button_text;e.style.lineHeight='1em';e.style.verticalAlign='text-top';e.innerHTML=str;}}function STATUS_DISP_2(str){var y=grMode ? 470 : 522;var x=0;newTextArea('STATUS_AREA', x, y, dWidth, 24, 24, 'transparent', button_text);var e=document.getElementById('STATUS_AREA');if(e){e.style.textAlign=grMode ? 'left' : 'right';e.style.whiteSpace='nowrap';e.style.lineHeight='1em';e.style.verticalAlign='text-top';e.style.padding=Math.floor(4*rRatio)+'px 0';e.style.color=button_text;e.innerHTML=str;}}function STATUS_ERASE(){removeTextArea('STATUS_AREA');}function ZAMPAI_DISP(){var x=0, y=522, fs=24;if(grMode){x=0; y=470; fs=24;}newTextArea('ZAMPAI_NBR', x, y, 128, fs, fs, 'transparent', '#fff');var e=document.getElementById('ZAMPAI_NBR');if(e){e.style.color=button_text;e.style.padding=Math.floor(4*rRatio)+'px 0';e.style.lineHeight='1em';e.style.verticalAlign='text-top';var i=zampai; if(i<10) i=' '+i;e.innerHTML=((lang=='') ? '残牌：' : 'Remain: ')+i;}}function SCREEN_REINIT(){removeAllOfTextArea();}function ARROW_DISP(x1, y1, dir){var s, w, h, x=x1, y=y1;w=32; h=26; if(dir<-199 || grMode){ w=48; h=39; }removeTextArea('ARROW');if(dir & 1){s='data:image/gif;base64,R0lGODlhJwAdAKL/AP\/\/\/\/8AAMDAwAAAAMDAwAAAAAAAAAAAACH5BAEAAAQALAAAAAAnAB0AAANfSLrc/jDKSau9OGPAu/faAwRkaZJA6Ixnm6oM25ovrMgzai94Xtu92Q8WdO1uOdqRUDwNK59OshTlUJpTIzSbfUqwXQ3Ypxo7gVzdzuwNgdtl8jKmndOpdpE6v4LzQwkAOw==';if(dir==3){s='data:image/gif;base64,R0lGODlhJwAdAKL/AP\/\/\/\/8AAMDAwAAAAMDAwAAAAAAAAAAAACH5BAEAAAQALAAAAAAnAB0AAANcSLrc/jDKBcC8GIRgsXfaxn0kEYpjeZ1oqkJs675MLM+0feOlvvMe3w84EQ6JsOOxs1IqmZGKVPqcSlXGDZRmenJr3q8iiySRt7mw+Cweq7/stnV+bdvv+LwekgAAOwkAOw==';if(dir>-200 && grMode) x-=8;}else {if(dir>-200 && grMode){ y-=4; x-=4; }}newTextArea('ARROW', x, y, w, h, 24, 'transparent', '#000');e=document.getElementById('ARROW');e.style.margin=0;e.style.padding=0;e.innerHTML='<img alt="" src="'+s+'" style="width: 100%; height: 100%; "/>';return
}s='data:image/gif;base64,R0lGODlhHQAnAJH/AP\/\/\/\/8AAAAAAMDAwCH5BAEAAAMALAAAAAAdACcAAAJknI+py+0Po5y0KmAbwPkG3h1A8IUiWZojCmYrG77sRteth+Z6fiPyDkzhgsTe4Efc9ZBJ3Y3Z5CWgUdKyGjRSm8Yj1qn5wsLi7slps0F+Zoms7R6bvML5CE7ZzKf7vv8PGBhYAAA7';if(dir && dir!=-202){s='data:image/gif;base64,R0lGODlhHQAnAJH/AP\/\/\/\/8AAAAAAMDAwCH5BAEAAAMALAAAAAAdACcAAAJinI+py+0Po5y02gpuA1krEHTeAYYjGaSiV6pn6z7cTHPpbTowzuPr1wvyfoidsEc0GI/DxZLpA0KZv+c0hroGiVZosntMDsDbjfYmVtZqSFbTjX7F5Tl5GnPHnPb8vv+vUAAAOwA7';if(dir>-200 && grMode){ x-=8; y-=4; }}else y-=8;newTextArea('ARROW', x, y, h, w, 24, 'transparent', '#000');e=document.getElementById('ARROW');e.style.margin=0;e.style.padding=0;e.innerHTML='<img alt="" src="'+s+'" style="width: 100%; height: 100%; "/>';}function ARROW_ERASE(){removeTextArea('ARROW');}console_disped=function(){ SHUPAI_DISP(0); };function CONSOLE_DISP(){var i, j, k, l, x, y, mf=0, s, alg='left', dx=0;if(lang=='en'){ alg='center'; dx=45; }else if(grMode){ alg='center'; dx=45; }makeNoClickable();SHUPAI_DISP(0);if(gameMode==GAMEMODE_TAIWAN){if(grMode){x=900; y=564;l=0; if(fc[0]>1) l=fc[0]*3-6;i=14; while(--i>l){if(dpOK[i]){makeClickable(i, x, y, 60, 72, '');}x-=60;}if(fc[0]<1){i=20; while(--i>16){if(dpOK[i]){makeClickable(i, x, y, 60, 72, '');}x-=60;}}x=798; y=464;if(te[0][14] % 50){if(dpOK[14]){makeClickable(14, 888, 474, 72, 72, '');}}y=502;}else {y=692; x=-60; l=8; i=fc[0]*3-3; k=0;if(!console_mode || fc[0]>2) i=5;if(console_mode && fc[0]<1){++k; x+=60; if(dpOK[17]){drawText('['+k+']', x+12, y, 60, 24, false, 24, 28, bg_color, '#fff', 'left');makeClickable(17, x, 609, 60, 72, k);}++k; x+=60; if(dpOK[18]){drawText('['+k+']', x+12, y, 60, 24, false, 24, 28, bg_color, '#fff', 'left');makeClickable(18, x, 609, 60, 72, k);}++k; x+=60; if(dpOK[19]){drawText('['+k+']', x+12, y, 60, 24, false, 24, 28, bg_color, '#fff', 'left');makeClickable(19, x, 609, 60, 72, k);}l=5; i=0;}while(--l>-1){x+=60; ++i;++k; if(dpOK[i]){drawText('['+k+']', x+12, y, 60, 24, false, 24, 28, bg_color, '#fff', 'left');makeClickable(i, x, 609, 60, 72, k);}}x=29; y=466;if(fulou_dir){x-=fc[0]*78;}if(dpOK[17]) makeClickable(17, x, y, 25, 31, '');x+=26; if(dpOK[18]) makeClickable(18, x, y, 25, 31, '');x+=26; if(dpOK[19]) makeClickable(19, x, y, 25, 31, '');i=0; while(++i<14){x+=26;if(dpOK[i]){makeClickable(i, x, y, 25, 31, '');}}if(dpOK[14]){x=420; if(fulou_dir){x-=fc[0]*78;}makeClickable(14, x, 436, 32, 26, '');makeClickable(14, 406, 555, 72, 60, '');}x=310; y=558;if(te[0][14]<1) x=390;}}else {if(grMode){x=900; y=564; i=15;if(fulou_dir) x=840-fc[0]*180;while(--i>0){if(dpOK[i] || (i==14 && (ronghe || dpOK[14]) && console_hand[14]!='')){makeClickable(i, x, y, 60, 72, '');}x-=60;} x=870; y=502;}else {console_hand=['', '', '', '','', '', '', '1','2', '3', '4', '5','6', '7', '#', ''];if(console_mode && fc[0]<2){if(fc[0]<1) console_hand=['', '1', '2', '3','4', '5', '6', '7','', '', '', '','', '', '#', ''];else if(fc[0]<2) console_hand=['', '', '', '','1', '2', '3', '4','5', '6', '7', '','', '', '#', ''];}y=690; x=0; k=-1; i=fc[0]*3;if(!console_mode || fc[0]>2) i=6;while(++k<7){++i;if(dpOK[i] && console_hand[i]!=''){drawText('['+console_hand[i]+']', x+12, y, 60, 24, false, 24, 28, bg_color, '#fff', 'left');makeClickable(i, x, 609, 60, 72, console_hand[i]);if(i==14){mf++;makeClickable(14, x, y, 60, 1, '-');}}x+=60;}if((ronghe || dpOK[14]) && console_hand[14]!=''){if(dpOK[i]) drawText('['+console_hand[14]+']', x+12, y, 60, 24, false, 24, 28, bg_color, '#fff', 'left');makeClickable(14, x, 609, 60, 72, console_hand[14]);if(i==14){mf++;makeClickable(14, x, y, 60, 1, '-');}}x=406; y=466;if(fulou_dir) x=374-fc[0]*78;i=15; while(--i>0){if(dpOK[i]){makeClickable(i, x, y, 25, 31, '');}x-=26;}x=390; y=558;}}if((console_cmd!=0 && console_cmd!=24) || (!console_type && !dpOK[14])){putRectangle(x, y, 89, 43, nobutton_color);}else {putRectangle(x, y, 89, 43, button_color);makeClickable(14, x, y+1, 89, 42, '#');if(!mf) makeClickable(14, x, y, 60, 1, '-');}if(lang==''){if(!grMode){s='進行';if(!console_type){s='摸切';if(pengchi) s='右端';}if(!grMode) s='[#]'+s;}else {s='進　行';if(!console_type){s='摸　切';if(pengchi) s='右　端';}}}else {s='Next';}drawText(s, x+dx, y+9, 60, 24, false, 24, 24, null, button_text, alg);x-=90;if(heleOK){if(console_cmd!=0){putRectangle(x, y, 89, 43, nobutton_color);}else {putRectangle(x, y, 89, 43, button_color);makeClickable(25, x, y, 89, 43, '0');}if(lang==''){if(!grMode){if(!grMode) i='[0]和了';}else {i='和　了';}}else {i='Win';}drawText(i, x+dx, y+9, 60, 24, false, 24, 24, null, button_text, alg);x-=90;}else if(daopaiOK){if(console_cmd!=0){putRectangle(x, y, 89, 43, nobutton_color);}else {putRectangle(x, y, 89, 43, button_color);makeClickable(26, x, y, 89, 43, '0');}putRectangle(x, y, 89, 43, button_color);if(lang==''){if(!grMode){if(!grMode) i='[0]流局';}else {i='流　局';}}else {i='Draw';}drawText(i, x+dx, y+9, 60, 24, false, 24, 24, null, button_text, alg);x-=90;}if(reachOK){if(lang==''){l='9';if(lang==''){if(!grMode){i='[9]立直';if(gameMode==GAMEMODE_TAIWAN){l='0'; i='[0]聴牌';}}else {i='立　直';if(gameMode==GAMEMODE_TAIWAN){l='0'; i='聴　牌';}}}}else {l='9'; i='Riichi';}if(console_cmd!=0 && console_cmd!=24){putRectangle(x, y, 89, 43, nobutton_color);}else {putRectangle(x, y, 89, 43, button_color);makeClickable(24, x, y, 89, 43, l);}if(console_cmd==24){if(lang==''){if(!grMode){i='[9]取消';}else {i='取　消';}}else i='Cancel';}drawText(i, x+dx, y+9, 60, 24, false, 24, 24, null, button_text, alg);x-=90;}if(gangOK){l=8; if(gameMode==GAMEMODE_TAIWAN) l=9;if(console_cmd!=0 && console_cmd!=21){putRectangle(x, y, 89, 43, nobutton_color);}else {putRectangle(x, y, 89, 43, button_color);makeClickable(21, x, y, 89, 43, l);}if(lang==''){if(!grMode){i='['+l+']カン';if(console_cmd==21) i='['+l+']取消';}else {i='カ　ン';if(console_cmd==21) i='取　消';}}else {i='Kong';if(console_cmd==21) i='Cancel';}drawText(i, x+dx, y+9, 60, 24, false, 24, 24, null, button_text, alg);x-=90;}if(chiOK){if(console_cmd!=0 && console_cmd!=23){putRectangle(x, y, 89, 43, nobutton_color);}else {putRectangle(x, y, 89, 43, button_color);makeClickable(23, x, y, 89, 43, '7');}if(lang==''){if(!grMode){i='[7]チー';if(console_cmd==23) i='[7]取消';}else {i='チ　ー';if(console_cmd==23) i='取　消';}}else {i='Chow';if(console_cmd==23) i='Cancel';}drawText(i, x+dx, y+9, 60, 24, false, 24, 24, null, button_text, alg);x-=90;}if(pengOK){if(console_cmd!=0 && console_cmd!=22){putRectangle(x, y, 89, 43, nobutton_color);}else {putRectangle(x, y, 89, 43, button_color);makeClickable(22, x, y, 89, 43, '6');}if(lang==''){if(!grMode){i='[6]ポン';if(console_cmd==23) i='[6]取消';}else {i='ポ　ン';if(console_cmd==23) i='取　消';}}else {i='Pung';if(console_cmd==23) i='Cancel';}drawText(i, x+dx, y+9, 60, 24, false, 24, 24, null, button_text, alg);x-=90;}console_disped=CONSOLE_DISP;}function MINI_CONSOLE(){var i, j, x, y, mf=0, alg='left', dx=0;if(lang=='en'　|| grMode){ alg='center'; dx=45; }makeNoClickable();j=jia; jia=0; SHUPAI_DISP(0); jia=j;x=390; y=558;if(grMode){x=870; y=502;if(gameMode==GAMEMODE_TAIWAN && ((opened[0]==2 && fdat_disp && te[0][15]>0) || te[0][14]>0)) x-=72;}putRectangle(x, y, 89, 43, button_color);if(lang==''){if(!grMode){i='[#]進行';}else {i='進　行';}}else {i='Next';}drawText(i, x+dx, y+9, 60, 24, false, 24, 24, null, button_text, alg);makeClickable(14, x, y+1, 89, 42, '#');makeClickable(14, x, y, 60, 1, '-');console_disped=MINI_CONSOLE;}function GAMEEND_CONSOLE(){var i, j, x, y, mf=0, alg='left', dx=0;if(lang=='en'　|| grMode){ alg='center'; dx=45; }makeNoClickable();j=jia; jia=0; SHUPAI_DISP(0); jia=j;x=390; y=558;if(grMode){x=870; y=502;if(gameMode==GAMEMODE_TAIWAN && ((opened[0]==2 && te[0][15]>0) || te[0][14]>0)) x-=72;}if(lang==''){if(!grMode){i='[*]いえ';}else {i='いいえ';}}else {i='No';}putRectangle(x, y, 89, 43, button_color);drawText(i, x+dx, y+9, 60, 24, false, 24, 24, null, button_text, alg);makeClickable(1, x, y, 80, 39, '*');x-=90;putRectangle(x, y, 89, 43, button_color);if(lang==''){if(!grMode){i='[#]はい';}else {i='は　い';}}else {i='Yes';}drawText(i, x+dx, y+9, 60, 24, false, 24, 24, null, button_text, alg);makeClickable(14, x, y+1, 80, 42, '#');makeClickable(14, x, y, 60, 1, '-');console_disped=GAMEEND_CONSOLE;}function CONSOLE_ERASE(){var j=jia;jia=0; SHUPAI_DISP(0); jia=j;makeNoClickable();console_disped=function(){SHUPAI_DISP(0);};SHUPAI_DISP(0);}function ATRACT(){var e, i, j, str, url, h, x, y, y1;document.cookie='data1=123; path=/; ';try {rule_storage=localStorage;dark_mode=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_UI_DARKMODE')) || 0;fulou_dir=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_UI_FULOUPOS')) || 0;mogiri_disp=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_UI_MOGIRIDISP')) || 0;}catch(e){ ; }setColors();try { lang=syslang; } catch(e){ lang=''; }initCanvas(bg_color);if(!grMode){putRectangleAbs(-1, 0, -1, 719, bg_color);putRectangleAbs(-1, 520, -1, 521, menu_border);putRectangleAbs(-1, 522, -1, 555, menu_bgcolor);putPartOfImage(image, 0, 470, 600, 640, 0, 0, 480, 520);}else {putRectangleAbs(-1, 0, -1, 640, bg_color);putPartOfImage(image, 0, 470, 600, 640, 263, 0, 434, 470);putRectangleAbs(-1, 470, -1, 471, menu_border);putRectangleAbs(-1, 472, -1, 500, menu_bgcolor);}i=grMode ?  240 : 0
if(lang=='en') setMenuItem('MENU_RESTART', -7, 6, 'Back to Menu.', '', 1);else setMenuItem('MENU_RESTART', -8, 3.6, '菜単に戻る', '', 1);SHOW_AUDIOMODE();x=0; y=690;if(grMode){ x=240; y=610; }newTextArea('CREDIT', x, y, 480, 32, 24, 'transparent', '#fff');var e=document.getElementById('CREDIT');e.style.fontFamily='serif';e.style.textAlign='center';if(lang=='en') e.innerHTML=en_copyright_credit;else e.innerHTML=copyright_credit;str='しらぎくモバイル麻雀';if(lang=='en'){str='Mobile Mahjong';}x=grMode ? 279 : 16;y=16;drawTextMincho(str, x  , y  , 400, 40, true, 40, 40, null, '#000', 'left');drawTextMincho(str, x-2, y-2, 400, 40, true, 40, 40, null, '#060', 'left');str='画面をタップ/クリックしてください。';if(lang=='en'){str='Please Tap/Click this Screen.';}STATUS_DISP_2(str);x=390; y=558;if(grMode){x=870; y=502;}i=14;putRectangle(x, y, 89, 43, button_color);if(lang=='en'){drawText('Menu', x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');i=10;}else {str=grMode ? '開　始' : '[#]開始';drawText(str, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');}makeClickable(i, x, y+1, 89, 42, '#');x=480; y1=720; if(grMode){ x=960; y1=470; }makeClickable(i, 0, 0, x, y1, '-');x=0;if(lang=='en'){putRectangle(x, y, 120, 43, button_color);var s='日本語'; if(!grMode) s='[*]'+s;drawText(s, x+60, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(14, x, y+1, 120, 43, '0');}else {putRectangle(x, y, 120, 43, button_color);drawText('English', x+60, y+9, 120, 24, false, 24, 24, null, button_text, 'center');makeClickable(10, x, y+1, 120, 43, '0');}str='しらぎくモバイル麻雀について'; url=site_url;if(lang=='en'){str='About <cite">Marguerite Mobile Mahjong</cite>'; url=site_url_en;}y=grMode ? 540 : 619;newTextArea_2('RELATED', 0, y, 480, 48, 24, about_BGcolor, '#fff');var e=document.getElementById('RELATED');e.style.textAlign='center';e.innerHTML='<a style="display: block; margin: 0.5em 0.2em; padding: 0; height: 1em; font-weight: bold; color: #fff; text-decoration: none; vertical-align: top; line-height: 1em; " href="http:/'+'/'+url+'">'+str+'</a>';inputKey=-1;timeout_hnd=setTimeout('ATRACT_KEY(); ', 10);}function ATRACT_KEY(){if(timeout_hnd) clearTimeout(timeout_hnd);i=Math.random();if(inputKey==14){timeout_hnd=setTimeout('MAIN_START(); ', 10);return;}if(inputKey==10){timeout_hnd=setTimeout('EN_MAIN_START(); ', 10);return;}if(inputKey==10){timeout_hnd=setTimeout('EN_MAIN_START(); ', 10);return;}inputKey=-1;timeout_hnd=setTimeout('ATRACT_KEY(); ', 10);}function EN_MAIN_START(){if(timeout_hnd) clearTimeout(timeout_hnd);AUDIO_INIT();setMenuItem('MENU_RESTART', -7, 6, 'Back to Menu.', '', 1);lang='en';SHOW_AUDIOMODE();document.cookie='data1=123; path=/; ';try {rule_storage=localStorage;dark_mode=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_UI_DARKMODE')) || 0;fulou_dir=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_UI_FULOUPOS')) || 0;mogiri_disp=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_UI_MOGIRIDISP')) || 0;}catch(e){ ; }rule.zhuangfeng=-1;mo8pinghe=0;players=4;scre[0]=scre[1]=scre[2]=scre[3]=sctt[0]=sctt[1]=sctt[2]=sctt[3]=0;cID=[0, 1, 2, 3];setColors();var x, y=168, i, w, wt;initCanvas(bg_color);if(!grMode){putRectangleAbs(-1, 0, -1, 719, bg_color);putRectangleAbs(-1, 520, -1, 521, menu_border);putRectangleAbs(-1, 522, -1, 555, menu_bgcolor);}else {putRectangleAbs(-1, 0, -1, 640, bg_color);putRectangleAbs(-1, 470, -1, 471, menu_border);putRectangleAbs(-1, 472, -1, 500, menu_bgcolor);}x=240; y=41;if(grMode){x=480; y=46;}drawTextMincho(en_title, x, y, 480, 24, true, 24, 24, null, '#fff', 'center');drawTextMincho(en_title2, x, y+42, 480, 24, false, 20, 20, null, '#fff', 'center');x=6; y=123; i=240; wt=448;if(grMode){x=46; y=128; i=480; wt=836;putRectangle(6, 128, 948, 341, '#000');}else {putRectangle(6, 123, 468, 397, '#000');}drawTextMincho('M E N U', i, y+16, 96, 24, true, 24, 24, null, '#fff', 'canter');y+=60;drawTextMincho('[1]', x+16, y+16, 48, 24, true, 24, 24, null, '#fff', 'left');drawTextMincho('Japanese Riichi Mahjong Rules.', x+64, y+16, wt-49, 24, true, 24, 24, null, '#fff', 'left');makeClickable(1, x, y+16, dWidth, 40, '1');drawTextMincho('[2]', x+48, y+56, 48, 24, true, 24, 24, null, '#fff', 'left');drawTextMincho('About "Riichi Mahjong".', x+96, y+56, wt-80, 24, true, 24, 24, null, '#fff', 'left');makeClickable(2, x, y+56, dWidth, 40, '2');if(!grMode){drawTextMincho('[3]', x+16, y+126, 48, 46, true, 24, 24, null, '#fff', 'left');drawTextMincho('Mahjong Competition Rules,', x+64, y+126, wt-49, 24, true, 24, 24, null, '#fff', 'left');drawTextMincho('Chinese Guobiao Mahjong', x+64, y+156, wt-49, 24, true, 24, 24, null, '#fff', 'left');makeClickable(3, x, y+126, dWidth, 50, '3');drawTextMincho('[4]', x+48, y+196, 48, 24, true, 24, 24, null, '#fff', 'left');drawTextMincho('About "M.C.R.', x+96, y+196, wt-80, 24, true, 24, 24, null, '#fff', 'left');makeClickable(4, x, y+196, dWidth, 50, '4');drawTextMincho('[#]', x+16, y+246, 48, 24, true, 24, 24, null, '#fff', 'left');drawTextMincho('Configulation', x+64, y+246, wt-80, 24, true, 24, 24, null, '#fff', 'left');makeClickable(12, x, y+246, dWidth, 40, '#');}else {drawTextMincho('[3]', x+16, y+126, 48, 46, true, 24, 24, null, '#fff', 'left');drawTextMincho('Mahjong Competition Rules, Chinese Guobiao Mahjong', x+64, y+126, wt-49, 24, true, 24, 24, null, '#fff', 'left');makeClickable(3, x, y+126, dWidth, 40, '3');drawTextMincho('[4]', x+48, y+166, 48, 24, true, 24, 24, null, '#fff', 'left');drawTextMincho('About "Mahjong Competition Rules".', x+96, y+166, wt-80, 24, true, 24, 24, null, '#fff', 'left');makeClickable(4, x, y+166, dWidth, 40, '4');drawTextMincho('[#]', x+16, y+226, 48, 24, true, 24, 24, null, '#fff', 'left');drawTextMincho('Configuration', x+64, y+226, wt-80, 24, true, 24, 24, null, '#fff', 'left');makeClickable(12, x, y+226, dWidth, 40, '#');}x=390; y=558;if(grMode){x=870; y=502;}x=0;putRectangle(x, y, 120, 43, button_color);var s='日本語'; if(!grMode) s='[0]'+s;drawText(s, x+60, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(10, x, y+1, 120, 43, '0');x=0; y=690;if(grMode){ x=240; y=610; }newTextArea('CREDIT', x, y, 480, 32, 24, 'transparent', '#fff');var e=document.getElementById('CREDIT');e.style.fontFamily='serif';e.style.textAlign='center';e.innerHTML=en_copyright_credit;STATUS_DISP_2('Please choose your game.');str='About <cite">Marguerite Mobile Mahjong</cite>'; url=site_url_en;y=grMode ? 540 : 619;newTextArea_2('RELATED', 0, y, 480, 48, 24, about_BGcolor, '#fff');var e=document.getElementById('RELATED');e.style.textAlign='center';e.innerHTML='<a style="display: block; margin: 0.5em 0.2em; padding: 0; height: 1em; font-weight: bold; color: #fff; text-decoration: none; vertical-align: top; line-height: 1em;  " href="http:/'+'/'+url+'">'+str+'</a>';inputKey=-1;timeout_hnd=setTimeout('EN_MAIN_START_KEY(); ', 10);}function EN_MAIN_START_KEY(){if(timeout_hnd) clearTimeout(timeout_hnd);i=Math.random();if(inputKey==1){gameMode=GAMEMODE_REACH;timeout_hnd=setTimeout('SEL_RIICHI_RULES_EN(); ', 10);return;}if(inputKey==2){gameMode=GAMEMODE_REACH;timeout_hnd=setTimeout('EN_RIICHI_EXP(); ', 10);return;}if(inputKey==3){gameMode=GAMEMODE_GUOJI;timeout_hnd=setTimeout('SEL_GM_RULES_EN(); ', 10);return;}if(inputKey==4){gameMode=GAMEMODE_GUOJI;timeout_hnd=setTimeout('EN_GM_EXP(); ', 10);return;}if(inputKey==10){timeout_hnd=setTimeout('MAIN_START(); ', 10);return;}if(inputKey==12){timeout_hnd=setTimeout('SEL_CONFIG_EN(); ', 10);return;}inputKey=-1;timeout_hnd=setTimeout('EN_MAIN_START_KEY(); ', 10);}function EN_GM_EXP(){if(timeout_hnd) clearTimeout(timeout_hnd);var x, y, w, h;initCanvas(bg_color);if(!grMode){putRectangleAbs(-1, 0, -1, 719, bg_color);putRectangleAbs(-1, 520, -1, 521, menu_border);putRectangleAbs(-1, 522, -1, 555, menu_bgcolor);}else {putRectangleAbs(-1, 0, -1, 640, bg_color);putRectangleAbs(-1, 470, -1, 471, menu_border);putRectangleAbs(-1, 472, -1, 500, menu_bgcolor);}x=6; y=6; w=452; h=490;if(grMode){w=948; h=440;}newTextArea('EXPLANATION', x, y, w, h, 24, '#000', '#fff');e=document.getElementById('EXPLANATION');e.style.fontFamily='serif';e.style.overflow='auto';e.style.lineHeight='1.5em';e.style.padding=Math.floor(8*rRatio)+'px '+Math.floor(8*rRatio)+'px '+Math.floor(16*rRatio)+'px';e.innerHTML='<h1 id="TOP_AP" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0 0 1em; text-align: center; ">About Mahjong Competition Rules</h1>'+'<p><dfn>Mahjong Competition Rules</dfn> is based on Chinese <i xml:lang="zh-latn" lang="zh-latn">Guobiao</i> Rules.</p>'+'<h2 style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0.7em 0 0; ">How to Play.</h2>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>When you play this game on your <em style="font-style: normal; color: #ff0; font-weight: bold" >portrait position</em> device, part of your hand is enlarged in the bottom of the screen.<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>The right half is usually displayed, so if you wish to tap/click any tile in the left half, tap/click <samp style="background: rgb(198, 222, 180); color: #000; margin: 0 0.2em; padding: 0.1em; white-space: nowrap; ">Left</samp> button, or swipe to the left or the right.</li>'+'<li>Also, you can click/tap any tile of whole of your hand displayed above the enlarged hand, when your device is so large than you can click/tap tiles of them.</li>'+'</ul></li>'+'<li>When you play with your <em style="font-style: normal; color: #ff0; font-weight: bold" >landscape position</em> device, all tiles of your hand are enlarged in the bottom of the screen and you can click/tap them to choose.</li>'+'<li>If you wish to ignore other\'s discard, that is, if you don\'t win on the discarded tile, nor make kong/<wbr />pung/<wbr />chow, click/tap <samp style="background: rgb(198, 222, 180); color: #000; margin: 0 0.2em; padding: 0.1em; white-space: nowrap; ">Next</samp> button.</li>'+'<li>When you click/tap <samp style="background: rgb(198, 222, 180); color: #000; margin: 0 0.2em; padding: 0.1em; white-space: nowrap; ">Sort</samp> button, you can change the arrangement of your hand between<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc; ">'+'<li>Tiles for Knitted Straight and others,</li>'+'<li>or ordinary order.</li>'+'</ul></li>'+'</ul>';x=390; y=558;if(grMode){x=870; y=502;}putRectangle(x, y, 89, 43, button_color);drawText('Start', x+40, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(14, x, y+1, 89, 42, '#');makeClickable(14, x, y, 60, 1, '-');x-=90;putRectangle(x, y, 89, 43, button_color);drawText('Menu', x+40, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(10, x, y+1, 89, 40, '*');x=0;putRectangle(x, y, 120, 43, button_color);var s='Options';drawText(s, x+60, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(15, x, y+1, 120, 43, '0');x=0; y=690;if(grMode){ x=240; y=610; }newTextArea('CREDIT', x, y, 480, 32, 24, 'transparent', '#fff');var e=document.getElementById('CREDIT');e.style.fontFamily='serif';e.style.textAlign='center';e.innerHTML=en_copyright_credit;STATUS_DISP_2('Before play, please confirm described above.');inputKey=-1;timeout_hnd=setTimeout('EN_GM_EXP_KEY(); ', 10);}function EN_GM_EXP_KEY(){if(timeout_hnd) clearTimeout(timeout_hnd);i=Math.random();if(inputKey==14){inputKey=-1;timeout_hnd=setTimeout('SEL_GM_RULES_EN(); ', 10);return;}else if(inputKey==10){timeout_hnd=setTimeout('EN_MAIN_START(); ', 10);return;}else if(inputKey==15){timeout_hnd=setTimeout('SEL_GM_RULES_EN(); ', 10);return;}else if(inputKey==20){timeout_hnd=setTimeout('MAIN_START(); ', 10);return;}inputKey=-1;timeout_hnd=setTimeout('EN_GM_EXP_KEY(); ', 10);}function drawText2(txt, x, y, w, h, bold, fontSize, lineHeight, bgColor, fgColor, alignment){var x2=x;if(grMode) x2=x-(dWidthP >> 1)+(dWidthL >> 1);if(bgColor!=null){if(alignment.toLowerCase()=='center') x2-=w / 2;else if(alignment.toLowerCase()=='right') x2-=w;canvasContext.fillStyle=bgColor;canvasContext.fillRect(Math.floor(x2*rRatio)+xOffset, Math.floor(y*rRatio)+yOffset, Math.floor(w*rRatio), Math.floor(h*rRatio));}if(fgColor!=null) canvasContext.fillStyle=fgColor;var i='normal normal 1em/1em';if(fontSize!=null && fontSize>0){i='normal normal ';if(bold) i='normal bold ';i+=Math.floor(fontSize*rRatio)+'px';if(lineHeight!=null && lineHeight>0) i+='/'+Math.floor(lineHeight*rRatio)+'px';}if(lang=='') canvasContext.font=i+' monospace';else canvasContext.font=i+' sans-serif';if(alignment=='') canvasContext.textAlign='left';else canvasContext.textAlign=alignment;canvasContext.textBaseline='top';canvasContext.fillText(txt,Math.floor(x2*rRatio)+xOffset,Math.floor(y*rRatio)+yOffset);}function SEL_GM_RULES_EN(){if(timeout_hnd) clearTimeout(timeout_hnd);var x=6, y=6, i, s, t, y1, j, x1;rule.gm_gamehands_en=0;rule.gm_flowerTiles_en=0;try {rule.gm_gamehands_en=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_GM_GAMEHANDS_EN')) || 0;rule.gm_flowerTiles_en=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_GM_FLOWER_TILES_EN')) || 0;}catch(e){ ; }timeout_hnd=setTimeout('SEL_GM_RULES_EN_1(); ', 10);}function SEL_GM_RULES_EN_1(){if(timeout_hnd) clearTimeout(timeout_hnd);var x=6, y=6, i, s, s1, s2, t, y1, j;initCanvas(bg_color);if(!grMode){putRectangleAbs(-1, 0, -1, 719, bg_color);putRectangleAbs(-1, 520, -1, 521, menu_border);putRectangleAbs(-1, 522, -1, 555, menu_bgcolor);}else {putRectangleAbs(-1, 0, -1, 640, bg_color);putRectangleAbs(-1, 470, -1, 471, menu_border);putRectangleAbs(-1, 472, -1, 500, menu_bgcolor);}x=22; y=6; w=436;var x1=240;if(grMode){x=42; x1=480; w=876;putRectangle(6, 6, 948, 463, '#000');}else {putRectangle(6, 6, 468, 514, '#000');}t='';drawTextMincho(gmode_name+'Optional Rules of Mahjong Competition Rules.', x1, y+16, 48, 24, true, 24, 24, null, '#ff0', 'center');y1=y+66;s=grMode ? '' : '[1] ';drawTextMincho(s+'Hands of a Game:', x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s='Sixteen hands per a game.';if(rule.gm_gamehands_en){s='Eight hands per a game.';}y1+=32;drawTextMincho(s, x+48, y1, w, 24, true, 24, 24, null, '#fff', 'left');makeClickable(1, x, y1, w, 40, '1');y1+=64;s=grMode ? '' : '[2] ';drawTextMincho(s+'Flower Tiles:', x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s='Eight flower tiles used.';if(rule.gm_flowerTiles_en){s='No flower times used.';}y1+=32;drawTextMincho(s, x+48, y1, w, 24, true, 24, 24, null, '#fff', 'left');makeClickable(2, x, y1, w, 40, '2');y1+=64;drawTextMincho('*Tap/Click the option to change.', x, y1, 276, 24, false, 24, 24, null, '#fff', 'left');x=0; y=690;if(grMode){ x=240; y=610; }newTextArea('CREDIT', x, y, 480, 32, 24, 'transparent', '#fff');var e=document.getElementById('CREDIT');e.style.fontFamily='serif';e.style.textAlign='center';e.innerHTML=copyright_credit;STATUS_DISP_2('Choose you option of rules before play.');x=390; y=558;if(grMode){x=870; y=502;}putRectangle(x, y, 89, 43, button_color);drawText('Start', x+40, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(14, x, y+1, 89, 42, '#');makeClickable(14, x, y, 60, 1, '-');x-=90;putRectangle(x, y, 89, 43, button_color);drawText('Menu', x+40, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(10, x, y+1, 89, 40, '*');x=0;putRectangle(x, y, 120, 43, button_color);var s='About';drawText(s, x+60, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(15, x, y+1, 120, 43, '0');x=0; y=690;if(grMode){ x=240; y=610; }newTextArea('CREDIT', x, y, 480, 32, 24, 'transparent', '#fff');var e=document.getElementById('CREDIT');e.style.fontFamily='serif';e.style.textAlign='center';e.innerHTML=en_copyright_credit;inputKey=-1;timeout_hnd=setTimeout('SEL_GM_RULES_EN_KEY(); ', 10);}function SEL_GM_RULES_EN_KEY(){if(timeout_hnd) clearTimeout(timeout_hnd);var x=6, y=6, i;i=Math.random();if(inputKey==1){if(++rule.gm_gamehands_en>1) rule.gm_gamehands_en=0;inputKey=-1;timeout_hnd=setTimeout('SEL_GM_RULES_EN_1(); ', 10);return;}if(inputKey==2){if(++rule.gm_flowerTiles_en>1) rule.gm_flowerTiles_en=0;inputKey=-1;timeout_hnd=setTimeout('SEL_GM_RULES_EN_1(); ', 10);return;}if(inputKey==15){inputKey=-1;timeout_hnd=setTimeout('EN_GM_EXP(); ', 10);return;}if(inputKey<0){timeout_hnd=setTimeout('SEL_GM_RULES_EN_KEY(); ', 10);return;}try {rule_storage.setItem('GAME_TINY_MAHJONG_GM_GAMEHANDS_EN', rule.gm_gamehands_en);rule_storage.setItem('GAME_TINY_MAHJONG_GM_FLOWER_TILES_EN', rule.gm_flowerTiles_en);}catch(e){ ; }if(inputKey==14){timeout_hnd=setTimeout('BANZHUANG_START(); ', 10);return;}timeout_hnd=setTimeout('EN_MAIN_START(); ', 10);}function EN_RIICHI_EXP(){if(timeout_hnd) clearTimeout(timeout_hnd);var x, y, w, h;initCanvas(bg_color);if(!grMode){putRectangleAbs(-1, 0, -1, 719, bg_color);putRectangleAbs(-1, 520, -1, 521, menu_border);putRectangleAbs(-1, 522, -1, 555, menu_bgcolor);}else {putRectangleAbs(-1, 0, -1, 640, bg_color);putRectangleAbs(-1, 470, -1, 471, menu_border);putRectangleAbs(-1, 472, -1, 500, menu_bgcolor);}x=6; y=6; w=452; h=490;if(grMode){w=948; h=440;}newTextArea('EXPLANATION', x, y, w, h, 24, '#000', '#fff');e=document.getElementById('EXPLANATION');e.style.fontFamily='serif';e.style.overflow='auto';e.style.lineHeight='1.5em';e.style.padding=Math.floor(8*rRatio)+'px '+Math.floor(8*rRatio)+'px '+Math.floor(16*rRatio)+'px';e.innerHTML='<h1 id="TOP_AP" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0 0 1em; text-align: center; ">About <i xml:lang="ja-latn" lang="ja-latn">Riichi</i> Mahjong</h1>'+'<p><dfn><i xml:lang="ja-latn" lang="ja-latn">Riichi</i> Mahjong</dfn> is based on Japanese mahjong rules.</p>'+'<h2 style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0.7em 0 0; ">How to Play.</h2>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>When you play this game on your <em style="font-style: normal; color: #ff0; font-weight: bold" >portrait position</em> device, part of your hand is enlarged in the bottom of the screen.<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>The right half is usually displayed, so if you wish to tap/click any tile in the left half, tap/click <samp style="background: rgb(198, 222, 180); color: #000; margin: 0 0.2em; padding: 0.1em; white-space: nowrap; ">Left</samp> button, or swipe to the left or the right.</li>'+'<li>Also, you can click/tap any tile of whole of your hand displayed above the enlarged hand, when your device is so large than you can click/tap tiles of them.</li>'+'</ul></li>'+'<li>When you play with your <em style="font-style: normal; color: #ff0; font-weight: bold" >landscape position</em> device, all tiles of your hand are enlarged in the bottom of the screen and you can click/tap them to choose.</li>'+'<li>If you wish to ignore other\'s discard, that is, if you don\'t win on the discarded tile, nor make kong/<wbr />pung/<wbr />chow, click/tap <samp style="background: rgb(198, 222, 180); color: #000; margin: 0 0.2em; padding: 0.1em; white-space: nowrap; ">Next</samp> button.</li>'+'</ul>'+'<h2 style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0.7em 0 0; ">Differences from <cite><i>Riichi</i> Competition Rules</cite>, European Official Rules..</h2>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>No extra <i>yakuman</i>s are awarded even for <b>Big Four Winds</b>.</li>'+'<li><b>Blessing of Man</b> is winning on the first discard by another player than East and is rewarded <i>baiman</i> payment.</li>'+'<li><b>Blessing of Earth</b> is not only winning on self-draw in the very first un-interrupted set of turns, but is also <strong>winning on <em>the first discard</em> of the hand</strong>.</li>'+'</ul>';x=390; y=558;if(grMode){x=870; y=502;}putRectangle(x, y, 89, 43, button_color);drawText('Start', x+40, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(14, x, y+1, 89, 42, '#');makeClickable(14, x, y, 60, 1, '-');x-=90;putRectangle(x, y, 89, 43, button_color);drawText('Menu', x+40, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(10, x, y+1, 89, 40, '*');x=0;putRectangle(x, y, 120, 43, button_color);var s='Options';drawText(s, x+60, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(15, x, y+1, 120, 43, '0');x=0; y=690;if(grMode){ x=240; y=610; }newTextArea('CREDIT', x, y, 480, 32, 24, 'transparent', '#fff');var e=document.getElementById('CREDIT');e.style.fontFamily='serif';e.style.textAlign='center';e.innerHTML=en_copyright_credit;STATUS_DISP_2('Before play, please confirm described above.');inputKey=-1;timeout_hnd=setTimeout('EN_RIICHI_EXP_KEY(); ', 10);}function EN_RIICHI_EXP_KEY(){if(timeout_hnd) clearTimeout(timeout_hnd);i=Math.random();if(inputKey==14){inputKey=-1;timeout_hnd=setTimeout('SEL_RIICHI_RULES_EN(); ', 10);return;}else if(inputKey==10){timeout_hnd=setTimeout('EN_MAIN_START(); ', 10);return;}else if(inputKey==15){timeout_hnd=setTimeout('SEL_RIICHI_RULES_EN(); ', 10);return;}else if(inputKey==20){timeout_hnd=setTimeout('MAIN_START(); ', 10);return;}inputKey=-1;timeout_hnd=setTimeout('EN_RIICHI_EXP_KEY(); ', 10);}function drawText2(txt, x, y, w, h, bold, fontSize, lineHeight, bgColor, fgColor, alignment){var x2=x;if(grMode) x2=x-(dWidthP >> 1)+(dWidthL >> 1);if(bgColor!=null){if(alignment.toLowerCase()=='center') x2-=w / 2;else if(alignment.toLowerCase()=='right') x2-=w;canvasContext.fillStyle=bgColor;canvasContext.fillRect(Math.floor(x2*rRatio)+xOffset, Math.floor(y*rRatio)+yOffset, Math.floor(w*rRatio), Math.floor(h*rRatio));}if(fgColor!=null) canvasContext.fillStyle=fgColor;var i='normal normal 1em/1em';if(fontSize!=null && fontSize>0){i='normal normal ';if(bold) i='normal bold ';i+=Math.floor(fontSize*rRatio)+'px';if(lineHeight!=null && lineHeight>0) i+='/'+Math.floor(lineHeight*rRatio)+'px';}if(lang=='') canvasContext.font=i+' monospace';else canvasContext.font=i+' sans-serif';if(alignment=='') canvasContext.textAlign='left';else canvasContext.textAlign=alignment;canvasContext.textBaseline='top';canvasContext.fillText(txt,Math.floor(x2*rRatio)+xOffset,Math.floor(y*rRatio)+yOffset);}function SEL_RIICHI_RULES_EN(){if(timeout_hnd) clearTimeout(timeout_hnd);var x=6, y=6, i, s, t, y1, j, x1;rule.kuitan_en=0;rule.redFive_en=0;try {rule.kuitan_en=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_RM_KUITAN_EN')) || 0;rule.redFive_en=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_RM_REDFIVE_EN')) || 0;rule.swapCalling_en=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_RM_SWAPCALLING_EN')) || 0;}catch(e){ ; }timeout_hnd=setTimeout('SEL_RIICHI_RULES_EN_1(); ', 10);}function SEL_RIICHI_RULES_EN_1(){if(timeout_hnd) clearTimeout(timeout_hnd);var x=6, y=6, i, s, s1, s2, t, y1, j;initCanvas(bg_color);if(!grMode){putRectangleAbs(-1, 0, -1, 719, bg_color);putRectangleAbs(-1, 520, -1, 521, menu_border);putRectangleAbs(-1, 522, -1, 555, menu_bgcolor);}else {putRectangleAbs(-1, 0, -1, 640, bg_color);putRectangleAbs(-1, 470, -1, 471, menu_border);putRectangleAbs(-1, 472, -1, 500, menu_bgcolor);}x=22; y=6; w=436;var x1=240;if(grMode){x=42; x1=480; w=876;putRectangle(6, 6, 948, 463, '#000');}else {putRectangle(6, 6, 468, 514, '#000');}t='';drawTextMincho(gmode_name+'Optional Rules of Riichi Mahjong.', x1, y+16, 48, 24, true, 24, 24, null, '#ff0', 'center');y1=y+66;s=grMode ? '' : '[1] ';drawTextMincho(s+'All Simples on an Open Hand:', x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s1='Not awarded for an open hand.';s2='';if(rule.kuitan_en==1){s1='Awarded, but NOT a yaku:';s2='Other yaku required to win.';if(grMode){s1='Awarded, but NOT a yaku: Other yaku required to win.';s2='';}}else if(rule.kuitan_en){s1='Awarded even for an open hand.';s2='';}y1+=32;if(grMode){drawTextMincho(s1, x+48, y1, w, 24, true, 24, 24, null, '#fff', 'left');makeClickable(1, x, y1, w, 40, '1');}else {drawTextMincho(s1, x+48, y1, w, 24, true, 24, 24, null, '#fff', 'left');drawTextMincho(s2, x+48, y1+32, w, 24, true, 24, 24, null, '#fff', 'left');makeClickable(1, x+48, y1, w-48, 72, '1');y1+=32;}y1+=48;s=grMode ? '' : '[2] ';drawTextMincho(s+'Red Five Tiles:', x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s='Three red five tiles used.';if(rule.redFive_en){s='No red five times used.';}y1+=32;drawTextMincho(s, x+48, y1, w, 24, true, 24, 24, null, '#fff', 'left');makeClickable(2, x, y1, w, 40, '2');y1+=48;s=grMode ? '' : '[3] ';drawTextMincho(s+'Swap Calling (Kuikae):', x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s='Allowed.';if(rule.swapCalling_en){s='Disallowed.';}y1+=32;drawTextMincho(s, x+48, y1, w, 24, true, 24, 24, null, '#fff', 'left');makeClickable(3, x, y1, w, 40, '3');y1+=64;drawTextMincho('*Tap/Click the option to change.', x, y1, 276, 24, false, 24, 24, null, '#fff', 'left');x=0; y=690;if(grMode){ x=240; y=610; }newTextArea('CREDIT', x, y, 480, 32, 24, 'transparent', '#fff');var e=document.getElementById('CREDIT');e.style.fontFamily='serif';e.style.textAlign='center';e.innerHTML=copyright_credit;STATUS_DISP_2('Choose you option of rules before play.');x=390; y=558;if(grMode){x=870; y=502;}putRectangle(x, y, 89, 43, button_color);drawText('Start', x+40, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(14, x, y+1, 89, 42, '#');makeClickable(14, x, y, 60, 1, '-');x-=90;putRectangle(x, y, 89, 43, button_color);drawText('Menu', x+40, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(10, x, y+1, 89, 40, '*');x=0;putRectangle(x, y, 120, 43, button_color);var s='About';drawText(s, x+60, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(15, x, y+1, 120, 43, '0');x=0; y=690;if(grMode){ x=240; y=610; }newTextArea('CREDIT', x, y, 480, 32, 24, 'transparent', '#fff');var e=document.getElementById('CREDIT');e.style.fontFamily='serif';e.style.textAlign='center';e.innerHTML=en_copyright_credit;inputKey=-1;timeout_hnd=setTimeout('SEL_RIICHI_RULES_EN_KEY(); ', 10);}function SEL_RIICHI_RULES_EN_KEY(){if(timeout_hnd) clearTimeout(timeout_hnd);var x=6, y=6, i;i=Math.random();if(inputKey==1){if(++rule.kuitan_en>2) rule.kuitan_en=0;inputKey=-1;timeout_hnd=setTimeout('SEL_RIICHI_RULES_EN_1(); ', 10);return;}if(inputKey==2){if(++rule.redFive_en>1) rule.redFive_en=0;inputKey=-1;timeout_hnd=setTimeout('SEL_RIICHI_RULES_EN_1(); ', 10);return;}if(inputKey==3){if(++rule.swapCalling_en>1) rule.swapCalling_en=0;inputKey=-1;timeout_hnd=setTimeout('SEL_RIICHI_RULES_EN_1(); ', 10);return;}if(inputKey==15){inputKey=-1;timeout_hnd=setTimeout('EN_RIICHI_EXP(); ', 10);return;}if(inputKey<0){timeout_hnd=setTimeout('SEL_RIICHI_RULES_EN_KEY(); ', 10);return;}try {rule_storage.setItem('GAME_TINY_MAHJONG_RM_KUITAN_EN', rule.kuitan_en);rule_storage.setItem('GAME_TINY_MAHJONG_RM_REDFIVE_EN', rule.redFive_en);rule_storage.setItem('GAME_TINY_MAHJONG_RM_SWAPCALLING_EN', rule.swapCalling_en);}catch(e){ ; }if(inputKey==14){timeout_hnd=setTimeout('BANZHUANG_START(); ', 10);return;}timeout_hnd=setTimeout('EN_MAIN_START(); ', 10);}function MAIN_START(){if(timeout_hnd) clearTimeout(timeout_hnd);var x, y, i, w, xx;AUDIO_INIT();setMenuItem('MENU_RESTART', -8, 3.6, '菜単に戻る', '', 1);lang='';SHOW_AUDIOMODE();document.cookie='data1=123; path=/; ';try {rule_storage=localStorage;dark_mode=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_UI_DARKMODE')) || 0;}catch(e){ ; }rule.zhuangfeng=-1;mo8pinghe=0;players=4;scre[0]=scre[1]=scre[2]=scre[3]=sctt[0]=sctt[1]=sctt[2]=sctt[3]=0;cID=[0, 1, 2, 3];setColors();initCanvas(bg_color);if(!grMode){putRectangleAbs(-1, 0, -1, 719, bg_color);putRectangleAbs(-1, 520, -1, 521, menu_border);putRectangleAbs(-1, 522, -1, 555, menu_bgcolor);}else {putRectangleAbs(-1, 0, -1, 640, bg_color);putRectangleAbs(-1, 470, -1, 471, menu_border);putRectangleAbs(-1, 472, -1, 500, menu_bgcolor);}x=240; y=41;if(grMode){x=480; y=46;}drawTextMincho(title, x, y, 480, 24, true, 24, 24, null, '#fff', 'center');drawTextMincho(title2, x, y+42, 480, 24, false, 20, 20, null, '#fff', 'center');x=0; y=123; i=240; w=196; xx=40;if(grMode){x=0; y=128; i=480; w=256; xx=0;putRectangle(6, 128, 948, 341, '#000');}else {putRectangle(6, 123, 468, 397, '#000');}drawTextMincho('菜　　単', i, y+16, 96, 24, true, 24, 24, null, '#fff', 'canter');y+=76; x=22;if(grMode) x=42;if(!grMode) drawTextMincho('[1]', x, y, 48, 24, true, 24, 24, null, '#fff', 'left');drawTextMincho('リーチ麻雀', x+xx, y, w, 24, true, 24, 24, null, '#fff', 'left');makeClickable(1, x, y, w, 40, '1');y+=45;if(!grMode) drawTextMincho('[2]', x+48, y, 48, 24, true, 24, 24, null, '#fff', 'left');drawTextMincho('説明', x+xx+48, y, 140, 24, true, 24, 24, null, '#fff', 'left');makeClickable(2, x, y, w, 40, '2');y+=45;if(!grMode) drawTextMincho('[3]', x, y, 48, 24, true, 24, 24, null, '#fff', 'left');drawTextMincho('関西式ﾌﾞｰ麻雀', x+xx, y, 172, 24, true, 24, 24, null, '#fff', 'left');makeClickable(3, x, y, w, 40, '3');y+=45;if(!grMode) drawTextMincho('[4]', x, y, 48, 24, true, 24, 24, null, '#fff', 'left');drawTextMincho('アルシァル', x+xx, y, 276, 24, true, 24, 24, null, '#fff', 'left');makeClickable(4, x, y, w, 40, '4');if(grMode){y+=45;drawTextMincho('関東式ﾌﾞｰ麻雀', x+xx, y, 172, 24, true, 24, 24, null, '#fff', 'left');makeClickable(13, x, y, w, 40, '*');}y+=45;if(grMode){ y=204; x=362; }if(!grMode) drawTextMincho('[5]', x, y, 48, 24, true, 24, 24, null, '#fff', 'left');drawTextMincho('台湾麻将', x+xx, y, 172, 24, true, 24, 24, null, '#fff', 'left');makeClickable(5, x, y, w, 40, '5');y+=45;if(!grMode) drawTextMincho('[6]', x, y, 48, 24, true, 24, 24, null, '#fff', 'left');drawTextMincho('中共麻将', x+xx, y, 172, 24, true, 24, 24, null, '#fff', 'left');makeClickable(6, x, y, w, 40, '6');if(!grMode){y+=45;drawTextMincho('[*]', x, y, 48, 24, true, 24, 24, null, '#fff', 'left');drawTextMincho('関東式ﾌﾞｰ麻雀', x+xx, y, 172, 24, true, 24, 24, null, '#fff', 'left');makeClickable(13, x, y, w, 40, '*');}x=242; y=199;if(grMode){ y=204; x=682; }if(!grMode) drawTextMincho('[7]', x, y, 48, 24, true, 24, 24, null, '#fff', 'left');drawTextMincho('三人麻雀', x+xx, y, 276, 24, true, 24, 24, null, '#fff', 'left');makeClickable(7, x, y, w, 40, '7');y+=45;if(!grMode) drawTextMincho('[8]', x, y, 48, 24, true, 24, 24, null, '#fff', 'left');drawTextMincho('三人ﾘｰﾁ麻雀', x+xx, y, 276, 24, true, 24, 24, null, '#fff', 'left');makeClickable(8, x, y, w, 40, '8');y+=45;if(!grMode) drawTextMincho('[9]', x, y, 48, 24, true, 24, 24, null, '#fff', 'left');drawTextMincho('北抜き', x+xx, y, 276, 24, true, 24, 24, null, '#fff', 'left');makeClickable(9, x, y, w, 40, '9');y+=45;if(!grMode) drawTextMincho('[0]', x, y, 48, 24, true, 24, 24, null, '#fff', 'left');drawTextMincho('ポンリー', x+xx, y, 276, 24, true, 24, 24, null, '#fff', 'left');makeClickable(12, x, y, w, 40, '0');x=242; y=469;if(grMode){ x=682; y=409; }if(!grMode) drawTextMincho('[#]', x, y, 48, 24, true, 24, 24, null, '#fff', 'left');drawTextMincho('対局環境設定', x+xx, y, 276, 24, true, 24, 24, null, '#fff', 'left');makeClickable(15, x, y, w, 40, '#');x=0; y=690;if(grMode){ x=240; y=610; }newTextArea('CREDIT', x, y, 480, 32, 24, 'transparent', '#fff');var e=document.getElementById('CREDIT');e.style.fontFamily='serif';e.style.textAlign='center';e.innerHTML=copyright_credit;STATUS_DISP_2('ゲームモードを選んでください。');x=390; y=558;if(grMode){x=870; y=502;}x=0;putRectangle(x, y, 120, 43, button_color);drawText('English', x+60, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(10, x, y+1, 120, 43, '0');str='しらぎくモバイル麻雀について'; url=site_url;y=grMode ? 540 : 619;newTextArea_2('RELATED', 0, y, 480, 48, 24, about_BGcolor, '#fff');var e=document.getElementById('RELATED');e.style.textAlign='center';e.innerHTML='<a style="display: block; margin: 0.5em 0.2em; padding: 0; height: 1em; font-weight: bold; color: #fff; text-decoration: none; vertical-align: top; line-height: 1em;  " href="http:/'+'/'+url+'">'+str+'</a>';inputKey=-1;timeout_hnd=setTimeout('MAIN_START_KEY(); ', 10);}function MAIN_START_KEY(){if(timeout_hnd) clearTimeout(timeout_hnd);i=Math.random();if(inputKey==1){gameMode=GAMEMODE_REACH;timeout_hnd=setTimeout('SEL_REACH(); ', 10);return;}if(inputKey==2){gameMode=GAMEMODE_REACH;timeout_hnd=setTimeout('GAME_EXP(); ', 10);return;}if(inputKey==3){gameMode=GAMEMODE_BOO;timeout_hnd=setTimeout('BOO_EXP(); ', 10);return;}if(inputKey==4){gameMode=GAMEMODE_ARSHIAR;timeout_hnd=setTimeout('AS_EXP(); ', 10);return;}if(inputKey==5){gameMode=GAMEMODE_TAIWAN;timeout_hnd=setTimeout('TM_EXP(); ', 10);return;}if(inputKey==6){gameMode=GAMEMODE_GUOJI;timeout_hnd=setTimeout('GM_EXP(); ', 10);return;}if(inputKey==7){gameMode=GAMEMODE_SAMMA;timeout_hnd=setTimeout('GAME_SAMMA_EXP(); ', 10);return;}if(inputKey==8){gameMode=GAMEMODE_REACH3P;timeout_hnd=setTimeout('GAME_REACH3P_EXP(); ', 10);return;}if(inputKey==9){gameMode=GAMEMODE_BEINUKI;timeout_hnd=setTimeout('GAME_BEINUKI_EXP(); ', 10);return;}if(inputKey==12){gameMode=GAMEMODE_PENGLI;timeout_hnd=setTimeout('GAME_PENGLI_EXP(); ', 10);return;}if(inputKey==13){gameMode=GAMEMODE_EASTERN_BOO;timeout_hnd=setTimeout('GAME_EBOO_EXP(); ', 10);return;}if(inputKey==15){timeout_hnd=setTimeout('SEL_CONFIG(); ', 10);return;}if(inputKey==10){timeout_hnd=setTimeout('EN_MAIN_START(); ', 10);return;}inputKey=-1;timeout_hnd=setTimeout('MAIN_START_KEY(); ', 10);}function SEL_YAKU_RULES(){if(timeout_hnd) clearTimeout(timeout_hnd);var x=6, y=6, i, s, t, y1, w;initCanvas(bg_color);if(!grMode){putRectangleAbs(-1, 0, -1, 719, bg_color);putRectangleAbs(-1, 520, -1, 521, menu_border);putRectangleAbs(-1, 522, -1, 555, menu_bgcolor);}else {putRectangleAbs(-1, 0, -1, 640, bg_color);putRectangleAbs(-1, 470, -1, 471, menu_border);putRectangleAbs(-1, 472, -1, 500, menu_bgcolor);}x=22; y=6; w=436;var x1=240;if(grMode){x=42; x1=480; w=876;putRectangle(6, 6, 948, 463, '#000');}else {putRectangle(6, 6, 468, 514, '#000');}t='';if(SEL_YAKU_RULES_num) t=String.fromCharCode(9311+SEL_YAKU_RULES_num)+' (役)';drawTextMincho(gmode_name+'ルール設定'+t, x1, y+16, 48, 24, true, 24, 24, null, '#ff0', 'center');y1=y+66;if(gameMode==GAMEMODE_PENGLI || gameMode==GAMEMODE_SAMMA || gameMode==GAMEMODE_BEINUKI){s=grMode ? '' : '[0] ';drawTextMincho(s+'両家和', x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s='有り(双方の和了が有効)';if(rule.liangjiahe_sel) s='無し(頭跳ね)';drawTextMincho(s, x+w, y1, w, 24, true, 24, 24, null, '#fff', 'right');makeClickable(0, x, y1, w, 40, '0');y1+=45;}if(gameMode==GAMEMODE_SAMMA){s=grMode ? '' : '[1] ';drawTextMincho(s+'鳴断/先付', x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s='鳴断有り/先付有り';if(rule.kuitan_sakizuke_sel>1) s='鳴断無し/完全先付';else if(rule.kuitan_sakizuke_sel>0) s='鳴断無し/先付有り';drawTextMincho(s, x+w, y1, w, 24, true, 24, 24, null, '#fff', 'right');makeClickable(1, x, y1, w, 40, '1');y1+=45;}if(gameMode!=GAMEMODE_BEINUKI){s=grMode ? '' : '[2] ';drawTextMincho(s+'槓振和', x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s='一翻';if(rule.yaku.gang_buri) s='無し';drawTextMincho(s, x+w, y1, w, 24, true, 24, 24, null, '#fff', 'right');makeClickable(2, x, y1, w, 40, '2');y1+=45;}s=grMode ? '' : '[3] ';if(gameMode!=GAMEMODE_BEINUKI){t=s+'一色三順/一色四順';s='両翻/役満貫';if(rule.yaku.yiseXshun==1) s='両翻/無し';if(rule.yaku.yiseXshun==2) s='双方無し';}else {t=s+'一色四順';s='十二翻';if(rule.yaku.yiseXshun) s='無し';}drawTextMincho(t, x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');drawTextMincho(s, x+w, y1, w, 24, true, 24, 24, null, '#fff', 'right');makeClickable(3, x, y1, w, 40, '3');y1+=45;s=grMode ? '' : '[4] ';if(gameMode!=GAMEMODE_BEINUKI){t=s+'三連刻/四連刻';s='両翻/役満貫';if(rule.yaku.Xlianke==1) s='両翻/無し';if(rule.yaku.Xlianke==2) s='双方無し';}else {t=s+'四連刻';s='十二翻';if(rule.yaku.Xlianke) s='無し';}drawTextMincho(t, x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');drawTextMincho(s, x+w, y1, w, 24, true, 24, 24, null, '#fff', 'right');makeClickable(4, x, y1, w, 40, '4');y1+=45;if(gameMode!=GAMEMODE_PENGLI && gameMode!=GAMEMODE_BEINUKI){s=grMode ? '' : '[5] ';drawTextMincho(s+'十三不搭', x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s='満貫';if(rule.yaku.shisanbuta) s='無し';drawTextMincho(s, x+w, y1, w, 24, true, 24, 24, null, '#fff', 'right');makeClickable(5, x, y1, w, 40, '5');y1+=45;}s=grMode ? '' : '[6] ';drawTextMincho(s+'大車輪', x, y1, 48, 24, true, 24, 24, null, '#ff0', 'left');s='役満貫';if(gameMode==GAMEMODE_BEINUKI) s='十二翻';if(rule.yaku.daisharin) s='　無し';drawTextMincho(s, x+w, y1, w, 24, true, 24, 24, null, '#fff', 'right');makeClickable(6, x, y1, w, 40, '6');y1+=45;s=grMode ? '' : '[7] ';drawTextMincho(s+'紅孔雀', x, y1, 48, 24, true, 24, 24, null, '#ff0', 'left');s='役満貫';if(gameMode==GAMEMODE_BEINUKI) s='十二翻';if(rule.yaku.benikujaku) s='　無し';drawTextMincho(s, x+w, y1, w, 24, true, 24, 24, null, '#fff', 'right');makeClickable(7, x, y1, w, 40, '7');y1+=45;y1+=45;if(!grMode){drawTextMincho('※変更したい項目をタップ/クリックするか、', x, y1, 276, 24, false, 24, 24, null, '#fff', 'left');drawTextMincho('項目に表示されたダイヤルを押して下さい。', x, y1+26, 276, 24, false, 24, 24, null, '#fff', 'left');}else {drawTextMincho('※変更項目をタップ/クリックすると内容が切り替わります。', x, y1, 276, 24, false, 24, 24, null, '#fff', 'left');}x=0; y=690;if(grMode){ x=240; y=610; }newTextArea('CREDIT', x, y, 480, 32, 24, 'transparent', '#fff');var e=document.getElementById('CREDIT');e.style.fontFamily='serif';e.style.textAlign='center';e.innerHTML=copyright_credit;STATUS_DISP_2('ゲーム開始前に、ルールを選択してください。');x=390; y=558;if(grMode){x=870; y=502;}s=grMode ? '開　始' : '[#]開始';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(14, x, y+1, 89, 42, '#');makeClickable(14, x, y, 60, 1, '-');x-=90;s=grMode ? '菜　単' : '[*]菜単';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(10, x, y+1, 89, 40, '*');if(SEL_YAKU_RULES_str_exp!=''){x-=90;s=grMode ? '説　明' : '[8]説明';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(15, x, y+1, 89, 40, '8');}x=0;if(SEL_YAKU_RULES_str_prev){s=grMode ? 'ルール'+String.fromCharCode(9310+SEL_YAKU_RULES_num) : '[9]ﾙｰﾙ'+String.fromCharCode(9310+SEL_YAKU_RULES_num);putRectangle(x, y, 102, 43, button_color);drawText(s, x+51, y+9, 84, 24, false, 24, 24, null, button_text, 'center');makeClickable(8, x, y+1, 102, 40, '9');}inputKey=-1;timeout_hnd=setTimeout('SEL_YAKU_RULES_KEY(); ', 10);}function SEL_YAKU_RULES_KEY(){if(timeout_hnd) clearTimeout(timeout_hnd);var x=6, y=6, i;i=Math.random();if(gameMode==GAMEMODE_PENGLI || gameMode==GAMEMODE_SAMMA || gameMode==GAMEMODE_BEINUKI){if(inputKey==0){rule.liangjiahe_sel=rule.liangjiahe_sel ? 0 : 1;inputKey=-1;timeout_hnd=setTimeout('SEL_YAKU_RULES(); ', 10);return;}if(inputKey==1){if(++rule.kuitan_sakizuke_sel>2) rule.kuitan_sakizuke_sel=0;inputKey=-1;timeout_hnd=setTimeout('SEL_YAKU_RULES(); ', 10);return;}}if(inputKey==2){rule.yaku.gang_buri=rule.yaku.gang_buri ? 0 : 1;inputKey=-1;timeout_hnd=setTimeout('SEL_YAKU_RULES(); ', 10);return;}if(inputKey==3){if(gameMode!=GAMEMODE_BEINUKI){if(++rule.yaku.yiseXshun>2) rule.yaku.yiseXshun=0;}else {rule.yaku.yiseXshun=rule.yaku.yiseXshun ? 0 : 2;}inputKey=-1;timeout_hnd=setTimeout('SEL_YAKU_RULES(); ', 10);return;}if(inputKey==4){if(gameMode!=GAMEMODE_BEINUKI){if(++rule.yaku.Xlianke>2) rule.yaku.Xlianke=0;}else {rule.yaku.Xlianke=rule.yaku.Xlianke ? 0 : 2;}inputKey=-1;timeout_hnd=setTimeout('SEL_YAKU_RULES(); ', 10);return;}if(inputKey==5){rule.yaku.shisanbuta=rule.yaku.shisanbuta ? 0 : 1;inputKey=-1;timeout_hnd=setTimeout('SEL_YAKU_RULES(); ', 10);return;}if(inputKey==6){rule.yaku.daisharin=rule.yaku.daisharin ? 0 : 1;inputKey=-1;timeout_hnd=setTimeout('SEL_YAKU_RULES(); ', 10);return;}if(inputKey==7){rule.yaku.benikujaku=rule.yaku.benikujaku ? 0 : 1;inputKey=-1;timeout_hnd=setTimeout('SEL_YAKU_RULES(); ', 10);return;}if(inputKey<0){timeout_hnd=setTimeout('SEL_YAKU_RULES_KEY(); ', 10);return;}try {if(gameMode==GAMEMODE_PENGLI || gameMode==GAMEMODE_SAMMA || gameMode==GAMEMODE_BEINUKI){rule_storage.setItem('GAME_TINY_MAHJONG_SEL_LIANGJIAHE', rule.liangjiahe_sel);rule_storage.setItem('GAME_TINY_MAHJONG_SEL_KUITAN', rule.kuitan_sakizuke_sel);}rule_storage.setItem('GAME_TINY_MAHJONG_YAKU_YISEXSHUN', rule.yaku.yiseXshun);rule_storage.setItem('GAME_TINY_MAHJONG_YAKU_XLIANKE', rule.yaku.Xlianke);rule_storage.setItem('GAME_TINY_MAHJONG_YAKU_DAISHARIN', rule.yaku.daisharin);rule_storage.setItem('GAME_TINY_MAHJONG_YAKU_SHISANBUTA', rule.yaku.shisanbuta);rule_storage.setItem('GAME_TINY_MAHJONG_YAKU_GANG_BURI', rule.yaku.gang_buri);rule_storage.setItem('GAME_TINY_MAHJONG_YAKU_BENIKUJAKU', rule.yaku.benikujaku);}catch(e){ ; }if(inputKey==14){timeout_hnd=setTimeout('BANZHUANG_START(); ', 10);return;}if(inputKey==10){timeout_hnd=setTimeout('MAIN_START(); ', 10);return;}if(inputKey==8 && SEL_YAKU_RULES_str_prev!=''){timeout_hnd=setTimeout(SEL_YAKU_RULES_str_prev+'(); ', 10);return;}if(inputKey==15){timeout_hnd=setTimeout(SEL_YAKU_RULES_str_exp+'(); ', 10);return;}inputKey=-1;timeout_hnd=setTimeout('SEL_YAKU_RULES_KEY(); ', 10);}function SEL_SPECIAL_RULES(){if(timeout_hnd) clearTimeout(timeout_hnd);var x=6, y=6, i, s, t, y1, j, x1;initCanvas(bg_color);if(!grMode){putRectangleAbs(-1, 0, -1, 719, bg_color);putRectangleAbs(-1, 520, -1, 521, menu_border);putRectangleAbs(-1, 522, -1, 555, menu_bgcolor);}else {putRectangleAbs(-1, 0, -1, 640, bg_color);putRectangleAbs(-1, 470, -1, 471, menu_border);putRectangleAbs(-1, 472, -1, 500, menu_bgcolor);}x=22; y=6; w=436;var x1=240;if(grMode){x=42; x1=480; w=876;putRectangle(6, 6, 948, 463, '#000');}else {putRectangle(6, 6, 468, 514, '#000');}t='';if(SEL_YAKU_RULES_num) t=String.fromCharCode(9311+SEL_YAKU_RULES_num)+' (特殊)';drawTextMincho(gmode_name+'ルール設定'+t, x1, y+16, 48, 24, true, 24, 24, null, '#ff0', 'center');y1=y+66;if(gameMode!=GAMEMODE_SAMMA && gameMode!=GAMEMODE_BEINUKI){s=grMode ? '' : '[1] ';drawTextMincho(s+'青天井ルール', x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s='無し(通常の満貫制・箱割終了有り)';t='※零点では続行(マイナス点で終了)';if(rule.dobon_sel){s='無し(通常の満貫制)';t='';}if(rule.aotenjyo==1){s='青天井ルール(箱割終了無し)';if(rule.dobon_sel) s='青天井ルール';t='※荘家150億点、散家100億点まで';}else if(rule.aotenjyo==2){s='準青天井ルール(箱割終了無し)';if(rule.dobon_sel) s='準青天井ルール';t='※三倍満以降二翻毎に満貫増し';}i=40; if(grMode) i=0;drawTextMincho(s, x+w, y1+i, w, 24, true, 24, 24, null, '#fff', 'right');drawTextMincho(t, x+w, y1+i+30, w, 24, true, 24, 24, null, '#fff', 'right');makeClickable(1, x, y1, w, 80+i, '1');y1+=85+i;}s=grMode ? '' : '[2] ';drawTextMincho(s+'焼鳥/焼豚', x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s='双方無し';if(rule.yakitori==1){s='30Ｐ/無し';}else if(rule.yakitori==2){s='双方30Ｐ';}drawTextMincho(s, x+w, y1, w, 24, true, 24, 24, null, '#fff', 'right');makeClickable(2, x, y1, w, 40, '2');y1+=45;s=grMode ? '' : '[3] ';drawTextMincho(s+'ご祝儀', x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s='一発・裏ドラ・槓でチップ一枚';t='役満貫はチップ二十枚';if(gameMode==GAMEMODE_BEINUKI){s='一発・裏ドラ・抜きドラ・槓で一枚';t='役満貫は二十枚';}else if(gameMode==GAMEMODE_REACH && rule.akapai_init<2){s='一発・裏ドラ・赤牌・槓でチップ一枚';}if(!rule.goshugi) s='一切無し', t='';i=40; if(grMode) i=0;drawTextMincho(s, x+w, y1+i, w, 24, true, 24, 24, null, '#fff', 'right');drawTextMincho(t, x+w, y1+i+30, w, 24, true, 24, 24, null, '#fff', 'right');makeClickable(3, x+16, y1, w, 85+i, '3');y1+=85+i;if(!grMode){drawTextMincho('※変更したい項目をタップ/クリックするか、', x, y1, 276, 24, false, 24, 24, null, '#fff', 'left');drawTextMincho('項目に表示されたダイヤルを押して下さい。', x, y1+26, 276, 24, false, 24, 24, null, '#fff', 'left');}else {drawTextMincho('※変更項目をタップ/クリックすると内容が切り替わります。', x, y1, 276, 24, false, 24, 24, null, '#fff', 'left');}x=0; y=690;if(grMode){ x=240; y=610; }newTextArea('CREDIT', x, y, 480, 32, 24, 'transparent', '#fff');var e=document.getElementById('CREDIT');e.style.fontFamily='serif';e.style.textAlign='center';e.innerHTML=copyright_credit;STATUS_DISP_2('ゲーム開始前に、ルールを選択してください。');x=390; y=558;if(grMode){x=870; y=502;}s=grMode ? '開　始' : '[#]開始';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(14, x, y+1, 89, 42, '#');makeClickable(14, x, y, 60, 1, '-');x-=90;s=grMode ? '菜　単' : '[*]菜単';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(10, x, y+1, 89, 40, '*');if(SEL_YAKU_RULES_str_exp!=''){x-=90;s=grMode ? '説　明' : '[7]説明';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(7, x, y+1, 89, 40, '7');}x=0;if(SEL_YAKU_RULES_str_prev){s=grMode ? 'ルール'+String.fromCharCode(9310+SEL_YAKU_RULES_num) : '[8]ﾙｰﾙ'+String.fromCharCode(9310+SEL_YAKU_RULES_num);putRectangle(x, y, 102, 43, button_color);drawText(s, x+51, y+9, 84, 24, false, 24, 24, null, button_text, 'center');makeClickable(8, x, y+1, 102, 40, '8');}x=104;if(SEL_YAKU_RULES_str_next){s=grMode ? 'ルール'+String.fromCharCode(9312+SEL_YAKU_RULES_num) : '[9]ﾙｰﾙ'+String.fromCharCode(9312+SEL_YAKU_RULES_num);putRectangle(x, y, 102, 43, button_color);drawText(s, x+51, y+9, 84, 24, false, 24, 24, null, button_text, 'center');makeClickable(9, x, y+1, 102, 40, '9');}inputKey=-1;timeout_hnd=setTimeout('SEL_SPECIAL_RULE_KEY(); ', 10);}function SEL_SPECIAL_RULE_KEY(){if(timeout_hnd) clearTimeout(timeout_hnd);var x=6, y=6, i;i=Math.random();if(inputKey==0){rule.yaku.gang_buri=rule.yaku.gang_buri ? 0 : 1;inputKey=-1;timeout_hnd=setTimeout('SEL_SPECIAL_RULES(); ', 10);return;}if(inputKey==1){if(++rule.aotenjyo>2) rule.aotenjyo=0;inputKey=-1;timeout_hnd=setTimeout('SEL_SPECIAL_RULES(); ', 10);return;}if(inputKey==2){if(++rule.yakitori>2) rule.yakitori=0;inputKey=-1;timeout_hnd=setTimeout('SEL_SPECIAL_RULES(); ', 10);return;}if(inputKey==3){rule.goshugi=rule.goshugi ? 0 : 1;inputKey=-1;timeout_hnd=setTimeout('SEL_SPECIAL_RULES(); ', 10);return;}if(inputKey<0){timeout_hnd=setTimeout('SEL_SPECIAL_RULE_KEY(); ', 10);return;}try {if(gameMode!=GAMEMODE_SAMMA && gameMode!=GAMEMODE_BEINUKI){rule_storage.setItem('GAME_TINY_MAHJONG_RM_AOTENJYO', rule.aotenjyo);}rule_storage.setItem('GAME_TINY_MAHJONG_YAKITORI', rule.yakitori);rule_storage.setItem('GAME_TINY_MAHJONG_GOSHUGI', rule.goshugi);}catch(e){ ; }if(inputKey==14){timeout_hnd=setTimeout('BANZHUANG_START(); ', 10);return;}if(inputKey==10){timeout_hnd=setTimeout('MAIN_START(); ', 10);return;}if(inputKey==9 && SEL_YAKU_RULES_str_prev!=''){timeout_hnd=setTimeout(SEL_YAKU_RULES_str_next+'(); ', 10);return;}if(inputKey==8 && SEL_YAKU_RULES_str_next!=''){timeout_hnd=setTimeout(SEL_YAKU_RULES_str_prev+'(); ', 10);return;}if(inputKey==7 && SEL_YAKU_RULES_str_exp!=''){timeout_hnd=setTimeout(SEL_YAKU_RULES_str_exp+'(); ', 10);return;}inputKey=-1;timeout_hnd=setTimeout('SEL_SPECIAL_RULE_KEY(); ', 10);}function GAME_EXP(){if(timeout_hnd) clearTimeout(timeout_hnd);initCanvas(bg_color);if(!grMode){putRectangleAbs(-1, 0, -1, 719, bg_color);putRectangleAbs(-1, 520, -1, 521, menu_border);putRectangleAbs(-1, 522, -1, 555, menu_bgcolor);}else {putRectangleAbs(-1, 0, -1, 640, bg_color);putRectangleAbs(-1, 470, -1, 471, menu_border);putRectangleAbs(-1, 472, -1, 500, menu_bgcolor);}x=6; y=6; w=452; h=490;if(grMode){w=948; h=440;}newTextArea('EXPLANATION', x, y, w, h, 24, '#000', '#fff');e=document.getElementById('EXPLANATION');e.style.fontFamily='serif';e.style.overflow='auto';e.style.lineHeight='1.5em';e.style.padding=Math.floor(8*rRatio)+'px '+Math.floor(8*rRatio)+'px '+Math.floor(16*rRatio)+'px';e.innerHTML='<h1 id="TOP_AP" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0 0 1em; text-align: center; ">リーチ麻雀について</h1>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li><a style="color: #ff0; " href="#HOW_TO_OP">操作方法</a></li>'+'<li><a style="color: #ff0; " href="#RULES_DETAILS">ルール細則</a></li>'+'<li><a style="color: #ff0; " href="#YAKU_DETAILS">役細則</a></li>'+'<li><a style="color: #ff0; " href="#SPECIAL_RULES">特殊ルール</a><ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li><a style="color: #ff0; " href="#AOTENJYO">青天井ルール</a></li>'+'<li><a style="color: #ff0; " href="#SEMI_AOTENJYO">準青天井ルール</a></li>'+'</ul><hr style="display: block; color: #ccc; background: #ccc; border: 1px solid; margin: 1em 0; padding: 0; " />'+'<h2 id="HOW_TO_OP" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0.7em 0 0; ">操作方法</h2>'+'<nav style="display: block; margin: 0 0 0.5em; font-size: 80%; padding: 0 0 0 1em; "><a style="color: #ff0; " href="#TOP_AP">▲先頭</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#RULES_DETAILS">▽次節</a></nav>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>画面の下に、手牌が拡大されて表示されます。<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li><span style="color: #ff0; ">端末を縦向きでご利用の場合</span>、通常は右側を表\示しますので、左側の牌を指定したい場合は、<samp style="background: rgb(198, 222, 180); color: #000; margin: 0 0.2em; padding: 0.1em; white-space: nowrap; ">左側</samp>をタップ/クリックしてください。<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>左右どちらかにスワイプする事でも手牌の左右表示切替が出来ます。</li>'+'<li>大画面の端末では、拡大されていない手牌をタップ/クリックする事も出来ます。</li>'+'</ul></li>'+'<li><span style="color: #ff0; ">端末を横向きでご利用の場合</span>は、手牌全てが拡大されて表示されますので、その中から選択したい牌をタップ/クリックしてください。</li>'+'</ul></li>'+'<li>他者の打牌に対し、何もせず先に進める場合は<samp style="background: rgb(198, 222, 180); color: #000; margin: 0 0.2em; padding: 0.1em; white-space: nowrap; ">進行</samp>をタップ/クリックします。</li>'+'</ul>'+'<h2 id="RULES_DETAILS" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0.7em 0 0; ">ルール細則</h2>'+'<nav style="display: block; margin: 0 0 0.5em; font-size: 80%; padding: 0 0 0 1em; "><a style="color: #ff0; " href="#TOP_AP">▲先頭</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#HOW_TO_OP">△前節</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#SPECIAL_RULES">▽次節</a></nav>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>一翻縛り。但し五本場から両翻縛り。</li>'+'<li>喰断, 先付及び形式聴牌は以下から選択：<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>喰断, 先付, 形式聴牌とも有り。</li>'+'<li>喰断無し、先付, 形式聴牌有り。</li>'+'<li>喰断無しの完全先付で門前でない形式聴牌・片和了聴牌は無効。</li>'+'</ul></li>'+'<li>最終局での荘家和了終了の有無はゲーム前に選択可。</li>'+'<li>持点が零点未満で半荘打切の有無はゲーム前に選択可。<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  "><li>但し<a style="color: #ff0; " href="#AOTENJYO">青天井ルール</a>を採用している場合は常に無しとする。</li><li>有りとした場合、持点が千点未満では立直出来ない。</li></ul></li>'+'<li>槓ドラ, 裏ドラ及び一発有り。槓裏ドラの有無はゲーム前に選択可。</li>'+'<li>赤五牌(固定ドラ)の有無はゲーム前に選択可。</li>'+'<li>現物・筋の喰直しは不可。</li>'+'<li>両家和の扱いはゲーム前に選択可。<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  "><li>有りとした場合、和了者の立直料は和了者が取り、それ以外の供託点は上家取り。</li><li>三家和は平局とする。</li></ul></li>'+'<li>振聴立直有り。自分の次の摸牌が残っていない場合の立直は不可。</li>'+'<li>立直後の暗槓は孤立した暗刻の四枚目を摸牌した場合のみ可能。</li>'+'<li>振聴での栄和は原則として禁止。但し国士無双に限り現物以外で栄和可。</li>'+'<li>国士無双に限り暗槓を搶槓出来る。</li>'+'<li>大明槓の嶺上開花は摸和扱いだが、槓させた者の責任払いとする。</li>'+'<li>最終局以外の荒牌は全員不聴の場合を除いて不聴輪荘。最終局では連荘とする。</li>'+'<li>九種&#20040;九倒牌, 四風子連打, 三家和, 四家立直及び四槓算了は平局・連荘とする。</li>'+'</ul>'+'<h2 id="YAKU_DETAILS" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0.7em 0 0; ">役細則</h2>'+'<nav style="display: block; margin: 0 0 0.5em; font-size: 80%; padding: 0 0 0 1em; "><a style="color: #ff0; " href="#TOP_AP">▲先頭</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#RULES_DETAILS">△前節</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#SEMI_AOTENJYO">▽次節</a></nav>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>摸和平和の扱いと七対子の符は<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>摸和平和無し(30符計算)で七対子は30符</li>'+'<li>摸和平和有り(20符計算)で七対子は形式上25符</li>'+'</ul>から選択可。</li>'+'<li>喰い平和形の栄和では10符加算。</li>'+'<li>連風牌の雀頭は 4符とする。</li>'+'<li>三倍満貫は十三翻以上、四倍満貫は十五翻以上で成立。</li>'+'<li>役満貫は四倍満貫。ダブル役満はなし。</li>'+'<li>&#20040;九振切(流し満貫)は他者に打牌を喰われないだけでなく、自らも一切チー, ポン, 槓してはならない。</li>'+'<li>十三不搭は満貫とする。</li>'+'<li>開局一巡内の和了を人和とし、倍満とする。</li>'+'<li>荘家第一打牌での栄和と散家第一摸牌での摸和もいずれも地和とする。</li>'+'<li>緑一色には緑発は不要。</li>'+'<li>九蓮宝燈は和了した形が準じていれば成立する。また、万子でなくても可。</li>'+'<li>連続する七数位の筒子の清一色七対子を大車輪とする。</li>'+'<li>四槓子と言えども、雀頭を完成させないと和了にならない。</li>'+'<li>大三元, 四喜和, 四槓子, 一色四順及び四連刻には包則がある。包牌を打って当該役を完成させて和了に至った場合は、<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>摸和では全額責任払い</li>'+'<li>第三者の放銃は折半払い</li>'+'</ul>となる。</li>'+'</ul>'+'<h2 id="SPECIAL_RULES" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0.7em 0 0; ">特殊ルール</h2>'+'<h3 id="AOTENJYO" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0.7em 0 0; ">青天井ルール</h3>'+'<nav style="display: block; margin: 0 0 0.5em; font-size: 80%; padding: 0 0 0 1em; "><a style="color: #ff0; " href="#TOP_AP">▲先頭</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#YAKU_DETAILS">△前節</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#SEMI_AOTENJYO">▽次節</a></nav>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>青天井ルールでは、荘家 150億点、散家 100億点を上限とする。</li>'+'<li>役満貫は十五翻とする。概念上下位となる役は加算されない。</li>'+'<li>&#20040;九振切(流し満貫)は三十符五翻とする。ドラなど他の翻数は一切加算されない。</li>'+'<li>十三不搭は三十符五翻とする。ドラ以外の翻数は加算されない。</li>'+'<li>国士無双は常に三十符として計算する。</li>'+'<li>青天井ルールを選択した場合、途中で箱割れになっても続行とする。</li>'+'</ul>'+'<h3 id="SEMI_AOTENJYO" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0.7em 0 0; ">準青天井ルール</h3>'+'<nav style="display: block; margin: 0 0 0.5em; font-size: 80%; padding: 0 0 0 1em; "><a style="color: #ff0; " href="#TOP_AP">▲先頭</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#AOTENJYO">△前節</a></nav>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>三倍満貫以降、両翻毎に満貫を加算する。</li>'+'<li>役満貫は十五翻とする。概念上下位となる役は加算されない。</li>'+'<li>&#20040;九振切(流し満貫)は三十符五翻とする。ドラなど他の翻数は一切加算されない。</li>'+'<li>十三不搭は三十符五翻とする。ドラ以外の翻数は加算されない。</li>'+'<li>国士無双は常に三十符として計算する。</li>'+'<li>準青天井ルールを選択した場合、途中で箱割れになっても続行とする。</li>'+'</ul>';x=390; y=558;if(grMode){x=870; y=502;}var s=grMode ? '開　始' : '[#]開始';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(14, x, y+1, 89, 42, '#');makeClickable(14, x, y, 60, 1, '-');x-=90;s=grMode ? '菜　単' : '[*]菜単';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(10, x, y+1, 89, 40, '*');x=0; y=690;if(grMode){ x=240; y=610; }newTextArea('CREDIT', x, y, 480, 32, 24, 'transparent', '#fff');var e=document.getElementById('CREDIT');e.style.fontFamily='serif';e.style.textAlign='center';e.innerHTML=copyright_credit;STATUS_DISP_2('開始前に、上記をお確かめください。');inputKey=-1;timeout_hnd=setTimeout('GAME_EXP_KEY(); ', 10);}function GAME_EXP_KEY(){if(timeout_hnd) clearTimeout(timeout_hnd);i=Math.random();if(inputKey==14){timeout_hnd=setTimeout('SEL_REACH(); ', 10);return;}else if(inputKey==10){timeout_hnd=setTimeout('MAIN_START(); ', 10);return;}inputKey=-1;timeout_hnd=setTimeout('GAME_EXP_KEY(); ', 10);}
