function SEL_REACH(){if(timeout_hnd) clearTimeout(timeout_hnd);scre[0]=scre[1]=scre[2]=scre[3]=sctt[0]=sctt[1]=sctt[2]=sctt[3]=0;qiduizi_fu=mo8pinghe=0;rule.zhuangfeng=-1; rule.uradora_init=1;rule.dobon_sel=0
rule.agariyame_sel=0;rule.liangjiahe_sel=0;rule.aotenjyo=0;rule.yakitori=rule.goshugi=0;rule.yaku.yiseXshun=0;rule.yaku.Xlianke=0;rule.yaku.daisharin=0;rule.yaku.shisanbuta=0;rule.yaku.gang_buri=0;rule.yaku.benikujaku=0;try {qiduizi_fu=mo8pinghe=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_RM_MO8PINGHE')) || 0;rule.zhuangfeng=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_RM_ZHUANGFENG')) || 0;rule.uradora_init=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_RM_URADORA')) || 1;rule.akapai_init=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_RM_AKAPAI')) || 0;rule.dobon_sel=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_SEL_DOBON')) || 0;rule.agariyame_sel=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_SEL_AGARIYAME')) || 0;rule.liangjiahe_sel=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_SEL_LIANGJIAHE')) || 0;rule.kuitan_sakizuke_sel=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_SEL_KUITAN')) || 0;rule.aotenjyo=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_RM_AOTENJYO')) || 0;rule.yakitori=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_YAKITORI')) || 0;rule.goshugi=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_GOSHUGI')) || 0;rule.yaku.yiseXshun=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_YAKU_YISEXSHUN')) || 0;rule.yaku.Xlianke=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_YAKU_XLIANKE')) || 0;rule.yaku.daisharin=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_YAKU_DAISHARIN')) || 0;rule.yaku.shisanbuta=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_YAKU_SHISANBUTA')) || 0;rule.yaku.gang_buri=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_YAKU_GANG_BURI')) || 0;rule.yaku.benikujaku=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_YAKU_BENIKUJAKU')) || 0;}catch(e){ ; }inputKey=-1;timeout_hnd=setTimeout('SEL_REACH1(); ', 10);}function SEL_REACH1(){if(timeout_hnd) clearTimeout(timeout_hnd);var x=6, y=6, i, s, w, y1;initCanvas(bg_color);if(!grMode){putRectangleAbs(-1, 0, -1, 719, bg_color);putRectangleAbs(-1, 520, -1, 521, menu_border);putRectangleAbs(-1, 522, -1, 555, menu_bgcolor);}else {putRectangleAbs(-1, 0, -1, 640, bg_color);putRectangleAbs(-1, 470, -1, 471, menu_border);putRectangleAbs(-1, 472, -1, 500, menu_bgcolor);}x=22; y=6; w=436;var x1=240;if(grMode){x=42; x1=480; w=876;putRectangle(6, 6, 948, 463, '#000');}else {putRectangle(6, 6, 468, 514, '#000');}drawTextMincho('リーチ麻雀ルール設定'+String.fromCharCode(9312)+' (基本)', x1, y+16, 48, 24, true, 24, 24, null, '#ff0', 'center');y1=y+66;s=grMode ? '' : '[0] ';drawTextMincho(s+'荘風廻し', x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s='東風戦(半々荘戦)';if(rule.zhuangfeng==1) s='東-南廻し(半荘戦)';if(rule.zhuangfeng==2) s='東-北廻し(半荘戦)';drawTextMincho(s, x+w, y1, w, 24, true, 24, 24, null, '#fff', 'right');makeClickable(0, x, y1, w, 40, '0');y1+=45;s=grMode ? '' : '[1] ';drawTextMincho(s+'喰断/先付', x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s='喰断有り/先付有り';if(rule.kuitan_sakizuke_sel>1) s='喰断無し/完全先付';else if(rule.kuitan_sakizuke_sel>0) s='喰断無し/先付有り';drawTextMincho(s, x+w, y1, w, 24, true, 24, 24, null, '#fff', 'right');makeClickable(1, x, y1, w, 40, '1');y1+=45;s=grMode ? '' : '[2] ';drawTextMincho(s+'途中での箱割終了', x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s='マイナスで終了';if(rule.dobon_sel) s='無し(続行)';drawTextMincho(s, x+w, y1, w, 24, true, 24, 24, null, '#fff', 'right');makeClickable(2, x, y1, w, 40, '2');y1+=45;s=grMode ? '' : '[3] ';drawTextMincho(s+'最終局荘家の和了終了', x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s='一位で終了';if(rule.agariyame_sel) s='無し(続行)';drawTextMincho(s, x+w, y1, w, 24, true, 24, 24, null, '#fff', 'right');makeClickable(3, x, y1, w, 40, '3');y1+=45;s=grMode ? '' : '[4] ';drawTextMincho(s+'槓裏ドラ', x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s='無し(初ドラのみ)';if(rule.uradora_init==2) s='有り(全ドラ有効)';drawTextMincho(s, x+w, y1, w, 24, true, 24, 24, null, '#fff', 'right');makeClickable(4, x, y1, w, 40, '4');y1+=45;s=grMode ? '' : '[5] ';drawTextMincho(s+'赤牌', x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s='赤五筒二枚ドラ扱い';if(rule.akapai_init==1) s='赤五索/筒/万各一枚ドラ扱い';if(rule.akapai_init==2) s='無し';drawTextMincho(s, x+w, y1, w, 24, true, 24, 24, null, '#fff', 'right');makeClickable(5, x, y1, w, 40, '5');y1+=45;s=grMode ? '' : '[6] ';drawTextMincho(s+'両家和', x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s='有り(双方の和了が有効)';if(rule.liangjiahe_sel) s='無し(頭跳ね)';drawTextMincho(s, x+w, y1, w, 24, true, 24, 24, null, '#fff', 'right');makeClickable(6, x, y1, w, 40, '6');y1+=45;s=grMode ? '' : '[7] ';drawTextMincho(s+'摸和平和・七対子の扱い', x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s='摸和平和無し(30符)/七対子30符';if(mo8pinghe) s='摸和平和有り(20符)/七対子25符';i=0; if(!grMode) i=40;drawTextMincho(s, x+w, y1+i, w, 24, true, 24, 24, null, '#fff', 'right');makeClickable(7, x, y1, w, 40+i, '7');y1+=i+45;if(!grMode){drawTextMincho('※変更したい項目をタップ/クリックするか、', x, y1, 276, 24, false, 24, 24, null, '#fff', 'left');drawTextMincho('項目に表示されたダイヤルを押して下さい。', x, y1+26, 276, 24, false, 24, 24, null, '#fff', 'left');}else {drawTextMincho('※変更項目をタップ/クリックすると内容が切り替わります。', x, y1, 276, 24, false, 24, 24, null, '#fff', 'left');}x=0; y=690;if(grMode){ x=240; y=610; }newTextArea('CREDIT', x, y, 480, 32, 24, 'transparent', '#fff');var e=document.getElementById('CREDIT');e.style.fontFamily='serif';e.style.textAlign='center';e.innerHTML=copyright_credit;STATUS_DISP_2('ゲーム開始前に、ルールを選択してください。');x=390; y=558;if(grMode){x=870; y=502;}var s=grMode ? '開　始' : '[#]開始';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(14, x, y+1, 89, 42, '#');makeClickable(14, x, y, 60, 1, '-');x-=90;s=grMode ? '菜　単' : '[*]菜単';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(10, x, y+1, 89, 40, '*');x=104;s=grMode ? 'ルール'+String.fromCharCode(9313) : '[9]ﾙｰﾙ'+String.fromCharCode(9313);putRectangle(x, y, 102, 43, button_color);drawText(s, x+51, y+9, 84, 24, false, 24, 24, null, button_text, 'center');makeClickable(9, x, y+1, 102, 40, '9');inputKey=-1;timeout_hnd=setTimeout('SEL_REACH_KEY(); ', 10);}function SEL_REACH_KEY(){if(timeout_hnd) clearTimeout(timeout_hnd);var x=6, y=6, i;i=Math.random();if(inputKey==0){if(++rule.zhuangfeng>2) rule.zhuangfeng=-1;else if(rule.zhuangfeng==0) rule.zhuangfeng=1;inputKey=-1;timeout_hnd=setTimeout('SEL_REACH1(); ', 10);return;}if(inputKey==1){if(++rule.kuitan_sakizuke_sel>2) rule.kuitan_sakizuke_sel=0;inputKey=-1;timeout_hnd=setTimeout('SEL_REACH1(); ', 10);return;}if(inputKey==2){rule.dobon_sel=rule.dobon_sel ? 0 : 1;inputKey=-1;timeout_hnd=setTimeout('SEL_REACH1(); ', 10);return;}if(inputKey==3){rule.agariyame_sel=rule.agariyame_sel ? 0 : 1;inputKey=-1;timeout_hnd=setTimeout('SEL_REACH1(); ', 10);return;}if(inputKey==4){if(rule.uradora_init==1) rule.uradora_init=2;else rule.uradora_init=1;inputKey=-1;timeout_hnd=setTimeout('SEL_REACH1(); ', 10);return;}if(inputKey==5){if(++rule.akapai_init>2) rule.akapai_init=0;inputKey=-1;timeout_hnd=setTimeout('SEL_REACH1(); ', 10);return;}if(inputKey==6){rule.liangjiahe_sel=rule.liangjiahe_sel ? 0 : 1;inputKey=-1;timeout_hnd=setTimeout('SEL_REACH1(); ', 10);return;}if(inputKey==7){mo8pinghe=mo8pinghe ? 0 : 1;inputKey=-1;timeout_hnd=setTimeout('SEL_REACH1(); ', 10);return;}if(inputKey<0){timeout_hnd=setTimeout('SEL_REACH_KEY(); ', 10);return;}try {rule_storage.setItem('GAME_TINY_MAHJONG_RM_ZHUANGFENG', rule.zhuangfeng);rule_storage.setItem('GAME_TINY_MAHJONG_SEL_KUITAN', rule.kuitan_sakizuke_sel);rule_storage.setItem('GAME_TINY_MAHJONG_RM_URADORA', rule.uradora_init);rule_storage.setItem('GAME_TINY_MAHJONG_RM_MO8PINGHE', mo8pinghe);rule_storage.setItem('GAME_TINY_MAHJONG_RM_AKAPAI', rule.akapai_init);rule_storage.setItem('GAME_TINY_MAHJONG_SEL_DOBON', rule.dobon_sel);rule_storage.setItem('GAME_TINY_MAHJONG_SEL_AGARIYAME', rule.agariyame_sel);rule_storage.setItem('GAME_TINY_MAHJONG_SEL_LIANGJIAHE', rule.liangjiahe_sel);}catch(e){ ; }if(inputKey==14){timeout_hnd=setTimeout('BANZHUANG_START(); ', 10);return;}if(inputKey==10){timeout_hnd=setTimeout('MAIN_START(); ', 10);return;}if(inputKey==9){timeout_hnd=setTimeout('SEL_REACH_P2(); ', 10);return;}if(inputKey==7){timeout_hnd=setTimeout('GAME_EXP(); ', 10);return;}inputKey=-1;timeout_hnd=setTimeout('SEL_REACH_KEY(); ', 10);}function SEL_REACH_P2(){if(timeout_hnd) clearTimeout(timeout_hnd);gmode_name='リーチ麻雀';SEL_YAKU_RULES_str_exp='GAME_EXP';SEL_YAKU_RULES_str_prev='SEL_REACH';SEL_YAKU_RULES_str_next='SEL_REACH_P3';SEL_YAKU_RULES_num=2;inputKey=-1;timeout_hnd=setTimeout('SEL_SPECIAL_RULES(); ', 10);}function SEL_REACH_P3(){if(timeout_hnd) clearTimeout(timeout_hnd);inputKey=-1;gmode_name='リーチ麻雀';SEL_YAKU_RULES_str_exp='GAME_EXP';SEL_YAKU_RULES_str_prev='SEL_REACH_P2';SEL_YAKU_RULES_str_next='';SEL_YAKU_RULES_num=3;timeout_hnd=setTimeout('SEL_YAKU_RULES(); ', 10);}function TM_EXP(){if(timeout_hnd) clearTimeout(timeout_hnd);rule.tw_gamehands=0;try {rule.tw_gamehands=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_TW_GAMEHANDS')) || 0;rule.tw_hanapai=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_TW_HANAPAI')) || 0;}catch(e){ ; }initCanvas(bg_color);if(!grMode){putRectangleAbs(-1, 0, -1, 719, bg_color);putRectangleAbs(-1, 520, -1, 521, menu_border);putRectangleAbs(-1, 522, -1, 555, menu_bgcolor);}else {putRectangleAbs(-1, 0, -1, 640, bg_color);putRectangleAbs(-1, 470, -1, 471, menu_border);putRectangleAbs(-1, 472, -1, 500, menu_bgcolor);}x=6; y=6; w=452; h=490;if(grMode){w=948; h=440;}newTextArea('EXPLANATION', x, y, w, h, 24, '#000', '#fff');e=document.getElementById('EXPLANATION');e.style.fontFamily='serif';e.style.overflow='auto';e.style.lineHeight='1.5em';e.style.padding=Math.floor(8*rRatio)+'px '+Math.floor(8*rRatio)+'px '+Math.floor(16*rRatio)+'px';e.innerHTML='<h1 id="TOP_AP" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0 0 1em; text-align: center; ">台湾麻将について</h1>'+'<p style="margin: 0; padding: 0; ">台湾式の麻将です。</p>'+'<p style="margin: 0 0 1em; padding: 0; ">通常の麻雀と違い、手牌は<strong>十六枚</strong>となります。</p>'+'<p style="margin: 0 0 1em; padding: 0; ">半荘, 東風戦または一荘から選べます。</p>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li><a style="color: #ff0; " href="#HOW_TO_OP">操作方法</a></li>'+'<li><a style="color: #ff0; " href="#RULES_DETAILS">ルール細則</a></li>'+'<li><a style="color: #ff0; " href="#YAKU_DETAILS">点数・役細則</a></li>'+'</ul><hr style="display: block; color: #ccc; background: #ccc; border: 1px solid; margin: 1em 0; padding: 0; " />'+'<h2 id="HOW_TO_OP" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0.7em 0 0; ">操作方法</h2>'+'<nav style="display: block; margin: 0 0 0.5em; font-size: 80%; padding: 0 0 0 1em; "><a style="color: #ff0; " href="#TOP_AP">▲先頭</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#RULES_DETAILS">▽次節</a></nav>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>画面の下に、手牌が拡大されて表示されます。<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li><span style="color: #ff0; ">端末を縦向きでご利用の場合</span>、通常は右側を表\示しますので、左側の牌を指定したい場合は、<samp style="background: rgb(198, 222, 180); color: #000; margin: 0 0.2em; padding: 0.1em; white-space: nowrap; ">左側</samp>をタップ/クリックしてください。<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>左右どちらかにスワイプする事でも手牌の左右表示切替が出来ます。</li>'+'<li>大画面の端末では、拡大されていない手牌をタップ/クリックする事も出来ます。</li>'+'</ul></li>'+'<li><span style="color: #ff0; ">端末を横向きでご利用の場合</span>は、手牌全てが拡大されて表示されますので、その中から選択したい牌をタップ/クリックしてください。</li>'+'</ul></li>'+'<li>模牌または吃・ポン後の右端の牌は、手牌の右端の上に横向きに置かれます。</li>'+'<li>他者の打牌に対し、何もせず先に進める場合は<samp style="background: rgb(198, 222, 180); color: #000; margin: 0 0.2em; padding: 0.1em; white-space: nowrap; ">進行</samp>をタップ/クリックします。</li>'+'<li>チー・ポン・カンの無い第一打牌前に<samp style="background: rgb(198, 222, 180); color: #000; margin: 0 0.2em; padding: 0.1em; white-space: nowrap; ">聴牌</samp>をタップ/クリックしてから打牌すると、聴牌宣言が出来ます。<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc; ">'+'<li>聴牌宣言をした者は、門風の隣に"聴"の文字が表示されます。</li>'+'</ul></li>'+'</ul>'+'<h2 id="RULES_DETAILS" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0.7em 0 0; ">ルール細則</h2>'+'<nav style="display: block; margin: 0 0 0.5em; font-size: 80%; padding: 0 0 0 1em; "><a style="color: #ff0; " href="#TOP_AP">▲先頭</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#HOW_TO_OP">△前節</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#YAKU_DETAILS">▽次節</a></nav>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>和了形は雀頭と五門子に限る。</li>'+'<li>花牌の有無は選択可。花牌を用いる場合、以下のルールが適用される：<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>花牌を採用する場合は春夏秋冬・梅蘭菊竹の八枚を用いる。</li>'+'<li>花牌は海底以外は常に補花する。</li>'+'<li>海底で花牌を引いた場合は抜取った時点で荒牌とする(嶺上牌は取らない)。</li>'+'<li>一人で花牌八枚を全部抜取った場合、最後の一枚を補花した際の嶺上牌(配牌直後の場合は第一摸牌で)手の形を問わず<dfn style="font-style: normal; color: #ff0; ">八仙過海</dfn>の和了が成立する。</li>'+'<li>七搶一はなし。</li>'+'<li>補花後の嶺上牌での和了は槓上開花となる。</li>'+'</ul></li>'+'<li>現物及び筋の喰直しは不可。</li>'+'<li>ポン出来る牌を見送った場合、次の自分の打牌または加槓までは二枚目が出てもポン不可。</li>'+'<li>他者が打った牌を見逃した場合、次の自分の打牌または加槓まで同じ牌では和了不可(<dfn style="font-style: normal; color: #ff0; ">過水</dfn>)。<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>打牌または加槓するまでは摸和も不可。</li>'+'<li>見逃した牌以外の牌では、これらの制限は適用されない。</li>'+'</ul></li>'+'<li>大明槓後の嶺上牌では和了不可。</li>'+'<li>王牌は十六枚残し。海底での槓は不可。</li>'+'<li>四回目の槓で平局・連荘とする。</li>'+'<li>チー, ポン及びカンの無い第一打牌時に聴牌を宣言する事が出来る(天聴/地聴)。<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>但し、第一打牌時点で摸和出来る場合には聴牌宣言は不可。</li>'+'<li>聴牌宣言後は当該局終了まで模切りと補花のみ許され、暗槓は不可。</li>'+'</ul></li>'+'<li>荒牌は常時連荘、四風子連打及び四槓算了は平局・連荘とする。</li>'+'</ul></li>'+'</ul>'+'<h2 id="YAKU_DETAILS" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0.7em 0 0; ">点数・役細則</h2>'+'<nav style="display: block; margin: 0 0 0.5em; font-size: 80%; padding: 0 0 0 1em; "><a style="color: #ff0; " href="#TOP_AP">▲先頭</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#RULES_DETAILS">△前節</a></nav>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>和了点は摸帯(基本点) 5点に役があれば一台につき 1点を加算する。</li>'+'<li>和了点に加え、以下の点数を加算する：<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>荘家点：和了者または支払い者のいずれかが荘家の場合 1点加算。</li>'+'<li>連荘点：荘家が和了した場合、一連荘につき 1点。</li>'+'<li>拉荘点：散家が和了した場合、一連荘につき 1点。</li>'+'</ul></li>'+'<li>摸和では三者が上記の点数をそれぞれ払う。栄和では放銃者が上記の点数を払う。</li>'+'<li>平胡は花牌を一切補花せず、雀頭は数牌でなければならない。また摸和では成立しない。</li>'+'<li>花牌ありのルールで、花牌七枚を補花している者が八枚目を補花した場合、その際の嶺上牌を取った時点で八仙過海の和了が成立する。<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>配牌時の補花で花牌八枚を全て補花した場合は、第一打牌時に八仙過海が成立する。</li>'+'<li>八仙過海は摸和として扱う。</li>'+'<li>八仙過海で手が和了形となった場合、花牌関連の役を除いた役が別途加算される。</li>'+'</ul></li>'+'<li>開局一巡内の和了を人胡とする。</li>'+'<li>荘家第一打牌での栄和と散家第一摸牌での摸和もいずれも地胡とする。</li>'+'<li>役は以下の通り：<dl>'+'<dt>一台</dt>'+'<dd>門清, 不求, 摸胡, 半求, 翻牌(三元牌, 門風牌, 荘風牌, 門風・荘風に対応する花牌), 独聴, 海底摸月, 河底撈魚, 搶槓胡, 槓上開花</dd>'+'<dt>二台</dt>'+'<dd>平胡, 全求, 花槓, 三暗刻</dd>'+'<dt>四台</dt>'+'<dd>地聴, &#30896;&#30896;胡, 小三元(三元牌二組込み), 混一色</dd>'+'<dt>五台</dt>'+'<dd>四暗刻</dd>'+'<dt>八台</dt>'+'<dd>天聴, 五暗刻(&#30896;&#30896;胡込み), 大三元(三元牌三組込み), 小四喜, 清一色, 字一色, 八仙過海</dd>'+'<dt>十六台</dt>'+'<dd>天胡, 地胡, 人胡, 大四喜(風牌込み)</dd>'+'</dl></li>'+'</ul>';x=390; y=558;if(grMode){x=870; y=502;}var s=grMode ? '開　始' : '[#]開始';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(14, x, y+1, 89, 42, '#');makeClickable(14, x, y, 60, 1, '-');x-=90;s=grMode ? '菜　単' : '[*]菜単';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(10, x, y+1, 89, 40, '*');x=0;s=grMode ? 'ルール' : '[9] ﾙｰﾙ ';putRectangle(x, y, 102, 43, button_color);drawText(s, x+51, y+9, 84, 24, false, 24, 24, null, button_text, 'center');makeClickable(9, x, y+1, 102, 40, '9');x=0; y=690;if(grMode){ x=240; y=610; }newTextArea('CREDIT', x, y, 480, 32, 24, 'transparent', '#fff');var e=document.getElementById('CREDIT');e.style.fontFamily='serif';e.style.textAlign='center';e.innerHTML=copyright_credit;STATUS_DISP_2('開始前に、上記をお確かめください。');inputKey=-1;timeout_hnd=setTimeout('TM_EXP_KEY(); ', 10);}function TM_EXP_KEY(){if(timeout_hnd) clearTimeout(timeout_hnd);i=Math.random();if(inputKey==14){timeout_hnd=setTimeout('BANZHUANG_START(); ', 10);return;}if(inputKey==10){timeout_hnd=setTimeout('MAIN_START(); ', 10);return;}if(inputKey==9){timeout_hnd=setTimeout('SEL_TW(); ', 10);return;}inputKey=-1;timeout_hnd=setTimeout('TM_EXP_KEY(); ', 10);}function SEL_TW(){if(timeout_hnd) clearTimeout(timeout_hnd);inputKey=-1;timeout_hnd=setTimeout('SEL_TW1(); ', 10);}function SEL_TW1(){if(timeout_hnd) clearTimeout(timeout_hnd);var x=6, y=6, i, w, y1;initCanvas(bg_color);if(!grMode){putRectangleAbs(-1, 0, -1, 719, bg_color);putRectangleAbs(-1, 520, -1, 521, menu_border);putRectangleAbs(-1, 522, -1, 555, menu_bgcolor);}else {putRectangleAbs(-1, 0, -1, 640, bg_color);putRectangleAbs(-1, 470, -1, 471, menu_border);putRectangleAbs(-1, 472, -1, 500, menu_bgcolor);}x=22; y=6; w=436;var x1=240;if(grMode){x=42; x1=480; w=876;putRectangle(6, 6, 948, 463, '#000');}else {putRectangle(6, 6, 468, 514, '#000');}drawTextMincho('台湾麻将ルール設定', x1, y+16, 48, 24, true, 24, 24, null, '#ff0', 'center');y1=y+66;s=grMode ? '' : '[1] ';drawTextMincho(s+'試合の長さ', x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s='半荘';if(rule.tw_gamehands){s='一荘';if(rule.tw_gamehands>1) s='東風戦';}drawTextMincho(s, x+w, y1, w, 24, true, 24, 24, null, '#fff', 'right');makeClickable(1, x, y1, w, 40, '1');y1+=45;s=grMode ? '' : '[2] ';drawTextMincho(s+'花牌', x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s='八枚使用';if(rule.tw_hanapai){s='使用しない';}drawTextMincho(s, x+w, y1, w, 24, true, 24, 24, null, '#fff', 'right');makeClickable(2, x, y1, w, 40, '2');y1+=45;if(!grMode){drawTextMincho('※変更したい項目をタップ/クリックするか、', x, y1, 276, 24, false, 24, 24, null, '#fff', 'left');drawTextMincho('項目に表示されたダイヤルを押して下さい。', x, y1+26, 276, 24, false, 24, 24, null, '#fff', 'left');}else {drawTextMincho('※変更項目をタップ/クリックすると内容が切り替わります。', x, y1, 276, 24, false, 24, 24, null, '#fff', 'left');}x=390; y=558;if(grMode){x=870; y=502;}var s=grMode ? '開　始' : '[#]開始';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(14, x, y+1, 89, 42, '#');makeClickable(14, x, y, 60, 1, '-');x-=90;s=grMode ? '菜　単' : '[*]菜単';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(10, x, y+1, 89, 40, '*');x-=90;s=grMode ? '説　明' : '[7]説明';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(7, x, y+1, 89, 40, '7');x=0; y=690;if(grMode){ x=240; y=610; }newTextArea('CREDIT', x, y, 480, 32, 24, 'transparent', '#fff');var e=document.getElementById('CREDIT');e.style.fontFamily='serif';e.style.textAlign='center';e.innerHTML=copyright_credit;STATUS_DISP_2('ルールを選択してください。');inputKey=-1;timeout_hnd=setTimeout('SEL_TW_KEY(); ', 10);}function SEL_TW_KEY(){if(timeout_hnd) clearTimeout(timeout_hnd);var x=6, y=6, i;i=Math.random();if(inputKey==1){++rule.tw_gamehands;if(rule.tw_gamehands>2) rule.tw_gamehands=0;inputKey=-1;timeout_hnd=setTimeout('SEL_TW1(); ', 10);return;}if(inputKey==2){++rule.tw_hanapai;if(rule.tw_hanapai>1) rule.tw_hanapai=0;inputKey=-1;timeout_hnd=setTimeout('SEL_TW1(); ', 10);return;}if(inputKey<0){timeout_hnd=setTimeout('SEL_TW_KEY(); ', 10);return;}try {rule_storage.setItem('GAME_TINY_MAHJONG_TW_GAMEHANDS', rule.tw_gamehands);rule_storage.setItem('GAME_TINY_MAHJONG_TW_HANAPAI', rule.tw_hanapai);}catch(e){ ; }if(inputKey==14){timeout_hnd=setTimeout('BANZHUANG_START(); ', 10);return;}if(inputKey==10){timeout_hnd=setTimeout('MAIN_START(); ', 10);return;}if(inputKey==7){timeout_hnd=setTimeout('TM_EXP(); ', 10);return;}inputKey=-1;timeout_hnd=setTimeout('SEL_TW_KEY(); ', 10);}function GM_EXP(){if(timeout_hnd) clearTimeout(timeout_hnd);try {rule.gm_gamehands=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_GM_GAMEHANDS')) || 0;rule.gm_hanapai=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_GM_HANAPAI')) || 0;}catch(e){ ; }initCanvas(bg_color);if(!grMode){putRectangleAbs(-1, 0, -1, 719, bg_color);putRectangleAbs(-1, 520, -1, 521, menu_border);putRectangleAbs(-1, 522, -1, 555, menu_bgcolor);}else {putRectangleAbs(-1, 0, -1, 640, bg_color);putRectangleAbs(-1, 470, -1, 471, menu_border);putRectangleAbs(-1, 472, -1, 500, menu_bgcolor);}x=6; y=6; w=452; h=490;if(grMode){w=948; h=440;}newTextArea('EXPLANATION', x, y, w, h, 24, '#000', '#fff');e=document.getElementById('EXPLANATION');e.style.fontFamily='serif';e.style.overflow='auto';e.style.lineHeight='1.5em';e.style.padding=Math.floor(8*rRatio)+'px '+Math.floor(8*rRatio)+'px '+Math.floor(16*rRatio)+'px';e.innerHTML='<h1 id="TOP_AP" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0 0 1em; text-align: center; ">中共麻将について</h1>'+'<p style="margin: 0 0 1em; padding: 0; ">中共麻将です。</p>'+'<p style="margin: 0 0 1em; padding: 0; ">半荘または一荘から選べます。</p>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li><a style="color: #ff0; " href="#HOW_TO_OP">操作方法</a></li>'+'<li><a style="color: #ff0; " href="#RULES_DETAILS">ルール細則</a></li>'+'</ul><hr style="display: block; color: #ccc; background: #ccc; border: 1px solid; margin: 1em 0; padding: 0; " />'+'<h2 id="HOW_TO_OP" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0.7em 0 0; ">操作方法</h2>'+'<nav style="display: block; margin: 0 0 0.5em; font-size: 80%; padding: 0 0 0 1em; "><a style="color: #ff0; " href="#TOP_AP">▲先頭</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#RULES_DETAILS">▽次節</a></nav>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>画面の下に、手牌が拡大されて表示されます。<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li><span style="color: #ff0; ">端末を縦向きでご利用の場合</span>、通常は右側を表\示しますので、左側の牌を指定したい場合は、<samp style="background: rgb(198, 222, 180); color: #000; margin: 0 0.2em; padding: 0.1em; white-space: nowrap; ">左側</samp>をタップ/クリックしてください。<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>左右どちらかにスワイプする事でも手牌の左右表示切替が出来ます。</li>'+'<li>大画面の端末では、拡大されていない手牌をタップ/クリックする事も出来ます。</li>'+'</ul></li>'+'<li><span style="color: #ff0; ">端末を横向きでご利用の場合</span>は、手牌全てが拡大されて表示されますので、その中から選択したい牌をタップ/クリックしてください。</li>'+'</ul></li>'+'<li>他者の打牌に対し、何もせず先に進める場合は<samp style="background: rgb(198, 222, 180); color: #000; margin: 0 0.2em; padding: 0.1em; white-space: nowrap; ">進行</samp>をタップ/クリックします。</li>'+'<li><samp style="background: rgb(198, 222, 180); color: #000; margin: 0 0.2em; padding: 0.1em; white-space: nowrap; ">理牌</samp>をタップ/クリックすると、<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc; ">'+'<li>組合竜を纏めた形での理牌</li>'+'<li>通常の理牌</li>'+'</ul>の切替が出来ます(組合竜のパターンが二通り以上ある場合は、<samp style="background: rgb(198, 222, 180); color: #000; margin: 0 0.2em; padding: 0.1em; white-space: nowrap; ">理牌</samp>をタップ/クリック毎に順次表示されます)。</li>'+'</ul>'+'<h2 id="RULES_DETAILS" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0.7em 0 0; ">ルール細則</h2>'+'<nav style="display: block; margin: 0 0 0.5em; font-size: 80%; padding: 0 0 0 1em; "><a style="color: #ff0; " href="#TOP_AP">▲先頭</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#HOW_TO_OP">△前節</a></nav>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>花牌を八枚用いる。<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>花牌は海底以外では自動的に補花する。</li>'+'<li>海底で花牌を引いた場合は自動的に摸切りする。</li>'+'</ul></li>'+'<li>七対でも五門斉が成立する。</li>'+'<li>七対など門前でなければ成し得ない手でも、摸和では不求人が附加される(栄和での門前清は附加されない)。</li>'+'<li>門前での妙手回春・槓上開花では不求人ではなく門前清が附加される。</li>'+'<li>妙手回春と槓上開花の重複は認められる。</li>'+'<li>緑一色には、混一色または清一色が複合する。</li>'+'<li>緑一色・清&#20040;九の七対では四帰一は複合しない。</li>'+'<li>荘家の配牌で和了となった場合(いわゆる天和)、九蓮宝燈, 単調将, 辺張及び嵌張は認めない。</li>'+'<li>半荘終了時のスコアは一位から 4, 2, 1, 0 の順位点とする。</li>'+'</ul>';x=390; y=558;if(grMode){x=870; y=502;}var s=grMode ? '開　始' : '[#]開始';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(14, x, y+1, 89, 42, '#');makeClickable(14, x, y, 60, 1, '-');x-=90;s=grMode ? '菜　単' : '[*]菜単';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(10, x, y+1, 89, 40, '*');x=0;s=grMode ? 'ルール' : '[9] ﾙｰﾙ ';putRectangle(x, y, 102, 43, button_color);drawText(s, x+51, y+9, 84, 24, false, 24, 24, null, button_text, 'center');makeClickable(9, x, y+1, 102, 40, '9');x=0; y=690;if(grMode){ x=240; y=610; }newTextArea('CREDIT', x, y, 480, 32, 24, 'transparent', '#fff');var e=document.getElementById('CREDIT');e.style.fontFamily='serif';e.style.textAlign='center';e.innerHTML=copyright_credit;STATUS_DISP_2('開始前に、上記をお確かめください。');inputKey=-1;timeout_hnd=setTimeout('GM_EXP_KEY(); ', 10);}function GM_EXP_KEY(){if(timeout_hnd) clearTimeout(timeout_hnd);i=Math.random();if(inputKey==14){timeout_hnd=setTimeout('BANZHUANG_START(); ', 10);return;}if(inputKey==10){timeout_hnd=setTimeout('MAIN_START(); ', 10);return;}if(inputKey==9){timeout_hnd=setTimeout('SEL_GM(); ', 10);return;}inputKey=-1;timeout_hnd=setTimeout('GM_EXP_KEY(); ', 10);}function SEL_GM(){if(timeout_hnd) clearTimeout(timeout_hnd);inputKey=-1;timeout_hnd=setTimeout('SEL_GM1(); ', 10);}function SEL_GM1(){if(timeout_hnd) clearTimeout(timeout_hnd);var x=6, y=6, i, w, y1;initCanvas(bg_color);if(!grMode){putRectangleAbs(-1, 0, -1, 719, bg_color);putRectangleAbs(-1, 520, -1, 521, menu_border);putRectangleAbs(-1, 522, -1, 555, menu_bgcolor);}else {putRectangleAbs(-1, 0, -1, 640, bg_color);putRectangleAbs(-1, 470, -1, 471, menu_border);putRectangleAbs(-1, 472, -1, 500, menu_bgcolor);}x=22; y=6; w=436;var x1=240;if(grMode){x=42; x1=480; w=876;putRectangle(6, 6, 948, 463, '#000');}else {putRectangle(6, 6, 468, 514, '#000');}drawTextMincho('中共麻将ルール設定', x1, y+16, 48, 24, true, 24, 24, null, '#ff0', 'center');y1=y+66;s=grMode ? '' : '[1] ';drawTextMincho(s+'試合の長さ', x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s='半荘';if(rule.gm_gamehands) s='一荘';drawTextMincho(s, x+w, y1, w, 24, true, 24, 24, null, '#fff', 'right');makeClickable(1, x, y1, w, 40, '1');y1+=45;s=grMode ? '' : '[2] ';drawTextMincho(s+'花牌', x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s='八枚使用';if(rule.gm_hanapai) s='使用しない';drawTextMincho(s, x+w, y1, w, 24, true, 24, 24, null, '#fff', 'right');makeClickable(2, x, y1, w, 40, '2');y1+=45;if(!grMode){drawTextMincho('※変更したい項目をタップ/クリックするか、', x, y1, 276, 24, false, 24, 24, null, '#fff', 'left');drawTextMincho('項目に表示されたダイヤルを押して下さい。', x, y1+26, 276, 24, false, 24, 24, null, '#fff', 'left');}else {drawTextMincho('※変更項目をタップ/クリックすると内容が切り替わります。', x, y1, 276, 24, false, 24, 24, null, '#fff', 'left');}x=390; y=558;if(grMode){x=870; y=502;}var s=grMode ? '開　始' : '[#]開始';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(14, x, y+1, 89, 42, '#');makeClickable(14, x, y, 60, 1, '-');x-=90;s=grMode ? '菜　単' : '[*]菜単';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(10, x, y+1, 89, 40, '*');x-=90;s=grMode ? '説　明' : '[7]説明';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(7, x, y+1, 89, 40, '7');x=0; y=690;if(grMode){ x=240; y=610; }newTextArea('CREDIT', x, y, 480, 32, 24, 'transparent', '#fff');var e=document.getElementById('CREDIT');e.style.fontFamily='serif';e.style.textAlign='center';e.innerHTML=copyright_credit;STATUS_DISP_2('ルールを選択してください。');inputKey=-1;timeout_hnd=setTimeout('SEL_GM_KEY(); ', 10);}function SEL_GM_KEY(){if(timeout_hnd) clearTimeout(timeout_hnd);var x=6, y=6, i;i=Math.random();if(inputKey==1){rule.gm_gamehands=rule.gm_gamehands ? 0 : 1;inputKey=-1;timeout_hnd=setTimeout('SEL_GM1(); ', 10);return;}if(inputKey==2){rule.gm_hanapai=rule.gm_hanapai ? 0 : 1;inputKey=-1;timeout_hnd=setTimeout('SEL_GM1(); ', 10);return;}if(inputKey<0){timeout_hnd=setTimeout('SEL_GM_KEY(); ', 10);return;}try {rule_storage.setItem('GAME_TINY_MAHJONG_GM_GAMEHANDS', rule.gm_gamehands);rule_storage.setItem('GAME_TINY_MAHJONG_GM_HANAPAI', rule.gm_hanapai);}catch(e){ ; }if(inputKey==14){timeout_hnd=setTimeout('BANZHUANG_START(); ', 10);return;}if(inputKey==10){timeout_hnd=setTimeout('MAIN_START(); ', 10);return;}if(inputKey==7){timeout_hnd=setTimeout('GM_EXP(); ', 10);return;}inputKey=-1;timeout_hnd=setTimeout('SEL_GM_KEY(); ', 10);}function BOO_EXP(){if(timeout_hnd) clearTimeout(timeout_hnd);rule.boo_menqian=0;rule.boo_yakuman=0;rule.boo_minogashi=0;rule.boo_sanshoku=0;rule.boo_sanshun=0;rule.boo_chanta=0;try {rule.boo_menqian=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_BOO_MENQIAN')) || 0;rule.boo_yakuman=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_BOO_YAKUMAN')) || 0;rule.boo_minogashi=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_BOO_MINOGASHI')) || 0;rule.boo_sanshoku=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_BOO_SANSHOKU')) || 0;rule.boo_sanshun=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_BOO_SANSHUN')) || 0;rule.boo_chanta=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_BOO_CHANTA')) || 0;}catch(e){ ; }initCanvas(bg_color);if(!grMode){putRectangleAbs(-1, 0, -1, 719, bg_color);putRectangleAbs(-1, 520, -1, 521, menu_border);putRectangleAbs(-1, 522, -1, 555, menu_bgcolor);}else {putRectangleAbs(-1, 0, -1, 640, bg_color);putRectangleAbs(-1, 470, -1, 471, menu_border);putRectangleAbs(-1, 472, -1, 500, menu_bgcolor);}x=6; y=6; w=452; h=490;if(grMode){w=948; h=440;}newTextArea('EXPLANATION', x, y, w, h, 24, '#000', '#fff');e=document.getElementById('EXPLANATION');e.style.fontFamily='serif';e.style.overflow='auto';e.style.lineHeight='1.5em';e.style.padding=Math.floor(8*rRatio)+'px '+Math.floor(8*rRatio)+'px '+Math.floor(16*rRatio)+'px';e.innerHTML='<h1 id="TOP_AP" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0 0 1em; text-align: center; ">関西式ブー麻雀について</h1>'+'<p style="margin: 0 0 1em; padding: 0; ">関西式のブー麻雀です。</p>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li><a style="color: #ff0; " href="#HOW_TO_OP">操作方法</a></li>'+'<li><a style="color: #ff0; " href="#RULES_DETAILS">ルール細則</a></li>'+'<li><a style="color: #ff0; " href="#RESULTS_DETAILS">成績について</a></li>'+'<li><a style="color: #ff0; " href="#YAKU_DETAILS">役細則</a></li>'+'</ul><hr style="display: block; color: #ccc; background: #ccc; border: 1px solid; margin: 1em 0; padding: 0; " />'+'<h2 id="HOW_TO_OP" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0.7em 0 0; ">操作方法</h2>'+'<nav style="display: block; margin: 0 0 0.5em; font-size: 80%; padding: 0 0 0 1em; "><a style="color: #ff0; " href="#TOP_AP">▲先頭</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#RULES_DETAILS">▽次節</a></nav>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>画面の下に、手牌が拡大されて表示されます。<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li><span style="color: #ff0; ">端末を縦向きでご利用の場合</span>、通常は右側を表\示しますので、左側の牌を指定したい場合は、<samp style="background: rgb(198, 222, 180); color: #000; margin: 0 0.2em; padding: 0.1em; white-space: nowrap; ">左側</samp>をタップ/クリックしてください。<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>左右どちらかにスワイプする事でも手牌の左右表示切替が出来ます。</li>'+'<li>大画面の端末では、拡大されていない手牌をタップ/クリックする事も出来ます。</li>'+'</ul></li>'+'<li><span style="color: #ff0; ">端末を横向きでご利用の場合</span>は、手牌全てが拡大されて表示されますので、その中から選択したい牌をタップ/クリックしてください。</li>'+'</ul></li>'+'<li>他者の打牌に対し、何もせず先に進める場合は<samp style="background: rgb(198, 222, 180); color: #000; margin: 0 0.2em; padding: 0.1em; white-space: nowrap; ">進行</samp>をタップ/クリックします。</li>'+'</ul>'+'<h2 id="RULES_DETAILS" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0.7em 0 0; ">ルール細則</h2>'+'<nav style="display: block; margin: 0 0 0.5em; font-size: 80%; padding: 0 0 0 1em; "><a style="color: #ff0; " href="#TOP_AP">▲先頭</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#HOW_TO_OP">△前節</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#RESULTS_DETAILS">▽次節</a></nav>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>持点は二千点。半荘途中で誰かが箱点になるか、四千点に達するとそこで終了。</li>'+'<li>最終局または箱点者が現れる場合、以下に該当する和了は不可。<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>マルＣ(一人沈み)になってしまう和了</li>'+'<li>和了しても二千点に達しない和了</li>'+'<li>二千点以上の者の和了で、和了しても一位になれない和了</li>'+'</ul></li>'+'<li>役満貫の扱いは、ゲーム開始前に以下から選択可。<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>通常の和了と同様に扱う</li>'+'<li>和了した場合、無条件でマルＡ(三人沈み)終了と見なす</li>'+'</ul></li>'+'<li>場に一翻が付く。</li>'+'<li>縛りはなし。</li>'+'<li>喰い平和有り、摸八平和は無し。</li>'+'<li>槓ドラ, 裏ドラ及び一発は無し。</li>'+'<li>赤五筒を二枚、翻牌として用いる。</li>'+'<li>ドラは各支払者が一枚につき 100点(栄和時は 300点)を和了点に添える。</li>'+'<li>積棒も各支払者が一本につき 100点(栄和時は 300点)を和了点に添える。</li>'+'<li>門前での加算点の有無はゲーム開始前に選択可。有りとした場合、各支払者は 100点(栄和時は 300点)を和了点に添える。</li>'+'<li>喰直しには制限はない。</li>'+'<li>両家和・三家和は頭跳ね。</li>'+'<li>立直後の暗槓は孤立した暗刻の四枚目を摸牌した場合のみ可能。</li>'+'<li>振聴でも自分が捨てていない牌であれば栄和可。</li>'+'<li>同巡内で見逃した牌での栄和の可否はゲーム開始前に選択可。</li>'+'<li>国士無双であっても暗槓搶槓は不可。</li>'+'<li>大明槓の嶺上開花は摸和扱いで、三人払いとする。</li>'+'<li>荒牌は常に輪荘で、不聴罰符はなし。</li>'+'<li>途中平局は九種&#20040;九倒牌のみ適用され、輪荘とする。</li>'+'<li>槓は四回までは任意に可能だが、五つ目の槓は不可。</li>'+'</ul>'+'<h2 id="RESULTS_DETAILS" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0.7em 0 0; ">成績について</h2>'+'<nav style="display: block; margin: 0 0 0.5em; font-size: 80%; padding: 0 0 0 1em; "><a style="color: #ff0; " href="#TOP_AP">▲先頭</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#RULES_DETAILS">△前節</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#YAKU_DETAILS">▽次節</a></nav>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>半荘終了時に、沈み(二千点未満)の者の数に依り、一位が取れるポイントが決まります：</li>'+'<li>終了時に二千点未満の者が。</li><ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li><dfn style="font-style: normal; color: #ff0; font-weight: bold; ">マルＡ</dfn>…三人沈みとなった場合、沈み者は10ポイントずつを一位に支払います。</li>'+'<li><dfn style="font-style: normal; color: #ff0; font-weight: bold; ">マルＢ</dfn>…二人沈みとなった場合、沈み者は 7ポイントずつを一位に支払います。</li>'+'<li><dfn style="font-style: normal; color: #ff0; font-weight: bold; ">マルＣ</dfn>…一人沈みとなった場合、沈み者は 5ポイントを一位に支払います。</li>'+'</ul></li>'+'<li>一位の者は、場代として 3ポイントを支払います。</li>'+'</ul>'+'<h2 id="YAKU_DETAILS" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0.7em 0 0; ">役細則</h2>'+'<nav style="display: block; margin: 0 0 0.5em; font-size: 80%; padding: 0 0 0 1em; "><a style="color: #ff0; " href="#TOP_AP">▲先頭</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#RESULTS_DETAILS">△前節</a></nav>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>七対子は25符両翻で計算。</li>'+'<li>連風牌の雀頭は 4符とする。</li>'+'<li>満貫は散家二千点, 荘家は三千点。役満貫も満貫と同額。</li>'+'<li>荘家第一打牌での栄和と散家第一摸牌での摸和もいずれも地和とする。</li>'+'<li>九蓮宝燈は和了した形が準じていれば成立する。また、万子でなくても可。</li>'+'<li>役は以下の通り(※は有無選択可)：<dl>'+'<dt>一翻</dt>'+'<dd>門前摸和, 立直, 平和, 断&#20040;九, 翻牌(三元牌, 門風牌, 荘風牌, 赤牌), 海底摸月, 搶槓和, 嶺上開花</dd>'+'<dt>両翻</dt>'+'<dd>七対子, 一気通貫, ※三色同順, ※一色三順, 対々和, 三暗刻, ※三色同刻, 混一色</dd>'+'<dt>四翻</dt>'+'<dd>混老頭, 小三元, 清一色</dd>'+'<dt>満貫</dt>'+'<dd>天和, 地和, 大三元, 四喜和, 字一色, 清老頭, 四暗刻, 九蓮宝燈, 国士無双</dd>'+'</dl></li>'+'</ul>';x=390; y=558;if(grMode){x=870; y=502;}var s=grMode ? '開　始' : '[#]開始';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(14, x, y+1, 89, 42, '#');makeClickable(14, x, y, 60, 1, '-');x-=90;s=grMode ? '菜　単' : '[*]菜単';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(10, x, y+1, 89, 40, '*');x=0;s=grMode ? 'ルール' : '[9] ﾙｰﾙ ';putRectangle(x, y, 102, 43, button_color);drawText(s, x+51, y+9, 84, 24, false, 24, 24, null, button_text, 'center');makeClickable(9, x, y+1, 102, 40, '9');x=0; y=690;if(grMode){ x=240; y=610; }newTextArea('CREDIT', x, y, 480, 32, 24, 'transparent', '#fff');var e=document.getElementById('CREDIT');e.style.fontFamily='serif';e.style.textAlign='center';e.innerHTML=copyright_credit;STATUS_DISP_2('開始前に、上記をお確かめください。');inputKey=-1;timeout_hnd=setTimeout('BOO_EXP_KEY(); ', 10);}function BOO_EXP_KEY(){if(timeout_hnd) clearTimeout(timeout_hnd);i=Math.random();if(inputKey==14){timeout_hnd=setTimeout('BANZHUANG_START(); ', 10);return;}if(inputKey==10){timeout_hnd=setTimeout('MAIN_START(); ', 10);return;}if(inputKey==9){timeout_hnd=setTimeout('SEL_BOO(); ', 10);return;}inputKey=-1;timeout_hnd=setTimeout('BOO_EXP_KEY(); ', 10);}function SEL_BOO(){if(timeout_hnd) clearTimeout(timeout_hnd);inputKey=-1;timeout_hnd=setTimeout('SEL_BOO1(); ', 10);}function SEL_BOO1(){if(timeout_hnd) clearTimeout(timeout_hnd);var x=6, y=6, i, w, y1;initCanvas(bg_color);if(!grMode){putRectangleAbs(-1, 0, -1, 719, bg_color);putRectangleAbs(-1, 520, -1, 521, menu_border);putRectangleAbs(-1, 522, -1, 555, menu_bgcolor);}else {putRectangleAbs(-1, 0, -1, 640, bg_color);putRectangleAbs(-1, 470, -1, 471, menu_border);putRectangleAbs(-1, 472, -1, 500, menu_bgcolor);}x=22; y=6; w=436;var x1=240;if(grMode){x=42; x1=480; w=876;putRectangle(6, 6, 948, 463, '#000');}else {putRectangle(6, 6, 468, 514, '#000');}drawTextMincho('関西式ブー麻雀ルール設定', x1, y+16, 48, 24, true, 24, 24, null, '#ff0', 'center');y1=y+66;s=grMode ? '' : '[1] ';drawTextMincho(s+'同巡内見逃し', x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s='栄和可能';if(rule.boo_minogashi) s='現物での栄和不可';drawTextMincho(s, x+w, y1, w, 24, true, 24, 24, null, '#fff', 'right');makeClickable(1, x, y1, w, 40, '1');y1+=45;s=grMode ? '' : '[2] ';drawTextMincho(s+'門前和了時', x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s='追加点無し';if(rule.boo_menqian) s='300点追加';drawTextMincho(s, x+w, y1, w, 24, true, 24, 24, null, '#fff', 'right');makeClickable(2, x, y1, w, 40, '2');y1+=45;s=grMode ? '' : '[3] ';drawTextMincho(s+'役満貫和了', x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s='特別扱い無し';if(rule.boo_yakuman) s='無条件でマルＡ';drawTextMincho(s, x+w, y1, w, 24, true, 24, 24, null, '#fff', 'right');makeClickable(3, x, y1, w, 40, '3');y1+=45;s=grMode ? '' : '[4] ';drawTextMincho(s+'全帯'+String.fromCharCode(20040), x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s='無し';if(rule.boo_chanta) s='両翻';drawTextMincho(s, x+w, y1, w, 24, true, 24, 24, null, '#fff', 'right');makeClickable(4, x, y1, w, 40, '4');y1+=45;s=grMode ? '' : '[5] ';drawTextMincho(s+'三色同順/三色同刻', x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s='無し';if(rule.boo_sanshoku) s='両翻';drawTextMincho(s, x+w, y1, w, 24, true, 24, 24, null, '#fff', 'right');makeClickable(5, x, y1, w, 40, '5');y1+=45;s=grMode ? '' : '[6] ';drawTextMincho(s+'一色三順', x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s='無し';if(rule.boo_sanshun) s='両翻';drawTextMincho(s, x+w, y1, w, 24, true, 24, 24, null, '#fff', 'right');makeClickable(6, x, y1, w, 40, '6');y1+=45;if(!grMode){drawTextMincho('※変更したい項目をタップ/クリックするか、', x, y1, 276, 24, false, 24, 24, null, '#fff', 'left');drawTextMincho('項目に表示されたダイヤルを押して下さい。', x, y1+26, 276, 24, false, 24, 24, null, '#fff', 'left');}else {drawTextMincho('※変更項目をタップ/クリックすると内容が切り替わります。', x, y1, 276, 24, false, 24, 24, null, '#fff', 'left');}x=390; y=558;if(grMode){x=870; y=502;}var s=grMode ? '開　始' : '[#]開始';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(14, x, y+1, 89, 42, '#');makeClickable(14, x, y, 60, 1, '-');x-=90;s=grMode ? '菜　単' : '[*]菜単';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(10, x, y+1, 89, 40, '*');x-=90;s=grMode ? '説　明' : '[7]説明';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(7, x, y+1, 89, 40, '7');x=0; y=690;if(grMode){ x=240; y=610; }newTextArea('CREDIT', x, y, 480, 32, 24, 'transparent', '#fff');var e=document.getElementById('CREDIT');e.style.fontFamily='serif';e.style.textAlign='center';e.innerHTML=copyright_credit;STATUS_DISP_2('ルールを選択してください。');inputKey=-1;timeout_hnd=setTimeout('SEL_BOO_KEY(); ', 10);}function SEL_BOO_KEY(){if(timeout_hnd) clearTimeout(timeout_hnd);var x=6, y=6, i;i=Math.random();if(inputKey==1){rule.boo_minogashi=rule.boo_minogashi ? 0 : 1;inputKey=-1;timeout_hnd=setTimeout('SEL_BOO1(); ', 10);return;}if(inputKey==2){rule.boo_menqian=rule.boo_menqian ? 0 : 1;inputKey=-1;timeout_hnd=setTimeout('SEL_BOO1(); ', 10);return;}if(inputKey==3){rule.boo_yakuman=rule.boo_yakuman ? 0 : 1;inputKey=-1;timeout_hnd=setTimeout('SEL_BOO1(); ', 10);return;}if(inputKey==4){rule.boo_chanta=rule.boo_chanta ? 0 : 1;inputKey=-1;timeout_hnd=setTimeout('SEL_BOO1(); ', 10);return;}if(inputKey==5){rule.boo_sanshoku=rule.boo_sanshoku ? 0 : 1;inputKey=-1;timeout_hnd=setTimeout('SEL_BOO1(); ', 10);return;}if(inputKey==6){rule.boo_sanshun=rule.boo_sanshun ? 0 : 1;inputKey=-1;timeout_hnd=setTimeout('SEL_BOO1(); ', 10);return;}if(inputKey<0){timeout_hnd=setTimeout('SEL_BOO_KEY(); ', 10);return;}try {rule_storage.setItem('GAME_TINY_MAHJONG_BOO_MINOGASHI', rule.boo_minogashi);rule_storage.setItem('GAME_TINY_MAHJONG_BOO_MENQIAN', rule.boo_menqian);rule_storage.setItem('GAME_TINY_MAHJONG_BOO_YAKUMAN', rule.boo_yakuman);rule_storage.setItem('GAME_TINY_MAHJONG_BOO_CHANTA', rule.boo_chanta);rule_storage.setItem('GAME_TINY_MAHJONG_BOO_SANSHOKU', rule.boo_sanshoku);rule_storage.setItem('GAME_TINY_MAHJONG_BOO_SANSHUN', rule.boo_sanshun);}catch(e){ ; }if(inputKey==14){timeout_hnd=setTimeout('BANZHUANG_START(); ', 10);return;}if(inputKey==10){timeout_hnd=setTimeout('MAIN_START(); ', 10);return;}if(inputKey==7){timeout_hnd=setTimeout('BOO_EXP(); ', 10);return;}inputKey=-1;timeout_hnd=setTimeout('SEL_BOO_KEY(); ', 10);}function AS_EXP(){if(timeout_hnd) clearTimeout(timeout_hnd);rule.arshiar_mo8pinghe=0;rule.arshiar_qiduizi=0;rule.arshiar_sanshoku=0;rule.arshiar_sanshun=0;rule.arshiar_gamehands=0;try {rule.arshiar_gamehands=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_AS_GAMEHAND')) || 0;rule.arshiar_mo8pinghe=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_AS_MO8PINGHE')) || 0;rule.arshiar_qiduizi=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_AS_QIDUIZI')) || 0;rule.arshiar_sanshoku=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_AS_SANSHOKU')) || 0;rule.arshiar_sanshun=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_AS_SANSHUN')) || 0;}catch(e){ ; }initCanvas(bg_color);if(!grMode){putRectangleAbs(-1, 0, -1, 719, bg_color);putRectangleAbs(-1, 520, -1, 521, menu_border);putRectangleAbs(-1, 522, -1, 555, menu_bgcolor);}else {putRectangleAbs(-1, 0, -1, 640, bg_color);putRectangleAbs(-1, 470, -1, 471, menu_border);putRectangleAbs(-1, 472, -1, 500, menu_bgcolor);}x=6; y=6; w=452; h=490;if(grMode){w=948; h=440;}newTextArea('EXPLANATION', x, y, w, h, 24, '#000', '#fff');e=document.getElementById('EXPLANATION');e.style.fontFamily='serif';e.style.overflow='auto';e.style.lineHeight='1.5em';e.style.padding=Math.floor(8*rRatio)+'px '+Math.floor(8*rRatio)+'px '+Math.floor(16*rRatio)+'px';e.innerHTML='<h1 id="TOP_AP" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0 0 1em; text-align: center; ">アルシァル麻雀について</h1>'+'<p style="margin: 0 0 1em; padding: 0; ">アルシァル麻雀です。</p>'+'<p style="margin: 0 0 1em; padding: 0; ">半荘または一荘から選べます。</p>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li><a style="color: #ff0; " href="#HOW_TO_OP">操作方法</a></li>'+'<li><a style="color: #ff0; " href="#RULES_DETAILS">ルール細則</a></li>'+'<li><a style="color: #ff0; " href="#YAKU_DETAILS">役細則</a></li>'+'</ul><hr style="display: block; color: #ccc; background: #ccc; border: 1px solid; margin: 1em 0; padding: 0; " />'+'<h2 id="HOW_TO_OP" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0.7em 0 0; ">操作方法</h2>'+'<nav style="display: block; margin: 0 0 0.5em; font-size: 80%; padding: 0 0 0 1em; "><a style="color: #ff0; " href="#TOP_AP">▲先頭</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#RULES_DETAILS">▽次節</a></nav>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>画面の下に、手牌が拡大されて表示されます。<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li><span style="color: #ff0; ">端末を縦向きでご利用の場合</span>、通常は右側を表\示しますので、左側の牌を指定したい場合は、<samp style="background: rgb(198, 222, 180); color: #000; margin: 0 0.2em; padding: 0.1em; white-space: nowrap; ">左側</samp>をタップ/クリックしてください。<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>左右どちらかにスワイプする事でも手牌の左右表示切替が出来ます。</li>'+'<li>大画面の端末では、拡大されていない手牌をタップ/クリックする事も出来ます。</li>'+'</ul></li>'+'<li><span style="color: #ff0; ">端末を横向きでご利用の場合</span>は、手牌全てが拡大されて表示されますので、その中から選択したい牌をタップ/クリックしてください。</li>'+'</ul></li>'+'<li>他者の打牌に対し、何もせず先に進める場合は<samp style="background: rgb(198, 222, 180); color: #000; margin: 0 0.2em; padding: 0.1em; white-space: nowrap; ">進行</samp>をタップ/クリックします。</li>'+'</ul>'+'<h2 id="RULES_DETAILS" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0.7em 0 0; ">ルール細則</h2>'+'<nav style="display: block; margin: 0 0 0.5em; font-size: 80%; padding: 0 0 0 1em; "><a style="color: #ff0; " href="#TOP_AP">▲先頭</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#HOW_TO_OP">△前節</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#YAKU_DETAILS">▽次節</a></nav>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>東南半荘制または一荘制とする(選択可)。</li>'+'<li>持点は二千点。</li>'+'<li>縛りはなし。</li>'+'<li>喰い平和有り、摸八平和の有無はゲーム開始前に選択可。<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  "><li>摸八平和有りとした場合、門前に限り成立。</li></ul></li>'+'<li>ドラ及び立直はなし。</li>'+'<li>積棒はなし。</li>'+'<li>喰直しには制限はない。</li>'+'<li>両家和・三家和は頭跳ね。</li>'+'<li>振聴でも自分が捨てていない牌であれば栄和可。</li>'+'<li>国士無双であっても暗槓搶槓は不可。</li>'+'<li>大明槓の嶺上開花は摸和扱いで、三人払いとする。</li>'+'<li>荒牌は常に輪荘で、不聴罰符はなし。</li>'+'<li>途中平局は九種&#20040;九倒牌のみ適用され、輪荘とする。</li>'+'<li>槓は四回までは任意に可能だが、五つ目の槓は不可。</li>'+'</ul>'+'<h2 id="YAKU_DETAILS" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0.7em 0 0; ">役細則</h2>'+'<nav style="display: block; margin: 0 0 0.5em; font-size: 80%; padding: 0 0 0 1em; "><a style="color: #ff0; " href="#TOP_AP">▲先頭</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#RULES_DETAILS">△前節</a></nav>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>七対子の有無はゲーム開始前に選択可。<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  "><li>有りとした場合、基本点100点となり、天和・人和を除く他の役は一切附加されない。</li></ul></li>'+'<li>連風牌の雀頭は 4符とする。</li>'+'<li>清一色では十符を加符する。</li>'+'<li>満貫は散家二千点, 荘家は三千点。役満貫も満貫と同額。</li>'+'<li>荘家第一打牌での栄和と散家第一摸牌での摸和もいずれも地和とする。</li>'+'<li>九蓮宝燈は和了した形が準じていれば成立する。また、万子でなくても可。</li>'+'<li>役は以下の通り(※印は有無選択可)：<dl>'+'<dt>一翻</dt>'+'<dd>門前摸和, 立直, 平和, 断&#20040;九, 翻牌(三元牌, 門風牌, 荘風牌, 赤牌), 一気通貫, ※三色同順, ※一色三順, 全帯&#20040;, 対々和, 三暗刻, ※三色同刻, 混老頭, 混一色, 小三元, 海底摸月, 搶槓和, 嶺上開花</dd>'+'<dt>三翻</dt>'+'<dd>清一色</dd>'+'<dt>満貫</dt>'+'<dd>天和, 地和, 大三元, 四喜和, 字一色, 清老頭, 四暗刻, 九蓮宝燈, 国士無双</dd>'+'</dl></li>'+'</ul>';x=390; y=558;if(grMode){x=870; y=502;}var s=grMode ? '開　始' : '[#]開始';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(14, x, y+1, 89, 42, '#');makeClickable(14, x, y, 60, 1, '-');x-=90;s=grMode ? '菜　単' : '[*]菜単';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(10, x, y+1, 89, 40, '*');x=0;s=grMode ? 'ルール' : '[9] ﾙｰﾙ ';putRectangle(x, y, 102, 43, button_color);drawText(s, x+51, y+9, 84, 24, false, 24, 24, null, button_text, 'center');makeClickable(9, x, y+1, 102, 40, '9');x=0; y=690;if(grMode){ x=240; y=610; }newTextArea('CREDIT', x, y, 480, 32, 24, 'transparent', '#fff');var e=document.getElementById('CREDIT');e.style.fontFamily='serif';e.style.textAlign='center';e.innerHTML=copyright_credit;STATUS_DISP_2('開始前に、上記をお確かめください。');inputKey=-1;timeout_hnd=setTimeout('AS_EXP_KEY(); ', 10);}function AS_EXP_KEY(){if(timeout_hnd) clearTimeout(timeout_hnd);i=Math.random();if(inputKey==14){timeout_hnd=setTimeout('BANZHUANG_START(); ', 10);return;}if(inputKey==10){timeout_hnd=setTimeout('MAIN_START(); ', 10);return;}if(inputKey==9){timeout_hnd=setTimeout('SEL_AS(); ', 10);return;}inputKey=-1;timeout_hnd=setTimeout('AS_EXP_KEY(); ', 10);}function SEL_AS(){if(timeout_hnd) clearTimeout(timeout_hnd);inputKey=-1;timeout_hnd=setTimeout('SEL_AS1(); ', 10);}function SEL_AS1(){if(timeout_hnd) clearTimeout(timeout_hnd);var x=6, y=6, i, w, y1;initCanvas(bg_color);if(!grMode){putRectangleAbs(-1, 0, -1, 719, bg_color);putRectangleAbs(-1, 520, -1, 521, menu_border);putRectangleAbs(-1, 522, -1, 555, menu_bgcolor);}else {putRectangleAbs(-1, 0, -1, 640, bg_color);putRectangleAbs(-1, 470, -1, 471, menu_border);putRectangleAbs(-1, 472, -1, 500, menu_bgcolor);}x=22; y=6; w=436;var x1=240;if(grMode){x=42; x1=480; w=876;putRectangle(6, 6, 948, 463, '#000');}else {putRectangle(6, 6, 468, 514, '#000');}drawTextMincho('アルシァルルール設定', x1, y+16, 48, 24, true, 24, 24, null, '#ff0', 'center');y1=y+66;s=grMode ? '' : '[1] ';drawTextMincho(s+'試合の長さ', x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s='半荘';if(rule.arshiar_gamehands) s='一荘';drawTextMincho(s, x+w, y1, w, 24, true, 24, 24, null, '#fff', 'right');makeClickable(1, x, y1, w, 40, '1');y1+=45;s=grMode ? '' : '[2] ';drawTextMincho(s+'摸八平和', x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s='無し';if(rule.arshiar_mo8pinghe) s='門前に限り有り';drawTextMincho(s, x+w, y1, w, 24, true, 24, 24, null, '#fff', 'right');makeClickable(2, x, y1, w, 40, '2');y1+=45;s=grMode ? '' : '[3] ';drawTextMincho(s+'七対子', x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s='和了形としない';if(rule.arshiar_qiduizi) s='基本点 100点の和了';drawTextMincho(s, x+w, y1, w, 24, true, 24, 24, null, '#fff', 'right');makeClickable(3, x, y1, w, 40, '3');y1+=45;s=grMode ? '' : '[4] ';drawTextMincho(s+'一色三順', x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s='無し';if(rule.arshiar_sanshun) s='一翻';drawTextMincho(s, x+w, y1, w, 24, true, 24, 24, null, '#fff', 'right');makeClickable(4, x, y1, w, 40, '4');y1+=45;s=grMode ? '' : '[5] ';drawTextMincho(s+'三色同順/三色同刻', x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s='無し';if(rule.arshiar_sanshoku) s='一翻';drawTextMincho(s, x+w, y1, w, 24, true, 24, 24, null, '#fff', 'right');makeClickable(5, x, y1, w, 40, '5');y1+=45;if(!grMode){drawTextMincho('※変更したい項目をタップ/クリックするか、', x, y1, 276, 24, false, 24, 24, null, '#fff', 'left');drawTextMincho('項目に表示されたダイヤルを押して下さい。', x, y1+26, 276, 24, false, 24, 24, null, '#fff', 'left');}else {drawTextMincho('※変更項目をタップ/クリックすると内容が切り替わります。', x, y1, 276, 24, false, 24, 24, null, '#fff', 'left');}x=390; y=558;if(grMode){x=870; y=502;}var s=grMode ? '開　始' : '[#]開始';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(14, x, y+1, 89, 42, '#');makeClickable(14, x, y, 60, 1, '-');x-=90;s=grMode ? '菜　単' : '[*]菜単';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(10, x, y+1, 89, 40, '*');x-=90;s=grMode ? '説　明' : '[7]説明';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(7, x, y+1, 89, 40, '7');x=0; y=690;if(grMode){ x=240; y=610; }newTextArea('CREDIT', x, y, 480, 32, 24, 'transparent', '#fff');var e=document.getElementById('CREDIT');e.style.fontFamily='serif';e.style.textAlign='center';e.innerHTML=copyright_credit;STATUS_DISP_2('ルールを選択してください。');inputKey=-1;timeout_hnd=setTimeout('SEL_AS_KEY(); ', 10);}function SEL_AS_KEY(){if(timeout_hnd) clearTimeout(timeout_hnd);var x=6, y=6, i;i=Math.random();if(inputKey==1){rule.arshiar_gamehands=rule.arshiar_gamehands ? 0 : 1;inputKey=-1;timeout_hnd=setTimeout('SEL_AS1(); ', 10);return;}if(inputKey==2){rule.arshiar_mo8pinghe=rule.arshiar_mo8pinghe ? 0 : 1;inputKey=-1;timeout_hnd=setTimeout('SEL_AS1(); ', 10);return;}if(inputKey==3){rule.arshiar_qiduizi=rule.arshiar_qiduizi ? 0 : 1;inputKey=-1;timeout_hnd=setTimeout('SEL_AS1(); ', 10);return;}if(inputKey==4){rule.arshiar_sanshun=rule.arshiar_sanshun ? 0 : 1;inputKey=-1;timeout_hnd=setTimeout('SEL_AS1(); ', 10);return;}if(inputKey==5){rule.arshiar_sanshoku=rule.arshiar_sanshoku ? 0 : 1;inputKey=-1;timeout_hnd=setTimeout('SEL_AS1(); ', 10);return;}if(inputKey<0){timeout_hnd=setTimeout('SEL_AS_KEY(); ', 10);return;}try {rule_storage.setItem('GAME_TINY_MAHJONG_AS_GAMEHAND', rule.arshiar_gamehands);rule_storage.setItem('GAME_TINY_MAHJONG_AS_MO8PINGHE', rule.arshiar_mo8pinghe);rule_storage.setItem('GAME_TINY_MAHJONG_AS_QIDUIZI', rule.arshiar_qiduizi);rule_storage.setItem('GAME_TINY_MAHJONG_AS_SANSHOKU', rule.arshiar_sanshoku);rule_storage.setItem('GAME_TINY_MAHJONG_AS_SANSHUN', rule.arshiar_sanshun);}catch(e){ ; }if(inputKey==14){timeout_hnd=setTimeout('BANZHUANG_START(); ', 10);return;}if(inputKey==10){timeout_hnd=setTimeout('MAIN_START(); ', 10);return;}if(inputKey==7){timeout_hnd=setTimeout('AS_EXP(); ', 10);return;}inputKey=-1;timeout_hnd=setTimeout('SEL_AS_KEY(); ', 10);}function GAME_SAMMA_EXP(){if(timeout_hnd) clearTimeout(timeout_hnd);initCanvas(bg_color);if(!grMode){putRectangleAbs(-1, 0, -1, 719, bg_color);putRectangleAbs(-1, 520, -1, 521, menu_border);putRectangleAbs(-1, 522, -1, 555, menu_bgcolor);}else {putRectangleAbs(-1, 0, -1, 640, bg_color);putRectangleAbs(-1, 470, -1, 471, menu_border);putRectangleAbs(-1, 472, -1, 500, menu_bgcolor);}x=6; y=6; w=452; h=490;if(grMode){w=948; h=440;}newTextArea('EXPLANATION', x, y, w, h, 24, '#000', '#fff');e=document.getElementById('EXPLANATION');e.style.fontFamily='serif';e.style.overflow='auto';e.style.lineHeight='1.5em';e.style.padding=Math.floor(8*rRatio)+'px '+Math.floor(8*rRatio)+'px '+Math.floor(16*rRatio)+'px';e.innerHTML='<h1 id="TOP_AP" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0 0 1em; text-align: center; ">三人麻雀について</h1>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li><a style="color: #ff0; " href="#HOW_TO_OP">操作方法</a></li>'+'<li><a style="color: #ff0; " href="#RULES_DETAILS">ルール細則</a></li>'+'<li><a style="color: #ff0; " href="#YAKU_DETAILS">役細則</a></li>'+'</ul><hr style="display: block; color: #ccc; background: #ccc; border: 1px solid; margin: 1em 0; padding: 0; " />'+'<h2 id="HOW_TO_OP" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0.7em 0 0; ">操作方法</h2>'+'<nav style="display: block; margin: 0 0 0.5em; font-size: 80%; padding: 0 0 0 1em; "><a style="color: #ff0; " href="#TOP_AP">▲先頭</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#RULES_DETAILS">▽次節</a></nav>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>画面の下に、手牌が拡大されて表示されます。<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li><span style="color: #ff0; ">端末を縦向きでご利用の場合</span>、通常は右側を表\示しますので、左側の牌を指定したい場合は、<samp style="background: rgb(198, 222, 180); color: #000; margin: 0 0.2em; padding: 0.1em; white-space: nowrap; ">左側</samp>をタップ/クリックしてください。<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>左右どちらかにスワイプする事でも手牌の左右表示切替が出来ます。</li>'+'<li>大画面の端末では、拡大されていない手牌をタップ/クリックする事も出来ます。</li>'+'</ul></li>'+'<li><span style="color: #ff0; ">端末を横向きでご利用の場合</span>は、手牌全てが拡大されて表示されますので、その中から選択したい牌をタップ/クリックしてください。</li>'+'</ul></li>'+'<li>他者の打牌に対し、何もせず先に進める場合は<samp style="background: rgb(198, 222, 180); color: #000; margin: 0 0.2em; padding: 0.1em; white-space: nowrap; ">進行</samp>をタップ/クリックします。</li>'+'<li>打牌として北・万子を指定した場合、それらは打牌されず抜きドラとして扱われます。</li>'+'</ul>'+'<h2 id="RULES_DETAILS" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0.7em 0 0; ">ルール細則</h2>'+'<nav style="display: block; margin: 0 0 0.5em; font-size: 80%; padding: 0 0 0 1em; "><a style="color: #ff0; " href="#TOP_AP">▲先頭</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#HOW_TO_OP">△前節</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#YAKU_DETAILS">▽次節</a></nav>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>九局(連荘を含む)を以て一試合とする。</li>'+'<li>30点持ちの50点返し。</li>'+'<li>一翻縛り。但し五本場から両翻縛り。</li>'+'<li>鳴断, 先付及び形式聴牌は以下から選択：<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>鳴断, 先付, 形式聴牌とも有り。</li>'+'<li>鳴断無し、先付, 形式聴牌有り。</li>'+'<li>鳴断無しの完全先付で門前でない形式聴牌・片和了聴牌は無効。</li>'+'</ul></li>'+'<li>持点が零点未満で半荘打切。</li>'+'<li>万子は一・九のみ使用。</li>'+'<li>万子と北は抜きドラとする。<ul>'+'<li>抜きドラはポンの直後には抜けない。</li>'+'<li>抜きドラは搶槓出来ます。</li>'+'<li>抜きドラ直後の嶺上牌で嶺上開花となる。</li>'+'<li>抜きドラでは一発・開局一巡内の権利は消えない。</li>'+'<li>手中でも使った場合抜きドラとしての点数は附与されない。</li>'+'<li>槓ドラ, 裏ドラ及び一発有り。槓裏ドラはなし。</li></ul></li>'+'<li>現物の鳴直しは不可。</li>'+'<li>両家和の有無はゲーム前に選択可。</li>'+'<li>立直料は無料。</li>'+'<li>振聴立直有り。自分の次の摸牌が残っていない場合の立直は不可。</li>'+'<li>立直後の暗槓は孤立した暗刻の四枚目を摸牌した場合のみ可能。</li>'+'<li>振聴での栄和は原則として禁止。但し国士無双に限り現物以外で栄和可。</li>'+'<li>国士無双に限り暗槓を搶槓出来る。</li>'+'<li>大明槓の嶺上開花は両者払い。</li>'+'<li>海底・海底直前の槓は不可。</li>'+'<li>荒牌は連荘、不聴罰符は場に 6点(形式聴牌でも有効)。</li>'+'<li>九種&#20040;九倒牌は平局・連荘とする。</li>'+'</ul>'+'<h2 id="YAKU_DETAILS" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0.7em 0 0; ">役細則</h2>'+'<nav style="display: block; margin: 0 0 0.5em; font-size: 80%; padding: 0 0 0 1em; "><a style="color: #ff0; " href="#TOP_AP">▲先頭</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#RULES_DETAILS">△前節</a></nav>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>摸和平和有り。</li>'+'<li>荘家の和了では 1点加算。</li>'+'<li>満貫は50点とする。</li>'+'<li>役満貫は 100点。重複はない。</li>'+'<li>&#20040;九振切(流し満貫)は他者に打牌を喰われないだけでなく、自らも一切チー, ポン, 槓してはならない。</li>'+'<li>十三不搭は満貫とする。</li>'+'<li>開局一巡内の和了を人和とし、満貫とする。</li>'+'<li>荘家第一打牌での栄和と散家第一摸牌での摸和もいずれも地和とする。</li>'+'<li>緑一色には緑発は不要。</li>'+'<li>九蓮宝燈は和了した形が準じていれば成立する。また、万子でなくても可。</li>'+'<li>連続する七数位の筒子の清一色七対子を大車輪とする。</li>'+'<li>四槓子と言えども、雀頭を完成させないと和了にならない。</li>'+'</ul>';x=390; y=558;if(grMode){x=870; y=502;}var s=grMode ? '開　始' : '[#]開始';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(14, x, y+1, 89, 42, '#');makeClickable(14, x, y, 60, 1, '-');x-=90;s=grMode ? '菜　単' : '[*]菜単';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(10, x, y+1, 89, 40, '*');x=0;s=grMode ? 'ルール' : '[9] ﾙｰﾙ ';putRectangle(x, y, 102, 43, button_color);drawText(s, x+51, y+9, 84, 24, false, 24, 24, null, button_text, 'center');makeClickable(9, x, y+1, 102, 40, '9');x=0; y=690;if(grMode){ x=240; y=610; }newTextArea('CREDIT', x, y, 480, 32, 24, 'transparent', '#fff');var e=document.getElementById('CREDIT');e.style.fontFamily='serif';e.style.textAlign='center';e.innerHTML=copyright_credit;STATUS_DISP_2('開始前に、上記をお確かめください。');inputKey=-1;timeout_hnd=setTimeout('GAME_SAMMA_EXP_KEY(); ', 10);}function GAME_SAMMA_EXP_KEY(){if(timeout_hnd) clearTimeout(timeout_hnd);i=Math.random();if(inputKey==14){timeout_hnd=setTimeout('BANZHUANG_START(); ', 10);return;}if(inputKey==10){timeout_hnd=setTimeout('MAIN_START(); ', 10);return;}if(inputKey==9){timeout_hnd=setTimeout('SEL_SAMMA_YAKU(); ', 10);return;}inputKey=-1;timeout_hnd=setTimeout('GAME_SAMMA_EXP_KEY(); ', 10);}function SEL_SAMMA_YAKU(){if(timeout_hnd) clearTimeout(timeout_hnd);rule.yakitori=rule.goshugi=0;rule.yaku.yiseXshun=0;rule.yaku.Xlianke=0;rule.yaku.daisharin=0;rule.yaku.shisanbuta=0;rule.yaku.gang_buri=0;rule.yaku.benikujaku=0;rule.yakitori=rule.goshugi=0;rule.liangjiahe_sel=0;try {rule.yakitori=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_YAKITORI')) || 0;rule.goshugi=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_GOSHUGI')) || 0;rule.liangjiahe_sel=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_SEL_LIANGJIAHE')) || 0;rule.kuitan_sakizuke_sel=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_SEL_KUITAN')) || 0;rule.yaku.yiseXshun=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_YAKU_YISEXSHUN')) || 0;rule.yaku.Xlianke=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_YAKU_XLIANKE')) || 0;rule.yaku.daisharin=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_YAKU_DAISHARIN')) || 0;rule.yaku.shisanbuta=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_YAKU_SHISANBUTA')) || 0;rule.yaku.gang_buri=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_YAKU_GANG_BURI')) || 0;rule.yaku.benikujaku=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_YAKU_BENIKUJAKU')) || 0;}catch(e){ ; }inputKey=-1;gmode_name='三人麻雀';SEL_YAKU_RULES_str_exp='GAME_SAMMA_EXP';SEL_YAKU_RULES_str_prev='';SEL_YAKU_RULES_num=0;timeout_hnd=setTimeout('SEL_YAKU_RULES(); ', 10);}function GAME_REACH3P_EXP(){if(timeout_hnd) clearTimeout(timeout_hnd);initCanvas(bg_color);if(!grMode){putRectangleAbs(-1, 0, -1, 719, bg_color);putRectangleAbs(-1, 520, -1, 521, menu_border);putRectangleAbs(-1, 522, -1, 555, menu_bgcolor);}else {putRectangleAbs(-1, 0, -1, 640, bg_color);putRectangleAbs(-1, 470, -1, 471, menu_border);putRectangleAbs(-1, 472, -1, 500, menu_bgcolor);}x=6; y=6; w=452; h=490;if(grMode){w=948; h=440;}newTextArea('EXPLANATION', x, y, w, h, 24, '#000', '#fff');e=document.getElementById('EXPLANATION');e.style.fontFamily='serif';e.style.overflow='auto';e.style.lineHeight='1.5em';e.style.padding=Math.floor(8*rRatio)+'px '+Math.floor(8*rRatio)+'px '+Math.floor(16*rRatio)+'px';e.innerHTML='<h1 id="TOP_AP" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0 0 1em; text-align: center; ">三人リーチ麻雀について</h1>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li><a style="color: #ff0; " href="#HOW_TO_OP">操作方法</a></li>'+'<li><a style="color: #ff0; " href="#RULES_DETAILS">ルール細則</a></li>'+'<li><a style="color: #ff0; " href="#YAKU_DETAILS">役細則</a></li>'+'<li><a style="color: #ff0; " href="#SPECIAL_RULES">特殊ルール</a><ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li><a style="color: #ff0; " href="#AOTENJYO">青天井ルール</a></li>'+'<li><a style="color: #ff0; " href="#SEMI_AOTENJYO">準青天井ルール</a></li>'+'</ul><hr style="display: block; color: #ccc; background: #ccc; border: 1px solid; margin: 1em 0; padding: 0; " />'+'<h2 id="HOW_TO_OP" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0.7em 0 0; ">操作方法</h2>'+'<nav style="display: block; margin: 0 0 0.5em; font-size: 80%; padding: 0 0 0 1em; "><a style="color: #ff0; " href="#TOP_AP">▲先頭</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#RULES_DETAILS">▽次節</a></nav>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>画面の下に、手牌が拡大されて表示されます。<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li><span style="color: #ff0; ">端末を縦向きでご利用の場合</span>、通常は右側を表\示しますので、左側の牌を指定したい場合は、<samp style="background: rgb(198, 222, 180); color: #000; margin: 0 0.2em; padding: 0.1em; white-space: nowrap; ">左側</samp>をタップ/クリックしてください。<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>左右どちらかにスワイプする事でも手牌の左右表示切替が出来ます。</li>'+'<li>大画面の端末では、拡大されていない手牌をタップ/クリックする事も出来ます。</li>'+'</ul></li>'+'<li><span style="color: #ff0; ">端末を横向きでご利用の場合</span>は、手牌全てが拡大されて表示されますので、その中から選択したい牌をタップ/クリックしてください。</li>'+'</ul></li>'+'<li>他者の打牌に対し、何もせず先に進める場合は<samp style="background: rgb(198, 222, 180); color: #000; margin: 0 0.2em; padding: 0.1em; white-space: nowrap; ">進行</samp>をタップ/クリックします。</li>'+'<li>打牌として北を指定した場合は打牌されず抜きドラとして扱われます。但し海底では打牌として扱います。</li>'+'</ul>'+'<h2 id="RULES_DETAILS"  style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0.7em 0 0; ">ルール細則</h2>'+'<nav style="display: block; margin: 0 0 0.5em; font-size: 80%; padding: 0 0 0 1em; "><a style="color: #ff0; " href="#TOP_AP">▲先頭</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#HOW_TO_OP">△前節</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#YAKU_DETAILS">▽次節</a></nav>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>一翻縛り。但し五本場から両翻縛り。</li>'+'<li>鳴断, 先付及び形式聴牌は以下から選択：<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>鳴断, 先付, 形式聴牌とも有り。</li>'+'<li>鳴断無し、先付, 形式聴牌有り。</li>'+'<li>鳴断無しの完全先付で門前でない形式聴牌・片和了聴牌は無効。</li>'+'</ul></li>'+'<li>最終局での荘家和了終了の有無はゲーム前に選択可。</li>'+'<li>最終局での荘家和了終了の有無はゲーム前に選択可。</li>'+'<li>持点が零点未満で半荘打切の有無はゲーム前に選択可。<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  "><li>但し<a style="color: #ff0; " href="#AOTENJYO">青天井ルール</a>を採用している場合は常に無しとする。</li><li>有りとした場合、持点が千点未満では立直出来ない。</li></ul></li>'+'<li>槓ドラ, 裏ドラ及び一発有り。槓裏ドラの有無はゲーム前に選択可。</li>'+'<li>現物の鳴直しは不可。</li>'+'<li>両家和の扱いはゲーム前に選択可。<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  "><li>有りとした場合、和了者の立直料は和了者が取り、それ以外の供託点は上家取り。</li></ul></li>'+'<li>振聴立直有り。自分の次の摸牌が残っていない場合の立直は不可。</li>'+'<li>立直後の暗槓は孤立した暗刻の四枚目を摸牌した場合のみ可能。</li>'+'<li>振聴での栄和は原則として禁止。但し国士無双に限り現物以外で栄和可。</li>'+'<li>国士無双に限り暗槓を搶槓出来る。</li>'+'<li>大明槓の嶺上開花は摸和扱いとする。</li>'+'<li>九種&#20040;九倒牌, 四風子連打, 三家和, 四家立直及び四槓算了は平局・連荘とする。</li>'+'<li>九種&#20040;九倒牌は平局・連荘とする。</li>'+'</ul>'+'<h2 id="YAKU_DETAILS" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0.7em 0 0; ">役細則</h2>'+'<nav style="display: block; margin: 0 0 0.5em; font-size: 80%; padding: 0 0 0 1em; "><a style="color: #ff0; " href="#TOP_AP">▲先頭</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#RULES_DETAILS">△前節</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#SPECIAL_RULES">▽次節</a></nav>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>摸和平和の扱いと七対子の符は<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>摸和平和無し(30符計算)で七対子は30符</li>'+'<li>摸和平和有り(20符計算)で七対子は形式上25符</li>'+'</ul>から選択可。</li>'+'<li>喰い平和形の栄和では10符加算。</li>'+'<li>連風牌の雀頭は 4符とする。</li>'+'<li>三倍満貫は十三翻以上、四倍満貫は十五翻以上で成立。</li>'+'<li>役満貫は四倍満貫。ダブル役満はなし。</li>'+'<li>&#20040;九振切(流し満貫)は他者に打牌を喰われないだけでなく、自らも一切チー, ポン, 槓してはならない。</li>'+'<li>十三不搭は満貫とする。</li>'+'<li>開局一巡内の和了を人和とし、倍満とする。</li>'+'<li>荘家第一打牌での栄和と散家第一摸牌での摸和もいずれも地和とする。</li>'+'<li>緑一色には緑発は不要。</li>'+'<li>九蓮宝燈は和了した形が準じていれば成立する。</li>'+'<li>連続する七数位の筒子の清一色七対子を大車輪とする。</li>'+'<li>四槓子と言えども、雀頭を完成させないと和了にならない。</li>'+'</ul>'+'<h2 id="SPECIAL_RULES" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0.7em 0 0; ">特殊ルール</h2>'+'<h3 id="AOTENJYO" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0.7em 0 0; ">青天井ルール</h3>'+'<nav style="display: block; margin: 0 0 0.5em; font-size: 80%; padding: 0 0 0 1em; "><a style="color: #ff0; " href="#TOP_AP">▲先頭</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#YAKU_DETAILS">△前節</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#SEMI_AOTENJYO">▽次節</a></nav>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>青天井ルールでは、荘家 150億点、散家 100億点を上限とする。</li>'+'<li>役満貫は十五翻とする。概念上下位となる役は加算されない。</li>'+'<li>&#20040;九振切(流し満貫)は三十符五翻とする。ドラなど他の翻数は一切加算されない。</li>'+'<li>十三不搭は三十符五翻とする。ドラ以外の翻数は加算されない。</li>'+'<li>国士無双は常に三十符として計算する。</li>'+'<li>青天井ルールを選択した場合、途中で箱割れになっても続行とする。</li>'+'</ul>'+'<h3 id="SEMI_AOTENJYO" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0.7em 0 0; ">準青天井ルール</h3>'+'<nav style="display: block; margin: 0 0 0.5em; font-size: 80%; padding: 0 0 0 1em; "><a style="color: #ff0; " href="#TOP_AP">▲先頭</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#AOTENJYO">△前節</a></nav>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>三倍満貫以降、両翻毎に満貫を加算する。</li>'+'<li>役満貫は十五翻とする。概念上下位となる役は加算されない。</li>'+'<li>&#20040;九振切(流し満貫)は三十符五翻とする。ドラなど他の翻数は一切加算されない。</li>'+'<li>十三不搭は三十符五翻とする。ドラ以外の翻数は加算されない。</li>'+'<li>国士無双は常に三十符として計算する。</li>'+'<li>準青天井ルールを選択した場合、途中で箱割れになっても続行とする。</li>'+'</ul>';x=390; y=558;if(grMode){x=870; y=502;}var s=grMode ? '開　始' : '[#]開始';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(14, x, y+1, 89, 42, '#');makeClickable(14, x, y, 60, 1, '-');x-=90;s=grMode ? '菜　単' : '[*]菜単';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(10, x, y+1, 89, 40, '*');x=0; y=690;if(grMode){ x=240; y=610; }newTextArea('CREDIT', x, y, 480, 32, 24, 'transparent', '#fff');var e=document.getElementById('CREDIT');e.style.fontFamily='serif';e.style.textAlign='center';e.innerHTML=copyright_credit;STATUS_DISP_2('開始前に、上記をお確かめください。');inputKey=-1;timeout_hnd=setTimeout('GAME_REACH3P_EXP_KEY(); ', 10);}function GAME_REACH3P_EXP_KEY(){if(timeout_hnd) clearTimeout(timeout_hnd);i=Math.random();if(inputKey==14){timeout_hnd=setTimeout('SEL_REACH3P(); ', 10);return;}else if(inputKey==10){timeout_hnd=setTimeout('MAIN_START(); ', 10);return;}inputKey=-1;timeout_hnd=setTimeout('GAME_REACH3P_EXP_KEY(); ', 10);}function SEL_REACH3P(){if(timeout_hnd) clearTimeout(timeout_hnd);scre[0]=scre[1]=scre[2]=scre[3]=sctt[0]=sctt[1]=sctt[2]=sctt[3]=0;qiduizi_fu=mo8pinghe=0;rule.zhuangfeng=-1; rule.uradora_init=1;rule.aotenjyo=0;rule.yakitori=rule.goshugi=0;rule.yaku.yiseXshun=0;rule.yaku.Xlianke=0;rule.yaku.daisharin=0;rule.yaku.shisanbuta=0;rule.yaku.gang_buri=0;rule.yaku.benikujaku=0;rule.yakitori=rule.goshugi=0;try {qiduizi_fu=mo8pinghe=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_RM_MO8PINGHE')) || 0;rule.zhuangfeng=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_RM3P_ZHUANGFENG')) || 1;rule.uradora_init=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_RM_URADORA')) || 1;rule.kuitan_sakizuke_sel=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_SEL_KUITAN')) || 0;rule.aotenjyo=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_RM_AOTENJYO')) || 0;rule.yakitori=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_YAKITORI')) || 0;rule.goshugi=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_GOSHUGI')) || 0;rule.yaku.yiseXshun=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_YAKU_YISEXSHUN')) || 0;rule.yaku.Xlianke=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_YAKU_XLIANKE')) || 0;rule.yaku.daisharin=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_YAKU_DAISHARIN')) || 0;rule.yaku.shisanbuta=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_YAKU_SHISANBUTA')) || 0;rule.yaku.gang_buri=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_YAKU_GANG_BURI')) || 0;rule.yaku.benikujaku=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_YAKU_BENIKUJAKU')) || 0;}catch(e){ ; }if(rule.zhuangfeng!=-1) rule.zhuangfeng=1;inputKey=-1;timeout_hnd=setTimeout('SEL_REACH3P1(); ', 10);}function SEL_REACH3P1(){if(timeout_hnd) clearTimeout(timeout_hnd);var x=6, y=6, i, w, y1;initCanvas(bg_color);if(!grMode){putRectangleAbs(-1, 0, -1, 719, bg_color);putRectangleAbs(-1, 520, -1, 521, menu_border);putRectangleAbs(-1, 522, -1, 555, menu_bgcolor);}else {putRectangleAbs(-1, 0, -1, 640, bg_color);putRectangleAbs(-1, 470, -1, 471, menu_border);putRectangleAbs(-1, 472, -1, 500, menu_bgcolor);}x=22; y=6; w=436;var x1=240;if(grMode){x=42; x1=480; w=876;putRectangle(6, 6, 948, 463, '#000');}else {putRectangle(6, 6, 468, 514, '#000');}drawTextMincho('三人リーチ麻雀ルール設定'+String.fromCharCode(9312)+' (基本)', x1, y+16, 48, 24, true, 24, 24, null, '#ff0', 'center');y1=y+66;s=grMode ? '' : '[0] ';drawTextMincho(s+'荘風廻し', x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s='東風戦(半々荘戦)';if(rule.zhuangfeng==1) s='東-南廻し(半荘戦)';drawTextMincho(s, x+w, y1, w, 24, true, 24, 24, null, '#fff', 'right');makeClickable(0, x, y1, w, 40, '0');y1+=45;s=grMode ? '' : '[1] ';drawTextMincho(s+'鳴断/先付', x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s='鳴断有り/先付有り';if(rule.kuitan_sakizuke_sel>1) s='鳴断無し/完全先付';else if(rule.kuitan_sakizuke_sel>0) s='鳴断無し/先付有り';drawTextMincho(s, x+w, y1, w, 24, true, 24, 24, null, '#fff', 'right');makeClickable(1, x, y1, w, 40, '1');y1+=45;s=grMode ? '' : '[2] ';drawTextMincho(s+'途中での箱割終了', x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s='マイナスで終了';if(rule.dobon_sel) s='無し(続行)';drawTextMincho(s, x+w, y1, w, 24, true, 24, 24, null, '#fff', 'right');makeClickable(2, x, y1, w, 40, '2');y1+=45;s=grMode ? '' : '[3] ';drawTextMincho(s+'最終局荘家の和了終了', x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s='一位で終了';if(rule.agariyame_sel) s='無し(続行)';drawTextMincho(s, x+w, y1, w, 24, true, 24, 24, null, '#fff', 'right');makeClickable(3, x, y1, w, 40, '3');y1+=45;s=grMode ? '' : '[4] ';drawTextMincho(s+'槓裏ドラ', x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s='無し(初ドラのみ)';if(rule.uradora_init==2) s='有り(全ドラ有効)';drawTextMincho(s, x+w, y1, w, 24, true, 24, 24, null, '#fff', 'right');makeClickable(4, x, y1, w, 40, '4');y1+=45;s=grMode ? '' : '[5] ';drawTextMincho(s+'両家和', x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s='有り(双方の和了が有効)';if(rule.liangjiahe_sel) s='無し(頭跳ね)';drawTextMincho(s, x+w, y1, w, 24, true, 24, 24, null, '#fff', 'right');makeClickable(5, x, y1, w, 40, '5');y1+=45;s=grMode ? '' : '[6] ';drawTextMincho(s+'摸和平和・七対子の扱い', x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s='摸和平和無し(30符)/七対子30符';if(mo8pinghe) s='摸和平和有り(20符)/七対子25符';i=0; if(!grMode) i=40;drawTextMincho(s, x+w, y1+i, w, 24, true, 24, 24, null, '#fff', 'right');makeClickable(6, x, y1, w, i+40, '6');y1+=i+45;if(!grMode){drawTextMincho('※変更したい項目をタップ/クリックするか、', x, y1, 276, 24, false, 24, 24, null, '#fff', 'left');drawTextMincho('項目に表示されたダイヤルを押して下さい。', x, y1+26, 276, 24, false, 24, 24, null, '#fff', 'left');}else {drawTextMincho('※変更項目をタップ/クリックすると内容が切り替わります。', x, y1, 276, 24, false, 24, 24, null, '#fff', 'left');}x=390; y=558;if(grMode){x=870; y=502;}var s=grMode ? '開　始' : '[#]開始';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(14, x, y+1, 89, 42, '#');makeClickable(14, x, y, 60, 1, '-');x-=90;s=grMode ? '菜　単' : '[*]菜単';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(10, x, y+1, 89, 40, '*');x-=90;s=grMode ? '説　明' : '[7]説明';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(7, x, y+1, 89, 40, '7');x=0;s=grMode ? 'ルール'+String.fromCharCode(9313) : '[9]ﾙｰﾙ'+String.fromCharCode(9313);putRectangle(x, y, 102, 43, button_color);drawText(s, x+51, y+9, 84, 24, false, 24, 24, null, button_text, 'center');makeClickable(9, x, y+1, 102, 40, '9');x=0; y=690;if(grMode){ x=240; y=610; }newTextArea('CREDIT', x, y, 480, 32, 24, 'transparent', '#fff');var e=document.getElementById('CREDIT');e.style.fontFamily='serif';e.style.textAlign='center';e.innerHTML=copyright_credit;STATUS_DISP_2('ゲーム開始前に、ルールを選択してください。');inputKey=-1;timeout_hnd=setTimeout('SEL_REACH3P_KEY(); ', 10);}function SEL_REACH3P_KEY(){if(timeout_hnd) clearTimeout(timeout_hnd);var x=6, y=6, i;i=Math.random();if(inputKey==0){if(rule.zhuangfeng==-1) rule.zhuangfeng=1;else rule.zhuangfeng=-1;inputKey=-1;timeout_hnd=setTimeout('SEL_REACH3P1(); ', 10);return;}if(inputKey==1){if(++rule.kuitan_sakizuke_sel>2) rule.kuitan_sakizuke_sel=0;inputKey=-1;timeout_hnd=setTimeout('SEL_REACH3P1(); ', 10);return;}if(inputKey==2){rule.dobon_sel=rule.dobon_sel ? 0 : 1;inputKey=-1;timeout_hnd=setTimeout('SEL_REACH3P1(); ', 10);return;}if(inputKey==3){rule.agariyame_sel=rule.agariyame_sel ? 0 : 1;inputKey=-1;timeout_hnd=setTimeout('SEL_REACH3P1(); ', 10);return;}if(inputKey==4){if(rule.uradora_init==1) rule.uradora_init=2;else rule.uradora_init=1;inputKey=-1;timeout_hnd=setTimeout('SEL_REACH3P1(); ', 10);return;}if(inputKey==5){rule.liangjiahe_sel=rule.liangjiahe_sel ? 0 : 1;inputKey=-1;timeout_hnd=setTimeout('SEL_REACH3P1(); ', 10);return;}if(inputKey==6){mo8pinghe=mo8pinghe ? 0 : 1;inputKey=-1;timeout_hnd=setTimeout('SEL_REACH3P1(); ', 10);return;}if(inputKey<0){timeout_hnd=setTimeout('SEL_REACH3P_KEY(); ', 10);return;}try {rule_storage.setItem('GAME_TINY_MAHJONG_RM3P_ZHUANGFENG', rule.zhuangfeng);rule_storage.setItem('GAME_TINY_MAHJONG_RM_URADORA', rule.uradora_init);rule_storage.setItem('GAME_TINY_MAHJONG_RM_MO8PINGHE', mo8pinghe);rule_storage.setItem('GAME_TINY_MAHJONG_SEL_DOBON', rule.dobon_sel);rule_storage.setItem('GAME_TINY_MAHJONG_SEL_AGARIYAME', rule.agariyame_sel);rule_storage.setItem('GAME_TINY_MAHJONG_SEL_LIANGJIAHE', rule.liangjiahe_sel);rule_storage.setItem('GAME_TINY_MAHJONG_SEL_KUITAN', rule.kuitan_sakizuke_sel);}catch(e){ ; }if(inputKey==14){timeout_hnd=setTimeout('BANZHUANG_START(); ', 10);return;}if(inputKey==10){timeout_hnd=setTimeout('MAIN_START(); ', 10);return;}if(inputKey==9){timeout_hnd=setTimeout('SEL_REACH3P_P2(); ', 10);return;}if(inputKey==7){timeout_hnd=setTimeout('GAME_REACH3P_EXP(); ', 10);return;}inputKey=-1;timeout_hnd=setTimeout('SEL_REACH3P_KEY(); ', 10);}function SEL_REACH3P_P2(){if(timeout_hnd) clearTimeout(timeout_hnd);gmode_name='三人リーチ麻雀';SEL_YAKU_RULES_str_exp='GAME_REACH3P_EXP';SEL_YAKU_RULES_str_prev='SEL_REACH3P';SEL_YAKU_RULES_str_next='SEL_REACH3P_P3';SEL_YAKU_RULES_num=2;inputKey=-1;timeout_hnd=setTimeout('SEL_SPECIAL_RULES(); ', 10);}function SEL_REACH3P_P3(){if(timeout_hnd) clearTimeout(timeout_hnd);inputKey=-1;gmode_name='三人リーチ麻雀';SEL_YAKU_RULES_str_exp='GAME_REACH3P_EXP';SEL_YAKU_RULES_str_prev='SEL_REACH3P_P2';SEL_YAKU_RULES_num=3;timeout_hnd=setTimeout('SEL_YAKU_RULES(); ', 10);}function GAME_BEINUKI_EXP(){if(timeout_hnd) clearTimeout(timeout_hnd);initCanvas(bg_color);if(!grMode){putRectangleAbs(-1, 0, -1, 719, bg_color);putRectangleAbs(-1, 520, -1, 521, menu_border);putRectangleAbs(-1, 522, -1, 555, menu_bgcolor);}else {putRectangleAbs(-1, 0, -1, 640, bg_color);putRectangleAbs(-1, 470, -1, 471, menu_border);putRectangleAbs(-1, 472, -1, 500, menu_bgcolor);}x=6; y=6; w=452; h=490;if(grMode){w=948; h=440;}newTextArea('EXPLANATION', x, y, w, h, 24, '#000', '#fff');e=document.getElementById('EXPLANATION');e.style.fontFamily='serif';e.style.overflow='auto';e.style.lineHeight='1.5em';e.style.padding=Math.floor(8*rRatio)+'px '+Math.floor(8*rRatio)+'px '+Math.floor(16*rRatio)+'px';e.innerHTML='<h1 id="TOP_AP" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0 0 1em; text-align: center; ">北抜きについて</h1>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li><a style="color: #ff0; " href="#HOW_TO_OP">操作方法</a></li>'+'<li><a style="color: #ff0; " href="#RULES_DETAILS">ルール細則</a></li>'+'<li><a style="color: #ff0; " href="#YAKU_DETAILS">役細則</a></li>'+'</ul><hr style="display: block; color: #ccc; background: #ccc; border: 1px solid; margin: 1em 0; padding: 0; " />'+'<h2 id="HOW_TO_OP" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0.7em 0 0; ">操作方法</h2>'+'<nav style="display: block; margin: 0 0 0.5em; font-size: 80%; padding: 0 0 0 1em; "><a style="color: #ff0; " href="#TOP_AP">▲先頭</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#RULES_DETAILS">▽次節</a></nav>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>画面の下に、手牌が拡大されて表示されます。<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li><span style="color: #ff0; ">端末を縦向きでご利用の場合</span>、通常は右側を表\示しますので、左側の牌を指定したい場合は、<samp style="background: rgb(198, 222, 180); color: #000; margin: 0 0.2em; padding: 0.1em; white-space: nowrap; ">左側</samp>をタップ/クリックしてください。<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>左右どちらかにスワイプする事でも手牌の左右表示切替が出来ます。</li>'+'<li>大画面の端末では、拡大されていない手牌をタップ/クリックする事も出来ます。</li>'+'</ul></li>'+'<li><span style="color: #ff0; ">端末を横向きでご利用の場合</span>は、手牌全てが拡大されて表示されますので、その中から選択したい牌をタップ/クリックしてください。</li>'+'</ul></li>'+'<li>他者の打牌に対し、何もせず先に進める場合は<samp style="background: rgb(198, 222, 180); color: #000; margin: 0 0.2em; padding: 0.1em; white-space: nowrap; ">進行</samp>をタップ/クリックします。</li>'+'<li>打牌として北を指定した場合は打牌されず抜きドラとして扱われます。但し海底では打牌として扱います。</li>'+'</ul>'+'<h2 id="RULES_DETAILS" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0.7em 0 0; ">ルール細則</h2>'+'<nav style="display: block; margin: 0 0 0.5em; font-size: 80%; padding: 0 0 0 1em; "><a style="color: #ff0; " href="#TOP_AP">▲先頭</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#HOW_TO_OP">△前節</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#YAKU_DETAILS">▽次節</a></nav>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>九局(連荘を含む)を以て一試合とする。</li>'+'<li>30点持ちの50点返し。</li>'+'<li>縛りはないが、役がない場合はカラスとなり場に 6点の罰点。</li>'+'<li>持点が零点未満で半荘打切り。</li>'+'<li>万子は一・九のみ使用。</li>'+'<li>北は抜きドラとする。<ul>'+'<li>抜きドラはポンの直後には抜けない。</li>'+'<li>抜きドラは搶槓可。</li>'+'<li>抜きドラでは開局一巡内の権利は消えない。</li>'+'<li>手中でも使えますが、抜きドラとしての点数は附加されない。</li>'+'<li>槓ドラ, 裏ドラ有り。槓裏ドラは無し。</li></ul></li>'+'<li>和了時の嶺上牌二枚の次牌を嶺上ドラとする。</li>'+'<li>現物の鳴直しは不可。</li>'+'<li>両家和の有無はゲーム前に選択可。</li>'+'<li>立直料は無料。</li>'+'<li>振聴立直有り。自分の次の摸牌が残っていない場合の立直は不可。</li>'+'<li>立直後の暗槓は孤立した暗刻の四枚目を摸牌した場合のみ可能。</li>'+'<li>振聴での栄和は原則として禁止。但し国士無双に限り現物以外で栄和可。</li>'+'<li>国士無双に限り暗槓を搶槓出来る。</li>'+'<li>大明槓の嶺上開花は両者払いとする。</li>'+'<li>海底での槓は不可。</li>'+'<li>荒牌は連荘、不聴罰符は場に 6点(形式聴牌でも有効)。</li>'+'<li>九種&#20040;九倒牌は平局・連荘とする。</li>'+'</ul>'+'<h2 id="YAKU_DETAILS" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0.7em 0 0; ">役細則</h2>'+'<nav style="display: block; margin: 0 0 0.5em; font-size: 80%; padding: 0 0 0 1em; "><a style="color: #ff0; " href="#TOP_AP">▲先頭</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#RULES_DETAILS">△前節</a></nav>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>全てのドラ(表ドラ, 裏ドラ, 抜きドラ, 嶺上ドラ)は一枚 1翻の役とする。</li>'+'<li>門前清は 1翻す。</li>'+'<li>七対子は 3翻、清一色は 6翻、役満貫は12翻とする。</li>'+'<li>荘家の和了では 1点加算。</li>'+'<li>開局一巡内の和了を人和とする。</li>'+'<li>荘家第一打牌での栄和と散家第一摸牌での摸和もいずれも地和とする。</li>'+'<li>緑一色には緑発は不要。</li>'+'<li>九蓮宝燈は和了した形が準じていれば成立する。</li>'+'<li>連続する七数位の筒子の清一色七対子を大車輪とする。</li>'+'<li>四槓子と言えども、雀頭を完成させないと和了にならない。</li>'+'</ul>';x=390; y=558;if(grMode){x=870; y=502;}var s=grMode ? '開　始' : '[#]開始';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(14, x, y+1, 89, 42, '#');makeClickable(14, x, y, 60, 1, '-');x-=90;s=grMode ? '菜　単' : '[*]菜単';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(10, x, y+1, 89, 40, '*');x=0;s=grMode ? 'ルール' : '[9] ﾙｰﾙ ';putRectangle(x, y, 102, 43, button_color);drawText(s, x+51, y+9, 84, 24, false, 24, 24, null, button_text, 'center');makeClickable(9, x, y+1, 102, 40, '9');x=0; y=690;if(grMode){ x=240; y=610; }newTextArea('CREDIT', x, y, 480, 32, 24, 'transparent', '#fff');var e=document.getElementById('CREDIT');e.style.fontFamily='serif';e.style.textAlign='center';e.innerHTML=copyright_credit;STATUS_DISP_2('開始前に、上記をお確かめください。');inputKey=-1;timeout_hnd=setTimeout('GAME_BEINUKI_EXP_KEY(); ', 10);}function GAME_BEINUKI_EXP_KEY(){if(timeout_hnd) clearTimeout(timeout_hnd);i=Math.random();if(inputKey==14){timeout_hnd=setTimeout('BANZHUANG_START(); ', 10);return;}if(inputKey==10){timeout_hnd=setTimeout('MAIN_START(); ', 10);return;}if(inputKey==9){timeout_hnd=setTimeout('SEL_BEINUKI_YAKU(); ', 10);return;}inputKey=-1;timeout_hnd=setTimeout('GAME_BEINUKI_EXP_KEY(); ', 10);}function SEL_BEINUKI_YAKU(){if(timeout_hnd) clearTimeout(timeout_hnd);rule.yakitori=rule.goshugi=0;rule.liangjiahe_sel=0;rule.yaku.yiseXshun=0;rule.yaku.Xlianke=0;rule.yaku.daisharin=0;rule.yaku.shisanbuta=0;rule.yaku.gang_buri=0;rule.yaku.benikujaku=0;rule.yakitori=rule.goshugi=0;try {rule.yakitori=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_YAKITORI')) || 0;rule.goshugi=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_GOSHUGI')) || 0;rule.liangjiahe_sel=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_SEL_LIANGJIAHE')) || 0;rule.yaku.yiseXshun=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_YAKU_YISEXSHUN')) || 0;rule.yaku.Xlianke=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_YAKU_XLIANKE')) || 0;rule.yaku.daisharin=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_YAKU_DAISHARIN')) || 0;rule.yaku.shisanbuta=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_YAKU_SHISANBUTA')) || 0;rule.yaku.gang_buri=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_YAKU_GANG_BURI')) || 0;rule.yaku.benikujaku=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_YAKU_BENIKUJAKU')) || 0;}catch(e){ ; }inputKey=-1;gmode_name='北抜き';SEL_YAKU_RULES_str_exp='GAME_BEINUKI_EXP';SEL_YAKU_RULES_str_prev='';SEL_YAKU_RULES_num=0;timeout_hnd=setTimeout('SEL_YAKU_RULES(); ', 10);}function GAME_PENGLI_EXP(){if(timeout_hnd) clearTimeout(timeout_hnd);initCanvas(bg_color);if(!grMode){putRectangleAbs(-1, 0, -1, 719, bg_color);putRectangleAbs(-1, 520, -1, 521, menu_border);putRectangleAbs(-1, 522, -1, 555, menu_bgcolor);}else {putRectangleAbs(-1, 0, -1, 640, bg_color);putRectangleAbs(-1, 470, -1, 471, menu_border);putRectangleAbs(-1, 472, -1, 500, menu_bgcolor);}x=6; y=6; w=452; h=490;if(grMode){w=948; h=440;}newTextArea('EXPLANATION', x, y, w, h, 24, '#000', '#fff');e=document.getElementById('EXPLANATION');e.style.fontFamily='serif';e.style.overflow='auto';e.style.lineHeight='1.5em';e.style.padding=Math.floor(8*rRatio)+'px '+Math.floor(8*rRatio)+'px '+Math.floor(16*rRatio)+'px';e.innerHTML='<h1 id="TOP_AP" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0 0 1em; text-align: center; ">ポンリーについて</h1>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li><a style="color: #ff0; " href="#HOW_TO_OP">操作方法</a></li>'+'<li><a style="color: #ff0; " href="#RULES_DETAILS">ルール細則</a></li>'+'<li><a style="color: #ff0; " href="#YAKU_DETAILS">役細則</a></li>'+'</ul><hr style="display: block; color: #ccc; background: #ccc; border: 1px solid; margin: 1em 0; padding: 0; " />'+'<h2 id="HOW_TO_OP" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0.7em 0 0; ">操作方法</h2>'+'<nav style="display: block; margin: 0 0 0.5em; font-size: 80%; padding: 0 0 0 1em; "><a style="color: #ff0; " href="#TOP_AP">▲先頭</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#RULES_DETAILS">▽次節</a></nav>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>画面の下に、手牌が拡大されて表示されます。<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li><span style="color: #ff0; ">端末を縦向きでご利用の場合</span>、通常は右側を表\示しますので、左側の牌を指定したい場合は、<samp style="background: rgb(198, 222, 180); color: #000; margin: 0 0.2em; padding: 0.1em; white-space: nowrap; ">左側</samp>をタップ/クリックしてください。<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>左右どちらかにスワイプする事でも手牌の左右表示切替が出来ます。</li>'+'<li>大画面の端末では、拡大されていない手牌をタップ/クリックする事も出来ます。</li>'+'</ul></li>'+'<li><span style="color: #ff0; ">端末を横向きでご利用の場合</span>は、手牌全てが拡大されて表示されますので、その中から選択したい牌をタップ/クリックしてください。</li>'+'</ul></li>'+'<li>他者の打牌に対し、何もせず先に進める場合は<samp style="background: rgb(198, 222, 180); color: #000; margin: 0 0.2em; padding: 0.1em; white-space: nowrap; ">進行</samp>をタップ/クリックします。</li>'+'</ul>'+'<h2 id="RULES_DETAILS" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0.7em 0 0; ">ルール細則</h2>'+'<nav style="display: block; margin: 0 0 0.5em; font-size: 80%; padding: 0 0 0 1em; "><a style="color: #ff0; " href="#TOP_AP">▲先頭</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#HOW_TO_OP">△前節</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#YAKU_DETAILS">▽次節</a></nav>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>九局(連荘を含む)を以て一試合とする。</li>'+'<li>持点は 0点で開始。</li>'+'<li>立直縛り。門前でない場合も立直しないと和了不可。</li>'+'<li>和了時に壁牌から取った牌の次の数位の牌を色を問わず全てドラとする。海底での和了では壁牌がないためドラもない。</li>'+'<li>現物の鳴直しは可。</li>'+'<li>両家和の有無はゲーム開始前に選択可。</li>'+'<li>立直料は無料。</li>'+'<li>振聴立直有り。自分の次の摸牌が残っていない場合の立直は不可。</li>'+'<li>立直後の暗槓は孤立した暗刻の四枚目を摸牌した場合のみ可能。</li>'+'<li>振聴での栄和は原則として禁止。</li>'+'<li>王牌無し。海底の槓は不可。</li>'+'<li>荒牌は連荘、不聴罰符は無し。</li>'+'</ul>'+'<h2 id="YAKU_DETAILS" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0.7em 0 0; ">役細則</h2>'+'<nav style="display: block; margin: 0 0 0.5em; font-size: 80%; padding: 0 0 0 1em; "><a style="color: #ff0; " href="#TOP_AP">▲先頭</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#RULES_DETAILS">△前節</a></nav>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>摸和平和無し。</li>'+'<li>門前では 1翻増し。</li>'+'<li>立直のみを 1点とし、 1翻毎に倍々する(30翻を上限とする)。</li>'+'<li>役満貫は 15翻役とする。</li>'+'<li>積み符はなし。</li>'+'</ul>'+'';x=390; y=558;if(grMode){x=870; y=502;}var s=grMode ? '開　始' : '[#]開始';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(14, x, y+1, 89, 42, '#');makeClickable(14, x, y, 60, 1, '-');x-=90;s=grMode ? '菜　単' : '[*]菜単';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(10, x, y+1, 89, 40, '*');x=0;s=grMode ? 'ルール' : '[9] ﾙｰﾙ ';putRectangle(x, y, 102, 43, button_color);drawText(s, x+51, y+9, 84, 24, false, 24, 24, null, button_text, 'center');makeClickable(9, x, y+1, 102, 40, '9');x=0; y=690;if(grMode){ x=240; y=610; }newTextArea('CREDIT', x, y, 480, 32, 24, 'transparent', '#fff');var e=document.getElementById('CREDIT');e.style.fontFamily='serif';e.style.textAlign='center';e.innerHTML=copyright_credit;STATUS_DISP_2('開始前に、上記をお確かめください。');inputKey=-1;timeout_hnd=setTimeout('GAME_PENGLI_EXP_KEY(); ', 10);}function GAME_PENGLI_EXP_KEY(){if(timeout_hnd) clearTimeout(timeout_hnd);i=Math.random();if(inputKey==14){timeout_hnd=setTimeout('BANZHUANG_START(); ', 10);return;}if(inputKey==10){timeout_hnd=setTimeout('MAIN_START(); ', 10);return;}if(inputKey==9){timeout_hnd=setTimeout('SEL_PENGLI_YAKU(); ', 10);return;}inputKey=-1;timeout_hnd=setTimeout('GAME_PENGLI_EXP_KEY(); ', 10);}function SEL_PENGLI_YAKU(){if(timeout_hnd) clearTimeout(timeout_hnd);rule.yaku.yiseXshun=0;rule.yaku.Xlianke=0;rule.yaku.daisharin=0;rule.yaku.shisanbuta=0;rule.yaku.gang_buri=0;rule.yaku.benikujaku=0;rule.liangjiahe_sel=0;try {rule.liangjiahe_sel=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_SEL_LIANGJIAHE')) || 0;rule.yaku.yiseXshun=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_YAKU_YISEXSHUN')) || 0;rule.yaku.Xlianke=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_YAKU_XLIANKE')) || 0;rule.yaku.daisharin=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_YAKU_DAISHARIN')) || 0;rule.yaku.shisanbuta=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_YAKU_SHISANBUTA')) || 0;rule.yaku.gang_buri=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_YAKU_GANG_BURI')) || 0;rule.yaku.benikujaku=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_YAKU_BENIKUJAKU')) || 0;}catch(e){ ; }inputKey=-1;gmode_name='ポンリー';SEL_YAKU_RULES_str_exp='GAME_PENGLI_EXP';SEL_YAKU_RULES_str_prev='';SEL_YAKU_RULES_num=0;timeout_hnd=setTimeout('SEL_YAKU_RULES(); ', 10);}function SEL_EBOO(){if(timeout_hnd) clearTimeout(timeout_hnd);scre[0]=scre[1]=scre[2]=scre[3]=sctt[0]=sctt[1]=sctt[2]=sctt[3]=0;qiduizi_fu=mo8pinghe=0;rule.zhuangfeng=-1; rule.uradora_init=1;rule.dobon_sel=0
rule.agariyame_sel=0;rule.liangjiahe_sel=0;rule.aotenjyo=0;rule.yakitori=rule.goshugi=0;rule.yaku.yiseXshun=0;rule.yaku.Xlianke=0;rule.yaku.daisharin=0;rule.yaku.shisanbuta=0;rule.yaku.gang_buri=0;rule.yaku.benikujaku=0;try {qiduizi_fu=mo8pinghe=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_EBOO_MO8PINGHE')) || 0;rule.zhuangfeng=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_EBOO_ZHUANGFENG')) || 1;rule.uradora_init=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_EBOO_URADORA')) || 1;rule.akapai_init=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_EBOO_AKAPAI')) || 0;rule.dobon_sel=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_SEL_DOBON')) || 0;rule.agariyame_sel=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_SEL_AGARIYAME')) || 0;rule.liangjiahe_sel=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_SEL_LIANGJIAHE')) || 0;rule.kuitan_sakizuke_sel=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_SEL_KUITAN')) || 0;rule.yaku.yiseXshun=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_YAKU_YISEXSHUN')) || 0;rule.yaku.Xlianke=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_YAKU_XLIANKE')) || 0;rule.yaku.daisharin=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_YAKU_DAISHARIN')) || 0;rule.yaku.shisanbuta=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_YAKU_SHISANBUTA')) || 0;rule.yaku.gang_buri=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_YAKU_GANG_BURI')) || 0;rule.yaku.benikujaku=parseInt(rule_storage.getItem('GAME_TINY_MAHJONG_YAKU_BENIKUJAKU')) || 0;}catch(e){ ; }inputKey=-1;timeout_hnd=setTimeout('SEL_EBOO1(); ', 10);}function SEL_EBOO1(){if(timeout_hnd) clearTimeout(timeout_hnd);var x=6, y=6, i, s, w, y1;initCanvas(bg_color);if(!grMode){putRectangleAbs(-1, 0, -1, 719, bg_color);putRectangleAbs(-1, 520, -1, 521, menu_border);putRectangleAbs(-1, 522, -1, 555, menu_bgcolor);}else {putRectangleAbs(-1, 0, -1, 640, bg_color);putRectangleAbs(-1, 470, -1, 471, menu_border);putRectangleAbs(-1, 472, -1, 500, menu_bgcolor);}x=22; y=6; w=436;var x1=240;if(grMode){x=42; x1=480; w=876;putRectangle(6, 6, 948, 463, '#000');}else {putRectangle(6, 6, 468, 514, '#000');}drawTextMincho('関東式ブー麻雀ルール設定'+String.fromCharCode(9312)+' (基本)', x1, y+16, 48, 24, true, 24, 24, null, '#ff0', 'center');y1=y+66;s=grMode ? '' : '[0] ';drawTextMincho(s+'荘風廻し', x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s='東風戦(半々荘戦)';if(rule.zhuangfeng==1) s='東-南廻し(半荘戦)';if(rule.zhuangfeng==2) s='東-北廻し(半荘戦)';drawTextMincho(s, x+w, y1, w, 24, true, 24, 24, null, '#fff', 'right');makeClickable(0, x, y1, w, 40, '0');y1+=45;s=grMode ? '' : '[1] ';drawTextMincho(s+'喰断/先付', x, y1, w, 24, true, 24, 24, null, '#ff0', 'left');s='喰断有り/先付有り';if(rule.kuitan_sakizuke_sel>1) s='喰断無し/完全先付';else if(rule.kuitan_sakizuke_sel>0) s='喰断無し/先付有り';drawTextMincho(s, x+w, y1, w, 24, true, 24, 24, null, '#fff', 'right');makeClickable(1, x, y1, w, 40, '1');y1+=45;if(!grMode){drawTextMincho('※変更したい項目をタップ/クリックするか、', x, y1, 276, 24, false, 24, 24, null, '#fff', 'left');drawTextMincho('項目に表示されたダイヤルを押して下さい。', x, y1+26, 276, 24, false, 24, 24, null, '#fff', 'left');}else {drawTextMincho('※変更項目をタップ/クリックすると内容が切り替わります。', x, y1, 276, 24, false, 24, 24, null, '#fff', 'left');}x=0; y=690;if(grMode){ x=240; y=610; }newTextArea('CREDIT', x, y, 480, 32, 24, 'transparent', '#fff');var e=document.getElementById('CREDIT');e.style.fontFamily='serif';e.style.textAlign='center';e.innerHTML=copyright_credit;STATUS_DISP_2('ゲーム開始前に、ルールを選択してください。');x=390; y=558;if(grMode){x=870; y=502;}var s=grMode ? '開　始' : '[#]開始';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(14, x, y+1, 89, 42, '#');makeClickable(14, x, y, 60, 1, '-');x-=90;s=grMode ? '菜　単' : '[*]菜単';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(10, x, y+1, 89, 40, '*');x=104;s=grMode ? 'ルール'+String.fromCharCode(9313) : '[9]ﾙｰﾙ'+String.fromCharCode(9313);putRectangle(x, y, 102, 43, button_color);drawText(s, x+51, y+9, 84, 24, false, 24, 24, null, button_text, 'center');makeClickable(9, x, y+1, 102, 40, '9');inputKey=-1;timeout_hnd=setTimeout('SEL_EBOO_KEY(); ', 10);}function SEL_EBOO_KEY(){if(timeout_hnd) clearTimeout(timeout_hnd);var x=6, y=6, i;i=Math.random();if(inputKey==0){if(++rule.zhuangfeng>2) rule.zhuangfeng=-1;else if(rule.zhuangfeng==0) rule.zhuangfeng=1;inputKey=-1;timeout_hnd=setTimeout('SEL_EBOO1(); ', 10);return;}if(inputKey==1){if(++rule.kuitan_sakizuke_sel>2) rule.kuitan_sakizuke_sel=0;inputKey=-1;timeout_hnd=setTimeout('SEL_EBOO1(); ', 10);return;}if(inputKey==2){rule.dobon_sel=rule.dobon_sel ? 0 : 1;inputKey=-1;timeout_hnd=setTimeout('SEL_EBOO1(); ', 10);return;}if(inputKey==3){rule.agariyame_sel=rule.agariyame_sel ? 0 : 1;inputKey=-1;timeout_hnd=setTimeout('SEL_EBOO1(); ', 10);return;}if(inputKey==4){if(rule.uradora_init==1) rule.uradora_init=2;else rule.uradora_init=1;inputKey=-1;timeout_hnd=setTimeout('SEL_EBOO1(); ', 10);return;}if(inputKey==5){if(++rule.akapai_init>2) rule.akapai_init=0;inputKey=-1;timeout_hnd=setTimeout('SEL_EBOO1(); ', 10);return;}if(inputKey==6){rule.liangjiahe_sel=rule.liangjiahe_sel ? 0 : 1;inputKey=-1;timeout_hnd=setTimeout('SEL_EBOO1(); ', 10);return;}if(inputKey==7){mo8pinghe=mo8pinghe ? 0 : 1;inputKey=-1;timeout_hnd=setTimeout('SEL_EBOO1(); ', 10);return;}if(inputKey<0){timeout_hnd=setTimeout('SEL_EBOO_KEY(); ', 10);return;}try {rule_storage.setItem('GAME_TINY_MAHJONG_EBOO_ZHUANGFENG', rule.zhuangfeng);rule_storage.setItem('GAME_TINY_MAHJONG_SEL_KUITAN', rule.kuitan_sakizuke_sel);rule_storage.setItem('GAME_TINY_MAHJONG_EBOO_URADORA', rule.uradora_init);rule_storage.setItem('GAME_TINY_MAHJONG_EBOO_MO8PINGHE', mo8pinghe);rule_storage.setItem('GAME_TINY_MAHJONG_EBOO_AKAPAI', rule.akapai_init);rule_storage.setItem('GAME_TINY_MAHJONG_SEL_DOBON', rule.dobon_sel);rule_storage.setItem('GAME_TINY_MAHJONG_SEL_AGARIYAME', rule.agariyame_sel);rule_storage.setItem('GAME_TINY_MAHJONG_SEL_LIANGJIAHE', rule.liangjiahe_sel);}catch(e){ ; }if(inputKey==14){timeout_hnd=setTimeout('BANZHUANG_START(); ', 10);return;}if(inputKey==10){timeout_hnd=setTimeout('MAIN_START(); ', 10);return;}if(inputKey==9){timeout_hnd=setTimeout('SEL_EBOO_P2(); ', 10);return;}if(inputKey==7){timeout_hnd=setTimeout('GAME_EBOO_EXP(); ', 10);return;}inputKey=-1;timeout_hnd=setTimeout('SEL_EBOO_KEY(); ', 10);}function SEL_EBOO_P2(){if(timeout_hnd) clearTimeout(timeout_hnd);gmode_name='関東式ブー麻雀';SEL_YAKU_RULES_str_exp='GAME_EXP';SEL_YAKU_RULES_str_prev='SEL_EBOO';SEL_YAKU_RULES_str_next='';SEL_YAKU_RULES_num=2;inputKey=-1;timeout_hnd=setTimeout('SEL_YAKU_RULES(); ', 10);}function GAME_EBOO_EXP(){if(timeout_hnd) clearTimeout(timeout_hnd);initCanvas(bg_color);if(!grMode){putRectangleAbs(-1, 0, -1, 719, bg_color);putRectangleAbs(-1, 520, -1, 521, menu_border);putRectangleAbs(-1, 522, -1, 555, menu_bgcolor);}else {putRectangleAbs(-1, 0, -1, 640, bg_color);putRectangleAbs(-1, 470, -1, 471, menu_border);putRectangleAbs(-1, 472, -1, 500, menu_bgcolor);}x=6; y=6; w=452; h=490;if(grMode){w=948; h=440;}newTextArea('EXPLANATION', x, y, w, h, 24, '#000', '#fff');e=document.getElementById('EXPLANATION');e.style.fontFamily='serif';e.style.overflow='auto';e.style.lineHeight='1.5em';e.style.padding=Math.floor(8*rRatio)+'px '+Math.floor(8*rRatio)+'px '+Math.floor(16*rRatio)+'px';e.innerHTML='<h1 id="TOP_AP" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0 0 1em; text-align: center; ">関東式ブー麻雀について</h1>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li><a style="color: #ff0; " href="#HOW_TO_OP">操作方法</a></li>'+'<li><a style="color: #ff0; " href="#RULES_DETAILS">ルール細則</a></li>'+'<li><a style="color: #ff0; " href="#RESULTS_DETAILS">成績について</a></li>'+'<li><a style="color: #ff0; " href="#YAKU_DETAILS">役細則</a></li>'+'</ul><hr style="display: block; color: #ccc; background: #ccc; border: 1px solid; margin: 1em 0; padding: 0; " />'+'<h2 id="HOW_TO_OP" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0.7em 0 0; ">操作方法</h2>'+'<nav style="display: block; margin: 0 0 0.5em; font-size: 80%; padding: 0 0 0 1em; "><a style="color: #ff0; " href="#TOP_AP">▲先頭</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#RULES_DETAILS">▽次節</a></nav>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>画面の下に、手牌が拡大されて表示されます。<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li><span style="color: #ff0; ">端末を縦向きでご利用の場合</span>、通常は右側を表\示しますので、左側の牌を指定したい場合は、<samp style="background: rgb(198, 222, 180); color: #000; margin: 0 0.2em; padding: 0.1em; white-space: nowrap; ">左側</samp>をタップ/クリックしてください。<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>左右どちらかにスワイプする事でも手牌の左右表示切替が出来ます。</li>'+'<li>大画面の端末では、拡大されていない手牌をタップ/クリックする事も出来ます。</li>'+'</ul></li>'+'<li><span style="color: #ff0; ">端末を横向きでご利用の場合</span>は、手牌全てが拡大されて表示されますので、その中から選択したい牌をタップ/クリックしてください。</li>'+'</ul></li>'+'<li>他者の打牌に対し、何もせず先に進める場合は<samp style="background: rgb(198, 222, 180); color: #000; margin: 0 0.2em; padding: 0.1em; white-space: nowrap; ">進行</samp>をタップ/クリックします。</li>'+'</ul>'+'<h2 id="RULES_DETAILS" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0.7em 0 0; ">ルール細則</h2>'+'<nav style="display: block; margin: 0 0 0.5em; font-size: 80%; padding: 0 0 0 1em; "><a style="color: #ff0; " href="#TOP_AP">▲先頭</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#HOW_TO_OP">△前節</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#RESULTS_DETAILS">▽次節</a></nav>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>東南半荘戦, 東北半荘戦か東風戦のいずれかから選択。場に両翻を付ける。</li>'+'<li>持点は八千点。半荘途中で誰かが箱点になるか、一万六千点に達するとそこで終了。</li>'+'<li>最終局または箱点者が現れる場合、以下に該当する和了は不可。<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>マルＣ(一人沈み)になってしまう和了</li>'+'<li>和了しても八千点に達しない和了</li>'+'<li>八千点以上の者の和了で、和了しても一位になれない和了</li>'+'</ul></li>'+'<li>但し、役満貫で和了した場合は無条件でダブルマルＡ(三人沈みで更に倍)終了と見なす</li>'+'</ul></li>'+'<li>一翻縛り。但し五本場から両翻縛り。</li>'+'<li>喰断, 先付及び形式聴牌は以下から選択：<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>喰断, 先付, 形式聴牌とも有り。</li>'+'<li>喰断無し、先付, 形式聴牌有り。</li>'+'<li>喰断無しの完全先付で門前でない形式聴牌・片和了聴牌は無効。</li>'+'</ul></li>'+'<li>槓ドラあり。裏ドラはなし。</li>'+'<li>赤五牌二枚をドラとして用いる。</li>'+'<li>現物・筋の喰直しは不可。</li>'+'<li>両家和は頭跳ね。</li>'+'<li>一発あり。</li>'+'<li>振聴立直有り。自分の次の摸牌が残っていない場合の立直は不可。</li>'+'<li>立直後の暗槓は孤立した暗刻の四枚目を摸牌した場合のみ可能。</li>'+'<li>振聴での栄和は原則として禁止。但し国士無双に限り現物以外で栄和可。</li>'+'<li>国士無双に限り暗槓を搶槓出来る。</li>'+'<li>大明槓の嶺上開花は三人払い。</li>'+'<li>荒牌・九種&#20040;九倒牌は平局・輪八千荘とする。</li>'+'<li>不聴罰符はなし。</li>'+'</ul>'+'<h2 id="RESULTS_DETAILS" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0.7em 0 0; ">成績について</h2>'+'<nav style="display: block; margin: 0 0 0.5em; font-size: 80%; padding: 0 0 0 1em; "><a style="color: #ff0; " href="#TOP_AP">▲先頭</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#RULES_DETAILS">△前節</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#YAKU_DETAILS">▽次節</a></nav>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>半荘終了時に、沈み(八千点未満)の者の数に依り、一位が取れるポイントが決まります：</li>'+'<li>終了時に八千点未満の者が。</li><ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li><dfn style="font-style: normal; color: #ff0; font-weight: bold; ">マルＡ</dfn>…三人沈みとなった場合、沈み者は10ポイントずつを一位に支払います。</li>'+'<li><dfn style="font-style: normal; color: #ff0; font-weight: bold; ">マルＢ</dfn>…二人沈みとなった場合、沈み者は 7ポイントずつを一位に支払います。</li>'+'<li><dfn style="font-style: normal; color: #ff0; font-weight: bold; ">マルＣ</dfn>…一人沈みとなった場合、沈み者は 5ポイントを一位に支払います。</li>'+'</ul></li>'+'<li>但し、役満貫の和了は無条件で<dfn style="font-style: normal; color: #ff0; font-weight: bold; ">ダブルマルＡ</dfn>での勝利となり、三者から20ポイントずつ受取ります。</li>'+'<li>勝者は場代として 3ポイントを支払います。</li>'+'</ul>'+'<h2 id="YAKU_DETAILS" style="font-size: 100%; color: #ff0; font-weight: bold; margin: 0.7em 0 0; ">役細則</h2>'+'<nav style="display: block; margin: 0 0 0.5em; font-size: 80%; padding: 0 0 0 1em; "><a style="color: #ff0; " href="#TOP_AP">▲先頭</a>&#160; &#160; &#160;<a style="color: #ff0; " href="#RESULTS_DETAILS">△前節</a></nav>'+'<ul style="margin: 0; padding: 0 0 0 1em; list-style: disc;  ">'+'<li>摸和平和有り(20符計算)で七対子は形式上25符。</li>'+'<li>喰い平和形の栄和では10符加算。</li>'+'<li>連風牌の雀頭は 4符とする。</li>'+'<li>役満貫は満貫と同額でダブル役満なし。跳満貫以上も満貫止まり。</li>'+'<li>&#20040;九振切(流し満貫)は他者に打牌を喰われないだけでなく、自らも一切チー, ポン, 槓してはならない。</li>'+'<li>開局一巡内の和了を人和とする。</li>'+'<li>荘家第一打牌での栄和と散家第一摸牌での摸和もいずれも地和とする。</li>'+'<li>緑一色には緑発は不要。</li>'+'<li>九蓮宝燈は和了した形が準じていれば成立する。また、万子でなくても可。</li>'+'<li>連続する七数位の筒子の清一色七対子を大車輪とする。</li>'+'<li>四槓子と言えども、雀頭を完成させないと和了にならない。</li>'+'<li>役満貫の包則はなし。</li>'+'</ul>';x=390; y=558;if(grMode){x=870; y=502;}var s=grMode ? '開　始' : '[#]開始';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(14, x, y+1, 89, 42, '#');makeClickable(14, x, y, 60, 1, '-');x-=90;s=grMode ? '菜　単' : '[*]菜単';putRectangle(x, y, 89, 43, button_color);drawText(s, x+45, y+9, 60, 24, false, 24, 24, null, button_text, 'center');makeClickable(10, x, y+1, 89, 40, '*');x=0;s=grMode ? 'ルール'+String.fromCharCode(9312) : '[9]ﾙｰﾙ'+String.fromCharCode(9312);putRectangle(x, y, 102, 43, button_color);drawText(s, x+51, y+9, 84, 24, false, 24, 24, null, button_text, 'center');makeClickable(9, x, y+1, 102, 40, '9');x=0; y=690;if(grMode){ x=240; y=610; }newTextArea('CREDIT', x, y, 480, 32, 24, 'transparent', '#fff');var e=document.getElementById('CREDIT');e.style.fontFamily='serif';e.style.textAlign='center';e.innerHTML=copyright_credit;STATUS_DISP_2('開始前に、上記をお確かめください。');inputKey=-1;timeout_hnd=setTimeout('GAME_EBOO_EXP_KEY(); ', 10);}function GAME_EBOO_EXP_KEY(){if(timeout_hnd) clearTimeout(timeout_hnd);i=Math.random();if(inputKey==14){timeout_hnd=setTimeout('BANZHUANG_START(); ', 10);return;}if(inputKey==10){timeout_hnd=setTimeout('MAIN_START(); ', 10);return;}if(inputKey==9){timeout_hnd=setTimeout('SEL_EBOO(); ', 10);return;}inputKey=-1;timeout_hnd=setTimeout('GAME_EBOO_EXP_KEY(); ', 10);}
