var th_prev_nrykfan, th_dora;function a0115(jia){var i, j, k, s, t;var ji2;var st=[0, 0, 0, 0];ai_ndrq=[0,0,0];th_prev_nrykfan=nrykfan[jia];th_dora=0;nrykfan[jia]=rm_2naki[jia]=0;i=40; while(--i>=0){vZpt[i]=zp[jia][i];noDapai_tbl[i]=vXOO[i]=vOXO[i]=vOOX[i]=vOOO[i]=vOOOO[i]=required[jia][i]=wants[jia][i]=vDanger[i]=vYaku[i]=0;}vPtn_ctr=0;if(pengchi){noDapai_tbl[nukidora[0]]++;noDapai_tbl[nukidora[1]]++;noDapai_tbl[nukidora[2]]++;noDapai_tbl[cdp[0] % 50]++;noDapai_tbl[cdp[1] % 50]++;}t_marked=[0,0,0,0];if(gameMode==GAMEMODE_REACH && rule.yakitori>1){i=players; k=0; s=-1; while(--i>-1){if(!yktr[i]){ ++k; s=i; }}if(k==1) t_marked[s]=1;}if(reach[0] || fc[0]>1) t_marked[0]=1;SHUPAI_MOVE(jia);if(gameMode==GAMEMODE_REACH || gameMode==GAMEMODE_REACH3P){a0031();ji2=players; k=0; while(--ji2>-1){if(ji2==jia) continue;a0032(jia, ji2);}}if(gameMode==GAMEMODE_GUOJI || gameMode==GAMEMODE_ARSHIAR){a0031();ji2=players; while(--ji2>-1){if(ji2==jia) continue;a0032(jia, ji2);}i=40; while(--i>-1){if(vDanger[i]<0x10000) vDanger[i]=0;}}}function a0112(jia){var i, j, l;var pp=new Array(40);if(gameMode!=GAMEMODE_TAIWAN && fc[jia]>3) return;if(gameMode==GAMEMODE_TAIWAN && fc[jia]>4) return;i=40; while(--i>-1) pp[i]=0;a0000(jia, 1);l=t_ptCtr; while(--l>-1){if(t_pt[l].attr) continue;i=t_pt[l].qianzhang_ctr; while(--i>-1){j=t_pt[l].qianzhang[i] % 50;vOXO[j+1]++; pp[j+1]++;}i=t_pt[l].liangmen_ctr; while(--i>-1){j=t_pt[l].liangmen[i] % 50;vOOX[j+2]++; pp[j+2]++;vXOO[j-1]++; pp[j-1]++;}i=t_pt[l].bianzhang_ctr; while(--i>-1){j=t_pt[l].bianzhang[i] % 50;if(j % 10==1){ vOOX[j+2]+=4; pp[j+2]+=4; }else { vXOO[j-1]+=4; pp[j-1]+=4; }}i=t_pt[l].duizi_ctr; while(--i>-1){j=t_pt[l].duizi[i] % 50;vOOO[j]++; pp[j]++;}}l=-1; i=38; while(--i>-1){if(l<pp[i]) l=pp[i];}i=38; while(--i>-1){if(l>=pp[i]) required[jia][j]++;}}function a0000(jia, mode){var i, j, k, l, m, n;var i0, i1, i2;var mp, flag, mz, da, du;var pn=new Array(20);var pc=new Array(20);var pt=new Array(MAX_PTNS);var mC=new Array(MAX_PTNS);var ms=8, ms2=5;var ptc=0;t_ptCtr=0;i=40; while(--i>=0){vZpt[i]=zp[jia][i];}if(gameMode==GAMEMODE_TAIWAN){ ms=10; ms2=6; }i=MAX_PTNS; while(--i>=0) mC[i]=new Array(20);i=20; while(--i>=0) pn[i]=pc[i]=0;SHUPAI_MOVE(jia);i=j=0; while(++j<40){if((k=pai_tbl[j])<1) continue;pn[i]=k; pc[i]=j;i++;}t_xian=255; t_ptCtr=0; k=0;if(fc[jia]<1 && gameMode!=GAMEMODE_ARSHIAR && gameMode!=GAMEMODE_TAIWAN){du=da=0;if(gameMode==GAMEMODE_GUOJI){i=-1; while(++i<38){if(pn[i]<1) break;if(pn[i]>3){ du+=2; continue; }if(pn[i]>1) du++;if(pn[i]==2) continue;if(vZpt[pc[i]]>0) da++;}}else {i=-1; while(++i<38){if(pn[i]<1) break;if(pn[i]>1){ du++; continue; }if(vZpt[pc[i]]>0) da++;}}if(du+da>7) da=7-du;k=13-du-du-da;if(k<3 && t_xian>=k){if(t_xian>k) t_ptCtr=0;t_xian=k;pt[t_ptCtr]=1;if(gameMode==GAMEMODE_GUOJI){k=0; i=-1; while(++i<38){if(pn[i]>3){mC[t_ptCtr][k++]=pc[i] | THINK_DUIZI;mC[t_ptCtr][k++]=pc[i] | THINK_DUIZI;continue;}if(pn[i]>2){mC[t_ptCtr][k++]=pc[i] | THINK_DUIZI;if(vZpt[pc[i]]>0) mC[t_ptCtr][k++]=pc[i] | THINK_ISOLATED;else mC[t_ptCtr][k++]=pc[i] | THINK_USELESS;continue;}if(pn[i]>1){mC[t_ptCtr][k++]=pc[i] | THINK_DUIZI;continue;}if(pn[i]<1) break;if(vZpt[pc[i]]>0) mC[t_ptCtr][k++]=pc[i] | THINK_ISOLATED;else mC[t_ptCtr][k++]=pc[i] | THINK_USELESS;}}else {k=0; i=-1; while(++i<38){if(pn[i]>1){mC[t_ptCtr][k++]=pc[i] | THINK_DUIZI;if(pn[i]>2) mC[t_ptCtr][k++]=pc[i] | THINK_ISOLATED;continue;}if(pn[i]<1) break;if(vZpt[pc[i]]>0) mC[t_ptCtr][k++]=pc[i] | THINK_ISOLATED;else mC[t_ptCtr][k++]=pc[i] | THINK_USELESS;}}mC[t_ptCtr][k]=0; t_ptCtr++;}}i=MAX_PTNS; while(--i>-1){t_pt_s[0][i]=new Array(20);t_pt_s[1][i]=new Array(20);t_pt_s[2][i]=new Array(20);t_pt_s[3][i]=new Array(20);}t_pt_s[0].ctr=t_pt_s[1].ctr=t_pt_s[2].ctr=t_pt_s[3].ctr=0;a0001(3); a0001(2); a0001(1); a0001(0);i0=-1; while(++i0<t_pt_s[0].ctr){i1=-1; while(++i1<t_pt_s[1].ctr){i2=-1; while(++i2<t_pt_s[2].ctr){mz=fc[jia]+   t_pt_s[0].d[i0].mzCtr+t_pt_s[1].d[i1].mzCtr+t_pt_s[2].d[i2].mzCtr+t_pt_s[3].d[0].mzCtr;du=t_pt_s[0].d[i0].duCtr+t_pt_s[1].d[i1].duCtr+t_pt_s[2].d[i2].duCtr+t_pt_s[3].d[0].duCtr;da=t_pt_s[0].d[i0].daCtr+t_pt_s[1].d[i1].daCtr+t_pt_s[2].d[i2].daCtr;l=ms; m=mz; if((n=du)>0){ --l; --n; }n+=da; if(m+n>ms2) n=ms2-m;l-=m+m+n;if(l<0) l=0;if(l>t_xian) continue;if(l<t_xian) t_ptCtr=0;t_xian=l;pt[t_ptCtr]=0;if(t_ptCtr>=MAX_PTNS) continue;m=0;l=-1; while(++l<20){if(!t_pt_s[0].d[i0].dat[l]) break;mC[t_ptCtr][m++]=t_pt_s[0].d[i0].dat[l];}l=-1; while(++l<20){if(!t_pt_s[1].d[i1].dat[l]) break;mC[t_ptCtr][m++]=t_pt_s[1].d[i1].dat[l];}l=-1; while(++l<20){if(!t_pt_s[2].d[i2].dat[l]) break;mC[t_ptCtr][m++]=t_pt_s[2].d[i2].dat[l];}l=-1; while(++l<20){if(!t_pt_s[3].d[0].dat[l]) break;mC[t_ptCtr][m++]=t_pt_s[3].d[0].dat[l];}mC[t_ptCtr][m]=0;t_ptCtr++;}}}mp=-1; while(++mp<t_ptCtr){t_pt[mp].shunzi_ctr=t_pt[mp].kezi_ctr=t_pt[mp].duizi_ctr=t_pt[mp].liangmen_ctr=t_pt[mp].qianzhang_ctr=t_pt[mp].bianzhang_ctr=t_pt[mp].isolated_ctr=0;t_pt[mp].attr=0;if(pt[mp]==1){t_pt[mp].attr=1;i=-1; while(++i<20){if(!(j=mC[mp][i])) break;k=j & 0xf000; j &= 0xff;if(k==THINK_DUIZI){t_pt[mp].duizi[t_pt[mp].duizi_ctr++]=j;continue;}if(k==THINK_USELESS){t_pt[mp].useless[t_pt[mp].useless_ctr++]=j;continue;}t_pt[mp].isolated[t_pt[mp].isolated_ctr++]=j;}continue;}i=-1; while(++i<20){if(!(j=mC[mp][i])) break;k=j & 0xf000; j &= 0xff;if(k==THINK_SHUNZI){t_pt[mp].shunzi[t_pt[mp].shunzi_ctr++]=j;continue;}if(k==THINK_LIANGMEN){if((j % 10)>7 || (j % 10)<2){t_pt[mp].bianzhang[t_pt[mp].bianzhang_ctr++]=j;continue;}t_pt[mp].liangmen[t_pt[mp].liangmen_ctr++]=j;continue;}if(k==THINK_BIANZHANG){t_pt[mp].bianzhang[t_pt[mp].bianzhang_ctr++]=j;continue;}if(k==THINK_QIANZHANG || k==THINK_QIANZHANG2){t_pt[mp].qianzhang[t_pt[mp].qianzhang_ctr++]=j;continue;}if(k==THINK_KEZI){t_pt[mp].kezi[t_pt[mp].kezi_ctr++]=j;continue;}if(k==THINK_DUIZI){t_pt[mp].duizi[t_pt[mp].duizi_ctr++]=j;continue;}t_pt[mp].isolated[t_pt[mp].isolated_ctr++]=j;}}xianting[jia]=t_xian;return(t_xian);}function a0001(suit){var i, j, k, l;var mpctr, flag, mzc, dac, duc;var mbf=new Array(20);var pbf=new Array(16);var pcd=new Array(16);var ptc=0;var xt=255;var ms=8, ms2=4;if(gameMode==GAMEMODE_TAIWAN){ ms=10; ms2=5; }i=16; while(--i>-1) pbf[i]=pcd[i]=0;j=suit*10;i=k=0; while(++i<10){if((l=pai_tbl[++j])<1) continue;pcd[k]=j;pbf[k++]=l;}mpctr=flag=0; mzc=dac=duc=0;i=-1; do {while(++i<10){if((j=pcd[i])==0) break;if(flag<THINK_SHUNZI && i<8 && j<30 && j+2==pcd[i+2] && (k=Math.min(pbf[i], Math.min(pbf[i+1], pbf[i+2])))>0){pbf[i]-=k; pbf[i+1]-=k; pbf[i+2]-=k;mzc+=k;while(--k>=0){mbf[mpctr]=i | THINK_SHUNZI;mpctr++;}}if(flag<THINK_LIANGMEN && j<30 && j+1==pcd[i+1] && (k=Math.min(pbf[i], Math.min(pbf[i+1], vZpt[j-1]+vZpt[j+2])))>0){pbf[i]-=k; pbf[i+1]-=k;dac+=k;while(--k>=0){mbf[mpctr]=i | THINK_LIANGMEN;mpctr++;}}if(flag<THINK_QIANZHANG && j<30 && (j+2!=pcd[i+1] || j+3!=pcd[i+2] || j+5!=pcd[i+3])){if(j+2==pcd[i+1] && (k=Math.min(pbf[i], Math.min(pbf[i+1], vZpt[j+1])))>0){pbf[i]-=k; pbf[i+1]-=k;dac+=k;while(--k>=0){mbf[mpctr]=i | THINK_QIANZHANG;mpctr++;}}else if(j+2==pcd[i+2] && (k=Math.min(pbf[i], Math.min(pbf[i+2], vZpt[j+1])))>0){pbf[i]-=k; pbf[i+2]-=k;dac+=k;while(--k>=0){mbf[mpctr]=i | THINK_QIANZHANG2;mpctr++;}}}if(flag<THINK_KEZI && pbf[i]>2){pbf[i]-=3;mzc++;mbf[mpctr]=i | THINK_KEZI;mpctr++;}if(pbf[i]>1){pbf[i]-=2;duc++;mbf[mpctr]=i | THINK_DUIZI;mpctr++;}flag=0;}k=ms; if((j=duc)>0){ --j; --k; }j+=dac; if(mzc+j>ms2) j=ms2-mzc;k-=mzc+mzc+j;if(k<=xt){if(k<xt){ ptc=0; }xt=k;if(ptc<MAX_PTNS){t_pt_s[suit].d[ptc].mzCtr=mzc;t_pt_s[suit].d[ptc].duCtr=duc;t_pt_s[suit].d[ptc].daCtr=dac;i=-1; while(++i<mpctr){t_pt_s[suit].d[ptc].dat[i]=pcd[mbf[i] & 0x3f] | (mbf[i] & 0xf000);}l=0; j=-1; while(++j<10){if(pbf[j]<1) continue;t_pt_s[suit].d[ptc].dat[i]=pcd[j] | THINK_ISOLATED;i++; l++;}t_pt_s[suit].d[ptc].dat[i]=0;ptc++;}}for(;;){if(--mpctr<0) break;flag=i=mbf[mpctr]; flag &= 0xf000; i &= 0xff;if(flag==THINK_DUIZI){duc--; pbf[i]+=2;continue;}if(flag==THINK_KEZI){mzc--; pbf[i]+=3;break;}if(flag==THINK_LIANGMEN){dac--; pbf[i]++; pbf[i+1]++;break;}if(flag==THINK_QIANZHANG){dac--; pbf[i]++; pbf[i+1]++;break;}if(flag==THINK_QIANZHANG2){dac--; pbf[i]++; pbf[i+2]++;flag=THINK_QIANZHANG;break;}if(flag==THINK_SHUNZI){mzc--; pbf[i]++; pbf[i+1]++; pbf[i+2]++;break;}}--i;} while(mpctr>-1);t_pt_s[suit].ctr=ptc;if(ptc>0) return;t_pt_s[suit].d[0].mzCtr=t_pt_s[suit].d[0].duCtr=t_pt_s[suit].d[0].daCtr=0;}function a0114(jia){var i, j, k, l, m, n, ss;var pps, p, x, y=new Array(), z;var p1=new Array(40);var ev=new Array(40);var nI=new Array(40);var nB=new Array(40);var nQ=new Array(40);var nQ2=new Array(40);var nL=new Array(40);var nT=new Array(40);var nD=new Array(40);var nK=new Array(40);var nS=new Array(40);var st=new Array(40);var p2=new Array(40);var m4=4;var vx=-1;if(gameMode==GAMEMODE_TAIWAN) m4++;a0000(jia, 0);l=t_ptCtr; while(--l>-1){y[l]=1; ev[l]=256;i=t_pt[l].shunzi_ctr+t_pt[l].kezi_ctr+t_pt[l].duizi_ctr+t_pt[l].liangmen_ctr+t_pt[l].qianzhang_ctr+t_pt[l].bianzhang_ctr;if(t_pt[l].duizi_ctr>0){if(i<m4+1) y[l]=4;}else {if(i<m4) y[l]=4;}}i=40; while(--i>-1) p1[i]=nI[i]=nB[i]=nQ2[i]=nQ[i]=nL[i]=nT[i]=nD[i]=nK[i]=nS[i]=0;i=40; while(--i>-1){ p1[i]=-1; }pps=20; while(--pps>0){if((p=te[jia][pps] % 50)<1 || p>37 || p1[p]>-1) continue;p1[p]=1;l=t_ptCtr; while(--l>-1){if(t_pt[l].attr){i=t_pt[l].useless_ctr; while(--i>-1){j=t_pt[l].useless[i] % 50;if(p==j) break;}if(i>-1){ nI[p]++; continue; }i=t_pt[l].isolated_ctr; while(--i>-1){j=t_pt[l].isolated[i] % 50;if(p==j) break;}if(i>-1) nI[p]++;continue;}i=t_pt[l].isolated_ctr; while(--i>-1){j=t_pt[l].isolated[i] % 50;if(p==j) break;}if(i>-1){ nI[p]++; continue; }i=t_pt[l].bianzhang_ctr; while(--i>-1){j=t_pt[l].bianzhang[i] % 50;if(j==p || j==p+1) break;}if(i>-1){ nB[p]++; continue; }i=t_pt[l].bianzhang_ctr; while(--i>-1){j=t_pt[l].bianzhang[i] % 50;if((j==p || j==p+1) && (vZpt[j-1]<1 || vZpt[j+2]<1))break;}if(i>-1){ nB[p]++; continue; }i=t_pt[l].qianzhang_ctr; while(--i>-1){j=t_pt[l].qianzhang[i] % 50;if(j!=p && j!=p+2) continue;if((j % 10)==1 && vZpt[j+2]<1) break;if((j % 10)==7 && vZpt[j-1]<1) break;if(vZpt[j+2]<1 && vZpt[j-1]<1) break;}i=t_pt[l].qianzhang_ctr; while(--i>-1){j=t_pt[l].qianzhang[i] % 50;if(j!=p && j!=p+2) continue;if((j % 10)==1  || (j % 10)==7) break;if(vZpt[j+2]<1 || vZpt[j-1]<1) break;}if(i>-1){ nQ2[p]++; continue; }i=t_pt[l].qianzhang_ctr; while(--i>-1){j=t_pt[l].qianzhang[i] % 50;if(j==p || j==p+2) break;}if(i>-1){ nQ[p]++; continue; }i=t_pt[l].liangmen_ctr; while(--i>-1){j=t_pt[l].liangmen[i] % 50;if(j==p || j==p+1) break;}if(i>-1){ nL[p]++; continue; }i=t_pt[l].duizi_ctr; while(--i>-1){j=t_pt[l].duizi[i] % 50;if(j==p) break;}if(i>-1){if(vZpt[p]>0) nD[p]++;else nT[p]++;continue;}i=t_pt[l].kezi_ctr; while(--i>-1){j=t_pt[l].kezi[i] % 50;if(j==p) break;}if(i>-1){ nK[p]++; continue; }i=t_pt[l].shunzi_ctr; while(--i>-1){j=t_pt[l].shunzi[i] % 50;if(j==p && (j % 10)!=7) break;if(j==p-2 && (j % 10)!=3) break;}if(i>-1){ nS[p]++; continue; }}}i=40; while(--i>-1){k='*';if((j=nI[i])<1) j=0;if(j>254) j=255;j=j.toString(16);if(j.length<2) j='0'+j;k+=j;if((j=nB[i])<1) j=0;if(j>254) j=255;j=j.toString(16);if(j.length<2) j='0'+j;k+=j;if((j=nQ2[i])<1) j=0;if(j>254) j=255;j=j.toString(16);if(j.length<2) j='0'+j;k+=j;if((j=nQ[i])<1) j=0;if(j>254) j=255;j=j.toString(16);if(j.length<2) j='0'+j;k+=j;if((j=nL[i])<1) j=0;if(j>254) j=255;j=j.toString(16);if(j.length<2) j='0'+j;k+=j;if((j=nT[i])<1) j=0;if(j>254) j=255;j=j.toString(16);if(j.length<2) j='0'+j;k+=j;if((j=nD[i])<1) j=0;if(j>254) j=255;j=j.toString(16);if(j.length<2) j='0'+j;k+=j;if((j=nK[i])<1) j=0;if(j>254) j=255;j=j.toString(16);if(j.length<2) j='0'+j;k+=j;if((j=nS[i])<1) j=0;if(j>254) j=255;j=j.toString(16);if(j.length<2) j='0'+j;st[i]=k+j;ev[i]=-1;}vx=-1; for(;;){i=40; while(--i>-1) p1[i]=0;ss=''; i=20; while(--i>0){if((p=te[jia][i] % 50)<1 || p>37 || ev[p]>-1 || p1[p]>0) continue;p1[p]=1;if(ss<st[p]) ss=st[p];}if(ss=='') break;vx++;i=20; while(--i>0){if((p=te[jia][i] % 50)<1 || p>37 || ev[p]>-1 || p1[p]!=1) continue;p1[p]=2;if(ss==st[p]) ev[p]=vx;}}i=40; while(--i>-1){ p1[i]=-1; }vPtn_ctr=0; pps=20; while(--pps>0){if((p=te[jia][pps] % 50)<1 || p>37 || p1[p]>-1) continue;p1[p]=1;i=40; while(--i>-1) p2[i]=0;l=t_ptCtr; while(--l>-1){if(t_pt[l].attr){p1[p]=0;i=t_pt[l].isolated_ctr; while(--i>-1){j=t_pt[l].isolated[i] % 50;if(p==j) continue;p2[j] |= 4;}continue;}k=0; i=20; while(--i>-1){if(te[jia][i] % 50==p) k++;}i=t_pt[l].liangmen_ctr; while(--i>-1){j=t_pt[l].liangmen[i] % 50;if((p==j || p==j+1) && k<2) continue;p2[j-1] |= 4;p2[j+2] |= 4;}i=t_pt[l].qianzhang_ctr; while(--i>-1){j=t_pt[l].qianzhang[i] % 50;if((p==j || p==j+2) && k<2) continue;p2[j+1] |= 4;}i=t_pt[l].duizi_ctr; while(--i>-1){j=t_pt[l].duizi[i] % 50;if(p==j && k<3) continue;p2[j] |= 4;}i=t_pt[l].isolated_ctr; while(--i>-1){j=t_pt[l].isolated[i] % 50;if(j==p) continue;if(y[l]>1 && j<30){if(j % 10>1 && j % 10<8 && vZpt[j+1]>0 && vZpt[j-1]+vZpt[j+2]>0) p2[j+1] |= y[l];if(j % 10>2 && j % 10<9 && vZpt[j-1]>0 && vZpt[j-2]+vZpt[j+1]>0) p2[j-1] |= y[l];}if(vZpt[j]>0) p2[j] |= y[l];}}vPtn[vPtn_ctr].pi=p;vPtn[vPtn_ctr].xt=ev[p];i=38; j=0; while(--i>0){if(!(i % 10)) continue;if(p2[i]<1 || vZpt[i]<1) continue;if(p2[i] & 4) j+=vZpt[i] << 8;else if(p2[i] & 4) j+=vZpt[i];}vPtn[vPtn_ctr].value=j;vPtn_ctr++;}if(gameMode==GAMEMODE_BEINUKI || gameMode==GAMEMODE_PENGLI) return;if(gameMode==GAMEMODE_ARSHIAR || gameMode==GAMEMODE_GUOJI){i=40; while(--i>-1) p2[i]=st[i]=0;k=doraCtr; while(--k>-1) p2[dora[k] % 50]++;i=20; while(--i>0){j=te[jia][i] % 100; if(j<50) continue;j %= 50;if(st[j]) continue;st[j]=1;k=20; while(--k>-1){if(te[jia][i] % 100<50 && te[jia][i] % 50==j) break;}if(k<0) p2[j]++;}if(t_strategy[jia]==T_STRATEGY_HEAVY){i=vPtn_ctr; while(--i>-1){j=vPtn[i].pi;if(p2[j]>0) vPtn[i].xt=vx+p2[j];}return;}i=vPtn_ctr; while(--i>-1){if(vPtn[i].xt==vx){vx+=6;continue;}j=vPtn[i].pi;if(p2[j]>0) vPtn[i].xt=vx+p2[j];}}SHUPAI_MOVE(jia);i=vPtn_ctr; while(--i>-1){vPtn[i].xt <<= 3;j=vPtn[i].pi;if(pai_tbl[j]+vZpt[j]<3) continue;if(j>34 || j==menfeng[jia]) vPtn[i].xt++;if(j==zhuangfeng[0] || j==zhuangfeng[1]) vPtn[i].xt++;}}function a0099(jia){var i, j, k, pi;try{a0115(jia);if(gameMode==GAMEMODE_BOO || gameMode==GAMEMODE_ARSHIAR){pi=a0102(jia);}else if(gameMode==GAMEMODE_BEINUKI){pi=a0103(jia);}else if(gameMode==GAMEMODE_GUOJI){pi=a0105(jia);}else if(gameMode==GAMEMODE_TAIWAN){pi=a0104(jia);}else pi=a0101(jia);} catch(e){console.log(e);return(0);}return(pi);}function a0101(jia){var ex= ex1= ex2=    ey= ey1= ey2=    ez= ez1= ez2=    nt1=0;var sb= sb1= sb2=    fr= fr1= fr2=    nt= nt1= nt2=    ad= ad1= ad2=    nt2=0;var exPos1=exPos2=-1;var mc=0,    mt=0,    ev=0,    mx=0,    mxc=0;    var mcc=0;var qt=qt1=qt2=0;var tgwpt=new Array(40);var tgwpc=tgwpk=0;var dlim=0;var tmp=0;var i, j, k, l, m, n, o, p;var dpf=new Array(0x40);var dpp, dp, dp2;var dqf=new Array(0x40);var nm, dpq, dq, dq2;var ls=lingshang;var rrcc=reach[jiaBuff];var zz=zampai;var tppf=0, tpppb2=0;var fssuit=-1;try{finalHand=0;if(players==3 && gameMode!=GAMEMODE_REACH){if(kyoku>=8) finalHand=1;}else if(kyoku>players && (kyoku % players)==players-1) finalHand=1;p=0;SHUPAI_MOVE(jia);i=fc[jia]*5;while(--i>=0){k=fl[jia][i] % 100;if(k==0) continue;if(k>50){++p; k-=50;}pai_tbl[k]++;}i=20; while(--i>0){if(te[jia][i]>40) ++p;}p+=(i=ndr_ctr[jia]); while(--i>-1){if((j=ndr[jia][i])>37) pai_tbl[38]++;else pai_tbl[j % 40]++;if(j>40) ++p;}i=doraCtr; while(--i>=0) p+=pai_tbl[dora[i]];th_dora=p;th_prev_nrykfan+=p;i=40; while(--i>-1) dqf[i]=0;i=15; while(--i>-1) dqf[te[jia][i] % 50]++;j=dqf[ 1]+dqf[ 9]+  dqf[11]+dqf[19]+  dqf[21]+dqf[29]+  dqf[31]+dqf[32]+dqf[33]+dqf[34]+  dqf[35]+dqf[36]+dqf[37];i=nukidora.length; while(--i>-1){k=nukidora[i] % 50;if(k>30 || k % 10==1 || k % 10==9) j-=dqf[k];}if(j>=Math.floor(zampai / players) && !frkr[jia]){i=38; while(--i>30){if(dqf[i]) break;}if(i<31){i=-1; j=30; while((j-=10)>-1){if(dqf[j+1]){i=j+1; break;}if(dqf[j+9]){i=j+9; break;}}}if(i>-1){reachDeclare=0;cmd=14;j=15; while(--j>0){if((te[jia][j] % 50)==i){cmd=j;return(0);}}}}var gsp=0;i=38; while(--i>30){if(vZpt[i]<1) break;}if(i<31){i=30; while((i-=10)>-1){if(vZpt[i+1]<1 || vZpt[i+9]<1) break;}if(i<0) gsp=1;}var xt;xt=i=a0138(jia);if(i>0 && (Math.floor(zampai / players)<i 
)){i=40; while(--i>-1){dpf[i]=k=0;if(i>30 && !gsp && vZpt[i]<1){continue;}j=players; while(--j>-1){if(trp[j][i]<1) continue;k++;if(j==0) k+=8;if(reach[j]) k+=8;}dpf[i]=k;}reachDeclare=0;cmd=14;j=-1; k=-1; i=38; while(--i>0){if(!dqf[i]) continue;if(noDapai_tbl[i]) continue;if(dpf[i]>k){j=i; k=dpf[i];}}if(j>0){i=15; while(--i>0){if((te[jia][i] % 50)==j){cmd=i;return(0);}}}}var tyk=0;var xx=new Array(40), pq=new Array(40), dr=new Array(0x40);i=40; while(--i>-1) xx[i]=pq[i]=dr[i]=0;k=0; j=players; while(--j>-1){t_marked[j]=0;if(j==jia) continue;if(fc[j]>2  || (fc[j]>1 && (zampai / players) < 6) || reach[j] || (j<1 && takingCare)){t_marked[j]=1; k++;}}j=players; while(--j>-1){if(j==jia) continue;if(sc[j]>=sc[jia]) break;}if(j>-1){if((finalHand || tsumi>3) && jia!=zhuangjia) tyk=2;else if(jia==zhuangjia) tyk=1;else {p=th_prev_nrykfan;if(pai_tbl[35]>2) p++;if(pai_tbl[36]>2) p++;if(pai_tbl[37]>2) p++;if(pai_tbl[zhuangfeng[0]]>2) p++;if(zhuangfeng[1]>0 && pai_tbl[zhuangfeng[1]]>2) p++;if(pai_tbl[menfeng[jia]]>2) p++;if(p>2) tyk=1;}}if(tyk){j=0x00010000; if(tyk<2) j=0x00004000;i=40; while(--i>0){if(vDanger[i]<j) vDanger[i]=0;}}if(gameMode==GAMEMODE_EASTERN_BOO){k=-1;}p=0;if((th_prev_nrykfan<4 || xt>0) && k>0){p=1; i=20; while(--i>0){l=0; k=te[jia][i] % 40;if(k<1 || k>37 || noDapai_tbl[k] || pq[k]) continue;pq[k]=1;j=players; while(--j>-1){if(j==jia) continue;if(!t_marked[j]){if(j>0 || zampai / players>6) continue;continue;}if(j<1 && !takingCare) continue;if(trp[j][k]>0) continue;if(!gsp && vZpt[k]<1) continue;if(k>30 && tyk>1 && j>1) continue;p=0;if(k>30){if(tyk && vZpt[k]<2) continue;if(vZpt[k]<1) continue;p=15;}else if(fc[j]>3){if(vZpt[k]<1) continue;p=15;}else {p=15;m=k % 10;if(m<4){if(trp[j][k+3]>0){p &= 14;}}else if(m>6){if(trp[j][k-3]>0){p &= 14;}}else {if(trp[j][k-3]>0 && trp[j][k+3]>0){p &= 13;}}if(m<3){if(vZpt[k+1]<1 || vZpt[k+2]<1){if(vZpt[k]<1) p=0;else p &= 7;}else if(vZpt[k+1]<2 || vZpt[k+2]<2){p &= 11;}}else if(m<8){if((vZpt[k-1]<1 && (vZpt[k+1]<1 || vZpt[k+2]<1)) ||    (vZpt[k+1]<1 && (vZpt[k-1]<1 || vZpt[k-2]<1))){if(vZpt[k]<1) p=0;else p &= 7
}else if((vZpt[k-1]<2 && (vZpt[k+1]<2 || vZpt[k+2]<2)) ||         (vZpt[k+1]<2 && (vZpt[k-1]<2 || vZpt[k-2]<2))){p &= 11;}}else {if(vZpt[k-1]<1 || vZpt[k-2]<1){if(vZpt[k]<1) p=0;else p &= 7;}else if(vZpt[k-1]<2 || vZpt[k-2]<2){p &= 11;}}}if(j<1) p <<= 2;xx[k]+=p;}}}if(gameMode!=GAMEMODE_PENGLI && (p || zampai / players<7)){j=-1; while(++j<doraCtr){k=dora[j];if(k>0x30){if(vZpt[k]<1) continue;}else {l=vZpt[k]; n=k & 0x0f;if(n>2) l+=vZpt[k-2]*vZpt[k-1];if(n<8) l+=vZpt[k+1]*vZpt[k+2];if(n>1 && n<9) l+=vZpt[k-1]*vZpt[k+1];if(l<1) continue;}xx[k]+=0x4000;}}l=-1; i=20; while(--i>0){k=te[jia][i] % 40;if(xx[k]>0x0fff0000) xx[k]=0x0fff0000;if(l<0 || l>xx[k]) l=xx[k];}if(l<0) l=0;k=40; while(--k>0){if(xx[k]>l) vDanger[k]+=xx[k];}lingshang=0;if(gameMode==GAMEMODE_PENGLI) reach[jiaBuff]=1;zampai=100;dpf[0]=dpf[1]=dpf[2]=dpf[3]=0;i=38; while(--i>-1) dpf[Math.floor(i / 10)]+=fsp[jia][i];if(dpf[0]>dpf[1]+2 && dpf[0]>dpf[2]+2) fssuit=0;else if(dpf[1]>dpf[0]+2 && dpf[0]>dpf[2]+2) fssuit=1;else if(dpf[2]>dpf[0]+2 && dpf[2]>dpf[1]+2) fssuit=2;i=40; while(--i>-1) tgwpt[i]=dpf[i]=0;dlim=0x0fff;dpp=20; while(--dpp>-1){dp=te[jia][dpp];if((dp2=dp % 50)<1 || dp2>37) continue;if(noDapai_tbl[dp2]) continue;if(vDanger[dp2]>dlim) continue;if(dpf[dp2]) continue;te[jia][dpp]=0; dpf[dp2]++;if(a0111(jia)){ex=ey=ez=sb=nt=0;fr=mc=mt=av=ml=ev=mx=mxc=ad=qt=0;hp=0; while(++hp<38){if(hp % 10==0) continue;te[jia][15]=hp; helepai=hp;if(YAKU_JUDGE(jia)){if(fsp[jia][hp]>0) fr=1;if(yj_qiduizi) qt=1;if(vZpt[hp]>0){mc++;ad=hp;ev+=vZpt[hp]*pay2;if(pay2>=mx){if(pay2>mx){mx=pay2; mxc=0;}mxc++;}}}else if(keishikiHele){mt++;if(fsp[jia][hp]>0) fr=1;if(rule.kuitam_sakizuke==2 && mq[jia]) fr=255;}te[jia][15]=0;}if(mc>0){if(t_strategy[jia]==T_STRATEGY_HEAVY){if(fr<1 || exPos1<0){if(ex1<mx || (ex1==mx && ey1<mxc)){ex1=mx; ey1=mxc;exPos1=dpp;mcc=mc;ad1=ad;nt1=nt;fr1=fr;qt1=qt;}}}else {if(fr<1 || exPos1<0){if(ex1<ev || (ex1==ev && ey1<mx)){ex1=ev; ey1=mx;exPos1=dpp;mcc=mc;ad1=ad;nt1=nt;fr1=fr;qt1=qt;}}}}nm=30; while(--nm>0){if(nm % 10==0) continue;if(nm==dp2 || vZpt[nm]<1) continue;te[jia][dpp]=nm;vZpt[nm]--;tgf=0; ex2=-1; i=40; while(--i>=0) dqf[i]=0;dqp=20; while(--dqp>-1){dq=te[jia][dqp];if((dq2=dq % 50)<1 || dq2>37) continue;if(dq2==nm || dqf[dq2]) continue;if(th_dched[dp2+'.'+dq2+'-'+nm] || th_dched[dq2+'.'+dp2+'-'+nm]){continue;}th_dched[dp2+'.'+dq2+'-'+nm]=1;te[jia][dqp]=0; dqf[dq2]++;if(a0111(jia)){ex=ey=ez=sb=nt=0;mc=mt=av=ml=ev=mx=mxc=ad=qt=0;hp=0; while(++hp<38){if(hp % 10==0) continue;if(dp2==hp) continue;te[jia][15]=hp; helepai=hp;if(YAKU_JUDGE(jia)){if(fsp[jia][hp]>0) fr=1;if(yj_qiduizi) qt=1;if(vZpt[hp]>0){mc++; ad=hp;ev+=vZpt[hp]*pay2;if(pay2>=mx){if(pay2>mx){mx=pay2; mxc=0;}mxc++;}}}else if(keishikiHele){if(fsp[jia][hp]>0) fr=1;if(rule.kuitam_sakizuke==2 && mq[jia]) fr=255;}te[jia][15]=0;}}te[jia][dqp]=dq;}if(mc>0){if(t_strategy[jia]==T_STRATEGY_HEAVY){if(fr<1){if(ex2<mx || (ex2==mx && ey2<mxc)){ex2=mx; ey2=mxc;exPos2=dpp;mcc=mc;ad2=ad;nt2=nt;qt2=qt;}}}else {if(fr<1){if(ex2<ev || (ex2==ev && ey2<mx)){ex2=ev; ey2=mx;exPos2=dpp;mcc=mc;ad2=ad;nt2=nt;qt2=qt;}}}}te[jia][dpp]=0;vZpt[nm]++;}}te[jia][dpp]=dp;}zampai=zz;lingshang=ls;reach[jiaBuff]=rrcc;if(exPos1>0 && te[jia][exPos1]>0){tmp=0;if(yixun){if((ex2>ex1*3 && zampai>players*7) ||    (ex2>ex1 && (zampai>players*11 || (!qt1 && mcc<2)))){exPos1=exPos2;tmp=1;}}cmd=exPos1;p=te[jia][cmd];if(p>50){i=20; while(--i>0){if(te[jia][i]==p-50){cmd=i; p=te[jia][i];break;}}}if(te[jia][14] % 100==p) cmd=14;j=p % 50; i=gangOK; while(--i>=0){if(gang[i]==j) break;}if(i>-1){if(j>30) return(21);i=20; while(--i>0){if((k=te[jia][i] % 50)<1) continue;if(Math.floor(k / 10)!=Math.floor(j / 10)) continue;if(k-j==1 || k-j==-1 || k-j==2 || k-j==-2) break;}if(i<1) return(21);i=fc[jia]; k=-5;while(--i>=0){k+=5;m=fl[jia][k] % 50;n=fl[jia][k+1] % 50;if(m==n && m==j) break;}if(i>-1) return(21);}if(tmp || fr1){return(0);}if(gameMode==GAMEMODE_PENGLI){reachDeclare=1;return(0);}if(!yixun){reachDeclare=1;return(0);}if(!mq[jia] && zampai>players*4){if(mcc<2 && a0101_01(jia, ad1)<6){return(0);}reachDeclare=1;i=40; while(--i>-1){if(vDanger[i]>0x08000) break;}if(i>-1) reachDeclare=0;}return(0);}i=players; while(--i>-1){if(i==jia) continue;if(ippatsu[i]){dlim=35; break;}}var nxt=a0000(jia, 1);a0114(jia); p=-1;if((p=a0129(jia, nxt))>0) nrykfan[jia]+=13;else if(a0130(jia, nxt)){nrykfan[jia]+=2;p=a0106(jia, 0, dlim);}else {if(a0120(jia));else if(a0121(jia)){a0172(jia, 0, -1);a0126(jia);}else if(a0122(jia)){a0080(jia, 0, -1, nxt);if(a0125(jia));else a0126(jia);}else if(a0123(jia)){if(a0172(jia, 0, -1));else a0080(jia, 0, -1, nxt);a0126(jia);a0175(jia);}else if(a0172(jia, 0, -1)){if(a0125(jia));else a0126(jia);a0175(jia);}else if(a0080(jia, 0, -1, nxt)){if(a0125(jia));else a0126(jia);a0175(jia);}else if(a0126(jia)){a0175(jia);}else if(a0125(jia)){a0175(jia);}else {a0175(jia);}}if(p<1){i=20; k=-1; while(--i>0){j=te[jia][i] % 50;if(j<1 || j>37 || noDapai_tbl[j]) continue;if(k<vYaku[j]) k=vYaku[j];}if(k>0x00ff) p=a0109(jia, dlim);else p=a0106(jia, dlim);}i=20; while(--i>0){if(te[jia][i]==p){cmd=i; break;}}if(i<1){i=20; while(--i>0){if(te[jia][i] % 50==p){cmd=i; p=te[jia][i]; break;}}}if(te[jia][14]==p) cmd=14;j=p % 50; i=gangOK; while(--i>=0){if(gang[i]==j) break;}if(i>-1){if(j>30) return(21);i=20; while(--i>0){if((k=te[jia][i] % 50)<1) continue;if(Math.floor(k / 10)!=Math.floor(j / 10)) continue;if(k-j==1 || k-j==-1 || k-j==2 || k-j==-2) break;}if(i<1) return(21);i=fc[jia]; k=-5;while(--i>=0){k+=5;m=fl[jia][k] % 50;n=fl[jia][k+1] % 50;if(m==n && m==j) break;}if(i>-1) return(21);}var ppp=te[jia][cmd]; te[jia][cmd]=0;a0091(jia);te[jia][cmd]=ppp;return(0);} catch(e){console.log(e);}cmd=14; return(0);}function a0101_01(jia, pc){var p=pc % 50, sc=0, i, j;var i=doraCtr;while(--i>=0){if(p==dora[i]) break;}if(i>-1) return(0);if(p>30){return(15);}i=p & 0x0f; pb=Math.floor(p / 10)*10;if(fsp[jia][pb+1]>0){if(i==4 && fsp[jia][pb+7]>0) sc+=6;sc++;}if(fsp[jia][pb+2]>0){if(i==5 && fsp[jia][pb+8]>0) sc+=6;sc++;}if(fsp[jia][pb+3]>0){if(i==6 && fsp[jia][pb+9]>0) sc+=6;sc++;}if(fsp[jia][pb+4]>0){if(i==1 || i==7) sc+=4;sc++;}if(fsp[jia][pb+5]>0){if(i==2 || i==8) sc+=4;sc++;}if(fsp[jia][pb+6]>0){if(i==3 || i==9) sc+=4;sc++;}if(fsp[jia][pb+7]>0) sc++;if(fsp[jia][pb+8]>0) sc++;if(fsp[jia][pb+9]>0) sc++;return(sc);}function a0102(jia){var mxf =mxf2=mxfc =mxfc2=tgw =mny =mny2=    mpch =mpch2=mpct =mpct2=    yfa =avf = avf2=nrc =nrc2= frt = frt2=    ntt =ntt2=sbt =sbt2=ex =ex2=0;var exT=mpchT=mpctT=frtT=sbtT=avfT=tgwT=0;var mny =mny2=-1;var max_ex_pos=max_ex_posT=-1;var i, j, k, l, m, n, o, p;var dpf=new Array(0x40);var dpp, dp, dp2;var dqf=new Array(0x40);var nm, dpq, dq, dq2;var ls=lingshang; lingshang=0;var zz=zampai; zampai=100;var strg=0;if(gameMode==GAMEMODE_BOO && sc[jia]<200){strg=1;}i=40; while(--i>-1) dpf[i]=0;dpp=20; while(--dpp>-1){dp=te[jia][dpp];if((dp2=dp % 50)<1 || dp2>37) continue;if(noDapai_tbl[dp2]) continue;if(vDanger[dp2]>400) continue;if(dpf[dp2]) continue;te[jia][dpp]=0; dpf[dp2]++;if(a0111(jia)){mxc =mxfc =tgrf =mpch =mpct =yfa =avf =nrc =frt =ntt =sbt =ex =0;mny =-1;hp=0; while(++hp<38){if(hp % 10==0) continue;if(mpcd[hp]<1 && mpcd[Math.floor(hp / 10)*10]<1) continue;te[jia][15]=hp; helepai=hp;if(YAKU_JUDGE(jia)){if(vZpt[hp]>0){mpch++;if(fan>5) fan=5;yfa+=fan;mpct+=vZpt[hp];ex+=vZpt[hp]*fan;if(mny<0 || fan<mny) mny=fan;if(fan>=mxf){if(fan>mxf){mxf=fan; mxfc=0;}mxfc++;}}}te[jia][15]=0;}if(mpch>0){if(strg){if(mxfc>ex2){ex2=mxfc;tgw=0; max_ex_pos=dpp;frt2=frt; sbt2=sbt; tgwT=0;}}else {i=Math.floor(yfa / mpch);if(frt<1 || mpch>3 || max_ex_pos<0){if(ex>ex2 || (ex==ex2 && (mpch>mpch2 || (mpch==mpch2 && mpct>mpct2)))){ex2=ex; mpch2=mpch; mpct2=mpct;tgw=0; max_ex_pos=dpp;frt2=frt; sbt2=sbt; avf=i;if(ex2>exT || (ex2==exT && (mpch2>mpchT || (mpch2==mpchT && mpct2>mpctT)))) tgwT=0;}}}}nm=30; while(--nm>0){if(nm % 10==0) continue;if(nm==dp2 || vZpt[nm]<1) continue;te[jia][dpp]=nm;vZpt[nm]--;tgf=0; ex2=-1; i=40; while(--i>=0) dqf[i]=0;dqp=20; while(--dqp>-1){if((dq=te[jia][dqp])<1) continue;dq2=dq % 50;if(dq2==nm || dqf[dq2]) continue;if(th_dched[dp2+'.'+dq2+'-'+nm] || th_dched[dq2+'.'+dp2+'-'+nm]){continue;}th_dched[dp2+'.'+dq2+'-'+nm]=1;te[jia][dqp]=0; dqf[dq2]++;if(a0111(jia)){mxc =mxfc =tgrf =mpch =mpct =yfa =avf =nrc =frt =ntt =sbt =ex =0;mny =-1;hp=0; while(++hp<38){if(hp % 10==0) continue;if(mpcd[hp]<1 && mpcd[Math.floor(hp / 10)*10]<1) continue;if(dp2==hp) continue;te[jia][15]=hp; helepai=hp;if(YAKU_JUDGE(jia)){if(vZpt[hp]>0){mpch++;if(fan>256) fan=32;else if(fan>128) fan=10;else if(fan>14) fan=32;yfa+=fan;mpct+=vZpt[hp];ex+=vZpt[hp]*fan;if(mny<0 || fan<mny) mny=fan;if(fan>=mxf){if(fan>mxf){mxf=fan; mxfc=0;}mxfc++;}}}te[jia][15]=0;}}te[jia][dqp]=dq;}if(mpch>0){if(strg) ;else {i=Math.floor(yfa / mpch);if(frt<1 || mpch>3 || max_ex_pos<0){if(ex>exT || (ex==exT && (mpch>mpchT || (mpch==mpchT && mpct>mpctT)))){exT=ex; mpchT=mpch; mpctT=mpct;tgwT+=vZpt[nm]; max_ex_posT=dpp;frtT=frt; sbtT=sbt; avfT=i;}}}}te[jia][dpp]=0;vZpt[nm]++;}}te[jia][dpp]=dp;}zampai=zz;lingshang=ls;if(!strg){if(zampai / players>6 && tgwT>0 && (exT>ex2 || (exT==ex2 && (mpchT>mpch2 || (mpchT==mpch2 && mpctT>mpct2))))){ex2=exT; mpch2=mpchT; mpct2=mpctT;tgw=tgwT; max_ex_pos=max_ex_posT;frt2=frtT; sbt2=sbtT; avf2=avfT;}}if(max_ex_pos>0 && te[jia][max_ex_pos]>0){cmd=max_ex_pos;p=te[jia][cmd];if(p>50){i=20; while(--i>0){if(te[jia][i]==p-50){cmd=i; p=te[jia][cmd];break;}}}j=p % 50; i=gangOK; while(--i>=0){if(gang[i]==j) break;}if(i>-1){if(j>30) return(21);i=20; while(--i>0){if((k=te[jia][i] % 50)<1) continue;if(Math.floor(k / 10)!=Math.floor(j / 10)) continue;if(k-j==1 || k-j==-1 || k-j==2 || k-j==-2) break;}if(i<1) return(21);i=fc[jia]; k=-5;while(--i>=0){k+=5;m=fl[jia][k] % 50;n=fl[jia][k+1] % 50;if(m==n && m==j) break;}if(i>-1) return(21);}if(frt2 || sbt2) return(0);if(gameMode==GAMEMODE_BOO && !mq[jia] && zampai>players*5){if(tgw<5 || zampai / players>12) reachDeclare=1;}return(0);}dlim=60;var f=0;var nxt=a0000(jia, 1);if((p=a0129(jia, nxt))>0) ;else if((gameMode==GAMEMODE_BOO || rule.arshiar_qiduizi) && a0130(jia, nxt)){a0114(jia);p=a0106(jia, dlim);}else {if(a0120(jia)) f=1;else if(a0121(jia)) f=1;else if(a0122(jia)){f=1;a0080(jia, 0, -1, nxt);a0126(jia)}else if(a0080(jia, 0, -1, nxt)){f=1;if(a0125(jia));else a0126(jia);}else if(a0125(jia)) f=1;else if(a0126(jia)) f=1;a0114(jia);}if(p<1){i=20; k=-1; while(--i>0){j=te[jia][i] % 50;if(j<1 || j>37 || noDapai_tbl[j]) continue;if(k<vYaku[j]) k=vYaku[j];}if(k>0x00ff) p=a0109(jia, dlim);else p=a0107(jia, 0, dlim);}i=20; while(--i>0){if(te[jia][i]==p){cmd=i; break;}}if(i<1){i=20; while(--i>0){if(te[jia][i] % 50==p){cmd=i; p=te[jia][i]; break;}}}if(te[jia][14]==p) cmd=14;j=p % 50; i=gangOK; while(--i>=0){if(gang[i]==j) break;}if(i>-1){if(j>30) return(21);i=20; while(--i>0){if((k=te[jia][i] % 50)<1) continue;if(Math.floor(k / 10)!=Math.floor(j / 10)) continue;if(k-j==1 || k-j==-1 || k-j==2 || k-j==-2) break;}if(i<1) return(21);i=fc[jia]; k=-5;while(--i>=0){k+=5;m=fl[jia][k] % 50;n=fl[jia][k+1] % 50;if(m==n && m==j) break;}if(i>-1) return(21);}var ppp=te[jia][cmd]; te[jia][cmd]=0;a0091(jia);te[jia][cmd]=ppp;return(0);}function a0103(jia){var mxf =mxf2=mxfc =mxfc2=tgw =mny =mny2=    mpch =mpch2=mpct =mpct2=    yfa =avf = avf2=nrc =nrc2= frt = frt2=    ntt =ntt2=sbt =sbt2=ex =ex2=0;var exT=mpchT=mpctT=frtT=sbtT=avfT=tgwT=0;var mny =mny2=-1;var max_ex_pos=max_ex_posT=-1;var i, j, k, l, m, n, o, p;var dpf=new Array(0x40);var dpp, dp, dp2;var dqf=new Array(0x40);var nm, dpq, dq, dq2;var ls=lingshang; lingshang=0;var zz=zampai; zampai=100;i=40; while(--i>-1) dpf[i]=0;dpp=20; while(--dpp>-1){dp=te[jia][dpp];if((dp2=dp % 50)<1 || dp2>37) continue;if(noDapai_tbl[dp2]) continue;if(vDanger[dp2]>20) continue;if(dpf[dp2]) continue;te[jia][dpp]=0; dpf[dp2]++;if(a0111(jia)){mxc =mxfc =tgrf =mpch =mpct =yfa =avf =nrc =frt =ntt =sbt =ex =0;mny =-1;hp=0; while(++hp<38){if(hp % 10==0) continue;if(mpcd[hp]<1 && mpcd[Math.floor(hp / 10)*10]<1) continue;te[jia][15]=hp; helepai=hp;if(YAKU_JUDGE(jia)){if(dundiao){i=16; j=0; while(--i>=0){if(te[jia][i] % 50==hp) j++;}if(j>2) ntt++;}if(vZpt[hp]>0){mpch++;yfa+=fan;mpct+=vZpt[hp];ex+=vZpt[hp]*fan;if(mny<0 || fan<mny) mny=fan;if(fan>=mxf){if(fan>mxf){mxf=fan; mxfc=0;}mxfc++;}}}if(keishikiHele){if(fsp[jia][hp]>0) frt=1;}te[jia][15]=0;}if(mpch>0){i=Math.floor(yfa / mpch);if(max_ex_pos<0){if(mpch>mpch2 || (mpch==mpch2 && mpct>mpct2)){mpch2=mpch; mpct2=mpct;tgw=0; max_ex_pos=dpp;frt2=frt; sbt2=sbt; avf=i;}}}}te[jia][dpp]=dp;}zampai=zz;lingshang=ls;if(max_ex_pos>0 && te[jia][max_ex_pos]>0){cmd=max_ex_pos;p=te[jia][cmd];if(p>50){i=20; while(--i>0){if(te[jia][i]==p-50){cmd=i; p=te[jia][cmd];break;}}}j=p % 50; i=gangOK; while(--i>=0){if(gang[i]==j) break;}if(i>-1){if(j>30) return(21);i=20; while(--i>0){if((k=te[jia][i] % 50)<1) continue;if(Math.floor(k / 10)!=Math.floor(j / 10)) continue;if(k-j==1 || k-j==-1 || k-j==2 || k-j==-2) break;}if(i<1) return(21);i=fc[jia]; k=-5;while(--i>=0){k+=5;m=fl[jia][k] % 50;n=fl[jia][k+1] % 50;if(m==n && m==j) break;}if(i>-1) return(21);}if(!mq[jia] && zampai>players*5) reachDeclare=1;return(0);}dlim=60;var nxt=a0000(jia, 1);if((p=a0129(jia, nxt))>0) ;else if(a0130(jia, nxt)){a0114(jia);p=a0107(jia, 0, dlim);}else {a0114(jia);p=a0107(jia, i, 0);}i=20; while(--i>0){if(te[jia][i]==p){cmd=i; break;}}if(i<1){i=20; while(--i>0){if(te[jia][i] % 50==p){cmd=i; p=te[jia][i]; break;}}}if(te[jia][14]==p) cmd=14;j=p % 50; i=gangOK; while(--i>=0){if(gang[i]==j) break;}if(i>-1){if(j>30) return(21);i=20; while(--i>0){if((k=te[jia][i] % 50)<1) continue;if(Math.floor(k / 10)!=Math.floor(j / 10)) continue;if(k-j==1 || k-j==-1 || k-j==2 || k-j==-2) break;}if(i<1) return(21);i=fc[jia]; k=-5;while(--i>=0){k+=5;m=fl[jia][k] % 50;n=fl[jia][k+1] % 50;if(m==n && m==j) break;}if(i>-1) return(21);}var ppp=te[jia][cmd]; te[jia][cmd]=0;a0091(jia);te[jia][cmd]=ppp;return(0);}function a0104(jia){var mxf =mxf2=mxfc =mxfc2=tgw =mny =mny2=    mpch =mpch2=mpct =mpct2=    yfa =avf = avf2=nrc =nrc2= frt = frt2=    ntt =ntt2=sbt =sbt2=ex =ex2=0;var exT=mpchT=mpctT=frtT=sbtT=avfT=tgwT=0;var mny =mny2=-1;var max_ex_pos=max_ex_posT=-1;var i, j, k, l, m, n, o, p;var dpf=new Array(0x40);var dpp, dp, dp2;var dqf=new Array(0x40);var nm, dpq, dq, dq2;var ls=lingshang; lingshang=0;var zz=zampai; zampai=100;i=40; while(--i>-1) dpf[i]=0;dpp=20; while(--dpp>-1){dp=te[jia][dpp];if((dp2=dp % 50)<1 || dp2>37) continue;if(noDapai_tbl[dp2]) continue;if(vDanger[dp2]>20) continue;if(dpf[dp2]) continue;te[jia][dpp]=0; dpf[dp2]++;if(a0111(jia)){mxc =mxfc =tgrf =mpch =mpct =yfa =avf =nrc =frt =ntt =sbt =ex =0;mny =-1;hp=0; while(++hp<38){if(hp % 10==0) continue;if(mpcd[hp]<1 && mpcd[Math.floor(hp / 10)*10]<1) continue;te[jia][15]=hp; helepai=hp;if(YAKU_JUDGE(jia)){if(vZpt[hp]>0){mpch++;yfa+=fan;mpct+=vZpt[hp];ex+=vZpt[hp]*fan;if(mny<0 || fan<mny) mny=fan;}}te[jia][15]=0;}if(mpch>0){i=Math.floor(yfa / mpch);if(mpch>3 || max_ex_pos<0){if(mpch>mpch2 || (mpch==mpch2 && mpct>mpct2)){mpch2=mpch; mpct2=mpct;tgw=0; max_ex_pos=dpp;sbt2=sbt; avf=i;}}}}te[jia][dpp]=dp;}zampai=zz;lingshang=ls;if(max_ex_pos>0 && te[jia][max_ex_pos]>0){cmd=max_ex_pos;p=te[jia][cmd];if(p>50){i=20; while(--i>0){if(te[jia][i]==p-50){cmd=i; p=te[jia][cmd];break;}}}j=p % 50; i=gangOK; while(--i>=0){if(gang[i]==j) break;}if(i>-1){if(j>30) return(21);i=20; while(--i>0){if((k=te[jia][i] % 50)<1) continue;if(Math.floor(k / 10)!=Math.floor(j / 10)) continue;if(k-j==1 || k-j==-1 || k-j==2 || k-j==-2) break;}if(i<1) return(21);i=fc[jia]; k=-5;while(--i>=0){k+=5;m=fl[jia][k] % 50;n=fl[jia][k+1] % 50;if(m==n && m==j) break;}if(i>-1) return(21);}if(!mq[jia] && !yixun) reachDeclare=1;return(0);}a0114(jia);p=a0107(jia, -1, 256);i=20; while(--i>0){if(te[jia][i]==p){cmd=i; break;}}if(i<1){i=20; while(--i>0){if(te[jia][i] % 50==p){cmd=i; p=te[jia][i]; break;}}}if(te[jia][14]==p) cmd=14;j=p % 50; i=gangOK; while(--i>=0){if(gang[i]==j) break;}if(i>-1){if(j>30) return(21);i=20; while(--i>0){if((k=te[jia][i] % 50)<1) continue;if(Math.floor(k / 10)!=Math.floor(j / 10)) continue;if(k-j==1 || k-j==-1 || k-j==2 || k-j==-2) break;}if(i<1) return(21);i=fc[jia]; k=-5;while(--i>=0){k+=5;m=fl[jia][k] % 50;n=fl[jia][k+1] % 50;if(m==n && m==j) break;}if(i>-1) return(21);}var ppp=te[jia][cmd]; te[jia][cmd]=0;a0091(jia);te[jia][cmd]=ppp;return(0);}var v0105_1=new Array(40);function a0105(jia){var mxf =mxf2=mxfc =mxfc2=tgw =mny =mny2=    mpch =mpch2=mpct =mpct2=    yfa =avf = avf2=nrc =nrc2= frt = frt2=    ntt =ntt2=sbt =sbt2=ex =ex2=0;var exT=mpchT=mpctT=frtT=sbtT=avfT=tgwT=0;var mny =mny2=-1;var max_ex_pos=max_ex_posT=-1;var i, j, k, l, m, n, o, p;var dpf=new Array(0x40);var dpp, dp, dp2;var dqf=new Array(0x40);var nm, dpq, dq, dq2;var ls=lingshang; lingshang=0;var zz=zampai; zampai=100;i=40; while(--i>-1) dpf[i]=0;dpp=20; while(--dpp>-1){dp=te[jia][dpp];if((dp2=dp % 50)<1 || dp2>37) continue;if(noDapai_tbl[dp2]) continue;if(vDanger[dp2]>20) continue;if(dpf[dp2]) continue;te[jia][dpp]=0; dpf[dp2]++;if(a0111(jia)){mxc =mxfc =tgrf =mpch =mpct =yfa =avf =ex =0;mny =-1;hp=0; while(++hp<38){if(hp % 10==0) continue;if(mpcd[hp]<1 && mpcd[Math.floor(hp / 10)*10]<1) continue;te[jia][15]=hp; helepai=hp;if(YAKU_JUDGE(jia)){if(vZpt[hp]>0){mpch++; yfa+=fan;if(fan>=mxf){if(fan>mxf){mxf=fan; mxfc=0;}mxfc++;}}}else if(keishikiHele){if(mq[jia]){if(fan==1 && fc[jia]<4){fan=8+ndr_ctr[jia]; yfa+=fan;if(fan>=mxf){if(fan>mxf){mxf=fan; mxfc=0;}mxfc++;}}else if(fan>3 && fc[jia]==4 && !(fl[jia][4]+fl[jia][9]+fl[jia][14]+fl[jia][19])){fan+=4+ndr_ctr[jia]; yfa+=fan;if(fan>=mxf){if(fan>mxf){mxf=fan; mxfc=0;}mxfc++;}}}}te[jia][15]=0;}if(mpch>0){i=Math.floor(yfa / mpch);if(mxf>mxf2 || (mxf==mxf2 && (mxfc>mxfc2 || (mxfc==mxfc2 || i>avf)))){mxf2=mxf;mxfc2=mxfc;avf=i;max_ex_pos=dpp;}}}te[jia][dpp]=dp;}zampai=zz;lingshang=ls;if(max_ex_pos>0 && te[jia][max_ex_pos]>0){texp[jia].mxf=mxf2;texp[jia].mxfc=mxfc2;texp[jia].avf=avf;texp[jia].flag=1;cmd=max_ex_pos;p=te[jia][cmd];if(p>50){i=20; while(--i>0){if(te[jia][i]==p-50){cmd=i; p=te[jia][cmd];break;}}}j=p % 50; i=gangOK; while(--i>=0){if(gang[i]==j) break;}if(i>-1){if(j>30) return(21);i=20; while(--i>0){if((k=te[jia][i] % 50)<1) continue;if(Math.floor(k / 10)!=Math.floor(j / 10)) continue;if(k-j==1 || k-j==-1 || k-j==2 || k-j==-2) break;}if(i<1) return(21);i=fc[jia]; k=-5;while(--i>=0){k+=5;m=fl[jia][k] % 50;n=fl[jia][k+1] % 50;if(m==n && m==j) break;}if(i>-1) return(21);}return(0);}p=-1;var f=0;var nxt=a0000(jia, 1); if((p=a0132(jia, nxt))>0) f=1;else if((p=a0133(jia, nxt))>0) f=1;else if(a0131(jia, nxt)) f=1;else if(a0120(jia)) f=1;else if(a0121(jia)) f=1;else if(a0122(jia)) f=1;else if(a0127(jia)) f=1;else if(a0128(jia)){f=1; a0123(jia); a0124(jia, 0, -1);}else if(a0172(jia, 0, -1)) f=1;else if(a0124(jia, 0, -1)) f=1;else if(a0126(jia)) f=1;a0114(jia);if(p<1){if(f) p=a0109(jia, 65535);else p=a0106(jia, 65535);}i=20; while(--i>0){if(te[jia][i]==p){cmd=i; break;}}if(i<1){i=20; while(--i>0){if(te[jia][i] % 50==p){cmd=i; p=te[jia][i]; break;}}}if(te[jia][14]==p) cmd=14;j=p % 50; i=gangOK; while(--i>=0){if(gang[i]==j) break;}if(i>-1){if(j>30) return(21);i=20; while(--i>0){if((k=te[jia][i] % 50)<1) continue;if(Math.floor(k / 10)!=Math.floor(j / 10)) continue;if(k-j==1 || k-j==-1 || k-j==2 || k-j==-2) break;}if(i<1) return(21);i=fc[jia]; k=-5;while(--i>=0){k+=5;m=fl[jia][k] % 50;n=fl[jia][k+1] % 50;if(m==n && m==j) break;}if(i>-1) return(21);}var ppp=te[jia][cmd]; te[jia][cmd]=0;a0091(jia);te[jia][cmd]=ppp;return(0);}function a0106(jia, dlim){var i, j, x, y;var pai_tbln=new Array(), pai_tblv=new Array(), pai_tblc=0;var qtn=new Array(), qtv=new Array(), qtc=0;i=nukidora.length; while(--i>-1){if((j=nukidora[i])<1 || j>37 || noDapai_tbl[j] || ai_ndrq[i]) continue;x=20; while(--x>-1){if(te[jia][x] % 50==j){return(j);}}}x=255; i=vPtn_ctr; while(--i>-1){if((j=vPtn[i].pi % 50)<1 || j>37 || noDapai_tbl[j]) continue;if(vDanger[j]>dlim) continue;if(x<vPtn[i].xt) continue;if(x>vPtn[i].xt){x=vPtn[i].xt; pai_tblc=0;}pai_tbln[pai_tblc]=j;pai_tblv[pai_tblc++]=vPtn[i].value;}if(pai_tblc<1){x=-1; i=vPtn_ctr; while(--i>-1){if((j=vPtn[i].pi % 50)<1 || j>37 || noDapai_tbl[j]) continue;if(x<0){x=vDanger[j]; pai_tblc=0;pai_tbln[pai_tblc]=j;pai_tblv[pai_tblc++]=vPtn[i].value;continue;}if(x>vDanger[j]){x=vDanger[j]; pai_tblc=0;pai_tbln[pai_tblc]=j;pai_tblv[pai_tblc++]=vPtn[i].value;continue;}}}if(pai_tblc==1) return(pai_tbln[0]);y=-1; i=pai_tblc; while(--i>-1){j=pai_tbln[i];if(y<0){y=vYaku[j];qtc=1;qtn[0]=j;qtv[0]=pai_tblv[i];continue;}if(y<vYaku[j]) continue;if(y>vYaku[j]){y=vYaku[j];qtc=0;}qtn[qtc]=j;qtv[qtc++]=pai_tblv[i];}if(qtc==1) return(qtn[0]);i=40; while(--i>-1) pai_tbl[i]=-1;i=qtc; while(--i>-1){pai_tbl[qtn[i]]=qtv[i];}x=0; y=-1; i=menfeng[jia]; while(--i>30){if(noDapai_tbl[i]) continue;if(i==zhuangfeng[0] || i==zhuangfeng[1]) continue;if(x>=pai_tbl[i]) continue;x=pai_tbl[i]; y=i;}i=35; while(--i>menfeng[jia]){if(noDapai_tbl[i]) continue;if(i==zhuangfeng[0] ||  i==zhuangfeng[1]) continue;if(x>=pai_tbl[i]) continue;x=pai_tbl[i]; y=i;}i=38; while(--i>30){if(noDapai_tbl[i]) continue;if(x>=pai_tbl[i]) continue;x=pai_tbl[i]; y=i;}i=5; while(--i>-1){if(!noDapai_tbl[25+i] && x<pai_tbl[25+i]){ x=pai_tbl[25+i]; y=25+i; }if(!noDapai_tbl[25-i] && x<pai_tbl[25-i]){ x=pai_tbl[25-i]; y=25-i; }if(!noDapai_tbl[15+i] && x<pai_tbl[15+i]){ x=pai_tbl[15+i]; y=15+i; }if(!noDapai_tbl[15-i] && x<pai_tbl[15-i]){ x=pai_tbl[15-i]; y=15-i; }if(!noDapai_tbl[ 5+i] && x<pai_tbl[ 5+i]){ x=pai_tbl[ 5+i]; y= 5+i; }if(!noDapai_tbl[ 5-i] && x<pai_tbl[ 5-i]){ x=pai_tbl[ 5-i]; y= 5-i; }}if(y<0){i=a0110(jia);return(i);}return(y);}function a0107(jia, fan, dlim){var i, j, x, y;var pai_tbln=new Array(), pai_tblv=new Array(), pai_tblc=0;i=nukidora.length; while(--i>-1){if((j=nukidora[i])<1 || j>37 || noDapai_tbl[j] || ai_ndrq[i]) continue;x=20; while(--x>-1){if(te[jia][x] % 50==j){return(j);}}}x=255; i=vPtn_ctr; while(--i>-1){if((j=vPtn[i].pi % 50)<1 || j>37 || noDapai_tbl[j]) continue;if(vDanger[j]>dlim) continue;if(x<vPtn[i].xt) continue;if(x>vPtn[i].xt){ x=vPtn[i].xt; pai_tblc=0; }if(vYaku[j]<fan) continue;pai_tbln[pai_tblc]=j;pai_tblv[pai_tblc++]=vPtn[i].value;}if(pai_tblc<1){x=-1; i=vPtn_ctr; while(--i>-1){if((j=vPtn[i].pi % 50)<1 || j>37 || noDapai_tbl[j]) continue;if(x<0){x=vDanger[j]; pai_tblc=0;pai_tbln[pai_tblc]=j;pai_tblv[pai_tblc++]=vPtn[i].value;continue;}if(x>vDanger[j]){x=vDanger[j]; pai_tblc=0;pai_tbln[pai_tblc]=j;pai_tblv[pai_tblc++]=vPtn[i].value;continue;}}}if(pai_tblc==1) return(pai_tbln[0]);i=40; while(--i>-1) pai_tbl[i]=-1;i=pai_tblc; while(--i>-1){pai_tbl[pai_tbln[i]]=pai_tblv[i];}x=-1; y=-1; i=menfeng[jia]; while(--i>30){if(noDapai_tbl[i]) continue;if(i==zhuangfeng[0] || i==zhuangfeng[1]) continue;if(x>pai_tbl[i]) continue;x=pai_tbl[i]; y=i;}i=35; while(--i>menfeng[jia]){if(noDapai_tbl[i]) continue;if(i==zhuangfeng[0] ||  i==zhuangfeng[1]) continue;if(x>pai_tbl[i]) continue;x=pai_tbl[i]; y=i;}i=38; while(--i>30){if(noDapai_tbl[i]) continue;if(x>pai_tbl[i]) continue;x=pai_tbl[i]; y=i;}i=5; while(--i>-1){if(!noDapai_tbl[25+i] && x<pai_tbl[25+i]){ x=pai_tbl[25+i]; y=25+i; }if(!noDapai_tbl[25-i] && x<pai_tbl[25-i]){ x=pai_tbl[25-i]; y=25-i; }if(!noDapai_tbl[15+i] && x<pai_tbl[15+i]){ x=pai_tbl[15+i]; y=15+i; }if(!noDapai_tbl[15-i] && x<pai_tbl[15-i]){ x=pai_tbl[15-i]; y=15-i; }if(!noDapai_tbl[ 5+i] && x<pai_tbl[ 5+i]){ x=pai_tbl[ 5+i]; y= 5+i; }if(!noDapai_tbl[ 5-i] && x<pai_tbl[ 5-i]){ x=pai_tbl[ 5-i]; y= 5-i; }}if(y<0){i=a0110(jia);return(i);}return(y);}function a0109(jia, dlim){var i, j, x, y, dlim=vDanger_limit_heavy;var pai_tbln=new Array(), pai_tblv=new Array(), pai_tblc=0;var qtn=new Array(), qtv=new Array(), qtc=0;i=nukidora.length; while(--i>-1){if((j=nukidora[i])<1 || j>37 || noDapai_tbl[j] || ai_ndrq[i]) continue;x=20; while(--x>-1){if(te[jia][x] % 50==j){return(j);}}}pai_tblc=0;x=-65536; i=vPtn_ctr; while(--i>-1){if((j=vPtn[i].pi % 50)<1 || j>37 || noDapai_tbl[j]) continue;if(vDanger[j]>dlim) continue;if(x<0 || x>vYaku[j]) x=vYaku[j];}++x;i=vPtn_ctr; while(--i>-1){if((j=vPtn[i].pi % 50)<1 || j>37 || noDapai_tbl[j]) continue;if(vDanger[j]>dlim) continue;if(vYaku[j]<x){pai_tbln[pai_tblc]=j;pai_tblv[pai_tblc++]=i;}}if(pai_tblc==1) return(pai_tbln[0]);if(pai_tblc<1){x=-65536; i=vPtn_ctr; while(--i>-1){if((j=vPtn[i].pi % 50)<1 || j>37 || noDapai_tbl[j]) continue;if(vDanger[j]>dlim) continue;if(x<vYaku[j]) x=vYaku[j];}i=vPtn_ctr; while(--i>-1){if((j=vPtn[i].pi % 50)<1 || j>37 || noDapai_tbl[j]) continue;if(vDanger[j]>dlim) continue;if(vYaku[j]<x){pai_tbln[pai_tblc]=j;pai_tblv[pai_tblc++]=i;}}}if(pai_tblc==1) return(pai_tbln[0]);if(pai_tblc<1){pai_tblc=0; i=vPtn_ctr; while(--i>-1){if((j=vPtn[i].pi % 50)<1 || j>37 || noDapai_tbl[j]) continue;if(vDanger[j]>dlim) continue;pai_tbln[pai_tblc]=j;pai_tblv[pai_tblc++]=i;}if(pai_tblc==1) return(pai_tbln[0]);}if(pai_tblc<1){pai_tblc=0; i=vPtn_ctr; while(--i>-1){if((j=vPtn[i].pi % 50)<1 || j>37 || noDapai_tbl[j]) continue;pai_tbln[pai_tblc]=j;pai_tblv[pai_tblc++]=i;}if(pai_tblc==1) return(pai_tbln[0]);}y=65535; i=pai_tblc; while(--i>-1){j=pai_tblv[i];if(y<vPtn[j].xt) continue;if(y>vPtn[j].xt){y=vPtn[j].xt;qtc=0;}qtn[qtc]=pai_tbln[i];qtv[qtc++]=j;}if(qtc==1) return(qtn[0]);i=40; while(--i>-1) pai_tbl[i]=-1;i=qtc; while(--i>-1) pai_tbl[qtn[i]]=vPtn[qtv[i]].value;if(!noDapai_tbl[29] && x<pai_tbl[29]){ x=pai_tbl[29]; y=29; }if(!noDapai_tbl[21] && x<pai_tbl[21]){ x=pai_tbl[21]; y=21; }if(!noDapai_tbl[19] && x<pai_tbl[19]){ x=pai_tbl[19]; y=19; }if(!noDapai_tbl[11] && x<pai_tbl[11]){ x=pai_tbl[11]; y=11; }if(!noDapai_tbl[ 9] && x<pai_tbl[ 9]){ x=pai_tbl[ 9]; y= 9; }if(!noDapai_tbl[ 1] && x<pai_tbl[ 1]){ x=pai_tbl[ 1]; y= 1; }x=0; y=-1; i=menfeng[jia]; while(--i>30){if(noDapai_tbl[i]) continue;if(i==zhuangfeng[0] || i==zhuangfeng[1]) continue;if(x>=pai_tbl[i]) continue;x=pai_tbl[i]; y=i;}i=35; while(--i>menfeng[jia]){if(noDapai_tbl[i]) continue;if(i==zhuangfeng[0] ||  i==zhuangfeng[1]) continue;if(x>=pai_tbl[i]) continue;x=pai_tbl[i]; y=i;}i=38; while(--i>30){if(noDapai_tbl[i]) continue;if(x>=pai_tbl[i]) continue;x=pai_tbl[i]; y=i;}i=4; while(--i>-1){if(!noDapai_tbl[25+i] && x<pai_tbl[25+i]){ x=pai_tbl[25+i]; y=25+i; }if(!noDapai_tbl[25-i] && x<pai_tbl[25-i]){ x=pai_tbl[25-i]; y=25-i; }if(!noDapai_tbl[15+i] && x<pai_tbl[15+i]){ x=pai_tbl[15+i]; y=15+i; }if(!noDapai_tbl[15-i] && x<pai_tbl[15-i]){ x=pai_tbl[15-i]; y=15-i; }if(!noDapai_tbl[ 5+i] && x<pai_tbl[ 5+i]){ x=pai_tbl[ 5+i]; y= 5+i; }if(!noDapai_tbl[ 5-i] && x<pai_tbl[ 5-i]){ x=pai_tbl[ 5-i]; y= 5-i; }}if(y<0){i=a0110(jia);return(i);}return(y);}function a0110(jia){var i, j, x;i=nukidora.length; while(--i>-1){if((j=nukidora[i])<1 || j>37 || noDapai_tbl[j] || ai_ndrq[i]) continue;x=20; while(--x>-1){if(te[jia][x] % 50==j){return(j);}}}i=menfeng[jia]; while(--i>30){if(noDapai_tbl[i]) continue;if(i==zhuangfeng[0] ||  i==zhuangfeng[1]) continue;j=20; while(--j>-1){if(te[jia][j] % 50==i) return(i);}}i=35; while(--i>menfeng[jia]){if(noDapai_tbl[i]) continue;if(i==zhuangfeng[0] ||  i==zhuangfeng[1]) continue;j=20; while(--j>-1){if(te[jia][j] % 50==i) return(i);}}i=38; while(--i>30){if(noDapai_tbl[i]) continue;j=20; while(--j>-1){if(te[jia][j] % 50==i) return(i);}}i=5; while(--i>-1){j=20; while(--j>-1){k=te[jia][j] % 50;if(k==25+i && !noDapai_tbl[k]) return(k);if(k==25-i && !noDapai_tbl[k]) return(k);if(k==15+i && !noDapai_tbl[k]) return(k);if(k==15-i && !noDapai_tbl[k]) return(k);if(k== 5+i && !noDapai_tbl[k]) return(k);if(k== 5-i && !noDapai_tbl[k]) return(k);}}return(te[jia][14] % 50);}function a0111(jia){var i, j, k, l, m;var x, y, z;var p, q;var mn=[0, 0, 0, 0, 0, 0, 0];i=40; while(--i>-1) mpcd[i]=0;SHUPAI_MOVE(jia);if(gameMode!=GAMEMODE_TAIWAN){j=k=0; z=-1;i=30; while((i-=10)>-1){if(pai_tbl[i+1]==2) k++;if(pai_tbl[i+1]==1) j++;if(pai_tbl[i+1]<1) z=i+1;if(pai_tbl[i+9]==2) k++;if(pai_tbl[i+9]==1) j++;if(pai_tbl[i+9]<1) z=i+9;}i=30; while(++i<38){if(pai_tbl[i]==2) k++;if(pai_tbl[i]==1) j++;if(pai_tbl[i]<1) z=i;}if(j==13){mpcd[1]=mpcd[9]=mpcd[11]=mpcd[19]=mpcd[21]=mpcd[29]=mpcd[31]=mpcd[32]=mpcd[33]=mpcd[34]=mpcd[35]=mpcd[36]=mpcd[37]=1;return(-1);}if(j==12 && k==1){mpcd[z]=1;return(-1);}}if(gameMode==GAMEMODE_GUOJI && fc[jia]<2){i=0;if(pai_tbl[1]>0) i++;if(pai_tbl[4]>0) i++;if(pai_tbl[7]>0) i++;j=i;if(pai_tbl[12]>0) j++;if(pai_tbl[15]>0) j++;if(pai_tbl[18]>0) j++;if(pai_tbl[23]>0) j++;if(pai_tbl[26]>0) j++;if(pai_tbl[29]>0) j++;k=j; l=0x012;j=i;if(pai_tbl[13]>0) j++;if(pai_tbl[16]>0) j++;if(pai_tbl[19]>0) j++;if(pai_tbl[22]>0) j++;if(pai_tbl[25]>0) j++;if(pai_tbl[28]>0) j++;if(j>k){k=j; l=0x021;}i=0;if(pai_tbl[11]>0) i++;if(pai_tbl[14]>0) i++;if(pai_tbl[17]>0) i++;j=i;if(pai_tbl[2]>0) j++;if(pai_tbl[5]>0) j++;if(pai_tbl[8]>0) j++;if(pai_tbl[23]>0) j++;if(pai_tbl[26]>0) j++;if(pai_tbl[29]>0) j++;if(j>k){k=j; l=0x102;}j=i;if(pai_tbl[3]>0) j++;if(pai_tbl[6]>0) j++;if(pai_tbl[9]>0) j++;if(pai_tbl[22]>0) j++;if(pai_tbl[25]>0) j++;if(pai_tbl[28]>0) j++;if(j>k){k=j; l=0x120;}i=0;if(pai_tbl[21]>0) i++;if(pai_tbl[24]>0) i++;if(pai_tbl[27]>0) i++;j=i;if(pai_tbl[2]>0) j++;if(pai_tbl[5]>0) j++;if(pai_tbl[8]>0) j++;if(pai_tbl[13]>0) j++;if(pai_tbl[16]>0) j++;if(pai_tbl[19]>0) j++;if(j>k){k=j; l=0x201;}j=i;if(pai_tbl[3]>0) j++;if(pai_tbl[6]>0) j++;if(pai_tbl[9]>0) j++;if(pai_tbl[12]>0) j++;if(pai_tbl[15]>0) j++;if(pai_tbl[18]>0) j++;if(j>k){k=j; l=0x210;}i=30; while(++i<38){if(pai_tbl[i]>0) k++;}if(k>12){i=((l >> 8) & 3)*10;if(pai_tbl[i+1]<1) mpcd[i+1]=1;if(pai_tbl[i+4]<1) mpcd[i+4]=1;if(pai_tbl[i+7]<1) mpcd[i+7]=1;i=((l >> 4) & 3)*10;if(pai_tbl[i+2]<1) mpcd[i+2]=1;if(pai_tbl[i+5]<1) mpcd[i+5]=1;if(pai_tbl[i+8]<1) mpcd[i+8]=1;i=(l  & 3)*10;if(pai_tbl[i+3]<1) mpcd[i+3]=1;if(pai_tbl[i+6]<1) mpcd[i+6]=1;if(pai_tbl[i+9]<1) mpcd[i+9]=1;i=30; while(++i<38){if(pai_tbl[i]<1) mpcd[i]=1;}return(1);}if(k>7){var bf=new Array(40); m=-1;i=40; while(--i>-1) bf[i]=pai_tbl[i];i=((l >> 8) & 3)*10;if(bf[i+1]>0) bf[i+1]--; else m=i+1;if(bf[i+4]>0) bf[i+4]--; else m=i+4;if(bf[i+7]>0) bf[i+7]--; else m=i+7;i=((l >> 4) & 3)*10;if(bf[i+2]>0) bf[i+2]--; else m=i+2;if(bf[i+5]>0) bf[i+5]--; else m=i+5;if(bf[i+8]>0) bf[i+8]--; else m=i+8;i=(l  & 3)*10;if(bf[i+3]>0) bf[i+3]--; else m=i+3;if(bf[i+6]>0) bf[i+6]--; else m=i+6;if(bf[i+9]>0) bf[i+9]--; else m=i+9;if(k>8){if((j=fc[jia])<1){i=0; while(++i<38){if(i<30 && bf[i]>0 && bf[i+1]>0 && bf[i+2]>0){bf[i]--; bf[i+1]--; bf[i+2]--; j++; break;}if(bf[i]>2){bf[i]=0; j++; break;}}}if(j>0){i=38; while(--i>0){if(bf[i]>0){mpcd[Math.floor(i / 10)*10]=1;return(1);}}return(0);}i=38; while(--i>0){if(bf[i]>1) break;}if(i>0){j=i; while(--j>0){if(bf[j]>1) break;}if(j>0){mpcd[i]=mpcd[j]=1; return(1);}j=29; while(--j>0){if(bf[j]>0 && bf[j+1]>0){mpcd[Math.floor(j / 10)*10]=1;return(1);}if(j % 10<8 && bf[j]>0 && bf[j+2]>0){mpcd[Math.floor(j / 10)*10]=1;return(1);}}}}if(k==8 && m>0){x=fc[jia]; y=z=0;i=0; while(++i<38){if(i<28 && fc[jia]<1){if(bf[i]>2 && bf[i+1]>0 && bf[i+2]>0 && bf[i+3]>0){bf[i]-=2; bf[i+1]--; bf[i+2]--; bf[i+3]--;mpcd[Math.floor(i / 10)*10]=mpcd[Math.floor(m / 10)*10]=1; return(1);}if(bf[i]>0 && bf[i+1]>0 && bf[i+2]>0){bf[i]--; bf[i+1]--; bf[i+2]--;x++;}}if(bf[i]>2 && fc[jia]<1){ bf[i]-=3; x++; continue; }if(bf[i]>1){ bf[i]-=2; y++; continue; }}if(x>0 && y>0){mpcd[Math.floor(m / 10)*10]=1; return(1);}}}if(fc[jia]<1){j=k=x=0;i=38; while(--i>0){if(pai_tbl[i]==4) j+=2;else if(pai_tbl[i]==3){ j++; k++; x=i; }else if(pai_tbl[i]==2) j++;else if(pai_tbl[i]==1){ k++; x=i; }}if(j==6 && k>0){mpcd[Math.floor(x / 10)*10]=1;}}}mn=[0, 0, 0, 0, 0, 0, 0, 0]; m=0;x=y=z=l=0;i=0; while(++i<38){if(pai_tbl[i]<1){ l=0; continue; }if(l<1 && i<30 && pai_tbl[i+1]>0 && pai_tbl[i+2]>0){pai_tbl[i]--; pai_tbl[i+1]--; pai_tbl[i+2]--;mn[m++]=i;--i; l=0; continue;}if(l<2 && pai_tbl[i]>1){if(!x){x=i; pai_tbl[i]-=2;mn[m++]=i+100;--i; l=0; continue;}if(!y){y=i; pai_tbl[i]-=2;mn[m++]=i+200;--i; l=0; continue;}}if(l<3 && pai_tbl[i]>2){pai_tbl[i]-=3;mn[m++]=i+300;--i; l=0; continue;}if(l<4 && !y && i<30 && pai_tbl[i+1]>0){y=i; pai_tbl[i]--; pai_tbl[i+1]--;mn[m++]=i+400;--i; l=0; continue;}if(l<5 && !y && i<30 && (i % 10)<8 && pai_tbl[i+2]>0){y=i; pai_tbl[i]--; pai_tbl[i+2]--;mn[m++]=i+500;--i; l=0; continue;}if(!z){z=i; pai_tbl[i]--;mn[m++]=i+600;--i; l=0; continue;}for(;;){if(m<1) break;i=mn[--m];if(i<100){pai_tbl[i]++; pai_tbl[i+1]++; pai_tbl[i+2]++;l=1; --i; break;}if(i<200){x=0; i %= 50;pai_tbl[i]+=2;l=2; --i; break;}if(i<300){y=0; i %= 50;pai_tbl[i]+=2;l=2; --i; break;}if(i<400){i %= 50;pai_tbl[i]+=3;l=3; --i; break;}if(i<500){y=0; i %= 50;pai_tbl[i]++; pai_tbl[i+1]++;l=4; --i; break;}if(i<600){y=0; i %= 50;pai_tbl[i]++; pai_tbl[i+2]++;l=5; --i; break;}z=0; pai_tbl[i % 100]++;}}if(m>0){if(x>0 && y>0){mpcd[Math.floor(x / 10)*10]=1;mpcd[Math.floor(y / 10)*10]=1;return(1);}if(z>0){mpcd[Math.floor(z / 10)*10]=1;return(1);}}if(gameMode==GAMEMODE_TAIWAN || gameMode==GAMEMODE_GUOJI) return(0);j=k=x=0;i=38; while(--i>0){if(pai_tbl[i]==2) j++;if(pai_tbl[i]==1){ k++; x=i; }}if(j==6 && k==1){mpcd[Math.floor(x / 10)*10]=1;return(1);}return(0);}
