vXOO=new Array();vOXO=new Array();vOOX=new Array();vOOO=new Array();vOOOO=new Array();vZpt=new Array();ai_ndrq=[0,0,0];t_strategy=new Array(4);T_STRATEGY_QUICK=-1;T_STRATEGY_NORMAL=0;T_STRATEGY_HEAVY= 1;T_STRATEGY_LESS_HEAVY= 2;t_marked=[0, 0, 0, 0];t_dgr=new Array(40);t_jd=new Array();i=4; while(--i>-1){t_jd[i]=new Object();t_jd[i].rsv=0;}think_noFulou=0;dpcd=new Array();mpcd=new Array();danger=new Array();dpcd_ctr=0;th_dched=new Object();noDapai_tbl=new Array(40);vYaku=new Array(40);vPtn=new Array(20);i=20; while(--i>-1){vPtn[i]=new Object();vPtn[i].pi=0;vPtn[i].xt=0;vPtn[i].value=0;vPtn[i].type=0;}vPtn_ctr=0;vDanger=new Array();i=40; while(--i>-1) vYaku[i]=vDanger[i]=0;vDanger_limit=60;vDanger_limit_heavy=1024;dvDanger=10;MAX_PTNS=24;THINK_SHUNZI=0x1000;THINK_LIANGMEN=0x2000;THINK_QIANZHANG=0x4000;THINK_QIANZHANG2=0x9000;THINK_BIANZHANG=0xA000;THINK_KEZI=0x5000;THINK_DUIZI=0x6000;THINK_QIDUIZI=0x7000;THINK_KOXI=0x8000;THINK_ISOLATED=0xf000;THINK_USELESS=0xe000;t_pbuff_s=new Array(16);t_pt_s=new Array(4);i=4; while(--i>-1){t_pt_s[i]=new Object();t_pt_s[i].ctr=0;t_pt_s[i].d=new Array(MAX_PTNS);j=MAX_PTNS; while(--j>-1){t_pt_s[i].d[j]=new Object();t_pt_s[i].d[j].dat=new Array(20);t_pt_s[i].d[j].mzCtr=0;t_pt_s[i].d[j].duCtr=0;t_pt_s[i].d[j].daCtr=0;}}t_pt=new Array(MAX_PTNS);t_ptCtr=0;t_xian=0;i=MAX_PTNS; while(--i>-1){t_pt[i]=new Object();t_pt[i].attr=0;t_pt[i].pt=new Array(20);t_pt[i].shunzi_ctr=0;t_pt[i].shunzi=new Array(6);t_pt[i].kezi_ctr=0;t_pt[i].kezi=new Array(6);t_pt[i].duizi_ctr=0;t_pt[i].duizi=new Array(8);t_pt[i].liangmen_ctr=0;t_pt[i].liangmen=new Array(8);t_pt[i].qianzhang_ctr=0;t_pt[i].qianzhang=new Array(8);t_pt[i].bianzhang_ctr=0;t_pt[i].bianzhang=new Array(8);t_pt[i].isolated_ctr=0;t_pt[i].isolated=new Array(20);t_pt[i].useless_ctr=0;t_pt[i].useless=new Array(20);t_pt[i].discard=0;T_PT_CD_ANKE=1;T_PT_CD_DUIZI=2;T_PT_CD_DAZI=4;}function a0138(jia){var x;var i, j, k;x=a0000(jia, 1);if(fc[jia]) return(x);SHUPAI_MOVE(jia);j=0; k=0; i=38; while(--i>30){if(pai_tbl[i]>0){j++;if(pai_tbl[i]>1 && k<1){ j++; k++; }}else if(vZpt[i]<1) return(x);}i=-10; while((i+=10)<30){if(pai_tbl[i+1]>0){j++;if(pai_tbl[i+1]>1 && k<1){ j++; k++; }}else if(vZpt[i+1]<1) return(x);if(pai_tbl[i+9]>0){j++;if(pai_tbl[i+9]>1 && k<1){ j++; k++; }}else if(vZpt[i+9]<1) return(x);}if(x>13-j) x=13-j;return(x);}function a0132(jia, xt){var x1=13, y1=0, x2, y2, xx=255, y, v, v2, i, j;var p1=new Array(), p2=new Array(), p3=new Array(), vv=new Array(), pp=0;if(fc[jia]) return(0);if(sc[jia]>sc[0]){if(xt<4) return(0);}SHUPAI_MOVE(jia);i=38; while(--i>30){if(pai_tbl[i]>0){ --x1; ++y1; continue; }if(vZpt[i]>0) ++y1;}if(y1<5) return(0);x2=x1; y2=y1; v2=0;if(pai_tbl[ 1]>0){ --x2; ++y2; } else if(vZpt[ 1]>0){ ++y2; v2+=vZpt[ 1]; }if(pai_tbl[ 4]>0){ --x2; ++y2; } else if(vZpt[ 4]>0){ ++y2; v2+=vZpt[ 4]; }if(pai_tbl[ 7]>0){ --x2; ++y2; } else if(vZpt[ 7]>0){ ++y2; v2+=vZpt[ 7]; }x=x2; y=y2; v=v2;if(pai_tbl[12]>0){ --x; ++y; } else if(vZpt[12]>0){ ++y; v+=vZpt[12]; }if(pai_tbl[15]>0){ --x; ++y; } else if(vZpt[15]>0){ ++y; v+=vZpt[15]; }if(pai_tbl[18]>0){ --x; ++y; } else if(vZpt[18]>0){ ++y; v+=vZpt[18]; }if(pai_tbl[23]>0){ --x; ++y; } else if(vZpt[23]>0){ ++y; v+=vZpt[23]; }if(pai_tbl[26]>0){ --x; ++y; } else if(vZpt[26]>0){ ++y; v+=vZpt[26]; }if(pai_tbl[29]>0){ --x; ++y; } else if(vZpt[29]>0){ ++y; v+=vZpt[29]; }if(y>13 && xx>=x){if(xx>x){ xx=x; pc=0; }p1[pc]= 0; p2[pc]=10; p3[pc]=20; vv[pc++]=v;}x=x2; y=y2; v=v2;if(pai_tbl[13]>0){ --x; ++y; } else if(vZpt[13]>0){ ++y; v+=vZpt[13]; }if(pai_tbl[16]>0){ --x; ++y; } else if(vZpt[16]>0){ ++y; v+=vZpt[16]; }if(pai_tbl[19]>0){ --x; ++y; } else if(vZpt[19]>0){ ++y; v+=vZpt[19]; }if(pai_tbl[22]>0){ --x; ++y; } else if(vZpt[22]>0){ ++y; v+=vZpt[22]; }if(pai_tbl[25]>0){ --x; ++y; } else if(vZpt[25]>0){ ++y; v+=vZpt[25]; }if(pai_tbl[28]>0){ --x; ++y; } else if(vZpt[28]>0){ ++y; v+=vZpt[28]; }if(y>13 && xx>=x){if(xx>x){ xx=x; pc=0; }p1[pc]= 0; p2[pc]=20; p3[pc]=10; vv[pc++]=v;}x2=x1; y2=y1; v2=0;if(pai_tbl[ 2]>0){ --x2; ++y2; } else if(vZpt[ 2]>0){ ++y2; v2+=vZpt[ 2]; }if(pai_tbl[ 5]>0){ --x2; ++y2; } else if(vZpt[ 5]>0){ ++y2; v2+=vZpt[ 5]; }if(pai_tbl[ 8]>0){ --x2; ++y2; } else if(vZpt[ 8]>0){ ++y2; v2+=vZpt[ 8]; }x=x2; y=y2; v=v2;if(pai_tbl[11]>0){ --x; ++y; } else if(vZpt[11]>0){ ++y; v+=vZpt[11]; }if(pai_tbl[14]>0){ --x; ++y; } else if(vZpt[14]>0){ ++y; v+=vZpt[14]; }if(pai_tbl[17]>0){ --x; ++y; } else if(vZpt[17]>0){ ++y; v+=vZpt[17]; }if(pai_tbl[23]>0){ --x; ++y; } else if(vZpt[23]>0){ ++y; v+=vZpt[23]; }if(pai_tbl[26]>0){ --x; ++y; } else if(vZpt[26]>0){ ++y; v+=vZpt[26]; }if(pai_tbl[29]>0){ --x; ++y; } else if(vZpt[29]>0){ ++y; v+=vZpt[29]; }if(y>13 && xx>=x){if(xx>x){ xx=x; pc=0; }p1[pc]=10; p2[pc]= 0; p3[pc]=20; vv[pc++]=v;}x=x2; y=y2; v=v2;if(pai_tbl[13]>0){ --x; ++y; } else if(vZpt[13]>0){ ++y; v+=vZpt[13]; }if(pai_tbl[16]>0){ --x; ++y; } else if(vZpt[16]>0){ ++y; v+=vZpt[16]; }if(pai_tbl[19]>0){ --x; ++y; } else if(vZpt[19]>0){ ++y; v+=vZpt[19]; }if(pai_tbl[21]>0){ --x; ++y; } else if(vZpt[21]>0){ ++y; v+=vZpt[21]; }if(pai_tbl[24]>0){ --x; ++y; } else if(vZpt[24]>0){ ++y; v+=vZpt[24]; }if(pai_tbl[27]>0){ --x; ++y; } else if(vZpt[27]>0){ ++y; v+=vZpt[27]; }if(y>13 && xx>=x){if(xx>x){ xx=x; pc=0; }p1[pc]=20; p2[pc]= 0; p3[pc]=10; vv[pc++]=v;}x2=x1; y2=y1; v2=0;if(pai_tbl[ 3]>0){ --x2; ++y2; } else if(vZpt[ 3]>0){ ++y2; v2+=vZpt[ 3]; }if(pai_tbl[ 6]>0){ --x2; ++y2; } else if(vZpt[ 6]>0){ ++y2; v2+=vZpt[ 6]; }if(pai_tbl[ 8]>0){ --x2; ++y2; } else if(vZpt[ 9]>0){ ++y2; v2+=vZpt[ 9]; }x=x2; y=y2; v=v2;if(pai_tbl[11]>0){ --x; ++y; } else if(vZpt[11]>0){ ++y; v+=vZpt[11]; }if(pai_tbl[14]>0){ --x; ++y; } else if(vZpt[14]>0){ ++y; v+=vZpt[14]; }if(pai_tbl[17]>0){ --x; ++y; } else if(vZpt[17]>0){ ++y; v+=vZpt[17]; }if(pai_tbl[22]>0){ --x; ++y; } else if(vZpt[22]>0){ ++y; v+=vZpt[22]; }if(pai_tbl[25]>0){ --x; ++y; } else if(vZpt[25]>0){ ++y; v+=vZpt[25]; }if(pai_tbl[28]>0){ --x; ++y; } else if(vZpt[28]>0){ ++y; v+=vZpt[28]; }if(y>13 && xx>=x){if(xx>x){ xx=x; pc=0; }p1[pc]=10; p2[pc]=20; p3[pc]= 0; vv[pc++]=v;}x=x2; y=y2; v=v2;if(pai_tbl[12]>0){ --x; ++y; } else if(vZpt[12]>0){ ++y; v+=vZpt[12]; }if(pai_tbl[15]>0){ --x; ++y; } else if(vZpt[15]>0){ ++y; v+=vZpt[15]; }if(pai_tbl[18]>0){ --x; ++y; } else if(vZpt[18]>0){ ++y; v+=vZpt[18]; }if(pai_tbl[21]>0){ --x; ++y; } else if(vZpt[21]>0){ ++y; v+=vZpt[21]; }if(pai_tbl[24]>0){ --x; ++y; } else if(vZpt[24]>0){ ++y; v+=vZpt[24]; }if(pai_tbl[27]>0){ --x; ++y; } else if(vZpt[27]>0){ ++y; v+=vZpt[27]; }if(y>13 && xx>=x){if(xx>x){ xx=x; pc=0; }p1[pc]=20; p2[pc]=10; p3[pc]= 0; vv[pc++]=v;}if(sc[jia]>sc[0]){if(pc<1 || xt<xx) return(0);}else {if(pc<1 || 3<xx) return(0);}if(xx>1){i=pc; while(--i>-1){if(pai_tbl[p1[i]+1]<1) required[jia][p1[i]+1]+=12;if(pai_tbl[p1[i]+4]<1) required[jia][p1[i]+4]+=12;if(pai_tbl[p1[i]+7]<1) required[jia][p1[i]+7]+=12;if(pai_tbl[p2[i]+2]<1) required[jia][p2[i]+2]+=12;if(pai_tbl[p2[i]+5]<1) required[jia][p2[i]+5]+=12;if(pai_tbl[p2[i]+8]<1) required[jia][p2[i]+8]+=12;if(pai_tbl[p3[i]+3]<1) required[jia][p3[i]+3]+=12;if(pai_tbl[p3[i]+6]<1) required[jia][p3[i]+6]+=12;if(pai_tbl[p3[i]+9]<1) required[jia][p3[i]+9]+=12;}i=30; while(++i<38){if(pai_tbl[i]<1) required[jia][i]+=12;}}i=menfeng[jia]; while(--i>30){if(i==zhuangfeng[0]) continue;if(pai_tbl[i]>1) return(i);}i=35; while(--i>menfeng[jia]){if(i==zhuangfeng[0]) continue;if(pai_tbl[i]>1) return(i);}i=38; while(--i>30){if(pai_tbl[i]>1) return(i);}var vt=new Array();i=40; while(--i>=0) vt[i]=0;while(--pc>-1){vt[p1[pc]+1]+=vv[pc];vt[p1[pc]+4]+=vv[pc];vt[p1[pc]+7]+=vv[pc];vt[p2[pc]+2]+=vv[pc];vt[p2[pc]+5]+=vv[pc];vt[p2[pc]+8]+=vv[pc];vt[p3[pc]+3]+=vv[pc];vt[p3[pc]+6]+=vv[pc];vt[p3[pc]+9]+=vv[pc];}v=-1; j=0;i=5; while(--i>-1){if(pai_tbl[25+i]){if(v<0 || v>vt[25+i]){ v=vt[25+i]; j=25+i; }}if(pai_tbl[25-i]){if(v<0 || v>vt[25-i]){ v=vt[25-i]; j=25-i; }}if(pai_tbl[15+i]){if(v<0 || v>vt[15+i]){ v=vt[15+i]; j=15+i; }}if(pai_tbl[15-i]){if(v<0 || v>vt[15-i]){ v=vt[15-i]; j=15-i; }}if(pai_tbl[ 5+i]){if(v<0 || v>vt[ 5+i]){ v=vt[ 5+i]; j= 5+i; }}if(pai_tbl[ 5-i]){if(v<0 || v>vt[ 5-i]){ v=vt[ 5-i]; j= 5-i; }}}return(j);}function a0129(jia, xt){var x1=13, y1=0, x2=1, x3=0, x4=0, x5=0, i, j;if(fc[jia]) return(0);if(gameMode==GAMEMODE_TAIWAN) return(0);SHUPAI_MOVE(jia);i=38; while(--i>30){x3+=pai_tbl[i];if(pai_tbl[i]>0){x5+=pai_tbl[i]-1;--x1; ++y1; ++x4;if(pai_tbl[i]>1 && --x2>-1) --x1;continue;}if(vZpt[i]>0) ++y1;}i=-10; while((i+=10)<30){x3+=pai_tbl[i+1]+pai_tbl[i+9];if(pai_tbl[i+1]>0){x5+=pai_tbl[i+1]-1;--x1; ++y1; ++x4;if(pai_tbl[i+1]>1 && --x2>-1) --x1;}else if(vZpt[i+1]>0) ++y1;if(pai_tbl[i+9]>0){x5+=pai_tbl[i+9]-1;--x1; ++y1; ++x4;if(pai_tbl[i+9]>1 && --x2>-1) --x1;}else if(vZpt[i+9]>0) ++y1;}if(y1<13) return(0);if(xt<x1 && 4<x1) return(0);i=nukidora.length; while(--i>-1){if((j=nukidora[i])<1 || j>37) continue;if(j<30 && j % 10!=1 && j % 10!=9) continue;if(pai_tbl[j]<2) ai_ndrq[i]=1;}if(x3>x4 && x4<11){i=30; while(++i<38){if(pai_tbl[i]<1) required[jia][i]+=256;}i=-10; while((i+=10)<30){if(pai_tbl[i+1]<1) required[jia][i+1]+=256;if(pai_tbl[i+9]<1) required[jia][i+9]+=256;}}if(x5>1){i=menfeng[jia]; while(--i>30){if(i==zhuangfeng[0] || i==zhuangfeng[1]) continue;if(pai_tbl[i]>1) return(i);}i=35; while(--i>menfeng[jia]){if(i==zhuangfeng[0] || i==zhuangfeng[1]) continue;if(pai_tbl[i]>1) return(i);}i=30; while(++i<38){if(pai_tbl[i]>1) return(i);}i=-10; while((i+=10)<30){if(pai_tbl[i+9]>1) return(i+9);if(pai_tbl[i+1]>1) return(i+1);}}i=0; while(++i<5){if(pai_tbl[25+i]>0) return(25+i);if(pai_tbl[25-i]>0) return(25-i);if(pai_tbl[15+i]>0) return(15+i);if(pai_tbl[15-i]>0) return(15-i);if(pai_tbl[ 5+i]>0) return( 5+i);if(pai_tbl[ 5-i]>0) return( 5-i);}}function a0175(jia){var i, j, k=0;var p=new Array();i=40; while(--i>=0) p[i]=0;i=-1; while(++i<doraCtr){p[dora[i]]++;}i=20; while(--i>0){j=te[jia][i] % 50;if(j<1 || j>37) continue;k+=p[j]; vYaku[j]+=0x0100*p[j];if(te[jia][i] % 100>50){k++; vYaku[j]+=0x0100;}}return(k);}function a0130(jia, xt){return(0);}function a0131(jia, xt){var i;if(t_ptCtr!=1 || !t_pt[0].attr) return(0);SHUPAI_MOVE(jia);i=40; while(--i>=0){if(pai_tbl[i]==2 ||  pai_tbl[i]==4){vYaku[i]+=0x1800; continue;}if(pai_tbl[i]==1 && vZpt[i]>0) vYaku[i]+=0x1800;}return(24);}function a0133(jia, xt){var i, j, x, k, l, m, p1, p2, p3, ptn;var zz=new Array();var p=new Array();if(fc[jia]>1) return(0);SHUPAI_MOVE(jia);i=40; while(--i>-1){zz[i]=0;if(pai_tbl[i]+vZpt[i]>0) zz[i]=1;}l=0;if(zz[1]+zz[4]+zz[7]>2){i=0;if(pai_tbl[ 1]>0) ++i; if(pai_tbl[ 4]>0) ++i; if(pai_tbl[ 7]>0) ++i; j=i;if(zz[12]+zz[15]+zz[18]+zz[23]+zz[26]+zz[29]>5){if(pai_tbl[12]>0) ++i; if(pai_tbl[15]>0) ++i; if(pai_tbl[18]>0) ++i;if(pai_tbl[23]>0) ++i; if(pai_tbl[26]>0) ++i; if(pai_tbl[29]>0) ++i;if(l<i){ l=i; p1= 0; p2=10; p3=20; }}if(zz[13]+zz[16]+zz[19]+zz[22]+zz[25]+zz[28]>5){i=j;if(pai_tbl[13]>0) ++i; if(pai_tbl[16]>0) ++i; if(pai_tbl[19]>0) ++i;if(pai_tbl[22]>0) ++i; if(pai_tbl[25]>0) ++i; if(pai_tbl[28]>0) ++i;if(l<i){ l=i; p1= 0; p2=20; p3=10; }}}if(zz[2]+zz[5]+zz[8]>2){i=0;if(pai_tbl[ 2]>0) ++i; if(pai_tbl[ 5]>0) ++i; if(pai_tbl[ 8]>0) ++i; j=i;if(zz[11]+zz[14]+zz[17]+zz[23]+zz[26]+zz[29]>5){if(pai_tbl[11]>0) ++i; if(pai_tbl[14]>0) ++i; if(pai_tbl[17]>0) ++i;if(pai_tbl[23]>0) ++i; if(pai_tbl[26]>0) ++i; if(pai_tbl[29]>0) ++i;if(l<i){ l=i; p1=10; p2= 0; p3=20; }}if(zz[13]+zz[16]+zz[19]+zz[21]+zz[24]+zz[27]>5){i=j;if(pai_tbl[13]>0) ++i; if(pai_tbl[16]>0) ++i; if(pai_tbl[19]>0) ++i;if(pai_tbl[21]>0) ++i; if(pai_tbl[24]>0) ++i; if(pai_tbl[27]>0) ++i;if(l<i){ l=i; p1=20; p2= 0; p3=10; }}}if(zz[3]+zz[6]+zz[9]>2){i=0;if(pai_tbl[ 3]>0) ++i; if(pai_tbl[ 6]>0) ++i; if(pai_tbl[ 9]>0) ++i; j=i;if(zz[11]+zz[14]+zz[17]+zz[22]+zz[25]+zz[28]>5){if(pai_tbl[11]>0) ++i; if(pai_tbl[14]>0) ++i; if(pai_tbl[17]>0) ++i;if(pai_tbl[22]>0) ++i; if(pai_tbl[25]>0) ++i; if(pai_tbl[28]>0) ++i;if(l<i){ l=i; p1=10; p2=20; p3= 0; }}if(zz[12]+zz[15]+zz[18]+zz[21]+zz[24]+zz[27]>5){i=j;if(pai_tbl[12]>0) ++i; if(pai_tbl[15]>0) ++i; if(pai_tbl[18]>0) ++i;if(pai_tbl[21]>0) ++i; if(pai_tbl[24]>0) ++i; if(pai_tbl[27]>0) ++i;if(l<i){ l=i; p1=20; p2=10; p3= 0; }}}if(l<7) return(0);pai_tbl[p1+1]--; pai_tbl[p1+4]--; pai_tbl[p1+7]--;pai_tbl[p2+2]--; pai_tbl[p2+5]--; pai_tbl[p2+8]--;pai_tbl[p3+3]--; pai_tbl[p3+6]--; pai_tbl[p3+9]--;i=40; while(--i>=0) p[i]=pai_tbl[i];if(pai_tbl[p1+1]<0) required[jia][p1+1]+=12;if(pai_tbl[p1+4]<0) required[jia][p1+4]+=12;if(pai_tbl[p1+7]<0) required[jia][p1+7]+=12;if(pai_tbl[p2+2]<0) required[jia][p2+2]+=12;if(pai_tbl[p2+5]<0) required[jia][p2+5]+=12;if(pai_tbl[p2+8]<0) required[jia][p2+8]+=12;if(pai_tbl[p3+3]<0) required[jia][p3+3]+=12;if(pai_tbl[p3+6]<0) required[jia][p3+6]+=12;if(pai_tbl[p3+9]<0) required[jia][p3+9]+=12;if(fc[jia]){i=fl[jia][0] % 50;if(i>34){i=0; while(++i<38){if(i>29 && i<35) continue;if(pai_tbl[i]>0) break;}if(i<38){i=30; while(++i<35){if(pai_tbl[i]==2){pai_tbl[i]=0; break;}if(pai_tbl[i]==1 && vZpt[i]>0){pai_tbl[i]=0;required[jia][i]+=18;}}}else {i=30; k=0; m=-1; while(++i<35){if(pai_tbl[i]==2 && vZpt[i]>0){m=i; break;}if(pai_tbl[i]==1 && k<vZpt[i]){m=i; k=vZpt[i];}}if(m>-1){if(pai_tbl[m]==1) required[jia][m]+=18;pai_tbl[m]--;}}}else if(i>34){i=0; while(++i<35){if(pai_tbl[i]>0) break;}if(i<35){i=35; while(++i<38){if(pai_tbl[i]==2){pai_tbl[i]=0; break;}if(pai_tbl[i]==1 && vZpt[i]>0){pai_tbl[i]=0;required[jia][i]+=18;}}}else {i=35; k=0; m=-1; while(++i<38){if(pai_tbl[i]==2 && vZpt[i]>0){m=i; break;}if(pai_tbl[i]==1 && (k<vZpt[i])){m=i; k=vZpt[i];}}if(m>-1){if(pai_tbl[m]==1) required[jia][m]+=18;pai_tbl[m]--;}}}else if(i!=fl[jia][1] % 50){i=30; while(++i<38){if(pai_tbl[i]>0) return(i);}}i=a0137(jia);return(i);}x=0; ptn=-1;i=38; while(--i>0){if(p[i]>2){x+=3; ptn=0;break;}}if(x<3){i=38; while(--i>0){if(p[i]>1ã€€&& vZpt[i]>0){j=38; while(--j>0){if(i==j) continue;if(p[j]>1) break;}if(j>0){ ptn=3; x=4; }break;}}}if(x<3){i=0; while(++i<28){if(p[i]>0 && p[i+1]>p[i] && p[i+2]>p[i]){p[i]--; p[i+1]--; p[i+2]--; x+=3; ptn=1;break;}if(p[i]>2 && p[i+1]>0 && p[i+2]>0){p[i]--; p[i+1]--; p[i+2]--; x+=3; ptn=1;break;}}if(i<28){j=0; while(++j<38){if(p[j]>1){ x+=2; break; }}}}if(x<3){i=0; while(++i<28){if(p[i]>0 && p[i+1]>0){p[i]--; p[i+1]--; x+=2; ptn=1;break;}if(p[i]>0 && p[i+2]>0){p[i]--; p[i+2]--; x+=2; ptn=1;break;}}if(i<28){j=0; while(++j<38){if(p[j]>1){ x+=2; break; }}}}if((x=12-l-x)<1) x=0;if(xt<x) return(0);i=40; while(--i>=0) pai_tbl[i]=p[i];m=-1; k=0; i=34; while(++i<38){if(pai_tbl[i]>=3){m=i; break;}if(pai_tbl[i]==2 && k<vZpt[i]){m=i; k=vZpt[i];}}if(m<38){pai_tbl[m]-=3;i=0; while(++i<38){if(i>29 && i<35) continue;if(pai_tbl[i]>0) break;}if(i<38){i=30; while(++i<35){if(pai_tbl[i]==2 || (pai_tbl[i]==1 && vZpt[i]>0)){pai_tbl[i]-=2;required[jia][i]+=18;}}}else {l=-1; k=0; i=30; while(++i<35){if(pai_tbl[i]==2){ l=i; break; }if(pai_tbl[i]==1 && k<vZpt[i]){l=i; k=vZpt[i];}}if(l>-1) pai_tbl[l]--;}vOOOO[m]+=18; if(pai_tbl[m]<0){vOOO[m]+=18
required[jia][m]+=18;}if((i=a0137(jia))<1){i=40; while(--i>=0) pai_tbl[i]=p[i];i=a0137(jia);pai_tbl[m]-=3;}return(i);}m=-1; k=0; i=30; while(++i<35){if(pai_tbl[i]>=3){m=i; break;}if(pai_tbl[i]==2 && k<vZpt[i]){m=i; k=vZpt[i];}}if(m<35){pai_tbl[m]-=3;i=0; while(++i<35){if(pai_tbl[i]>0) break;}if(i<35){i=34; while(++i<38){if(pai_tbl[i]==2 || (pai_tbl[i]==1 && vZpt[i]>0)){pai_tbl[i]-=2;required[jia][i]+=18;}}}else {l=-1; k=0; i=34; while(++i<38){if(pai_tbl[i]==2){ l=i; break; }if(pai_tbl[i]==1 && k<vZpt[i]){l=i; k=vZpt[i];}}if(l>-1) pai_tbl[l]--;}vOOOO[m]+=18; if(pai_tbl[m]<0){vOOO[m]+=18;required[jia][m]+=18;}if((i=a0137(jia))<1){i=40; while(--i>=0) pai_tbl[i]=p[i];pai_tbl[m]-=3;i=a0137(jia);}return(i);}var v=new Array(40);i=40; while(--i>=0){v[i]=1;if((j=pai_tbl[i])>0) v[i] <<= i;}i=30; while(--i>=0){if(pai_tbl[i]>0){v[i-1]+=32;v[i+1]+=32;}}m=-1; k=-1;i=menfeng[jia]; while(--i>30){if(i==zhuangfeng[0]) continue;if(pai_tbl[i]<1) continue;if(k<0 || k>v[i]){k=v[i]; m=i;}}i=34; while(--i>menfeng[jia]){if(i==zhuangfeng[0]) continue;if(pai_tbl[i]<1) continue;if(k<0 || k>v[i]){k=v[i]; m=i;}}i=38; while(--i>30){if(pai_tbl[i]<1) continue;if(k<0 || k>v[i]){k=v[i]; m=i;}}i=-1; while(++i<5){if(pai_tbl[25+i]>0 && (k<0 || k>v[25+i])){ k=v[25+i]; m=25+i; }if(pai_tbl[25-i]>0 && (k<0 || k>v[25-i])){ k=v[25-i]; m=25-i; }if(pai_tbl[15+i]>0 && (k<0 || k>v[15+i])){ k=v[15+i]; m=15+i; }if(pai_tbl[15-i]>0 && (k<0 || k>v[15-i])){ k=v[15-i]; m=15-i; }if(pai_tbl[ 5+i]>0 && (k<0 || k>v[ 5+i])){ k=v[ 5+i]; m=5+i; }if(pai_tbl[ 5-i]>0 && (k<0 || k>v[ 5-i])){ k=v[ 5-i]; m=5-i; }}if(m>0) return(m);i=a0137(jia);return(i);}function a0122(jia){var i, j, k, l, m;var st=-1, zp=0;var mzs=[0,0,0,0];var das=[0,0,0,0];var dus=[0,0,0,0];var ysok=new Array(MAX_PTNS), qyok=new Array(MAX_PTNS), ysokf=-1, qyokf=0;var noFulou=1;var yh=0x0200, yq=0x0500, ml=4;var XOO=new Array(40);var OXO=new Array(40);var OOX=new Array(40);var OOO=new Array(40);try{if(players==3 && gameMode!=GAMEMODE_BEINUKI && gameMode!=GAMEMODE_PENGLI) return(0);if(gameMode==GAMEMODE_TAIWAN){yh=0x0400; yq=0x0800; ml=5;}else if(gameMode==GAMEMODE_GUOJI){yh=0x0600; yq=0x1800;}else if(gameMode==GAMEMODE_ARSHIAR){yh=0x0100; yq=0x0300;}else if(gameMode==GAMEMODE_BOO){yh=0x0200; yq=0x0400;}else if(gameMode==GAMEMODE_BEINUKI){yh=0; yq=0x0600;}else if(!mq[jia]){yh=0x0300; yq=0x0600;}i=fc[jia]; k=-5; while(--i>-1){k+=5;if((j=fl[jia][k] % 50)>30){zp++;if(j>34 || j==zhuangfeng[0] || j==zhuangfeng[0] || j==menfeng[jia]) noFulou=0;continue;}if(st<0){st=Math.floor(j / 10); continue;}if(st!=Math.floor(j / 10)) return(0);}i=MAX_PTNS; while(--i>-1){ ysok[i]=-1; qyok[i]=0; }l=t_ptCtr; while(--l>-1){if(t_pt[l].attr) continue;mzs=[0,0,0,0];das=[0,0,0,0];dus=[0,0,0,0];if(st>-1){ mzs[st]=fc[jia]-zp; mzs[3]=zp; }i=t_pt[l].shunzi_ctr; while(--i>-1){j=Math.floor((t_pt[l].shunzi[i] % 50) / 10);mzs[j]++;}i=t_pt[l].kezi_ctr; while(--i>-1){j=Math.floor((t_pt[l].kezi[i] % 50) / 10);mzs[j]++;if(j>34 || j==zhuangfeng[0] || j==zhuangfeng[0] || j==menfeng[jia]) noFulou=0;}i=t_pt[l].qianzhang_ctr; while(--i>-1){j=Math.floor((t_pt[l].qianzhang[i] % 50) / 10);das[j]++;}i=t_pt[l].bianzhang_ctr; while(--i>-1){j=Math.floor((t_pt[l].bianzhang[i] % 50) / 10);das[j]++;}i=t_pt[l].liangmen_ctr; while(--i>-1){j=Math.floor((t_pt[l].liangmen[i] % 50) / 10);das[j]++;}i=t_pt[l].duizi_ctr; while(--i>-1){j=Math.floor((t_pt[l].duizi[i] % 50) / 10);dus[j]++;}i=3; while(--i>-1){if(st>-1 && st!=i) continue;if(mzs[i]+dus[i]+das[i]+mzs[3]+dus[3]+das[3]>ml){st=ysokf=ysok[l]=i;if(mzs[i]+dus[i]+das[i]>ml && zp<1) qyokf=qyok[l]=1;break;}}}if(ysokf<0) return(0);SHUPAI_MOVE(jia);if(!qyokf) yq=yh;i=30; while(++i<38){if(pai_tbl[i]<4 && pai_tbl[i]+vZpt[i]>1) vYaku[i]+=yh;}j=st*10; i=10; while(--i>0){++j; vYaku[j]+=yq;}nrykfan[jia]+=yq >> 8;if((gameMode==GAMEMODE_REACH || gameMode==GAMEMODE_REACH3P || gameMode==GAMEMODE_SAMMA || gameMode==GAMEMODE_EASTERN_BOO) && !mq[jia]){if(qyokf) noFulou=0;i=doraCtr; while(--i>-1){j=dora[i] % 50; m=0;k=20; while(--k>-1){if((l=te[jia][k] % 50)==j) m++;}if(j<30 && Math.floor(j / 10)!=st && m>1) return(0);if(m>1) noFulou=0;}if(noFulou) return(1);}i=40; while(--i>-1) XOO[i]=OXO[i]=OOX[i]=OOO[i]=0
l=t_ptCtr; while(--l>-1){if(ysok[l]<0) continue;i=t_pt[l].qianzhang_ctr; while(--i>-1){j=t_pt[l].qianzhang[i] % 50;if(Math.floor(j / 10)!=st) continue;OXO[j+1]+=4; required[jia][j+1]+=4;}i=t_pt[l].bianzhang_ctr; while(--i>-1){j=t_pt[l].bianzhang[i] % 50;if(Math.floor(j / 10)!=st) continue;if((j % 10)==1){XOO[j-1]+=4;required[jia][j-1]+=16;}else {OOX[j+2]+=4;required[jia][j+2]+=16;}}i=t_pt[l].liangmen_ctr; while(--i>-1){j=t_pt[l].liangmen[i] % 50;if(Math.floor(j / 10)!=st) continue;XOO[j-1]++; OOX[j+2]++;required[jia][j-1]++;required[jia][j+2]++;}i=t_pt[l].duizi_ctr; while(--i>-1){j=t_pt[l].duizi[i] % 50;if(j>30){if(qyok[l]) continue;OOO[j]++;continue;}if(Math.floor(j / 10)!=st) continue;OOO[j]++;}}i=38; while(--i>30){if(OOO[i]) vOOO[i]+=yh;}i=30; while(--i>0){if(OOO[i]) vOOO[i]+=yq;if(OXO[i]>0 && OXO[i]>=XOO[i] && OXO[i]>=OOX[i]) vOXO[i]+=yq;else if(XOO[i]>0 && XOO[i]>=OXO[i] && XOO[i]>=OOX[i]) vXOO[i]+=yq;else if(OOX[i]>0 && OOX[i]>=OXO[i] && OOX[i]>=XOO[i]) vOOX[i]+=yq;}return(1);}catch(e){  i=i; }return(0);}function a0125(jia){var i, j, k, l, x, y, z, nn, i1, j1;var noFulou=0;var dyok=new Array(MAX_PTNS), dyokf=0;var ev=new Array(40);var XOO=new Array(40);var OXO=new Array(40);var OOX=new Array(40);var OOO=new Array(40);var noFulou;var drr=new Array(40);var fff=0;i=40; while(--i>-1) drr[i]=0;if(gameMode==GAMEMODE_REACH || gameMode==GAMEMODE_REACH3P || gameMode==GAMEMODE_SAMMA || gameMode==GAMEMODE_EASTERN_BOO){i=doraCtr; while(--i>-1){drr[dora[i] % 50]=1;}if(mq[jia]) fff=1;}i=fc[jia]*5; while(--i>-1){if((j=fl[jia][i] % 50)<1 || j>37) continue;if(j>30 || j % 10<2 || j % 10>8) return(0);}if(!t_jd[jia].duanyaojiu){i=MAX_PTNS; while(--i>-1) dyok[i]=0;l=t_ptCtr; while(--l>-1){if(t_pt[l].attr) continue;x=fc[jia]; y=z=nn=0;i=t_pt[l].shunzi_ctr; while(--i>-1){j=t_pt[l].shunzi[i] % 50;if(j % 10>1 && j % 10<7) ++x;}i=t_pt[l].kezi_ctr; while(--i>-1){j=t_pt[l].kezi[i] % 50;if(j>30 || j % 10<2 || j % 10>8){if(!fff) return(0);continue;}++x;}i=t_pt[l].qianzhang_ctr; while(--i>-1){j=t_pt[l].qianzhang[i] % 50;if(j % 10>1 && j % 10<7){ ++y; continue; }}i=t_pt[l].liangmen_ctr; while(--i>-1){j=t_pt[l].liangmen[i] % 50;if(j % 10>2 && j % 10<7){ ++y; continue; }if(j % 10==2 && vZpt[j+2]>0){ ++y; continue; }if(j % 10==7 && vZpt[j-1]>0){ ++y; continue; }}i=t_pt[l].duizi_ctr; while(--i>-1){j=t_pt[l].duizi[i] % 50;if(j>30 || j % 10<2 || j % 10>8){if(t_pt[l].duizi_ctr<2) return(0);if(++nn>1 || drr[j]>0 || ((j==zhuangfeng[0] || j==zhuangfeng[1] || j==menfeng[jia] || j>34) && vZpt[j]>0)){if(!fff) return(0);}continue;}++z;}if(x+y+z>4 && z>0){dyokf=dyok[l]=1;}}if(dyokf<1) return(0);if(mq[jia]) t_jd[jia].duanyaojiu=1;}nrykfan[jia]++;noFulou=1;if((gameMode==GAMEMODE_REACH || gameMode==GAMEMODE_REACH3P || gameMode==GAMEMODE_SAMMA || gameMode==GAMEMODE_EASTERN_BOO)){if(rule.kuitan_sakizuke || shibari>1) ;else if(tsumi>3 && zhuangjia!=jia) noFulou=0;else if(sc[jia]>rule.base_score) noFulou=0;else if(zhuangjia==jia) noFulou=0;else if(th_dora>2) noFulou=0;}else noFulou=0;i=40; while(--i>-1) ev[i]=XOO[i]=OXO[i]=OOX[i]=OOO[i]=0;i=29; while(--i>0){if(i % 10>8 || i % 10<2) continue;if(i % 10==8 || i % 10==2){vYaku[i]+=0x0100;continue;}vYaku[i]+=0x0180;}l=t_ptCtr; while(--l>-1){if(dyok[l]<1) continue;x=fc[jia]; z=0;i=t_pt[l].shunzi_ctr; while(--i>-1){j=t_pt[l].shunzi[i] % 50;if(j % 10==1 && vZpt[j+2]>0){ev[j+1]++; ev[j+2]++; vOOX[j+2]++;}if(j % 10==7 && vZpt[j-1]>0){ev[j+0]++; ev[j+1]++; vXOO[j-1]++;}}i=t_pt[l].qianzhang_ctr; while(--i>-1){j=t_pt[l].qianzhang[i] % 50;if(j % 10<2 || j % 10>6) continue;OXO[j+1]+=4;}i=t_pt[l].liangmen_ctr; while(--i>-1){j=t_pt[l].liangmen[i] % 50;if(j % 10>2 && j % 10<7){XOO[j-1]++; OOX[j+2]++;continue;}if(j % 10==2 && vZpt[j+2]>0){ev[j+1]++; OOX[j+2]+=8;continue;}if(j % 10==7 && vZpt[j-1]>0){ev[j+1]++; XOO[j-1]+=8;continue;}}z=0; i=t_pt[l].duizi_ctr; while(--i>-1){j=t_pt[l].duizi[i] % 50;if(j>30 || j % 10<2 || j % 10>8) continue;ev[j]+=3; z++;}if(z>1 && x<3){z=0; i=t_pt[l].duizi_ctr; while(--i>-1){j=t_pt[l].duizi[i] % 50;if(j>30 || j % 10<2 || j % 10>8) continue;OOO[j]++;}}}if(noFulou) return(1);i=30; while(--i>0){if((i & 10)==1 || (i & 10)==9) continue;if(OOO[i]) vOOO[i]+=0x0100;if((i % 10)<3){if(XOO[i]>0) vXOO[i]+=0x0100;continue;}if((i % 10)<4){if(OXO[i]>0) vOXO[i]+=0x0100;else if(XOO[i]>0) vXOO[i]+=0x0100;continue;}if((i % 10)>7){if(OOX[i]>0) vOOX[i]+=0x0100;continue;}if((i % 10)<6){if(OXO[i]>0) vOXO[i]+=0x0100;else if(OOX[i]>0) vOOX[i]+=0x0100;continue;}if(OXO[i]>0 && OXO[i]>=XOO[i] && OXO[i]>=OOX[i]) vOXO[i]+=0x0100;else if(XOO[i]>0 && XOO[i]>=OXO[i] && XOO[i]>=OOX[i]) vXOO[i]+=0x0100;else if(OOX[i]>0 && OOX[i]>=OXO[i] && OOX[i]>=XOO[i]) vOOX[i]+=0x0100;}i=30; while(++i<38) vOOO[i]=vOOOO[i]=0;vOOOO[ 1]=vOOOO[11]=vOOOO[21]=vOOOO[ 9]=vOOOO[19]=vOOOO[29]=vOOO[ 1]=vOOO[11]=vOOO[21]=vOOO[ 9]=vOOO[19]=vOOO[29]=vOXO[ 1]=vOXO[11]=vOXO[21]=vOXO[ 2]=vOXO[12]=vOXO[22]=vOXO[ 9]=vOXO[19]=vOXO[29]=vOXO[ 8]=vOXO[18]=vOXO[28]=vXOO[ 7]=vXOO[17]=vXOO[27]=vXOO[ 1]=vXOO[11]=vXOO[21]=vXOO[ 9]=vXOO[19]=vXOO[29]=vOOX[ 3]=vOOX[13]=vOOX[23]=vOOX[ 1]=vOOX[11]=vOOX[21]=vOOX[ 9]=vOOX[19]=vOOX[29]=0;return(1);}function a0121(jia){var i, j, k, l, y;var mn=ddp=ldp=qdp=0;var zp=0;try{if(gameMode==GAMEMODE_TAIWAN) return(0);k=-5; i=fc[jia]; while(--i>-1){k+=5;j=fl[jia][i] % 50;if(j!=fl[jia][k+1] % 50) return(0);if(j>30){ zp++; continue; }if(j % 10!=1 && j % 10!=9) return(0);}SHUPAI_MOVE(jia);mn=fc[jia]; ddp=ldp=qdp=0;i=-10; while((i+=10)<30){if(pai_tbl[i+1]>2) mn++;else if(pai_tbl[i+1]>1 && vZpt[i+1]>0) ldp++;if(pai_tbl[i+9]>2) mn++;else if(pai_tbl[i+9]>1 && vZpt[i+9]>0) ldp++;}if(zp<1 && mz+ldp>4 && mz>1){y=0x0d00; if(gameMode==GAMEMODE_GUOJI) y=0x4000;i=-10; while((i+=10)<30){if(pai_tbl[i+1]>3) ;else if(pai_tbl[i+1]==3) vYaku[i+1]+=y;else if(pai_tbl[i+1]>1 && vZpt[i+1]>0) vOOO[i+1]+=y;if(pai_tbl[i+9]>3) ;else if(pai_tbl[i+9]==3) vYaku[i+9]+=y;else if(pai_tbl[i+9]>1 && vZpt[i+9]>0) vOOO[i+9]+=y;}i=nukidora.length; while(--i>-1){if((j=nukidora[i])<1 || j>37) continue;if(j>30 || (j % 10!=1 && j % 10!=9)) continue;if(pai_tbl[j]<4) ai_ndrq[i]=1;}nrykfan[jia]+=y >> 8;return(y >> 8);}i=30; while(++i<38){if(pai_tbl[i]>2) mn++;else if(pai_tbl[i]>1 && vZpt[i]>0) ldp++;}if(mz+ldp>4 && mz>1){y=0x0400; if(gameMode==GAMEMODE_GUOJI) y=0x2000;i=30; while(++i<38){if(pai_tbl[i]>3) conitnue;if(pai_tbl[i]==3) vYaku[i]+=y;else if(pai_tbl[i]>1 && vZpt[i]>0) vOOO[i]+=y;}nrykfan[jia]+=y >> 8;return(y >> 8);}}catch(e){  i=i; }return(0);}function a0123(jia){var i, j, k, l, x, y, z, v, w, zf, nn=0, i1, j1;var qtokf=0;var en=new Array(40);var em=new Array(40);var ew=new Array(40);var XOO=new Array(40);var OXO=new Array(40);var OOX=new Array(40);var OOO=new Array(40);var XOO2=new Array(40);var OXO2=new Array(40);var OOX2=new Array(40);var OOO2=new Array(40);var fff=0;var noFulou=0;try{if(gameMode==GAMEMODE_BEINUKI || (gameMode==GAMEMODE_BOO && !rule.boo_chanta)) return(0);i=40; while(--i>-1) em[i]=en[i]=XOO[i]=OXO[i]=OOX[i]=OOO[i]=0;i=20; while(--i>-1){j=te[jia][i] & 50;if(j>0 && j<38) en[j]++;}k=-5; i=fc[jia]; while(--i>-1){k+=5;j=fl[jia][k] % 50;if(j>30){zf++; continue;}if(j==fl[jia][k+1] % 50){if(j % 10!=1 && j % 10!=9) return(0);}j=Math.floor(j+(fl[jia][k+1] % 50)+(fl[jia][k+2] % 50) / 3);if(j % 10!=2 && j % 10!=8) return(0);}l=t_ptCtr; while(--l>-1){if(t_pt[l].attr) continue;i=40; while(--i>-1) ew[i]=XOO2[i]=OXO2[i]=OOX2[i]=OOO2[i]=0;x=fc[jia]; y=z=nn=0;i=t_pt[l].shunzi_ctr; while(--i>-1){j=t_pt[l].shunzi[i] % 50;if(j % 10<2 || j % 10>6){++x; continue;ew[j]++; ew[j+1]++; ew[j+2]++;}if(j % 10==2 && vZpt[j-1]>0){y++;ew[j]++; ew[j+1]++; XOO2[j-1]+=8;}if(j % 10==6 && vZpt[j+3]>0){y++;ew[j+1]++; ew[j+2]++; OOX2[j+3]+=8;}}i=t_pt[l].kezi_ctr; while(--i>-1){j=t_pt[l].kezi[i] % 50;if(j>30 || j % 10<2 || j % 10>8){if(j>30) zf++;x++; ew[j]+=3;}}i=t_pt[l].bianzhang_ctr; while(--i>-1){j=t_pt[l].bianzhang[i] % 50;y++;ew[j]++; ew[j+1]++;if(j % 10==1) OOX2[j+2]++; else XOO2[j-1]++;}i=t_pt[l].qianzhang_ctr; while(--i>-1){j=t_pt[l].qianzhang[i] % 50;if(j % 10==1 || j % 10==7){++y;ew[j]++; ew[j+2]++; OXO2[j+1]++;}}i=t_pt[l].liangmen_ctr; while(--i>-1){j=t_pt[l].liangmen[i] % 50;if(j % 10==2 && vZpt[j-1]>0){++y;ew[j]++; ew[j+1]++; XOO2[j-1]+=8;continue;}if(j % 10==6 && vZpt[j+3]>0){ew[j+1]++; ew[j+2]++; OOX2[j+3]+=8;++y; continue;}}i=t_pt[l].duizi_ctr; while(--i>-1){j=t_pt[l].duizi[i] % 50;if(j>30 || j % 10<2 || j % 10>8){if(j>30) zf++;z++; ew[j]+=2; OOO2[j]++;}}w=0; if(x+y+z<5){i=t_pt[l].isolate_ctr; while(--i>-1){j=t_pt[l].isolate[i] % 50;if(j>30 || j % 10<2 || j % 10>8){ew[j]++; w++; continue;}}}if(x+y+z+w>4 && fc[jia]+t_pt[l].shunzi_ctr+t_pt[l].kezi_ctr-2<x){qtokf=1;i=40; while(--i>0){if(em[i]>ew[i]) em[i]=ew[i];if(en[i]<ew[i]) en[i]=ew[i];XOO[i]+=XOO2[i];OXO[i]+=OXO2[i];OOX[i]+=OOX2[i];OOO[i]+=OOO2[i];}}}if(qtokf<1) return(0);v=w=0x0100; noFulou=0;if(gameMode==GAMEMODE_REACH || gameMode==GAMEMODE_REACH3P || gameMode==GAMEMODE_SAMMA || gameMode==GAMEMODE_EASTERN_BOO || gameMode==GAMEMODE_PENGLI){noFulou=1;if(!zf){v=0x0200; noFulou=0;}if(!mq[jia]){ v+=0x0100; w+=0x0100; noFulou=0; }}else if(gameMode==GAMEMODE_GUOJI){v=w=0x0400;}nrykfan[jia]+=v >> 8;i=38; while(--i>30){if(em[i]<1) continue;if(OOO[i]>0){if(!noFulou) vOOO[i]+=OOO[i] << 2;required[jia][i]+=OOO[i] << 2;}vYaku[i]+=w;if(em[i]>en[i]) continue;vYaku[i]+=0x0080;}i=30; while(--i>0){if(em[i]<1) continue;if(OOO[i]>0){if(!noFulou) vOOO[i]+=v;required[jia][i]+=v;}if(XOO[i]>0){if(!noFulou) vXOO[i]+=v;required[jia][i]+=v;}if(OXO[i]>0){if(!noFulou) vOXO[i]+=v;required[jia][i]+=v;}if(OOX[i]>0){if(!noFulou) vOOX[i]+=v;required[jia][i]+=v;}vYaku[i]+=v;if(em[i]>en[i]) continue;vYaku[i]+=0x0080;}return(1);}catch(e){  i=i; }return(0);}function a0120(jia){var i, j, k, l, l2, m, m2, y;l=l2=m=m2=n=n2=0; i=fc[jia]; k=-5; while(--i>-1){k+=5;if((j=fl[jia][k] % 50)>34){ m2+=0x1000; m++; continue; }if(j>30){l2+=0x1000; l++;}}SHUPAI_MOVE(jia);i=34; while(++i<38){if(pai_tbl[i]>2){ m2+=0x1000; m++; continue; }if(pai_tbl[i]>1){m++;if(vZpt[i]>0) m2+=0x0100;else m2+=0x0010;continue;}if(pai_tbl[i]>0 && vZpt[i]>0){ m++; m2++; }}i=30; while(++i<35){if(pai_tbl[i]>2){ l2+=0x1000; l++; continue; }if(pai_tbl[i]>1){l++;if(vZpt[i]>0) l2+=0x0100;else l2+=0x0010;continue;}if(pai_tbl[i]>0 && vZpt[i]>0){ l++; l2++; }}if((m>0x20ff && fc[jia]<3) &&    (m>0x11ff && fc[jia]<2) &&    (m>0x02ff && fc[jia]<1)){y=0x0d00; if(gameMode==GAMEMODE_GUOJI) y=0x5800;i=34; while(++i<38){if(pai_tbl[i]==2) vOOO[i]+=y;if(pai_tbl[i]<4 && pai_tbl[i]+vZpt[i]>1) vYaku[i]+=y;}nrykfan[jia]+=y >> 8;return(y >> 8);}if((l>0x2100 && fc[jia]<3) &&    (l>0x1200 && fc[jia]<2) &&    (l>0x0300 && fc[jia]<1)){y=0x0d00; if(gameMode==GAMEMODE_GUOJI) y=0x5800;i=30; while(++i<35){if(pai_tbl[i]==2) vOOO[i]+=y;if(pai_tbl[i]<4) vYaku[i]+=y;}i=nukidora.length; while(--i>-1){if((j=nukidora[i])<1 || j>37) continue;if(j<30 || j>34) continue;if(pai_tbl[j]<4 && pai_tbl[i]+vZpt[i]>1) ai_ndrq[i]=1;}nrykfan[jia]+=y >> 8;return(y >> 8);}i=l+m;if((i>0x3100 && fc[jia]<4) &&    (i>0x2100 && fc[jia]<3) &&    (i>0x1200 && fc[jia]<2) &&    (i>0x0300 && fc[jia]<1)){y=0x0d00; if(gameMode==GAMEMODE_GUOJI) y=0x4000;i=30; while(++i<38){if(pai_tbl[i]==2) vOOO[i]+=y;if(pai_tbl[i]<4 && pai_tbl[i]+vZpt[i]>1) vYaku[i]+=y;}nrykfan[jia]+=y >> 8;return(y >> 8);}if((m>0x1200 && fc[jia]<2) &&    (m>0x0300 && fc[jia]<1)){y=0x0400; if(gameMode==GAMEMODE_GUOJI) y=0x4000;i=34; while(++i<38){if(pai_tbl[i]==2) vOOO[i]+=y;if(pai_tbl[i]<4 && pai_tbl[i]+vZpt[i]>1) vYaku[i]+=y;}nrykfan[jia]+=y >> 8;return(y >> 8);}if(gameMode!=GAMEMODE_GUOJI) return(0);if((l>0x20ff && fc[jia]<3) &&    (l>0x11ff && fc[jia]<2) &&    (l>0x02ff && fc[jia]<1)){y=0x0c00;i=30; while(++i<35){if(pai_tbl[i]==2) vOOO[i]+=y;if(pai_tbl[i]<4 && pai_tbl[i]+vZpt[i]>1) vYaku[i]+=y;}nrykfan[jia]+=y >> 8;return(y >> 8);}if((m>0x01ff && fc[jia]<2) &&    (m>0x10ff && fc[jia]<1)){y=0x0600;i=34; while(++i<38){if(pai_tbl[i]==2) vOOO[i]+=y;if(pai_tbl[i]<4 && pai_tbl[i]+vZpt[i]>1) vYaku[i]+=y;}nrykfan[jia]+=y >> 8;return(y >> 8);}return(0);}v0126_1=0;function a0126(jia){var i, j, k, l, m, n, n2;var noFulou=1;SHUPAI_MOVE(jia);try{if(gameMode==GAMEMODE_GUOJI){k=-5; l=m=n=n2=0; i=fc[jia]; while(--i>-1){k+=5;if((j=fl[jia][k] % 50)!=fl[jia][k+1] % 50) continue;if(fl[jia][k+3]>0) n++;if(fl[jia][k+4]>0) n2++;if(j>34){ m++; continue; }if(j==zhuangfeng[0] || j==zhuangfeng[1]){l+=2;if(j==menfeng[jia]) l+=2;}else if(j==menfeng[jia]) l+=2;else if(j>30 || j % 10==1 || j % 10==9) l++;}if(m==2) l+=6; else if(m==1) l+=2;if(n2>1) l+=8; else if(n2) l+=2;if(n+n2>1) l+=4; else if(n==1) l++;k=4-fc[jia]; j=l;if((i=menfeng[jia])==zhuangfeng[0] || i==zhuangfeng[1]){if(pai_tbl[i]>2 || (pai_tbl[i]==2 && k>0 && vZpt[i]>0)){j+=4; k--;}}else {if(pai_tbl[i]>2 || (pai_tbl[i]==2 && k>0 && vZpt[i]>0)){j+=2; k--;}if((i=zhuangfeng[0])>0){if(pai_tbl[i]>2 || (pai_tbl[i]==2 && k>0 && vZpt[i]>0)){j+=2; k--;}}if((i=zhuangfeng[1])>0){if(pai_tbl[i]>2 || (pai_tbl[i]==2 && k>0 && vZpt[i]>0)){j+=2; k--;}}}i=34; while(++i<38){if(pai_tbl[i]>2 || (pai_tbl[i]==2 && k>0 && vZpt[i]>0)){j+=2; k--;}}if(j<6) return(0);k=0; if((i=menfeng[jia])==zhuangfeng[0] || i==zhuangfeng[1]){if(pai_tbl[i]==2 && vZpt[i]>0) vOOO[i]+=0x0400;if(pai_tbl[i]<4 && pai_tbl[i]+vZpt[i]>2){ vYaku[i]+=0x0400; k+=4; }}else {if(pai_tbl[i]>2 || (pai_tbl[i]==2 && vZpt[i]>0)){if(pai_tbl[i]==2 && vZpt[i]>0) vOOO[i]+=0x0200;if(pai_tbl[i]<4 && pai_tbl[i]+vZpt[i]>2){ vYaku[i]+=0x0200; k+=2; }}if((i=zhuangfeng[0])>0){if(pai_tbl[i]==2 && vZpt[i]>0) vOOO[i]+=0x0200;if(pai_tbl[i]<4 && pai_tbl[i]+vZpt[i]>2){ vYaku[i]+=0x0200; k+=2; }}if((i=zhuangfeng[1])>0){if(pai_tbl[i]==2 && vZpt[i]>0) vOOO[i]+=0x0200;if(pai_tbl[i]<4 && pai_tbl[i]+vZpt[i]>2){ vYaku[i]+=0x0200; k+=2; }}}i=34; while(++i<38){if(pai_tbl[i]==2 && vZpt[i]>0) vOOO[i]+=0x0200;if(pai_tbl[i]<4 && pai_tbl[i]+vZpt[i]>2){ vYaku[i]+=0x0200; k+=2; }}if((i=4-fc[jia])>0 && k>5-i){i=30; while(++i<35){if(i==zhuangfeng[0] || i==zhuangfeng[1] || i==menfeng[jia]) continue;if(pai_tbl[i]==2 && vZpt[i]>0) vOOO[i]+=0x0100;if(pai_tbl[i]<4 && pai_tbl[i]+vZpt[i]>2){ vYaku[i]+=0x0100; k++; }}i=-10; while((i+=10)<30){if(pai_tbl[i+9]==2 && vZpt[i+9]>0) vOOO[i+9]+=0x0100;if(pai_tbl[i+9]<4 && pai_tbl[i+9]+vZpt[i+9]>2){ vYaku[i+9]+=0x0100; k++; }if(pai_tbl[i+1]==2 && vZpt[i+1]>0) vOOO[i+1]+=0x0100;if(pai_tbl[i+1]<4 && pai_tbl[i+1]+vZpt[i+1]>2){ vYaku[i+1]+=0x0100; k++; }}}return(k);}k=4-fc[jia]; l=0;if((i=menfeng[jia])==zhuangfeng[0]){if(pai_tbl[i]>2 || (pai_tbl[i]==2 && k>0 && vZpt[i]>0)){l+=2; k--;}if((i=zhuangfeng[1])>0){if(pai_tbl[i]>2 || (pai_tbl[i]==2 && k>0 && vZpt[i]>0)){l++; k--;}}}else if((i=menfeng[jia])==zhuangfeng[1]){if(pai_tbl[i]>2 || (pai_tbl[i]==2 && k>0 && vZpt[i]>0)){l+=2; k--;}if((i=zhuangfeng[0])>0){if(pai_tbl[i]>2 || (pai_tbl[i]==2 && k>0 && vZpt[i]>0)){l++; k--;}}}else {if(pai_tbl[i]>2 || (pai_tbl[i]==2 && k>0 && vZpt[i]>0)){l++; k--;}if((i=zhuangfeng[0])>0){if(pai_tbl[i]>2 || (pai_tbl[i]==2 && k>0 && vZpt[i]>0)){l++; k--;}}if((i=zhuangfeng[1])>0){if(pai_tbl[i]>2 || (pai_tbl[i]==2 && k>0 && vZpt[i]>0)){l++; k--;}}}i=34; while(++i<38){if(pai_tbl[i]>2 || (pai_tbl[i]==2 && k>0 && vZpt[i]>0)){l++; k--;}}k=-5; i=fc[jia]; while(--i>-1){k+=5;if((j=fl[jia][k] % 50)!=fl[jia][k+1] % 50) continue;if(j>34){ l++; continue; }if(j==zhuangfeng[0] || j==zhuangfeng[1]) l++;if(j==menfeng[jia]) l++;}noFulou=1;if(gameMode==GAMEMODE_REACH || gameMode==GAMEMODE_REACH3P || gameMode==GAMEMODE_SAMMA || gameMode==GAMEMODE_EASTERN_BOO){if(l>=shibari){noFulou=0;if(mq[jia]) v0126_1=1;rm_2naki[jia]=1;if(tsumi>3 && zhuangjia!=jia) rm_2naki[jia]=0;else if(sc[jia]>rule.base_score) rm_2naki[jia]=0;else if(zhuangjia==jia) rm_2naki[jia]=0;else if(nrykfan[jia]+l+th_dora>2) rm_2naki[jia]=0;}}else noFulou=0;if(l<1) return(0);k=l=0; if(fs2c[jia]>6) k++;if((i=menfeng[jia])>0 && fsp[jia][i]<1){if(pai_tbl[i]==2 && vZpt[i]>0){vYaku[i]+=0x0100;if(!noFulou) vOOO[i]+=0x0100;l++;}else if(pai_tbl[i]<4 && pai_tbl[i]>k && pai_tbl[i]+vZpt[i]>2){vYaku[i]+=0x0100; l++;}}if((i=zhuangfeng[0])>0 && fsp[jia][i]<1){if(pai_tbl[i]==2 && vZpt[i]>0){vYaku[i]+=0x0100;if(!noFulou) vOOO[i]+=0x0100;l++;}else if(pai_tbl[i]<4 && pai_tbl[i]>k && pai_tbl[i]+vZpt[i]>2){vYaku[i]+=0x0100; l++;}}if((i=zhuangfeng[1])>0 && fsp[jia][i]<1){if(pai_tbl[i]==2 && vZpt[i]>0){vYaku[i]+=0x0100;if(!noFulou) vOOO[i]+=0x0100;l++;}else if(pai_tbl[i]<4 && pai_tbl[i]>k && pai_tbl[i]+vZpt[i]>2){vYaku[i]+=0x0100; l++;}}i=34; while(++i<38){if(fsp[jia][i]>0) continue;if(pai_tbl[i]==2 && vZpt[i]>0){vYaku[i]+=0x0100;if(!noFulou) vOOO[i]+=0x0100;l++;continue;}if(pai_tbl[i]<4 && pai_tbl[i]>k && pai_tbl[i]+vZpt[i]>2){vYaku[i]+=0x0100; l++;}}nrykfan[jia]+=l;return(l);}catch(e){  i=i; }return(0);}function a0080(jia, num, suit, xtv){var shunzi=new Array(40), fsc;var pb=new Array(40), p=new Array(40);var XOO=new Array(40), OXO=new Array(40), OOX=new Array(40), vv=new Array(40), wt=new Array(40);var i, j, k, il, j1, k1, y, jj;var vMax=0;var vLim=0x0030;var ptn0=new Array(), ptn1=new Array(), ptn2=new Array(), tf=new Array(), ptc=0;var p1, p2, p3;var mzc, mzc2, mzcb;var ys1, ys2, ys3, ys4, ys5, ys6, ys7;var rqq=new Array(40);if(xtv<2) vLim=0x0210;i=40; while(--i>=-1) pb[i]=shunzi[i]=rqq[i]=0;fsc=0; k=-5; i=fc[jia]; while(--i>-1){k+=5;j=fl[jia][k] % 50;if(j==fl[jia][k+1] % 50) continue;fsc++;shunzi[Math.floor((j+fl[jia][k+1] % 50+fl[jia][k+2] % 50) / 3)]++;}if(fc[jia]-fsc>1) return(0);i=20; while(--i>=0){if((j=te[jia][i] % 50)>0 && j<30) pb[j]++;}mzcb=4-fc[jia];if(num<1){i=-10; il=30;if(suit>-1){i=suit-10; il=suit+10;}while((i+=10)<il){mzc=mzcb; j=0; k=0;if(shunzi[i+2]>0) j+=0x0100;else {if(--mzc<0) continue;if(pb[i+1]+vZpt[i+1]<1 || pb[i+2]+vZpt[i+2]<1 || pb[i+3]+vZpt[i+3]<1) continue;jj=0;if(pb[i+1]>0) jj++;if(pb[i+2]>0) jj++;if(pb[i+3]>0) jj++;if(jj>2) j+=0x0100;else if(jj>1) j+=0x0010;else if(jj>0) j+=0x0001;}if(shunzi[i+5]>0) j+=0x0100;else {if(--mzc<0) continue;if(pb[i+4]+vZpt[i+4]<1 || pb[i+5]+vZpt[i+5]<1 || pb[i+6]+vZpt[i+6]<1) continue;jj=0;if(pb[i+4]>0) jj++;if(pb[i+5]>0) jj++;if(pb[i+6]>0) jj++;if(jj>2) j+=0x0100;else if(jj>1) j+=0x0010;else if(jj>0) j+=0x0001;}if(shunzi[i+8]>0) j+=0x0100;else {if(--mzc<0) continue;if(pb[i+7]+vZpt[i+7]<1 || pb[i+8]+vZpt[i+8]<1 || pb[i+9]+vZpt[i+9]<1) continue;jj=0;if(pb[i+7]>0) jj++;if(pb[i+8]>0) jj++;if(pb[i+9]>0) jj++;if(jj>2) j+=0x0100;else if(jj>1) j+=0x0010;else if(jj>0) j+=0x0001;}if(vLim>j || vMax>j) continue;if(vMax<j){ vMax=j; ptc=0; }ptn0[ptc]=i+1;ptn1[ptc]=i+4;ptn2[ptc]=i+7;}}if(suit<0 && (gameMode!=GAMEMODE_BOO || rule.boo_sanshoku) && (gameMode!=GAMEMODE_ARSHIAR || rule.arshiar_sanshoku) && (players!=3 || gameMode==GAMEMODE_PENGLI)){i=0; il=8;if(num>1){ i=num-1; il=num+1; }while(++i<il){mzc=mzcb; j=0; k=0;if(shunzi[i+ 1]>0) j+=0x0100;else {if(--mzc<0) j=-32768;else if(pb[i   ]+vZpt[i   ]<1 || pb[i+ 1]+vZpt[i+ 1]<1 || pb[i+ 2]+vZpt[i+ 2]<1) j=-32768;else {jj=0;if(pb[i   ]>0) jj++;if(pb[i+ 1]>0) jj++;if(pb[i+ 2]>0) jj++;if(jj>2) j+=0x0100;else if(jj>1) j+=0x0010;else if(jj>0) j+=0x0001;}}if(shunzi[i+11]>0) j+=0x0100;else {if(--mzc<0) j=-32768;else if(pb[i+10]+vZpt[i+10]<1 || pb[i+11]+vZpt[i+11]<1 || pb[i+12]+vZpt[i+12]<1) j=-32768;else {jj=0;if(pb[i+10]>0) jj++;if(pb[i+11]>0) jj++;if(pb[i+12]>0) jj++;if(jj>2) j+=0x0100;else if(jj>1) j+=0x0010;else if(jj>0) j+=0x0001;}}if(shunzi[i+21]>0) j+=0x0100;else {if(--mzc<0) j=-32768;else if(pb[i+20]+vZpt[i+20]<1 || pb[i+21]+vZpt[i+21]<1 || pb[i+22]+vZpt[i+22]<1) j=-32768;else {jj=0;if(pb[i+20]>0) jj++;if(pb[i+21]>0) jj++;if(pb[i+22]>0) jj++;if(jj>2) j+=0x0100;else if(jj>1) j+=0x0010;else if(jj>0) j+=0x0001;}}if(vLim<=j && vMax<=j){if(vMax<j){ vMax=j; ptc=0; }ptn0[ptc]=i;ptn1[ptc]=i+10;ptn2[ptc]=i+20;}}}if(ptc<1) return(0);i=40; while(--i>0) XOO[i]=OXO[i]=OOX[i]=vv[i]=wt[i]=0;var rrr=1; if(vMax>0x35) rrr=0;k=0; i=ptc; while(--i>-1){k+=y; j=40; while(--j>=0) p[j]=pb[j];j=ptn0[i];if(shunzi[j+1]<1){p1=p2=p3=0;if((i1=p[j  ])>0) p1++; else i1=1;if((j1=p[j+1])>0) p2++; else j1=1;if((k1=p[j+2])>0) p3++; else k1=1;if(p1 && p2 && !p3){OOX[j+2]++;if(j % 10==1 || j % 10==4 || j % 10==7) OOX[j+2]++;}if(p1 && !p2 && p3){OXO[j+1]++;if(j % 10==1 || j % 10==4 || j % 10==7) OXO[j+1]++;}if(!p1 && p2 && p3){XOO[j  ]++;if(j % 10==1 || j % 10==4 || j % 10==7) XOO[j  ]++;}i1=Math.min(i1, Math.min(j1, k1))+1;if(p[j  ]<i1){vv[j  ]++;if(p[j  ]<1) rqq[i  ]++;}if(p[j+1]<i1){vv[j+1]++;if(p[j+1]<1) rqq[i+1]++;}if(p[j+2]<i1){vv[j+2]++;if(p[j+2]<1) rqq[i+2]++;}}j=ptn1[i];if(shunzi[j+1]<1){p1=p2=p3=0;if((i1=p[j  ])>0) p1++; else i1=1;if((j1=p[j+1])>0) p2++; else j1=1;if((k1=p[j+2])>0) p3++; else k1=1;if(p1 && p2 && !p3){OOX[j+2]++;if(j % 10==1 || j % 10==4 || j % 10==7) OOX[j+2]++;}if(p1 && !p2 && p3){OXO[j+1]++;if(j % 10==1 || j % 10==4 || j % 10==7) OXO[j+1]++;}if(!p1 && p2 && p3){XOO[j  ]++;if(j % 10==1 || j % 10==4 || j % 10==7) XOO[j  ]++;}i1=Math.min(i1, Math.min(j1, k1))+1;if(p[j  ]<i1){vv[j  ]++;if(p[j  ]<1) rqq[i  ]++;}if(p[j+1]<i1){vv[j+1]++;if(p[j+1]<1) rqq[i+1]++;}if(p[j+2]<i1){vv[j+2]++;if(p[j+2]<1) rqq[i+2]++;}}j=ptn2[i];if(shunzi[j+1]<1){p1=p2=p3=0;if((i1=p[j  ])>0) p1++; else i1=1;if((j1=p[j+1])>0) p2++; else j1=1;if((k1=p[j+2])>0) p3++; else k1=1;if(p1 && p2 && !p3){OOX[j+2]++;if(j % 10==1 || j % 10==4 || j % 10==7) OOX[j+2]++;}if(p1 && !p2 && p3){OXO[j+1]++;if(j % 10==1 || j % 10==4 || j % 10==7) OXO[j+1]++;}if(!p1 && p2 && p3){XOO[j  ]++;if(j % 10==1 || j % 10==4 || j % 10==7) XOO[j  ]++;}i1=Math.min(i1, Math.min(j1, k1))+1;if(p[j  ]<i1){vv[j  ]++;if(p[j  ]<1) rqq[i  ]++;}if(p[j+1]<i1){vv[j+1]++;if(p[j+1]<1) rqq[i+1]++;}if(p[j+2]<i1){vv[j+2]++;if(p[j+2]<1) rqq[i+2]++;}}}y=0x0200; if(gameMode==GAMEMODE_ARSHIAR || ((gameMode==GAMEMODE_REACH || gameMode==GAMEMODE_SAMMA) && mq[jia])) y=0x0100;if(gameMode!=GAMEMODE_REACH && gameMode!=GAMEMODE_SAMMA){i=30; while(--i>0){vYaku[i]+=Math.floor(y * vv[i] / ptc);required[jia][i]+=Math.floor(y * rqq[i] / ptc);vXOO[i]+=Math.floor(y * XOO[i] / ptc);vOXO[i]+=Math.floor(y * OXO[i] / ptc);vOOX[i]+=Math.floor(y * OOX[i] / ptc);}}else {i=30; while(--i>0){vYaku[i]+=Math.floor(y * vv[i] / ptc);required[jia][i]+=Math.floor(y * rqq[i] / ptc);}}k=Math.floor(k / ptc);nrykfan[jia]+=y >> 8;return(k);}function a0124(jia, num, suit){var shunzi=new Array(40), fsc;var pb=new Array(40), p=new Array(40);var XOO=new Array(40), OXO=new Array(40), OOX=new Array(40), vv=new Array(40), wt=new Array(40);var i, j, k, il, j1, k1, y, jj;var vMax=0;var vLim=0x0036;var ptn0=new Array(), ptn1=new Array(), ptn2=new Array(), yh=new Array(), tf=new Array(), ptc=0, cds=new Array();var p1, p2, p3;var mzc, mzc2, mzcb;var ys1, ys2, ys3, ys4, ys5, ys6, ys7;var cdss, cd=new Array(9);var rqq=new Array(40);if(zampai / players<8) vLim=0x0037;if(fs2c[jia]<6) vLim=0x0035;i=40; while(--i>=-1) pb[i]=shunzi[i]=rqq[i]=0;fsc=0; k=-5; i=fc[jia]; while(--i>-1){k+=5;j=fl[jia][k] % 50;if(j==fl[jia][k+1] % 50) continue;fsc++;shunzi[Math.floor((j+fl[jia][k+1] % 50+fl[jia][k+2] % 50) / 3)]++;}if(fc[jia]-fsc>1) return(0);i=20; while(--i>=0){if((j=te[jia][i] % 50)>0 && j<30) pb[j]++;}mzcb=4-fc[jia];if(num<1){i=0; il=24;if(suit>-1){i=suit; il=suit+4;}while(++i<il){if(i % 10>3) continue;mzc=mzcb; j=0; k=0;ys1=ys2=ys4=ys5=ys7=1;ys3=ys6=2;if(shunzi[i+1]>0){ys1--; ys2--; ys3--;}if(shunzi[i+3]>0){ys3--; ys4--; ys5--;}if(shunzi[i+5]>0){ys5--; ys6--; ys7--;}if(pb[i  ]+vZpt[i  ]<ys1 ||    pb[i+1]+vZpt[i+1]<ys2 ||    pb[i+2]+vZpt[i+2]<ys3 ||    pb[i+3]+vZpt[i+3]<ys4 ||    pb[i+4]+vZpt[i+4]<ys5 ||    pb[i+5]+vZpt[i+5]<ys6 ||    pb[i+6]+vZpt[i+6]<ys7) continue;cdss='0 0 0 ';if(shunzi[i+1]>0) j+=0x13;else {if(--mzc<0) continue;jj=0;if(pb[i]>0) jj++;if(pb[i+1]>0) jj++;if(pb[i+2]>0) jj++;if(jj>0) j+=0x10+jj;}if(shunzi[i+3]>0) j+=0x13;else {if(--mzc<0) continue;jj=0;if(shunzi[i+1]>0){if(pb[i+2]>0) jj++;cdss+='0 0 0 ';}else {if(pb[i+2]>1) jj++;cdss+='1 0 0 ';}if(pb[i+3]>0) jj++;if(pb[i+4]>0) jj++;if(jj>0) j+=0x10+jj;}if(shunzi[i+5]>0) j+=0x13;else {if(--mzc<0) continue;jj=0;if(shunzi[i+3]>0){if(pb[i+4]>0) jj++;cdss+='0 0 0 ';}else {if(pb[i+4]>1) jj++;cdss+='1 0 0 ';}if(pb[i+5]>0) jj++;if(pb[i+6]>0) jj++;if(jj>0) j+=0x10+jj;}if(vLim>j || vMax>j) continue;if(vMax<j){ vMax=j; ptc=0; }ptn0[ptc]=i;ptn1[ptc]=i+2;ptn2[ptc]=i+4;yh[ptc]=16;cds[ptc++]=cdss;}i=0; il=26;if(suit>-1){i=suit; il=suit+6;}while(++i<il){if(i % 10>5) continue;mzc=mzcb; j=0; k=0;ys1=ys2=1;ys2=ys4=2;ys3=3;if(shunzi[i+1]>0){ys1--; ys2--; ys3--;}if(shunzi[i+2]>0){ys2--; ys3--; ys4--;}if(shunzi[i+3]>0){ys3--; ys4--; ys5--;}if(pb[i  ]+vZpt[i  ]<ys1 ||    pb[i+1]+vZpt[i+1]<ys2 ||    pb[i+2]+vZpt[i+2]<ys3 ||    pb[i+3]+vZpt[i+3]<ys4 ||    pb[i+4]+vZpt[i+4]<ys5) continue;cdss='0 0 0 ';if(shunzi[i+1]>0) j+=0x13;else {if(--mzc<0) continue;jj=0;if(pb[i]>0) jj++;if(pb[i+1]>0) jj++;if(pb[i+2]>0) jj++;if(jj>0) j+=0x10+jj;}if(shunzi[i+2]>0) j+=0x13;else {if(--mzc<0) continue;jj=0;if(shunzi[i+1]>0){if(pb[i+1]>0) jj++;if(pb[i+2]>0) jj++;cdss+='0 0 0 ';}else {if(pb[i+1]>1) jj++;if(pb[i+2]>1) jj++;cdss+='1 1 0 ';}if(pb[i+3]>0) jj++;if(jj>0) j+=0x10+jj;}if(shunzi[i+3]>0) j+=0x13;else {if(--mzc<0) continue;jj=0;if(shunzi[i+1]>0 && shunzi[i+2]>0){if(pb[i+2]>0) jj++;cdss+='0 ';}else if(shunzi[i+1]>0 || shunzi[i+2]>0){if(pb[i+2]>1) jj++;cdss+='1 ';}else {if(pb[i+2]>2) jj++;cdss+='2 ';}if(shunzi[i+2]>0){if(pb[i+3]>0) jj++;cdss+='0 ';}else {if(pb[i+3]>1) jj++;cdss+='1 ';}if(pb[i+4]>0) jj++;cdss+='0 ';if(jj>0) j+=0x10+jj;}if(vLim>j || vMax>j) continue;if(vMax<j){ vMax=j; ptc=0; }ptn0[ptc]=i;ptn1[ptc]=i+1;ptn2[ptc]=i+2;yh[ptc]=16;cds[ptc++]=cdss;}i=-10; il=30;if(suit>-1){i=suit-10; il=suit+10;}while((i+=10)<il){mzc=mzcb; j=0; k=0;if(shunzi[i+2]>0) j+=0x13;else {if(--mzc<0) continue;if(pb[i+1]+vZpt[i+1]<1 || pb[i+2]+vZpt[i+2]<1 || pb[i+3]+vZpt[i+3]<1) continue;jj=0;if(pb[i+1]>0) jj++;if(pb[i+2]>0) jj++;if(pb[i+3]>0) jj++;if(jj>0) j+=0x10+jj;}if(shunzi[i+5]>0) j+=0x13;else {if(--mzc<0) continue;if(pb[i+4]+vZpt[i+4]<1 || pb[i+5]+vZpt[i+5]<1 || pb[i+6]+vZpt[i+6]<1) continue;jj=0;if(pb[i+4]>0) jj++;if(pb[i+5]>0) jj++;if(pb[i+6]>0) jj++;if(jj>0) j+=0x10+jj;}if(shunzi[i+8]>0) j+=0x13;else {if(--mzc<0) continue;if(pb[i+7]+vZpt[i+7]<1 || pb[i+8]+vZpt[i+8]<1 || pb[i+9]+vZpt[i+9]<1) continue;jj=0;if(pb[i+7]>0) jj++;if(pb[i+8]>0) jj++;if(pb[i+9]>0) jj++;if(jj>0) j+=0x10+jj;}if(vLim>j || vMax>j) continue;if(vMax<j){ vMax=j; ptc=0; }ptn0[ptc]=i+1;ptn1[ptc]=i+4;ptn2[ptc]=i+7;yh[ptc]=16;cds[ptc++]='0 0 0 0 0 0 0 0 0 ';}}if(num<1 && suit<0){y=8;mzc=mzcb; j=0; k=0;if(shunzi[ 2]>0) j+=0x13;else {if(--mzc<0) j=-32768;else if(pb[ 1]+vZpt[ 1]<1 || pb[ 2]+vZpt[ 2]<1 || pb[ 3]+vZpt[ 3]<1) j=-32768;else {jj=0;if(pb[ 1]>0) jj++;if(pb[ 2]>0) jj++;if(pb[ 3]>0) jj++;if(jj>0) j+=0x10+jj;}}mzc2=mzc; j1=j; k1=k;if(shunzi[15]>0) j+=0x13;else {if(--mzc<0) j=-32768;else if(pb[14]+vZpt[14]<1 || pb[15]+vZpt[15]<1 || pb[16]+vZpt[16]<1) j=-32768;else {jj=0;if(pb[14]>0) jj++;if(pb[15]>0) jj++;if(pb[16]>0) jj++;if(jj>0) j+=0x10+jj;}}if(shunzi[28]>0) j+=0x13;else {if(--mzc<0) j=-32768;else if(pb[27]+vZpt[27]<1 || pb[28]+vZpt[28]<1 || pb[29]+vZpt[29]<1) j=-32768;else {jj=0;if(pb[27]>0) jj++;if(pb[28]>0) jj++;if(pb[29]>0) jj++;if(jj>0) j+=0x10+jj;}}if(vLim<=j && vMax<=j){if(vMax<j){ vMax=j; ptc=0; }ptn0[ptc]= 1;ptn1[ptc]=14;ptn2[ptc]=27;yh[ptc]=y;cds[ptc++]='0 0 0 0 0 0 0 0 0 ';}mzc=mzc2; j=j1; k=k1;if(shunzi[25]>0) j+=0x13;else {if(--mzc<0) j=-32768;else if(pb[24]+vZpt[24]<1 || pb[25]+vZpt[25]<1 || pb[26]+vZpt[26]<1) j=-32768;else {jj=0;if(pb[24]>0) jj++;if(pb[25]>0) jj++;if(pb[26]>0) jj++;if(jj>0) j+=0x10+jj;}}if(shunzi[18]>0) j+=0x13;else {if(--mzc<0) j=-32768;else if(pb[17]+vZpt[17]<1 || pb[18]+vZpt[18]<1 || pb[19]+vZpt[19]<1) j=-32768;else {jj=0;if(pb[17]>0) j++;if(pb[18]>0) j++;if(pb[19]>0) j++;if(jj>0) j+=0x10+jj;}}if(vLim<=j && vMax<=j){if(vMax<j){ vMax=j; ptc=0; }ptn0[ptc]= 1;ptn1[ptc]=17;ptn2[ptc]=24;yh[ptc]=y;cds[ptc++]='0 0 0 0 0 0 0 0 0 ';}mzc=mzcb; j=0; k=0;if(shunzi[ 5]>0) j+=0x13;else {if(--mzc<0) j=-32768;else if(pb[ 4]+vZpt[ 4]<1 || pb[ 5]+vZpt[ 5]<1 || pb[ 6]+vZpt[ 6]<1) j=-32768;else {jj=0;if(pb[ 4]>0) jj++;if(pb[ 5]>0) jj++;if(pb[ 6]>0) jj++;if(jj>0) j+=0x10+jj;}}mzc2=mzc; j1=j; k1=k;if(shunzi[12]>0) j+=0x13;else {if(--mzc<0) j=-32768;else if(pb[11]+vZpt[11]<1 || pb[12]+vZpt[12]<1 || pb[13]+vZpt[13]<1) j=-32768;else {jj=0;if(pb[11]>0) jj++;if(pb[12]>0) jj++;if(pb[13]>0) jj++;if(jj>0) j+=0x10+jj;}}if(shunzi[28]>0) j+=0x13;else {if(--mzc<0) j=-32768;else if(pb[27]+vZpt[27]<1 || pb[28]+vZpt[28]<1 || pb[29]+vZpt[29]<1) j=-32768;else {jj=0;if(pb[27]>0) jj++;if(pb[28]>0) jj++;if(pb[29]>0) jj++;if(jj>0) j+=0x10+jj;}}if(vLim<=j && vMax<=j){if(vMax<j){ vMax=j; ptc=0; }ptn0[ptc]= 4;ptn1[ptc]=11;ptn2[ptc]=27;yh[ptc]=y;cds[ptc++]='0 0 0 0 0 0 0 0 0 ';}mzc=mzc2; j=j1; k=k1;if(shunzi[22]>0) j+=0x13;else {if(--mzc<0) j=-32768;else if(pb[21]+vZpt[21]<1 || pb[22]+vZpt[22]<1 || pb[23]+vZpt[23]<1) j=-32768;else {jj=0;if(pb[21]>0) jj++;if(pb[22]>0) jj++;if(pb[23]>0) jj++;if(jj>0) j+=0x10+jj;}}if(shunzi[18]>0) j+=0x13;else {if(--mzc<0) j=-32768;else if(pb[17]+vZpt[17]<1 || pb[18]+vZpt[18]<1 || pb[19]+vZpt[19]<1) j=-32768;else {jj=0;if(pb[17]>0) jj++;if(pb[18]>0) jj++;if(pb[19]>0) jj++;if(jj>0) j+=0x10+jj;}}if(vLim<=j && vMax<=j){if(vMax<j){ vMax=j; ptc=0; }ptn0[ptc]= 4;ptn1[ptc]=21;ptn2[ptc]=17;yh[ptc]=y;cds[ptc++]='0 0 0 0 0 0 0 0 0 ';}mzc=mzcb; j=0; k=0;if(shunzi[ 8]>0) j+=0x13;else {if(--mzc<0) j=-32768;else if(pb[ 7]+vZpt[ 7]<1 || pb[ 8]+vZpt[ 8]<1 || pb[ 9]+vZpt[ 9]<1) j=-32768;else {jj=0;if(pb[ 7]>0) jj++;if(pb[ 8]>0) jj++;if(pb[ 9]>0) jj++;if(jj>0) j+=0x10+jj;}}mzc2=mzc; j1=j; k1=k;if(shunzi[12]>0) j+=0x13;else {if(--mzc<0) j=-32768;else if(pb[11]>0 && pb[12]>0 && pb[13]>0) jj=3;else if(pb[11]+vZpt[11]<1 || pb[12]+vZpt[12]<1 || pb[13]+vZpt[13]<1) j=-32768;else {jj=0;if(pb[11]>0) jj++;if(pb[12]>0) jj++;if(pb[13]>0) jj++;if(jj>0) j+=0x10+jj;}}if(shunzi[25]>0) j+=0x13;else {if(--mzc<0) j=-32768;else if(pb[24]+vZpt[24]<1 || pb[25]+vZpt[25]<1 || pb[26]+vZpt[26]<1) j=-32768;else {jj=0;if(pb[24]>0) jj++;if(pb[25]>0) jj++;if(pb[26]>0) jj++;if(jj>0) j+=0x10+jj;}}if(vLim<=j && vMax<=j){if(vMax<j){ vMax=j; ptc=0; }ptn0[ptc]= 7;ptn1[ptc]=11;ptn2[ptc]=24;yh[ptc]=y;cds[ptc++]='0 0 0 0 0 0 0 0 0 ';}mzc=mzc2; j=j1; k=k1;if(shunzi[22]>0) j+=0x13;else {if(--mzc<0) j=-32768;else if(pb[21]+vZpt[21]<1 || pb[22]+vZpt[22]<1 || pb[23]+vZpt[23]<1) j=-32768;else {jj=0;if(pb[21]>0) jj++;if(pb[22]>0) jj++;if(pb[23]>0) jj++;if(jj>0) j+=0x10+jj;}}if(shunzi[15]>0) j+=0x13;else {if(--mzc<0) j=-32768;else if(pb[14]+vZpt[14]<1 || pb[15]+vZpt[15]<1 || pb[16]+vZpt[16]<1) j=-32768;else {jj=0;if(pb[14]>0) j++;if(pb[15]>0) j++;if(pb[16]>0) j++;if(jj>0) j+=0x10+jj;}}if(vLim<=j && vMax<=j){if(vMax<j){ vMax=j; ptc=0; }ptn0[ptc]= 7;ptn1[ptc]=14;ptn2[ptc]=21;yh[ptc]=y;cds[ptc++]='0 0 0 0 0 0 0 0 0 ';}}if(suit<0){y=8; i=0; il=8;if(num>1){ i=num-1; il=num+1; }while(++i<il){mzc=mzcb; j=0; k=0;if(shunzi[i+ 1]>0) j+=0x13;else {if(--mzc<0) j=-32768;else if(pb[i   ]+vZpt[i   ]<1 || pb[i+ 1]+vZpt[i+ 1]<1 || pb[i+ 2]+vZpt[i+ 2]<1) j=-32768;else {jj=0;if(pb[i   ]>0) jj++;if(pb[i+ 1]>0) jj++;if(pb[i+ 2]>0) jj++;if(jj>0) j+=0x10+jj;}}if(shunzi[i+11]>0) j+=0x13;else {if(--mzc<0) j=-32768;else if(pb[i+10]+vZpt[i+10]<1 || pb[i+11]+vZpt[i+11]<1 || pb[i+12]+vZpt[i+12]<1) j=-32768;else {jj=0;if(pb[i+10]>0) jj++;if(pb[i+11]>0) jj++;if(pb[i+12]>0) jj++;if(jj>0) j+=0x10+jj;}}if(shunzi[i+21]>0) j+=0x13;else {if(--mzc<0) j=-32768;else if(pb[i+20]+vZpt[i+20]<1 || pb[i+21]+vZpt[i+21]<1 || pb[i+22]+vZpt[i+22]<1) j=-32768;else {jj=0;if(pb[i+20]>0) jj++;if(pb[i+21]>0) jj++;if(pb[i+22]>0) jj++;if(jj>0) j+=0x10+jj;}}if(vLim<=j && vMax<=j){if(vMax<j){ vMax=j; ptc=0; }ptn0[ptc]=i;ptn1[ptc]=i+10;ptn2[ptc]=i+20;yh[ptc]=y;cds[ptc++]='0 0 0 0 0 0 0 0 0 ';}if(i<2 || i>5 || num>1) continue;mzc=mzcb; j=k=0;if(shunzi[i+ 1]>0) j+=0x13;else {if(--mzc<0) j=-32768;else if(pb[i   ]+vZpt[i   ]<1 || pb[i+ 1]+vZpt[i+ 1]<1 || pb[i+ 2]+vZpt[i+ 2]<1) j=-32768;else {jj=0;if(pb[i   ]>0) jj++;if(pb[i+ 1]>0) jj++;if(pb[i+ 2]>0) jj++;if(jj>0) j+=0x10+jj;}}mzc2=mzc; j1=j; k1=k;if(shunzi[i+12]>0) j+=0x13;else {if(--mzc<0) j=-32768;else if(pb[i+11]+vZpt[i+11]<1 || pb[i+12]+vZpt[i+12]<1 || pb[i+13]+vZpt[i+13]<1) j=-32768;else {jj=0;if(pb[i+11]>0) jj++;if(pb[i+12]>0) jj++;if(pb[i+13]>0) jj++;if(jj>0) j+=0x10+jj;}}if(shunzi[i+23]>0) j+=0x13;else {if(--mzc<0) j=-32768;else if(pb[i+22]+vZpt[i+22]<1 || pb[i+23]+vZpt[i+23]<1 || pb[i+24]+vZpt[i+24]<1) j=-32768;else {jj=0;if(pb[i+22]>0) jj++;if(pb[i+23]>0) jj++;if(pb[i+24]>0) jj++;if(jj>0) j+=0x10+jj;}}if(vLim<=j && vMax<=j){if(vMax<j){ vMax=j; ptc=0; }ptn0[ptc]=i;ptn1[ptc]=i+11;ptn2[ptc]=i+22;yh[ptc]=6;cds[ptc++]='0 0 0 0 0 0 0 0 0 ';}mzc=mzc2; j=j1; k=k1;if(shunzi[i+22]>0) j+=0x13;else {if(--mzc<0) j=-32768;else if(pb[i+21]+vZpt[i+21]<1 || pb[i+22]+vZpt[i+22]<1 || pb[i+23]+vZpt[i+23]<1) j=-32768;else {jj=0;if(pb[i+21]>0) jj++;if(pb[i+22]>0) jj++;if(pb[i+23]>0) jj++;if(jj>0) j+=0x10+jj;}}if(shunzi[i+13]>0) j+=0x13;else {if(--mzc<0) j=-32768;else if(pb[i+12]+vZpt[i+12]<1 || pb[i+13]+vZpt[i+13]<1 || pb[i+14]+vZpt[i+14]<1) j=-32768;else {jj=0;if(pb[i+12]>0) jj++;if(pb[i+13]>0) jj++;if(pb[i+14]>0) jj++;if(jj>0) j+=0x10+jj;}}if(vLim<=j && vMax<=j){if(vMax<j){ vMax=j; ptc=0; }ptn0[ptc]=i;ptn1[ptc]=i+12;ptn2[ptc]=i+21;yh[ptc]=6;cds[ptc++]='0 0 0 0 0 0 0 0 0 ';}mzc=mzcb; j=k=0;if(shunzi[i+ 2]>0) j+=0x13;else {if(--mzc<0) j=-32768;else if(pb[i+ 1]+vZpt[i+ 1]<1 || pb[i+ 2]+vZpt[i+ 2]<1 || pb[i+ 3]+vZpt[i+ 3]<1) j=-32768;else {jj=0;if(pb[i+ 1]>0) jj++;if(pb[i+ 2]>0) jj++;if(pb[i+ 3]>0) jj++;if(jj>0) j+=0x10+jj;}}mzc2=mzc; j1=j; k1=k;if(shunzi[i+11]>0) j+=0x13;else {if(--mzc<0) j=-32768;else if(pb[i+10]+vZpt[i+10]<1 || pb[i+11]+vZpt[i+11]<1 || pb[i+12]+vZpt[i+12]<1) j=-32768;else {jj=0;if(pb[i+10]>0) jj++;if(pb[i+11]>0) jj++;if(pb[i+12]>0) jj++;if(jj>0) j+=0x10+jj;}}if(shunzi[i+23]>0) j+=0x13;else {if(--mzc<0) j=-32768;else if(pb[i+22]+vZpt[i+22]<1 || pb[i+23]+vZpt[i+23]<1 || pb[i+24]+vZpt[i+24]<1) j=-32768;else {jj=0;if(pb[i+22]>0) jj++;if(pb[i+23]>0) jj++;if(pb[i+24]>0) jj++;if(jj>0) j+=0x10+jj;}}if(vLim<=j && vMax<=j){if(vMax<j){ vMax=j; ptc=0; }ptn0[ptc]=i+1;ptn1[ptc]=i+10;ptn2[ptc]=i+22;yh[ptc]=6;cds[ptc++]='0 0 0 0 0 0 0 0 0 ';}mzc=mzc2; j=j1; k=k1;if(shunzi[i+21]>0) j+=0x13;else {if(--mzc<0) j=-32768;else if(pb[i+20]+vZpt[i+20]<1 || pb[i+21]+vZpt[i+21]<1 || pb[i+22]+vZpt[i+22]<1) j=-32768;else {jj=0;if(pb[i+20]>0) jj++;if(pb[i+21]>0) jj++;if(pb[i+22]>0) jj++;if(jj>0) j+=0x10+jj;}}if(shunzi[i+13]>0) j+=0x13;else {if(--mzc<0) j=-32768;else if(pb[i+12]+vZpt[i+12]<1 || pb[i+13]+vZpt[i+13]<1 || pb[i+14]+vZpt[i+14]<1) j=-32768;else {jj=0;if(pb[i+12]>0) jj++;if(pb[i+13]>0) jj++;if(pb[i+14]>0) jj++;if(jj>0) j+=0x10+jj;}}if(vLim<=j && vMax<=j){if(vMax<j){ vMax=j; ptc=0; }ptn0[ptc]=i+1;ptn1[ptc]=i+12;ptn2[ptc]=i+20;yh[ptc]=6;cds[ptc++]='0 0 0 0 0 0 0 0 0 ';}mzc=mzcb; j=k=0;if(shunzi[i+ 3]>0) j+=0x13;else {if(--mzc<0) j=-32768;else if(pb[i+ 2]+vZpt[i+ 2]<1 || pb[i+ 3]+vZpt[i+ 3]<1 || pb[i+ 4]+vZpt[i+ 4]<1) j=-32768;else {jj=0;if(pb[i+ 2]>0) jj++;if(pb[i+ 3]>0) jj++;if(pb[i+ 4]>0) jj++;if(jj>0) j+=0x10+jj;}}mzc2=mzc; j1=j; k1=k;if(shunzi[i+11]>0) j+=0x13;else {if(--mzc<0) j=-32768;else if(pb[i+10]+vZpt[i+10]<1 || pb[i+11]+vZpt[i+11]<1 || pb[i+12]+vZpt[i+12]<1) j=-32768;else {jj=0;if(pb[i+10]>0) jj++;if(pb[i+11]>0) jj++;if(pb[i+12]>0) jj++;if(jj>0) j+=0x10+jj;}}if(shunzi[i+22]>0) j+=0x13;else {if(--mzc<0) j=-32768;else if(pb[i+21]+vZpt[i+21]<1 || pb[i+22]+vZpt[i+22]<1 || pb[i+23]+vZpt[i+23]<1) j=-32768;else {jj=0;if(pb[i+21]>0) jj++;if(pb[i+22]>0) jj++;if(pb[i+23]>0) jj++;if(jj>0) j+=0x10+jj;}}if(vLim<=j && vMax<=j){if(vMax<j){ vMax=j; ptc=0; }ptn0[ptc]=i+2;ptn1[ptc]=i+10;ptn2[ptc]=i+21;yh[ptc]=6;cds[ptc++]='0 0 0 0 0 0 0 0 0 ';}mzc=mzc2; j=j1; k=k1;if(shunzi[i+21]>0) j+=0x13;else {if(--mzc<0) j=-32768;else if(pb[i+20]+vZpt[i+20]<1 || pb[i+21]+vZpt[i+21]<1 || pb[i+22]+vZpt[i+22]<1) j=-32768;else {jj=0;if(pb[i+20]>0) jj++;if(pb[i+21]>0) jj++;if(pb[i+22]>0) jj++;if(jj>0) j+=0x10+jj;}}if(shunzi[i+12]>0) j+=0x13;else {if(--mzc<0) j=-32768;else if(pb[i+11]+vZpt[i+11]<1 || pb[i+12]+vZpt[i+12]<1 || pb[i+13]+vZpt[i+13]<1) j=-32768;else {jj=0;if(pb[i+11]>0) jj++;if(pb[i+12]>0) jj++;if(pb[i+13]>0) jj++;if(jj>0) j+=0x10+jj;}}if(vLim<=j && vMax<=j){if(vMax<j){ vMax=j; ptc=0; }ptn0[ptc]=i+2;ptn1[ptc]=i+11;ptn2[ptc]=i+20;yh[ptc]=6;cds[ptc++]='0 0 0 0 0 0 0 0 0 ';}}}if(ptc<1) return(0);var yy=0;i=40; while(--i>0) XOO[i]=OXO[i]=OOX[i]=vv[i]=wt[i]=0;i=ptc; while(--i>-1){yy+=yh[i];k=yh[i] << 8; j=40; while(--j>=0) p[j]=pb[j];j=ptn0[i];cd=cds[i].split(' ');if(shunzi[j+1]<1){p1=p2=p3=0;if((i1=p[j  ]-parseInt(cd[0]))>0) p1++; else i1=1;if((j1=p[j+1]-parseInt(cd[1]))>0) p2++; else j1=1;if((k1=p[j+2]-parseInt(cd[2]))>0) p3++; else k1=1;if(p1 && p2 && !p3){OOX[j+2]+= k;if(j % 10==1 || j % 10==4 || j % 10==7) OOX[j+2]+= k;}if(p1 && !p2 && p3){OXO[j+1]+= k;if(j % 10==1 || j % 10==4 || j % 10==7) OXO[j+1]+= k;}if(!p1 && p2 && p3){XOO[j  ]+= k;if(j % 10==1 || j % 10==4 || j % 10==7) XOO[j  ]+= k;}i1=Math.min(i1, Math.min(j1, k1))+1;if(p[j  ]-parseInt(cd[0])<i1){vv[j  ]+=k;if(p[j  ]-parseInt(cd[0])<i1-1) rqq[i  ]+=k;}if(p[j+1]-parseInt(cd[1])<i1){vv[j+1]+=k;if(p[j+1]-parseInt(cd[1])<i1-1) rqq[i+1]+=k;}if(p[j+2]-parseInt(cd[2])<i1){vv[j+2]+=k;if(p[j+2]-parseInt(cd[2])<i1-1) rqq[i+2]+=k;}}j=ptn1[i];if(shunzi[j+1]<1){p1=p2=p3=0;if((i1=p[j  ]-parseInt(cd[3]))>0) p1++; else i1=1;if((j1=p[j+1]-parseInt(cd[4]))>0) p2++; else j1=1;if((k1=p[j+2]-parseInt(cd[5]))>0) p3++; else k1=1;if(p1 && p2 && !p3){OOX[j+2]+= k;if(j % 10==1 || j % 10==4 || j % 10==7) OOX[j+2]+= k;}if(p1 && !p2 && p3){OXO[j+1]+= k;if(j % 10==1 || j % 10==4 || j % 10==7) OXO[j+1]+= k;}if(!p1 && p2 && p3){XOO[j  ]+= k;if(j % 10==1 || j % 10==4 || j % 10==7) XOO[j  ]+= k;}i1=Math.min(i1, Math.min(j1, k1))+1;if(p[j  ]-parseInt(cd[3])<i1){vv[j  ]+=k;if(p[j  ]-parseInt(cd[3])<i1-1) rqq[i  ]+=k;}if(p[j+1]-parseInt(cd[4])<i1){vv[j+1]+=k;if(p[j+1]-parseInt(cd[4])<i1-1) rqq[i+1]+=k;}if(p[j+2]-parseInt(cd[5])<i1){vv[j+2]+=k;if(p[j+2]-parseInt(cd[5])<i1-1) rqq[i+2]+=k;}}j=ptn2[i];if(shunzi[j+1]<1){p1=p2=p3=0;if((i1=p[j  ]-parseInt(cd[6]))>0) p1++; else i1=1;if((j1=p[j+1]-parseInt(cd[7]))>0) p2++; else j1=1;if((k1=p[j+2]-parseInt(cd[8]))>0) p3++; else k1=1;if(p1 && p2 && !p3){OOX[j+2]+= k;if(j % 10==1 || j % 10==4 || j % 10==7) OOX[j+2]+= k;}if(p1 && !p2 && p3){OXO[j+1]+= k;if(j % 10==1 || j % 10==4 || j % 10==7) OXO[j+1]+= k;}if(!p1 && p2 && p3){XOO[j  ]+= k;if(j % 10==1 || j % 10==4 || j % 10==7) XOO[j  ]+= k;}i1=Math.min(i1, Math.min(j1, k1))+1;if(p[j  ]-parseInt(cd[6])<i1){vv[j  ]+=k;if(p[j  ]-parseInt(cd[6])<i1-1) rqq[i  ]+=k;}if(p[j+1]-parseInt(cd[7])<i1){vv[j+1]+=k;if(p[j+1]-parseInt(cd[7])<i1-1) rqq[i+1]+=k;}if(p[j+2]-parseInt(cd[8])<i1){vv[j+2]+=k;if(p[j+2]-parseInt(cd[8])<i1-1) rqq[i+2]+=k;}}}i=30; while(--i>0){vYaku[i]+=Math.floor(vv[i] / ptc);required[jia][i]+=Math.floor(rqq[i] / ptc);vXOO[i]+=Math.floor(XOO[i] / ptc);vOXO[i]+=Math.floor(OXO[i] / ptc);vOOX[i]+=Math.floor(OOX[i] / ptc);}nrykfan[jia]+=Math.floor(yy / ptc);return(1);}function a0172(jia, num, suit){var kezi=new Array(40), fsc;var pb=new Array(40), p=new Array(40);var OOO=new Array(40), vv=new Array(40);var i, j, k, l, il, j1, k1, y, jj, yy;var vMax=0;var ptn0=new Array(), ptn1=new Array(), ptn2=new Array(), yh=new Array(), ptc=0;var p1, p2, p3;var mzc, mzc2, mzcb;var rqq=new Array(40);var tk=new Array(40);var ank=0;(0);i=40; while(--i>=-1) pb[i]=kezi[i]=rqq[i]=0;fsc=0; k=-5; i=fc[jia]; while(--i>-1){k+=5;j=fl[jia][k] % 50;if(j!=fl[jia][k+1] % 50) continue;fsc++; kezi[j]++;if(fl[jia][k+4]) ank++;}if(fc[jia]-fsc>1) return(0);i=20; while(--i>=0){if((j=te[jia][i] % 50)>0 && j<30) pb[j]++;}mzcb=4-fc[jia];var pengOK=1;yy=j=k=0;l=t_ptCtr; while(--l>-1){if(j>t_pt[l].kezi_ctr) continue;if(j<t_pt[l].kezi_ctr){j=t_pt[l].kezi_ctr; k=0;}if(k<t_pt[l].duizi_ctr){k=t_pt[l].duizi_ctr;}}jj=j;if(fc[jia]-fsc<1){j+=fsc;if(j>3 || (j>2 && j+k>3)){if(!mq[jia]){yy=0x0d00; pengOK=0;if(gameMode==GAMEMODE_BEINUKI) yy=0x0c00;else if(gameMode==GAMEMODE_ARSHIAR || gameMode==GAMEMODE_BOO) yy=0x0400;else if(gameMode==GAMEMODE_GUOJI) yy=0x4000;}else if(gameMode!=GAMEMODE_BEINUKI){yy=0x0200; pengOK=1;if(gameMode==GAMEMODE_ARSHIAR) yy=0x0100;else if(gameMode==GAMEMODE_GUOJI) yy=0x0600;}}}if(!yy && gameMode!=GAMEMODE_BEINUKI){j=jj+ank;if(j>2 || (j>1 && j+k>2)){yy=0x0200; pengOK=0;if(gameMode==GAMEMODE_ARSHIAR) yy=0x0100;else if(gameMode==GAMEMODE_GUOJI) yy=0x1800;}}if(yy){i=40; while(--i>=-1) tk[i]=0;l=t_ptCtr; while(--l>-1){if(jj>t_pt[l].kezi_ctr) continue;i=t_pt[l].kezi_ctr; while(--i>-1) tk[t_pt[l].kezi[i]]=2;i=t_pt[l].duizi_ctr; while(--i>-1){if(tk[t_pt[l].duizi[i]]<2) tk[t_pt[l].duizi[i]]=1;}}i=40; while(--i>-1){if(tk[i]>0){vYaku[i]+=yy;if(tk[i]<2 && pengOK) vXOO[i]+=yy;}}nrykfan[jia]+=yy >> 8;}if(gameMode==GAMEMODE_BEINUKI || gameMode==GAMEMODE_ARSHIAR || gameMode==GAMEMODE_BOO) return(yy >> 0);if(num<1){i=0; il=28;y=2;if(gameMode==GAMEMODE_GUOJI) y=24;if(suit>-1){i=suit; il=suit+6;}while(++i<il){if(i % 10>7) continue;mzc=mzcb; j=0;if(kezi[i]>0 || pb[i]>2) j+=0x13;else {if(--mzc<0 || pb[i]<2 || pb[i]+vZpt[i]<3) continue;j+=0x10+pb[i];}if(kezi[i+1]>0 || pb[i+1]>2) j+=0x13;else {if(--mzc<0 || pb[i+1]<2 || pb[i+1]+vZpt[i+1]<3) continue;j+=0x10+pb[i+1];}if(kezi[i+2]>0 || pb[i+2]>2) j+=0x13;else {if(--mzc<0 || pb[i+2]<2 || pb[i+2]+vZpt[i+2]<3) continue;j+=0x10+pb[i+2];}if(vMax>j) continue;if(vMax<j){ vMax=j; ptc=0; }ptn0[ptc]=i;ptn1[ptc]=i+1;ptn2[ptc]=i+2;yh[ptc++]=y;}}if(suit<0 && (gameMode!=GAMEMODE_BOO || rule.boo_sanshoku) && (gameMode!=GAMEMODE_ARSHIAR || rule.arshiar_sanshoku) && (players!=3 || gameMode==GAMEMODE_PENGLI)){y=2; if(gameMode==GAMEMODE_GUOJI) y=16;i=0; il=10;if(num>1){ i=num-1; il=num+1; }while(++i<il){mzc=mzcb; j=0; k=0;if(kezi[i  ]>0 || pb[i  ]>2) j+=0x13;else {if(--mzc<0 || pb[i   ]<2) j=-32768;else if(pb[i   ]+vZpt[i   ]<3) j=-32768;else {j+=0x10+pb[i   ];}}if(kezi[i+10]>0 || pb[i+10]>2) j+=0x13;else {if(--mzc<0 || pb[i+10]<2) j=-32768;else if(pb[i+10]+vZpt[i+10]<3) j=-32768;else {j+=0x10+pb[i+10];}}if(kezi[i+20]>0 || pb[i+20]>2) j+=0x13;else {if(--mzc<0 || pb[i+20]<2) j=-32768;else if(pb[i+20]+vZpt[i+20]<3) j=-32768;else {j+=0x10+pb[i+20];}}if(vMax<=j){if(vMax<j){ vMax=j; ptc=0; }ptn0[ptc]=i;ptn1[ptc]=i+10;ptn2[ptc]=i+20;yh[ptc++]=y;}if(gameMode!=GAMEMODE_GUOJI || i<2  || i>7 || num>1) continue;mzc=mzcb; j=k=0;if(kezi[i- 1]>0 || pb[i- 1]>2) j+=0x13;else {if(--mzc<0 || pb[i- 1]<2) j=-32768;else if(pb[i- 1]+vZpt[i- 1]<3) j=-32768;else {j+=0x10+pb[i- 1];}}mzc2=mzc; j1=j; k1=k;if(kezi[i+10]>0 || pb[i+10]>2) j+=0x13;else {if(--mzc<0 || pb[i+10]<2) j=-32768;else if(pb[i+10]+vZpt[i+10]<3) j=-32768;else {j+=0x10+pb[i+10];}}if(kezi[i+21]>0 || pb[i+21]>2) j+=0x13;else {if(--mzc<0 || pb[i+21]<2) j=-32768;else if(pb[i+21]+vZpt[i+21]<3) j=-32768;else {j+=0x10+pb[i+21];}}if(vMax<=j){if(vMax<j){ vMax=j; ptc=0; }ptn0[ptc]=i-1;ptn1[ptc]=i+10;ptn2[ptc]=i+21;yh[ptc++]=8;}mzc=mzc2; j=j1; k=k1;if(kezi[i+11]>0 || pb[i+11]>2) j+=0x13;else {if(--mzc<0 || pb[i+11]<2) j=-32768;else if(pb[i+11]+vZpt[i+11]<3) j=-32768;else {j+=0x10+pb[i+11];}}if(kezi[i+20]>0 || pb[i+20]>2) j+=0x13;else {if(--mzc<0 || pb[i+20]<2) j=-32768;else if(pb[i+20]+vZpt[i+20]<3) j=-32768;else {j+=0x10+pb[i+20];}}if(vMax<=j){if(vMax<j){ vMax=j; ptc=0; }ptn0[ptc]=i-1;ptn1[ptc]=i+11;ptn2[ptc]=i+20;yh[ptc++]=8;}mzc=mzcb; j=k=0;if(kezi[i+ 0]>0 || pb[i+ 0]>2) j+=0x13;else {if(--mzc<0 || pb[i+ 0]<2) j=-32768;else if(pb[i+ 0]+vZpt[i+ 0]<3) j=-32768;else {j+=0x10+pb[i+ 0];}}mzc2=mzc; j1=j; k1=k;if(kezi[i+10-1]>0 || pb[i+10-1]>2) j+=0x13;else {if(--mzc<0 || pb[i+10-1]<2) j=-32768;else if(pb[i+10-1]+vZpt[i+10-1]<3) j=-32768;else {j+=0x10+pb[i+10-1];}}if(kezi[i+21]>0 || pb[i+21]>2) j+=0x13;else {if(--mzc<0 || pb[i+21]<2) j=-32768;else if(pb[i+21]+vZpt[i+21]<3) j=-32768;else {j+=0x10+pb[i+21];}}if(vMax<=j){if(vMax<j){ vMax=j; ptc=0; }ptn0[ptc]=i;ptn1[ptc]=i+10-1;ptn2[ptc]=i+21;yh[ptc++]=8;}mzc=mzc2; j=j1; k=k1;if(kezi[i+11]>0 || pb[i+11]>2) j+=0x13;else {if(--mzc<0 || pb[i+11]<2) j=-32768;else if(pb[i+11]+vZpt[i+11]<3) j=-32768;else {j+=0x10+pb[i+11];}}if(kezi[i+20-1]>0 || pb[i+20-1]>2) j+=0x13;else {if(--mzc<0 || pb[i+20-1]<2) j=-32768;else if(pb[i+20-1]+vZpt[i+20-1]<3) j=-32768;else {j+=0x10+pb[i+20-1];}}if(vMax<=j){if(vMax<j){ vMax=j; ptc=0; }ptn0[ptc]=i;ptn1[ptc]=i+11;ptn2[ptc]=i+20-1;yh[ptc++]=8;}mzc=mzcb; j=k=0;if(kezi[i+ 1]>0 || pb[i+ 1]>2) j+=0x13;else {if(--mzc<0 || pb[i+ 1]<2) j=-32768;else if(pb[i+ 1]+vZpt[i+ 1]<3) j=-32768;else {j+=0x10+pb[i+ 1];}}mzc2=mzc; j1=j; k1=k;if(kezi[i+10-1]>0 || pb[i+10-1]>2) j+=0x13;else {if(--mzc<0 || pb[i+10-1]<2) j=-32768;else if(pb[i+10-1]+vZpt[i+10-1]<3) j=-32768;else {j+=0x10+pb[i+10-1];}}if(kezi[i+20]>0 || pb[i+20]>2) j+=0x13;else {if(--mzc<0 || pb[i+20]<2) j=-32768;else if(pb[i+20]+vZpt[i+20]<3) j=-32768;else {j+=0x10+pb[i+20];}}if(vMax<=j){if(vMax<j){ vMax=j; ptc=0; }ptn0[ptc]=i+ 1;ptn1[ptc]=i+10-1;ptn2[ptc]=i+20;yh[ptc++]=8;}mzc=mzc2; j=j1; k=k1;if(kezi[i+10]>0 || pb[i+10]>2) j+=0x13;else {if(--mzc<0 || pb[i+10]<2) j=-32768;else if(pb[i+10]+vZpt[i+10]<3) j=-32768;else {j+=0x10+pb[i+10];}}if(kezi[i+20-1]>0 || pb[i+20-1]>2) j+=0x13;else {if(--mzc<0 || pb[i+20-1]<2) j=-32768;else if(pb[i+20-1]+vZpt[i+20-1]<3) j=-32768;else {j+=0x10+pb[i+20-1];}}if(vMax<=j){if(vMax<j){ vMax=j; ptc=0; }ptn0[ptc]=i+ 1;ptn1[ptc]=i+10;ptn2[ptc]=i+20-1;yh[ptc++]=8;}}}if(ptc<1) return(0);i=40; while(--i>0) OOO[i]=vv[i]=0;yy=0;i=ptc; while(--i>-1){yy+=yh[i];k=yh[i] << 8; j=40; while(--j>=0) p[j]=pb[j];j=ptn0[i];if(kezi[j]<1 && p[j]<4){vv[j]+=k;if(p[j]==2) OOO[j]+=k;if(p[j]<3) rqq[j]+=k;}j=ptn1[i];if(kezi[j]<1 && p[j]<4){vv[j]+=k;if(p[j]==2) OOO[j]+=k;if(p[j]<3) rqq[j]+=k;}j=ptn2[i];if(kezi[j]<1 && p[j]<4){vv[j]+=k;if(p[j]==2) OOO[j]+=k;if(p[j]<3) rqq[j]+=k;}}i=30; while(--i>0){vYaku[i]+=Math.floor(vv[i] / ptc);required[jia][i]+=Math.floor(rqq[i] / ptc);vOOO[i]+=Math.floor(OOO[i] / ptc);}nrykfan[jia]+=Math.floor(yy / ptc);return(1);}function a0128(jia){var suit=[0, 0, 0, 0, 0], pb=new Array();var i, j, k, l, m, n, s, t;var OOO=new Array(11), XOO=new Array(11), OXO=new Array(11), OOX=new Array(11);k=-5; i=fc[jia]; while(--i>=0){k+=5; if((j=fl[jia][k] % 50)>34) j=40;j=Math.floor(j / 10);if(suit[j]) return(0);suit[j]++;}i=40; while(--i>=0) pb[i]=0;i=20; while(--i>=0){if((j=te[jia][i] % 50)<1 || j>37) continue;pb[j]++;}l=0; if(fs2c[jia]>5) l++;if(suit[4] ||    (pb[35]>1 && pb[35]+vZpt[35]>2) ||    (pb[36]>1 && pb[36]+vZpt[36]>2) ||    (pb[37]>1 && pb[37]+vZpt[37]>2)){if(suit[3] ||    (pb[31]>l && pb[31]+vZpt[31]>1) ||    (pb[32]>l && pb[32]+vZpt[32]>1) ||    (pb[33]>l && pb[33]+vZpt[33]>1) ||    (pb[34]>l && pb[34]+vZpt[34]>1)) ;else return(0);}else if(suit[3] ||    (pb[31]>1 && pb[31]+vZpt[31]>2) ||    (pb[32]>1 && pb[32]+vZpt[32]>2) ||    (pb[33]>1 && pb[33]+vZpt[33]>2) ||    (pb[34]>1 && pb[34]+vZpt[34]>2)){if(suit[4] ||    (pb[35]>l && pb[35]+vZpt[35]>1) ||    (pb[36]>l && pb[36]+vZpt[36]>1) ||    (pb[37]>l && pb[37]+vZpt[37]>1)) ;else return(0);}else return(0);n=0; s=-1; t=-10; while(++s<3){t+=10;if(suit[s]){n+=3; continue;}l=m=0; i=0; k=t; while(++i<10){++k; m+=pb[k];if(l>2) continue;if(pb[k]>2 || (i<8 && pb[k]>0 && pb[k+1]>0 && pb[k+2]>0)){l=3; continue;}if(l>1) continue;if((pb[k]>1 && pb[k]+vZpt[k]>2) ||    (i<9 && pb[k]>0 && pb[k+1]>0 && vZpt[k-1]+vZpt[k+2]>0) ||    (i<8 && pb[k]>0 && pb[k+2]>0 && vZpt[k+1]>0)){l=2; continue;}if(l) continue;if((pb[k]>0 && pb[k]+vZpt[k]>2) ||    (i<9 && pb[k]>0 && vZpt[k-1]+vZpt[k+1]>0) ||    (i<8 && pb[k]>0 && vZpt[k+1]+vZpt[k+2]>0) ||    (i<2 && pb[k]>0 && vZpt[k-1]+vZpt[k-2]>0)) l=1;}n+=l;}if(n<5) return(0);if(!suit[4]){i=34; while(++i<38){if(pb[i]>2){if(pb[i]==3) vYaku[i]+=0x0800;break;}}if(i>37){i=34; m=0; while(++i<38){if(pb[i]==2) m++;}if(m>0){i=34; j=-1; k=-1; while(++i<38){if(pb[i]!=2 || vZpt[i]<1) continue;if(vZpt[i]>j){j=vZpt[i]; k=i;}}if(j>0){vOOO[j]+=0x0800;vYaku[j]+=0x0800;}else {i=34; while(++i<38){if(pb[i]!=2) continue;vOOO[i]+=0x0800;if(m<2) vYaku[i]+=0x0800;}}}else {i=34; while(++i<38){if(pb[i]>0 && vZpt[i]>0){vYaku[i]+=0x0600;required[jia][i]+=0x0600;}}}}}if(!suit[3]){i=30; while(++i<35){if(pb[i]>2){if(pb[i]==3) vYaku[i]+=0x0700;break;}}if(i>34){i=30; m=0; while(++i<35){if(pb[i]==2) m++;}if(m>0){i=30; j=-1; k=-1; while(++i<35){if(pb[i]!=2 || vZpt[i]<1) continue;if(vZpt[i]>j){j=vZpt[i]; k=i;}}if(j>0){vOOO[j]+=0x0700;vYaku[j]+=0x0700;}else {i=30; while(++i<35){if(pb[i]!=2) continue;vOOO[i]+=0x0700;if(m<2) vYaku[i]+=0x0700;}}}}}s=-1; t=-10; while(++s<3){t+=10; if(suit[s]>0) continue;k=t; i=0; while(++i<10){++k; if(pb[k]>2) break;if(i<8 && pb[k]>0 && pb[k+1]>0 && pb[k+2]>0) break;}if(i<10){if(pb[t+1]+pb[t+2]+pb[t+3]+pb[t+4]+pb[t+5]+pb[t+6]+pb[t+7]+pb[t+8]+pb[t+9]<4){vYaku[k]+=0x0600;if(pb[k]<3){vYaku[k+1]+=0x0600;vYaku[k+2]+=0x0600;}}continue;}k=t; i=0; l=0; m=0; n=0; while(++i<10){++k; if(pb[k]>1 && vZpt[k]>0){ l=0; m++; n=k; }else if(pb[k]>0 && pb[k+1]>0){if((i<8 && vZpt[k+2]>0) || (i<8 && vZpt[k-1]>0)){ l=1; m++; n=k; }}else if(i<8 && pb[k]>0 && pb[k+2]>0 && vZpt[k+1]>0){ l=2; m++; n=k; }}if(m==1 && pb[t+1]+pb[t+2]+pb[t+3]+pb[t+4]+pb[t+5]+pb[t+6]+pb[t+7]+pb[t+8]+pb[t+9]<3){if(l<1) vYaku[n]+=0x0600;else if(l<2){vYaku[n]+=0x0600; vYaku[n+1]+=0x0600;}else {vYaku[n]+=0x0600; vYaku[n+2]+=0x0600;}}else if(pb[t+1]+pb[t+2]+pb[t+3]+pb[t+4]+pb[t+5]+pb[t+6]+pb[t+7]+pb[t+8]+pb[t+9]<3){vYaku[t+1]+=0x0600;vYaku[t+2]+=0x0600;vYaku[t+3]+=0x0600;vYaku[t+4]+=0x0600;vYaku[t+5]+=0x0600;vYaku[t+6]+=0x0600;vYaku[t+7]+=0x0600;vYaku[t+8]+=0x0600;vYaku[t+9]+=0x0600;}i=11; while(--i>-1) XOO[i]=OXO[i]=OOX[i]=OOO[i]=0;k=t; i=0; while(++i<10){k++;if(pb[k]==2 && vZpt[k]){j=6; if(!(i-1) & 7) ++j;OOO[i]+=j;}if(i<9 && pb[k]>0 && pb[k+1]>0){XOO[i-1]++; OOX[i+2]++;}if(i<8 && pb[k]>0 && pb[k+2]>0){OXO[i+1]++;}}k=t; i=0; while(++i<10){++k;if(OOO[i]) vOOO[k]+=0x0600;if(XOO[i]) vXOO[k]+=0x0600;if(OXO[i]) vOXO[k]+=0x0600;if(OOX[i]) vOOX[k]+=0x0600;}}nrykfan[jia]+=6;return(6);}function a0127(jia){var lo=hi=ct=c5=0;var mn, ddp, ldp, qdp, ddd=new Array(), ldd=new Array(), qdd=new Array();var pb=new Array();var i, j, k, s;try{k=-5; i=fc[jia]; while(--i>=0){k+=5; if((j=fl[jia][k] % 50)>30) return(0);if(j!=fl[jia][k+1] % 50){j=Math.floor((j+(fl[jia][k+1] % 50)+(fl[jia][k+2] % 50)) / 3) % 10;if(j==2 || j==3) lo++;else if(j==8 || j==7) hi++;else {c5++;if(j==5) ct++;}continue;}if((j %= 10)<5) lo++;else if(j>5) hi++;if(j>3 && j<7){ct++;if(j==5) c5++;}}SHUPAI_MOVE(jia);if(ct==fc[jia]){i=30; while(--i>=0) pb[i]=pai_tbl[i];mn=ct; ddp=ldp=ldp2=qdp=0;s=-10; while((s+=10)<30){while(pb[s+4]>0 && pb[s+5]>0 && pb[s+6]>0){pb[s+4]--; pb[s+5]--; pb[s+6]--; mn++;}if(pb[s+4]>0 && pb[s+6]>0 && vZpt[s+5]>0){pb[s+4]--; pb[s+6]--; qdd[qdp++]=s+4;}if(pb[s+4]>0 && pb[s+5]>0 && vZpt[s+6]>0){pb[s+4]--; pb[s+5]--; ldd[ldp++]=s+4;}if(pb[s+5]>0 && pb[s+6]>0 && vZpt[s+4]>0){pb[s+4]--; pb[s+5]--; ldd[ldp++]=s+5;}if(pb[s+4]>2) mn++;else if(pb[s+4]>1) ddd[ddp++]=s+4;if(pb[s+5]>2) mn++;else if(pb[s+5]>1) ddd[ddp++]=s+5;if(pb[s+6]>2) mn++;else if(pb[s+6]>1) ddd[ddp++]=s+6;}if(mn+ddp+ldp+qdp>4){s=-10; while((s+=10)<30){vYaku[s+1]+=0x1800;vYaku[s+2]+=0x1800;vYaku[s+3]+=0x1800;}while(--ddp>-1){j=ddd[ddp];required[jia][j]+=0x1800;vOOO[j]+=0x1800;}while(--ldp>-1){j=ldd[ldp];if(j % 10==4){required[jia][j+2]+=0x1800;vOOX[j+2]+=0x1800;continue;}required[jia][j-1]+=0x1800;vXOO[j-1]+=0x1800;}while(--qdp>-1){j=qdd[qdp];required[jia][j+1]+=0x1800;vOXO[j+1]+=0x1800;}nrykfan[jia]+=24;return(24);}}var m2, l2p, q2p, ld2=new Array(), p2=new Array();if(hi==fc[jia]){i=30; while(--i>=0) pb[i]=pai_tbl[i];mn=m2=c5; ddp=ldp=qdp=d2p=l2p=q2p=0;s=-10; while((s+=10)<30){while(pb[s+3]>0 && pb[s+4]>0 && pb[s+5]>0){pb[s+3]--; pb[s+4]--; pb[s+5]--; mn++;}while(pb[s+4]>0 && pb[s+5]>0 && pb[s+6]>0){pb[s+4]--; pb[s+5]--; pb[s+6]--; mn++;}while(pb[s+5]>0 && pb[s+6]>0 && pb[s+7]>0){pb[s+5]--; pb[s+6]--; pb[s+7]--; mn++;}if(pb[s+4]>0 && pb[s+5]>0 && vZpt[s+3]+vZpt[s+6]>0){pb[s+4]--; pb[s+5]--; ldd[ldp++]=s+4;}if(pb[s+5]>0 && pb[s+6]>0 && vZpt[s+4]+vZpt[s+7]>0){pb[s+5]--; pb[s+6]--; ldd[ldp++]=s+5;}if(pb[s+3]>0 && pb[s+5]>0 && vZpt[s+4]>0){pb[s+3]--; pb[s+5]--; qdd[qdp++]=s+3;}if(pb[s+4]>0 && pb[s+6]>0 && vZpt[s+5]>0){pb[s+4]--; pb[s+6]--; qdd[qdp++]=s+4;}if(pb[s+5]>0 && pb[s+7]>0 && vZpt[s+6]>0){pb[s+5]--; pb[s+7]--; qdd[qdp++]=s+5;}if(pb[s+3]>0 && pb[s+4]>0 && vZpt[s+5]>0){pb[s+3]--; pb[s+4]--; ldd[ldp++]=s+3;}if(pb[s+6]>0 && pb[s+7]>0 && vZpt[s+5]>0){pb[s+6]--; pb[s+7]--; ldd[ldp++]=s+6;}if(pb[s+5]>2) mn++;while(p2[s+7]>0 && p2[s+6]>0 && p2[s+5]>0){p2[s+7]--; p2[s+6]--; p2[s+5]--; m2++;}while(p2[s+6]>0 && p2[s+5]>0 && p2[s+4]>0){p2[s+6]--; p2[s+5]--; p2[s+4]--; m2++;}while(p2[s+5]>0 && p2[s+4]>0 && p2[s+3]>0){p2[s+5]--; p2[s+4]--; p2[s+3]--; m2++;}if(p2[s+6]>0 && p2[s+5]>0 && vZpt[s+4]+vZpt[s+7]>0){p2[s+6]--; p2[s+5]--; ld2[l2p++]=s+5;}if(p2[s+5]>0 && p2[s+4]>0 && vZpt[s+3]+vZpt[s+6]>0){p2[s+5]--; p2[s+4]--; ld2[l2p++]=s+4;}if(p2[s+7]>0 && p2[s+5]>0 && vZpt[s+6]>0){p2[s+7]--; p2[s+5]--; qd2[q2p++]=s+5;}if(p2[s+4]>0 && p2[s+6]>0 && vZpt[s+5]>0){p2[s+4]--; p2[s+6]--; qd2[q2p++]=s+4;}if(p2[s+5]>0 && p2[s+3]>0 && vZpt[s+4]>0){p2[s+5]--; p2[s+3]--; qd2[q2p++]=s+3;}if(p2[s+7]>0 && p2[s+6]>0 && vZpt[s+5]>0){p2[s+7]--; p2[s+6]--; ld2[l2p++]=s+6;}if(p2[s+4]>0 && p2[s+3]>0 && vZpt[s+5]>0){p2[s+4]--; p2[s+3]--; ld2[l2p++]=s+3;}if(p2[s+5]>2) m2++;}if((i=mn+ldp+qdp)<4){i=mn=ddp=qdp=0;pb[3]=pb[13]=pb[23]=pb[7]=pb[17]=pb[27]=255;pb[4]=pb[14]=pb[24]=pb[6]=pb[16]=pb[26]=255;}if((j=m2+l2p+q2p)<4){j=m2=d2p=q2p=0;p2[3]=p2[13]=p2[23]=p2[7]=p2[17]=p2[27]=255;p2[4]=p2[14]=p2[24]=p2[6]=p2[16]=p2[26]=255;}if(i>4 || j>4){s=-10; while((s+=10)<30){if(pb[s+3]<1 || p2[s+3]<1) vYaku[s+3]+=0x1000;if(pb[s+4]<1 || p2[s+4]<1) vYaku[s+4]+=0x1000;vYaku[s+5]+=0x1000;if(pb[s+6]<1 || p2[s+6]<1) vYaku[s+6]+=0x1000;if(pb[s+7]<1 || p2[s+7]<1) vYaku[s+7]+=0x1000;}i=ldp; while(--i>-1){j=ldd[i];if(j % 10>3){required[jia][j-1]+=0x1000;vXOO[j-1]+=0x1000;}if(j % 10<6){required[jia][j+2]+=0x1000;vOOX[j+2]+=0x1000;}}i=l2p; while(--i>-1){j=ld2[i];if(j % 10>3){required[jia][j-1]+=0x1000;vXOO[j-1]+=0x1000;}if(j % 10<6){required[jia][j+2]+=0x1000;vOOX[j+2]+=0x1000;}}i=qdp; while(--i>-1){j=qdd[i];required[jia][j+1]+=0x1000;vOXO[j+1]+=0x1000;}i=q2p; while(--i>-1){j=qd2[i];required[jia][j+1]+=0x1000;vOXO[j+1]+=0x1000;}nrykfan[jia]+=16;return(16);}}if(lo==fc[jia]){i=30; while(--i>=0) pb[i]=pai_tbl[i];mn=lo; ddp=ldp=qdp=0;s=-10; while((s+=10)<30){while(pb[s+1]>0 && pb[s+2]>0 && pb[s+3]>0){pb[s+1]--; pb[s+2]--; pb[s+3]--; mn++;}if(pb[s+1]>0 && pb[s+2]>0 && vZpt[s+3]>0){pb[s+1]--; pb[s+2]--; ldd[ldp++]=s+1;}if(pb[s+1]>0 && pb[s+3]>0 && vZpt[s+2]>0){pb[s+1]--; pb[s+3]--; qdd[qdp++]=s+1;}if(pb[s+1]>2) mn++;else if(pb[s+1]>1) ddd[ddp++]=s+1;while(pb[s+2]>0 && pb[s+3]>0 && pb[s+4]>0){pb[s+2]--; pb[s+3]--; pb[s+4]--; mn++;}if(pb[s+2]>0 && pb[s+3]>0 && vZpt[s+1]+vZpt[s+4]>0){pb[s+2]--; pb[s+3]--; ldd[ldp++]=s+2;}if(pb[s+2]>0 && pb[s+4]>0 && vZpt[s+3]>0){pb[s+2]--; pb[s+4]--; qdd[qdp++]=s+2;}if(pb[s+3]>0 && pb[s+4]>0 && vZpt[s+2]>0){pb[s+2]--; pb[s+3]--; ldd[ldp++]=s+3;}if(pb[s+2]>2) mn++;else if(pb[s+2]>1) ddd[ddp++]=s+2;if(pb[s+3]>2) mn++;else if(pb[s+3]>1) ddd[ddp++]=s+3;if(pb[s+4]>2) mn++;else if(pb[s+4]>1) ddd[ddp++]=s+4;}if(mn+ddp+ldp+qdp>4){s=-10; while((s+=10)<30){vYaku[s+1]+=0x0c00;vYaku[s+2]+=0x0c00;vYaku[s+3]+=0x0c00;vYaku[s+4]+=0x0c00;}while(--ddp>-1){j=ddd[ddp];required[jia][j]+=0x0c00;vOOO[j]+=0x0c00;}while(--ldp>-1){j=ldd[ldp];required[jia][j-1]+=0x0c00;vXOO[j-1]+=0x0c00;if(j % 10==3) continue;required[jia][j+2]+=0x0c00;vOOX[j+2]+=0x0c00;}while(--qdp>-1){j=qdd[qdp];required[jia][j+1]+=0x0c00;vOXO[j+1]+=0x0c00;}nrykfan[jia]+=12;return(12);}}if(hi==fc[jia]){i=30; while(--i>=0) pb[i]=pai_tbl[i];mn=hi; ddp=ldp=qdp=0;s=-10; while((s+=10)<30){while(pb[s+9]>0 && pb[s+8]>0 && pb[s+7]>0){pb[s+9]--; pb[s+8]--; pb[s+7]--; mn++;}if(pb[s+9]>0 && pb[s+8]>0 && vZpt[s+7]>0){pb[s+9]--; pb[s+8]--; ldd[ldp++]=s+8;}if(pb[s+9]>0 && pb[s+7]>0 && vZpt[s+8]>0){pb[s+9]--; pb[s+7]--; qdd[qdp++]=s+7;}if(pb[s+9]>2) mn++;else if(pb[s+9]>1) ddd[ddp++]=s+9;while(pb[s+8]>0 && pb[s+7]>0 && pb[s+6]>0){pb[s+8]--; pb[s+7]--; pb[s+6]--; mn++;}if(pb[s+8]>0 && pb[s+7]>0 && vZpt[s+9]+vZpt[s+6]>0){pb[s+8]--; pb[s+7]--; ldd[ldp++]=s+7;}if(pb[s+8]>0 && pb[s+6]>0 && vZpt[s+7]>0){pb[s+8]--; pb[s+6]--; qdd[qdp1++]=s+6;}if(pb[s+7]>0 && pb[s+6]>0 && vZpt[s+8]>0){pb[s+8]--; pb[s+7]--; ldd[ldp++]=s+6;}if(pb[s+8]>2) mn++;else if(pb[s+8]>1) ddd[ddp++]=s+8;if(pb[s+7]>2) mn++;else if(pb[s+7]>1) ddd[ddp++]=s+7;if(pb[s+6]>2) mn++;else if(pb[s+6]>1) ddd[ddp++]=s+6;}if(mn+ddp+ldp+qdp>4){s=-10; while((s+=10)<30){vYaku[s+9]+=0x0c00;vYaku[s+8]+=0x0c00;vYaku[s+7]+=0x0c00;vYaku[s+6]+=0x0c00;}while(--ddp>-1){j=ddd[ddp];required[jia][j]+=12;vOOO[j]+=12;}while(--ldp>-1){j=ldd[ldp];required[jia][j+2]+=12;vOOX[j+2]+=12;if(j % 10==6) continue;required[jia][j-1]+=12;vXOO[j-1]+=12;}while(--qdp>-1){j=qdd[qdp];required[jia][j+1]+=12;vOXO[j+1]+=12;}nrykfan[jia]+=12;return(12);}}}catch(e){  i=i; }return(0);}function a0135(jia){try {var v=new Array(40);var p1=new Array(40);var p2=new Array(40);var i, j, k, y;var sn=new Array(40);var ke=new Array(40);var snf=0;if(!mq[jia]) return;SHUPAI_MOVE(jia);i=40; while(--i>-1) sn[i]=ke[i]=vXOO[i]=vOXO[i]=vOOX[i]=vOOO[i]=vOOOO[i]=0;k=-5; y=0; i=fc[jia]; while(--i>-1){k+=5; if(fl[jia][k+4]) break;if(fl[jia][k+3]) y++;if((j=fl[jia][k] % 50)==fl[jia][k+1] % 50){if(j>34) y+=2;else if(j>30){if(j==zhuangfeng[0] || j==menfeng[jia]) y+=2;else y++;}else {if(j % 10==1 || j % 10==9) y++;ke[j]++;}continue;}j=Math.floor((j+fl[jia][k+1] % 50+fl[jia][k+2] % 50) / 3)-1;sn[j]++; snf++;}if(fc[jia]>0 && i<0){if(snf==fc[jia]){i=0; while(++i<28){if(i % 10<8){if(pai_tbl[i]>0 && pai_tbl[i+1]>0 && vZpt[i+2]) vOOX[i+2]+=0x0600;}if(i % 10>1){if(pai_tbl[i]>0 && pai_tbl[i+1]>0 && vZpt[i-1]) vXOO[i-1]+=0x0600;}if(i % 10<8 && i % 10>0){if(pai_tbl[i]>0 && pai_tbl[i+2]>0 && vZpt[i+1]) vOXO[i+1]+=0x0600;}}}i=38; while(--i>30){if(ke[i]) break;}if(i<31 && ke[1]+ke[9]+ke[11]+ke[19]+ke[21]+ke[29]<1 &&    sn[1]+sn[7]+sn[11]+sn[17]+sn[21]+sn[27]<1){i=0; while(++i<28){if(i % 10>1 && i % 10<9){if(pai_tbl[i]>2 && vZpt[i+2]) vOOOO[i]+=0x0600;else if(pai_tbl[i]>1 && vZpt[i+2]) vOOO[i]+=0x0600;}if(i % 10==2){if(pai_tbl[i]>0 && pai_tbl[i+1]>0 && vZpt[i+2]) vOOX[i+2]+=0x0600;if(pai_tbl[i]>0 && pai_tbl[i+2]>0 && vZpt[i+1]) vOXO[i+1]+=0x0600;continue;}if(i % 10==7){if(pai_tbl[i]>0 && pai_tbl[i+1]>0 && vZpt[i-1]) vXOO[i-1]+=0x0600;if(pai_tbl[i]>0 && pai_tbl[i+2]>0 && vZpt[i+1]) vOXO[i+1]+=0x0600;continue;}if(i % 10<3 || i % 10>6) continue;if(pai_tbl[i]>0 && pai_tbl[i+1]>0 && vZpt[i+2]) vOOX[i+2]+=0x0600;if(pai_tbl[i]>0 && pai_tbl[i+1]>0 && vZpt[i-1]) vXOO[i-1]+=0x0600;}}i=10; while(--i>0){if((ke[i] && (ke[i+10] || ke[i+20])) ||    (ke[i+10] && ke[i+20])) y+=2;}i=0; while(++i<38){if(sn[i]>2) y+=24;else if(sn[i]>1) y++;}if(sn[1] && sn[7]) y++;if(sn[11] && sn[17]) y++;if(sn[21] && sn[27]) y++;i=0; while(++i<5){if(sn[i] && sn[i+3]) y++;if(sn[i+10] && sn[i+13]) y++;if(sn[i+20] && sn[i+23]) y++;}i=0; while(++i<7){if((sn[i] && (sn[i+10] || sn[i+20])) ||    (sn[i+10] && sn[i+20])) y++;}if(y>1 && fc[jia]<4){i=40; while(--i>-1){required[jia][i]=0;vXOO[i]=vOXO[i]=vOOX[i]=vOOO[i]=vOOOO[i]=0;}i=0; while(++i<28){if(i % 10<8){if(pai_tbl[i]>0 && pai_tbl[i+1]>0 && vZpt[i+2]) vOOX[i+2]+=0x0600;}if(i % 10>1){if(pai_tbl[i]>0 && pai_tbl[i+1]>0 && vZpt[i-1]) vXOO[i-1]+=0x0600;}if(i % 10<8 && i % 10>0){if(pai_tbl[i]>0 && pai_tbl[i+2]>0 && vZpt[i+1]) vOXO[i+1]+=0x0600;}}i=0; while(++i<38){if(pai_tbl[i]>2 && vZpt[i]) vOOOO[i]+=0x0600;else if(pai_tbl[i]>1 && vZpt[i]) vOOO[i]+=0x0600;}return;}}if(fc[jia]>3) return;i=40; while(--i>-1){v[i]=0;p1[i]=p2[i]=pai_tbl[i];}i=0; while(++i<28){j=Math.min(p1[i], Math.min(p1[i+1], p1[i+2]));p1[i]-=j;p1[i+1]-=j;p1[i+2]-=j;}i=0; while(++i<28){if(i % 10>1 && i % 10<8 && p1[i]>0 && p1[i+1]>0){v[i-1]++; v[i+2]++;}else if(i % 10<8 && p1[i]>0 && p1[i+2]>0){v[i+1]+=4;}else if(p1[i]>0){v[i]+=2;}}i=0; while(++i<38){if(p1[i]==2){v[i]++;}}i=30; while(--i>2){j=Math.min(p2[i], Math.min(p2[i-1], p2[i-2]));p2[i]-=j;p2[i-1]-=j;p2[i-2]-=j;}i=30; while(--i>1){if(i % 10>2 && i % 10<9 && p2[i]>0 && p2[i-1]>0){v[i-2]++; v[i+1]++;}else if(i % 10>2 && p2[i]>0 && p2[i-2]>0){v[i-1]+=4;}else if(p1[i]>0){v[i]+=2;}}i=0; while(++i<38){if(p2[i]==2){v[i]++;}}i=40; while(--i>-1){required[jia][i]=v[i];vXOO[i]=vOXO[i]=vOOX[i]=vOOO[i]=vOOOO[i]=0;}i=dc[jia]; while(--i>-1){j=dp[jia][i] % 50;if(j<38) required[jia][j]=0;}} catch(e){consol.log(e);}return;}function a0137(jia){var i;i=menfeng[jia]; while(--i>30){if(i==zhuangfeng[0]) continue;if(pai_tbl[i]>0) return(i);}i=34; while(--i>menfeng[jia]){if(i==zhuangfeng[0]) continue;if(pai_tbl[i]>0) return(i);}i=38; while(--i>30){if(pai_tbl[i]>0) return(i);}i=-1; while(++i<5){if(pai_tbl[25+i]>0) return(25+i);if(pai_tbl[25-i]>0) return(25-i);if(pai_tbl[15+i]>0) return(15+i);if(pai_tbl[15-i]>0) return(15-i);if(pai_tbl[ 5+i]>0) return( 5+i);if(pai_tbl[ 5-i]>0) return( 5-i);}return(0);}
