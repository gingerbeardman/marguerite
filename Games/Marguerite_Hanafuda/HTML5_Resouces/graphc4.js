_f_x=_f_y=0;function _f_tefuda_coords(seki, pos){var i;if(seki==0){_f_y=950-_f_fudaHeight; _f_x=215;if(_f_players==2) _f_x=155;_f_x+=pos*_f_fudaWidth;_f_x-=_f_fudaWidth >> 1;_f_y-=_f_fudaHeight;return;}if(seki==1 && _f_players==2){_f_y=40; _f_x=1045-pos*_f_fudaWidth;_f_x-=_f_fudaWidth >> 1;_f_y-=_f_fudaHeight >> 1;return;}if(seki==1 && _f_players==3){_f_y=605-(pos+1)*_f_fudaWidth; _f_x=1180;_f_x-=_f_fudaHeight >> 1;return;}_f_y=35+(pos-1)*_f_fudaWidth; _f_x=20;_f_x-=_f_fudaHeight >> 1;}function _f_bafuda_coords(n){if(_f_gamemode==_F_GAMEMODE_MUSHI || (_f_gamemode==_F_GAMEMODE_600KEN && _f_players==2) || (_f_gamemode==_F_GAMEMODE_KOIKOI && _f_rule_sel['KK_bafuda'])){_f_x=_f_ba_xm[n]; _f_y=_f_ba_ym[n];}else if(_f_players==2){_f_x=_f_ba_x2[n]; _f_y=_f_ba_y2[n];if(_f_gamemode==_F_GAMEMODE_88){ _f_x-=40; }}else { _f_x=_f_ba_x3[n]; _f_y=_f_ba_y3[n]; }_f_x-=_f_fudaWidth >> 1;_f_y-=_f_fudaHeight >> 1;}function _f_awasefuda_coords(n){if(_f_gamemode==_F_GAMEMODE_MUSHI || (_f_gamemode==_F_GAMEMODE_600KEN && _f_players==2) || (_f_gamemode==_F_GAMEMODE_KOIKOI && _f_rule_sel['KK_bafuda'])){_f_x=_f_ba_xm[n]-20; _f_y=_f_ba_ym[n]-20;}else if(_f_players==2){_f_x=_f_ba_x2[n]-20; _f_y=_f_ba_y2[n]-20;if(_f_gamemode==_F_GAMEMODE_88){ _f_x-=40; }}else { _f_x=_f_ba_x3[n]+8; _f_y=_f_ba_y3[n]+20; }_f_x-=_f_fudaWidth >> 1;_f_y-=_f_fudaHeight >> 1;}function _f_yamafuda_coords(){var i;_f_y=380; _f_x=785;if(_f_players==2){_f_y=390; _f_x=900-33;if(_f_gamemode==_F_GAMEMODE_88) _f_x-=16;}if(_f_gamemode==_F_GAMEMODE_KYOKABU || _f_gamemode==_F_GAMEMODE_OICHOKABU){ _f_x=960; _f_y=360; }_f_x-=_f_fudaWidth >> 1;_f_y-=1.5*_f_yamafuda_remain+_f_fudaHeight;}function _f_torifuda_coords(seki, point){var i, j;if(seki==0 && _f_players==3){if(_f_gamemode==_F_GAMEMODE_SUDAOSHI){if(point==10){i=-1; j=_f[0].torifuda10_ctr;_f_x=415; _f_y=610;while(++i<j){_f_y-=35;if((i % 5)==4 && i<20){ _f_y=610; _f_x+=70; }}_f_x-=_f_fudaWidth >> 1;_f_y-=_f_fudaHeight >> 1;return;}if(point==5){_f_x=705; _f_y=610; j=_f[0].torifuda05_ctr; i=-1;while(++i<j){_f_y-=35;if(i==4){ _f_y=610; _f_x+=70; }}_f_x-=_f_fudaWidth >> 1;_f_y-=_f_fudaHeight >> 1;return;}_f_x=850+35; _f_y=735; j=_f[0].torifuda01_ctr; i=-1;while(++i<j){_f_y-=25;if(i==4){ _f_y=735; _f_x+=70; }}_f_x-=_f_fudaWidth >> 1;_f_y-=_f_fudaHeight >> 1;return;}if(point==20){_f_x=380+35;_f_y=610-35*_f[0].torifuda20_ctr;_f_x-=_f_fudaWidth >> 1;_f_y-=_f_fudaHeight >> 1;return;}if(point==10){_f_x=455+35; _f_y=610; j=_f[0].torifuda10_ctr; i=-1;while(++i<j){_f_y-=35;if(i==4){ _f_y=610; _f_x+=70; }}_f_x-=_f_fudaWidth >> 1;_f_y-=_f_fudaHeight >> 1;return;}if(point==5){_f_x=630+35; _f_y=610; j=_f[0].torifuda05_ctr; i=-1;while(++i<j){_f_y-=35;if(i==4){ _f_y=610; _f_x+=70; }}_f_x-=_f_fudaWidth >> 1;_f_y-=_f_fudaHeight >> 1;return;}_f_x=785+35; _f_y=735; j=_f[0].torifuda01_ctr; i=-1;while(++i<j){_f_y-=25;if(i==4 || i==9 || i==14 || j==19){ _f_y=735; _f_x+=70; }}_f_x-=_f_fudaWidth >> 1;_f_y-=_f_fudaHeight >> 1;return;}if(seki==0 && _f_players==2){if(point==20){_f_x=155+30*_f[0].torifuda20_ctr; _f_y=610;_f_x-=_f_fudaWidth >> 1;_f_y-=_f_fudaHeight >> 1;return;}if(point==10){_f_x=395+30*_f[0].torifuda10_ctr; _f_y=610;_f_x-=_f_fudaWidth >> 1;_f_y-=_f_fudaHeight >> 1;return;}if(point==5){_f_x=745+30*_f[0].torifuda05_ctr; _f_y=610;_f_x-=_f_fudaWidth >> 1;_f_y-=_f_fudaHeight >> 1;return;}_f_x=745; _f_y=740; j=_f[0].torifuda01_ctr; i=-1;while(++i<j){_f_x+=30;if(i==9 || j==19){ _f_y-=20; _f_x=745; }}_f_x-=_f_fudaWidth >> 1;_f_y-=_f_fudaHeight >> 1;return;}if(seki==1 && _f_players==2){if(point==20){_f_x=1045-30*_f[1].torifuda20_ctr; _f_y=180;_f_x-=_f_fudaWidth >> 1;_f_y-=_f_fudaHeight >> 1;return;}if(point==10){_f_x=1045-240-30*_f[1].torifuda10_ctr; _f_y=180;_f_x-=_f_fudaWidth >> 1;_f_y-=_f_fudaHeight >> 1;return;}if(point==5){_f_x=1045-240-350-30*_f[1].torifuda05_ctr; _f_y=180
_f_x-=_f_fudaWidth >> 1;_f_y-=_f_fudaHeight >> 1;return;}_f_x=1045-240-350; _f_y=60; j=_f[1].torifuda01_ctr; i=-1;while(++i<j){_f_x-=30;if(i==9 || j==19){ _f_y+=20; _f_x=1045-240-350; }}_f_x-=_f_fudaWidth >> 1;_f_y-=_f_fudaHeight >> 1;return;}if(seki==2 && _f_players==3){if(_f_gamemode==_F_GAMEMODE_SUDAOSHI){if(point==1){_f_x=60+25*_f[2].torifuda01_ctr; _f_y=525;_f_x-=_f_fudaHeight >> 1;_f_y-=_f_fudaWidth >> 1;return;}if(point==5){_f_x=150; _f_y=375; j=_f[2].torifuda05_ctr; i=-1;while(++i<j){_f_x+=40;if(i==4){ _f_y+=70; _f_x=150; }}_f_x-=_f_fudaHeight >> 1;_f_y-=_f_fudaWidth >> 1;return;}_f_x=150; _f_y=155; j=_f[2].torifuda10_ctr; i=-1;if(j>15) _f_y-=70;while(++i<j){_f_x+=40;if((i % 5)==4 && i<20){ _f_y+=70; _f_x=150; }}_f_x-=_f_fudaHeight >> 1;_f_y-=_f_fudaWidth >> 1;return;}if(point!=5 && point!=10 && point!=20){_f_x=60; _f_y=525; j=_f[2].torifuda01_ctr; i=-1;while(++i<j){_f_x+=25;if(i==9){ _f_y+=70; _f_x=60; }}_f_x-=_f_fudaHeight >> 1;_f_y-=_f_fudaWidth >> 1;return;}if(point==5){_f_x=150; _f_y=380; j=_f[2].torifuda05_ctr; i=-1;while(++i<j){_f_x+=40;if(i==4){ _f_y+=70; _f_x=150; }}_f_x-=_f_fudaHeight >> 1;_f_y-=_f_fudaWidth >> 1;return;}if(point==10){_f_x=150; _f_y=235; j=_f[2].torifuda10_ctr; i=-1;while(++i<j){_f_x+=40;if(i==4){ _f_y+=70; _f_x=150; }}_f_x-=_f_fudaHeight >> 1;_f_y-=_f_fudaWidth >> 1;return;}_f_x=150+40*_f[2].torifuda20_ctr; _f_y=160;_f_x-=_f_fudaHeight >> 1;_f_y-=_f_fudaWidth >> 1;return;}if(_f_gamemode==_F_GAMEMODE_SUDAOSHI){if(point==1){_f_x=1140-25*_f[1].torifuda01_ctr; _f_y=35;_f_x-=_f_fudaHeight >> 1;_f_y-=_f_fudaWidth >> 1;return;}if(point==5){_f_x=1050; _f_y=185; j=_f[1].torifuda05_ctr; i=-1;while(++i<j){_f_x-=40;if(i==4){ _f_y-=70; _f_x=1050; }}_f_x-=_f_fudaHeight >> 1;_f_y-=_f_fudaWidth >> 1;return;}_f_x=1050; _f_y=475; j=_f[1].torifuda10_ctr; i=-1;while(++i<j){_f_x-=40;if((i % 5)==4 && i<20){ _f_y-=70; _f_x=1050; }}_f_x-=_f_fudaHeight >> 1;_f_y-=_f_fudaWidth >> 1;return;}if(point!=5 && point!=10 && point!=20){_f_x=1140; _f_y=105; j=_f[1].torifuda01_ctr; i=-1;while(++i<j){_f_x-=25;if(i==9){ _f_y-=70; _f_x=1140; }}_f_x-=_f_fudaHeight >> 1;_f_y-=_f_fudaWidth >> 1;return;}if(point==5){_f_x=1050; _f_y=250; j=_f[1].torifuda05_ctr; i=-1;while(++i<j){_f_x-=40;if(i==4){ _f_y-=70; _f_x=1050; }}_f_x-=_f_fudaHeight >> 1;_f_y-=_f_fudaWidth >> 1;return;}if(point==10){_f_x=1050; _f_y=400; j=_f[1].torifuda10_ctr; i=-1;while(++i<j){_f_x-=40;if(i==4){ _f_y-=70; _f_x=1050; }}_f_x-=_f_fudaHeight >> 1;_f_y-=_f_fudaWidth >> 1;return;}_f_x=1050-40*_f[1].torifuda20_ctr; _f_y=480;_f_x-=_f_fudaHeight >> 1;_f_y-=_f_fudaWidth >> 1;return;}function _f_oichokabu_makifuda_coords(seki){var pX=new Array(3), pY=new Array(3);if(_f_oya==1){pX[0]=898+270-(_f_fudaWidth >> 1); pY[0]=550-(_f_fudaHeight >> 1);pX[1]=48; pY[1]=0;pX[2]=48+(_f_fudaWidth >> 1); pY[2]=670-(_f_fudaHeight >> 1);}else if(_f_oya==2){pX[0]=48+(_f_fudaWidth >> 1); pY[0]=670-(_f_fudaHeight >> 1);pX[1]=898+270-(_f_fudaWidth >> 1); pY[1]=550-(_f_fudaHeight >> 1);pX[2]=48; pY[2]=0;}else if(_f_oya==0){pX[0]=48; pY[0]=600;pX[1]=898+270-(_f_fudaWidth >> 1); pY[1]=102+(_f_fudaHeight >> 1);pX[2]=48+(_f_fudaWidth >> 1); pY[2]=182+(_f_fudaHeight >> 1);}_f_x=pX[seki];_f_y=pY[seki];_f_x-=_f_fudaWidth >> 1;_f_y-=_f_fudaHeight >> 1;}function _f_oichokabu_bafuda1_coords(pos){var i, pX=new Array(4), pY=new Array(3);pX[0]=462; pX[1]=554; pX[2]=646; pX[3]=738;pX[0]=402; pX[1]=534; pX[2]=666; pX[3]=798;pY[0]=280; pY[1]=360; pY[2]=490;if(_f_oya==0){i=pX[0]; pX[0]=pX[3]; pX[3]=i;i=pX[1]; pX[1]=pX[2]; pX[2]=i;pY[0]=520; pY[1]=440; pY[2]=310;}_f_x=pX[pos & 3];_f_y=pY[pos>>2];_f_x-=_f_fudaWidth >> 1;_f_y-=_f_fudaHeight >> 1;}function _f_oichokabu_oyatefuda_coords(pos){var i, pX=new Array(3), pY;pX[0]=510; pX[1]=600; pX[2]=690;pY=90;if(_f_oya==0){i=pX[0]; pX[0]=pX[2]; pX[2]=i;pY=710;}_f_x=pX[pos];_f_y=pY;_f_x-=_f_fudaWidth >> 1;_f_y-=_f_fudaHeight >> 1;}_f_movie_ctr=0;function _f_from_tefuda_to_bafuda(seki, tpos, bpos, fcode){var i, o=_h5_sprite[0];_f_bafuda_coords(bpos);o.ex=_f_x-(_f_fudaWidth >> 1);o.ey=_f_y-(_f_fudaHeight >> 1);if(_f_bafuda[bpos]){if(_f_players==2){o.ex-=20; o.ey-=20;}else {o.ex+=8; o.ey+=20;}}_f_tefuda_coords(seki, tpos);o.dx=0; o.dy=-30;o.fcode=fcode & 0xff;o._x=_f_x; o._y=_f_y;if(seki==0){o.dy=-30;_f_h5_fuda_disp_2sprite(o.id, o.fcode, _f_fudaWidth, _f_fudaHeight, 0);}else if(seki==1 && _f_players==2){o.dy=30;_f_h5_fuda_disp_2sprite(o.id, o.fcode, _f_fudaWidth, _f_fudaHeight, 180);}else if(seki==1){o.dx=-30; o.dy=0;_f_h5_fuda_disp_2sprite(o.id, o.fcode, _f_fudaHeight, _f_fudaWidth, 270);}else {o.dx=30; o.dy=0;_f_h5_fuda_disp_2sprite(o.id, o.fcode, _f_fudaHeight, _f_fudaWidth, 90);}moveSprite(o.id, o._x, o._y);o.timeout=setTimeout('_f_from_tefuda_to_bafuda_sub1()', _f_h5_frameDulation);_f_movie_ctr=1;}function _f_from_tefuda_to_bafuda_sub1(){var dx, dy, o=_h5_sprite[0];clearTimeout(o.timeout);o._x+=o.dx; o._y+=o.dy; ++o.dy1;var d=Math.sqrt(Math.pow(o.ex-o._x, 2)+Math.pow(o.ey-o._y, 2)) / _f_speed;moveSprite(o.id, o._x, o._y);if(d!=0){dx=(o.ex-o._x)/d;dy=(o.ey-o._y)/d;}else {dx=0;dy=0;}if(o.dy1<4){o.timeout=setTimeout('_f_from_tefuda_to_bafuda_sub1()', _f_h5_frameDulation);return;}o.dx=dx; o.dy=dy;_f_h5_fuda_disp_2sprite(o.id, o.fcode, _f_fudaWidth, _f_fudaHeight, 0);o.timeout=setTimeout('_f_from_tefuda_to_bafuda_sub2(0)', _f_h5_frameDulation);}function _f_from_tefuda_to_bafuda_sub2(num){var o=_h5_sprite[num];clearTimeout(o.timeout);if(o.dx!=0 || o.dy!=0){var pd=Math.pow(o.ex-o._x, 2)+Math.pow(o.ey-o._y, 2);o._x+=o.dx; o._y+=o.dy;moveSprite(o.id, o._x, o._y);var nd=Math.pow(o.ex-o._x, 2)+Math.pow(o.ey-o._y, 2);if((o.dx>0 && o._x>=o.ex) ||    (o.dx<0 && o._x<=o.ex) ||    (o.dy>0 && o._y>=o.ey) ||    (o.dy<0 && o._y<=o.ey) ||    nd>=pd){hideSprite(o.id);_f_movie_ctr=0;return;}o.timeout=setTimeout('_f_from_tefuda_to_bafuda_sub2('+num+')', _f_h5_frameDulation);return;}hideSprite(o.id);_f_movie_ctr=0;return;}function _f_from_bafuda_to_torifuda(seki, tpoint, bpos, fcode, flag){var o=_h5_sprite[0];_f_torifuda_coords(seki, tpoint);o.ex=_f_x; o.ey=_f_y;_f_bafuda_coords(bpos);o._x=_f_x; o._y=_f_y;if(flag){if(_f_players==2){o._x-=20; o._y-=20;}else {o._x+=8; o._y+=20;}}var d=Math.sqrt(Math.pow(o.ex-o._x, 2)+Math.pow(o.ey-o._y, 2)) / _f_speed;moveSprite(o.id, o._x, o._y);if(d!=0){o.dx=(o.ex-o._x)/d;o.dy=(o.ey-o._y)/d;}else {o.dx=0;o.dy=0;}o.fcode=fcode;if(seki==0){_f_h5_fuda_disp_2sprite(o.id, o.fcode, _f_fudaWidth, _f_fudaHeight, 0);}else if(seki==1 && _f_players==2){_f_h5_fuda_disp_2sprite(o.id, o.fcode, _f_fudaWidth, _f_fudaHeight, 180);}else if(seki==1){_f_h5_fuda_disp_2sprite(o.id, o.fcode, _f_fudaHeight, _f_fudaWidth, 270);}else {_f_h5_fuda_disp_2sprite(o.id, o.fcode, _f_fudaHeight, _f_fudaWidth, 90);}moveSprite(o.id, o._x, o._y);_f_movie_ctr=1;o.timeout=setTimeout('_f_from_tefuda_to_bafuda_sub2(0)', _f_h5_frameDulation);}function _f_from_yamafuda_to_bafuda(bpos, fcode, flag){var o=_h5_sprite[0];_f_bafuda_coords(bpos);o.ex=_f_x; o.ey=_f_y;if(_f_bafuda[bpos]){if(_f_players==2){o.ex-=20; o.ey-=20;}else {o.ex+=8; o.ey+=20;}}_f_yamafuda_coords();o._x=_f_x; o._y=_f_y;var d=Math.sqrt(Math.pow(o.ex-o._x, 2)+Math.pow(o.ey-o._y, 2)) / _f_speed;if(d!=0){o.dx=(o.ex-o._x)/d;o.dy=(o.ey-o._y)/d;}else {o.dx=0;o.dy=0;}o.fcode=fcode & 0xff;_f_h5_fuda_disp_2sprite(o.id, o.fcode, _f_fudaWidth, _f_fudaHeight, 0);moveSprite(o.id, o._x, o._y);_f_movie_ctr=1;o.timeout=setTimeout('_f_from_tefuda_to_bafuda_sub2(0)', _f_h5_frameDulation);}function _f_from_yamafuda_to_bafuda(bpos, fcode, flag){var o=_h5_sprite[0];_f_bafuda_coords(bpos);o.ex=_f_x; o.ey=_f_y;if(_f_bafuda[bpos]){if(_f_players==2){o.ex-=20; o.ey-=20;}else {o.ex+=8; o.ey+=20;}}_f_yamafuda_coords();o._x=_f_x; o._y=_f_y;var d=Math.sqrt(Math.pow(o.ex-o._x, 2)+Math.pow(o.ey-o._y, 2)) / _f_speed;if(d!=0){o.dx=(o.ex-o._x)/d;o.dy=(o.ey-o._y)/d;}else {o.dx=0;o.dy=0;}o.fcode=fcode & 0xff;_f_h5_fuda_disp_2sprite(o.id, o.fcode, _f_fudaWidth, _f_fudaHeight, 0);moveSprite(o.id, o._x, o._y);_f_movie_ctr=1;o.timeout=setTimeout('_f_from_tefuda_to_bafuda_sub2(0)', _f_h5_frameDulation);}function _f_from_yamafuda_to_bafuda_after_select(bpos, fcode){_f_from_yamafuda_to_bafuda_for_kubarifuda(bpos, fcode, 0);}function _f_from_yamafuda_to_bafuda_for_kubarifuda(bpos, fcode, num){var dx, dy, ax, ay, ex, ey, i;var o=_h5_sprite[num];_f_bafuda_coords(bpos);o.ex=_f_x; o.ey=_f_y;if(_f_bafuda[bpos]){if(_f_players==2){o.ex-=20; o.ey-=20;}else {o.ex+=8; o.ey+=20;}}_f_yamafuda_coords();o._x=_f_x; o._y=_f_y;var d=Math.sqrt(Math.pow(o.ex-o._x, 2)+Math.pow(o.ey-o._y, 2)) / _f_speed;if(d!=0){o.dx=(o.ex-o._x)/d;o.dy=(o.ey-o._y)/d;}else {o.dx=0;o.dy=0;}o.fcode=fcode & 0xff;_f_h5_fuda_disp_2sprite(o.id, o.fcode, _f_fudaWidth, _f_fudaHeight, 0);moveSprite(o.id, o._x, o._y);_f_movie_ctr=1;o.timeout=setTimeout('_f_from_tefuda_to_bafuda_sub2('+num+')', _f_h5_frameDulation);}function _f_from_yamafuda_to_tefuda(seki, tpos, num){var o=_h5_sprite[num];_f_yamafuda_coords();o._x=_f_x; o._y=_f_y;_f_tefuda_coords(seki, tpos);o.ex=_f_x; o.ey=_f_y;var d=Math.sqrt(Math.pow(o.ex-o._x, 2)+Math.pow(o.ey-o._y, 2)) / _f_speed;if(d!=0){o.dx=(o.ex-o._x)/d;o.dy=(o.ey-o._y)/d;}else {o.dx=0;o.dy=0;}o.fcode=0x00ff;_f_h5_fuda_disp_2sprite(o.id, o.fcode, _f_fudaWidth, _f_fudaHeight, 0);moveSprite(o.id, o._x, o._y);_f_movie_ctr++;o.timeout=setTimeout('_f_from_tefuda_to_bafuda_sub2('+num+')', _f_h5_frameDulation);}function _f_oichokabu_animation_makifuda(seki, fcode){var o=_h5_sprite[0];_f_yamafuda_coords();o._x=_f_x; o._y=_f_y;_f_oichokabu_makifuda_coords(seki);o.ex=_f_x; o.ey=_f_y;var d=Math.sqrt(Math.pow(o.ex-o._x, 2)+Math.pow(o.ey-o._y, 2)) / _f_speed;if(d!=0){o.dx=(o.ex-o._x)/d;o.dy=(o.ey-o._y)/d;}else {o.dx=0;o.dy=0;}o.fcode=0xff;_f_h5_fuda_disp_2sprite(o.id, o.fcode, _f_fudaWidth, _f_fudaHeight, 0);moveSprite(o.id, o._x, o._y);_f_movie_ctr=1;o.timeout=setTimeout('_f_from_tefuda_to_bafuda_sub2(0)', _f_h5_frameDulation);}function _f_oichokabu_animation_bafuda1(bpos, fcode){var o=_h5_sprite[0];_f_yamafuda_coords();o._x=_f_x; o._y=_f_y;_f_oichokabu_bafuda1_coords(bpos & 3);if(bpos & 4){if(_f_oya==0) _f_y-=80;else _f_y+=80;}else if(bpos & 8){if(_f_oya==0) _f_y-=130;else _f_y+=130;}o.ex=_f_x; o.ey=_f_y;var d=Math.sqrt(Math.pow(o.ex-o._x, 2)+Math.pow(o.ey-o._y, 2)) / _f_speed;if(d!=0){o.dx=(o.ex-o._x)/d;o.dy=(o.ey-o._y)/d;}else {o.dx=0;o.dy=0;}o.fcode=fcode;_f_h5_fuda_disp_2sprite(o.id, o.fcode, _f_fudaWidth, _f_fudaHeight, 0);moveSprite(o.id, o._x, o._y);_f_movie_ctr=1;o.timeout=setTimeout('_f_from_tefuda_to_bafuda_sub2(0)', _f_h5_frameDulation);}function _f_oichokabu_animation_oyatefuda(bpos){var o=_h5_sprite[0];_f_yamafuda_coords();o._x=_f_x; o._y=_f_y; i=bpos;if(bpos==-1){ o._y+=1.5*3; i=0; }if(bpos==-2){ o._y=360; i=0; }_f_oichokabu_oyatefuda_coords(i);o.ex=_f_x; o.ey=_f_y;o.dx=30; o.dy=10;var d=Math.sqrt(Math.pow(o.ex-o._x, 2)+Math.pow(o.ey-o._y, 2))/_f_speed;if(d!=0){o.dx=(o.ex-o._x)/d;o.dy=(o.ey-o._y)/d;}o.fcode=0xff;_f_h5_fuda_disp_2sprite(o.id, o.fcode, _f_fudaWidth, _f_fudaHeight, 0);moveSprite(o.id, o._x, o._y);_f_movie_ctr=1;o.timeout=setTimeout('_f_from_tefuda_to_bafuda_sub2(0)', _f_h5_frameDulation);}_ock_x=-1;_ock_y=-1;_ock_xb=-1;_ock_yb=-1;function _f_oichokabu_animation_take_bafuda(bpos, seki){var o=_h5_sprite[0];_f_oichokabu_bafuda1_coords(bpos & 4);_ock_xb=o._x=_f_x-(_f_fudaWidth >> 1);;_ock_yb=o._y=_f_y-(_f_fudaHeight >> 1);if(_f_oya==0){o.ex=940; o.ey=90;if(seki==2) o.ex=295;}else if(_f_oya==1){o.ex=295; o.ey=730;if(seki==0){ o.ex=900; o.ey=890; }}else {o.ex=940; o.ey=730;if(seki==0){ o.ex=405; o.ey=890; }}_ock_x=(o.ex-=(_f_fudaWidth >> 1));_ock_y=(o.ey-=(_f_fudaHeight >> 1));o.dx=30; o.dy=10;var d=Math.sqrt(Math.pow(o.ex-o._x, 2)+Math.pow(o.ey-o._y, 2))/_f_speed;if(d!=0){o.dx=(o.ex-o._x)/d;o.dy=(o.ey-o._y)/d;}o.fcode=0xff;_f_h5_fuda_disp_2sprite(o.id, o.fcode, _f_fudaWidth, _f_fudaHeight, 0);moveSprite(o.id, o._x, o._y);_f_movie_ctr=1;o.timeout=setTimeout('_f_from_tefuda_to_bafuda_sub2(0)', _f_h5_frameDulation);}function _f_oichokabu_animation_watch_bafuda(seki, fcode){var o=_h5_sprite[0];o.fcode=fcode; if(seki!=0) o.fcode=-1;_f_fuda_disp(o.fcode, _ock_x, _ock_y, _f_fudaWidth, _f_fudaHeight, '', 0);}function _f_oichokabu_animation_erase_watched(){var w=_f_fudaWidth >> 1;var h=_f_fudaHeight >> 1;var x1=_ock_x-w-1, y1=_ock_y-h-1, x2=_ock_x+w+1, y2=_ock_y+h+1;if(y1<0) y1=0;putRectangleAbs(x1, y1, x2, y2, _f_cushionColor);_f_bafuda_disp(0);}function _f_oichokabu_animation_return_bafuda(bpos, seki){var o=_h5_sprite[0];o._x=_ock_x;o._y=_ock_y;o.ex=_ock_xb; o.ey=_ock_yb;o.dx=30; o.dy=10;var d=Math.sqrt(Math.pow(o.ex-o._x, 2)+Math.pow(o.ey-o._y, 2))/_f_speed;if(d!=0){o.dx=(o.ex-o._x)/d;o.dy=(o.ey-o._y)/d;}o.fcode=0xff;_f_h5_fuda_disp_2sprite(o.id, o.fcode, _f_fudaWidth, _f_fudaHeight, 0);moveSprite(o.id, o._x, o._y);_f_movie_ctr=1;o.timeout=setTimeout('_f_from_tefuda_to_bafuda_sub2(0)', _f_h5_frameDulation);}function _f_status_erase(){removeTextArea('PROMPT_WINDOW');}function _f_status_disp(str){var fontSize=20;_f_status_erase();var w=236;var h=100;var x=1180-w;var y=690;newTextArea('PROMPT_WINDOW', x, y, w-16, h-16, fontSize, 'rgba(255,255,255,.8)', '#000');e=document.getElementById('PROMPT_WINDOW');e.style.border='solid #ccc 2px';e.style.padding=Math.floor(8*rRatio)+'px';e.style.fontSize=Math.floor(20*rRatio)+'px';e.style.lineHeight=Math.floor(22*rRatio)+'px';e.style.overflow='hidden';e.style.fontFamily='sans-serif';str=str.split('\n').join('<br />');e.innerHTML=str;return;}function _f_console_erase(){removeTextArea('COMMAND_BAR');removeTextArea('COMMAND_11');removeTextArea('COMMAND_12');}function _f_mini_console_disp(){var dx=1052, n, o;var dy=794;var d=9901;_f_console_erase();newTextArea('COMMAND_BAR', dx, dy, 128, 41, 32, 'rgba(0,0,0,.8)', '#fff');e=document.getElementById('COMMAND_BAR');e.style.border='solid rgba(204,204,204,.7) 2px';dx+=4; dy+=8;newAnchorArea(10, dx, dy, 128, 32, 'COMMAND_11', 28, 'transparent', '#fff');e=document.getElementById('COMMAND_11');e.style.fontFamily='serif';e.style.textAlign='center';e.style.lineHeight='1em';e.style.verticalAlign='text-top';e.innerHTML='進行';return;}function _f_console_disp(){var dx=780+128, n, o;var dy=794;var d=9901;_f_console_erase();newTextArea('COMMAND_BAR', dx, dy, 272, 41, 32, 'rgba(0,0,0,.8)', '#fff');e=document.getElementById('COMMAND_BAR');e.style.border='solid rgba(204,204,204,.7) 2px';dx+=4; dy+=8;newAnchorArea(11, dx, dy, 128, 32, 'COMMAND_11', 28, 'transparent', '#fff');e=document.getElementById('COMMAND_11');e.style.fontFamily='serif';e.style.textAlign='center';e.style.lineHeight='1em';e.style.verticalAlign='text-top';e.innerHTML='は い';newAnchorArea(12, dx+148, dy, 128, 32, 'COMMAND_12', 28, 'transparent', '#fff');e=document.getElementById('COMMAND_12');e.style.fontFamily='serif';e.style.textAlign='center';e.style.lineHeight='1em';e.style.verticalAlign='text-top';e.innerHTML='いいえ';return;}function _f_score_card_disp(){var cs=28, margin=16, blines=4, bcolumns=16;var ch=cs+blines;var bz=-1, jia, x, y;var tt=new Array(0, 0, 0);var i, d;_f_button_ctr=0;_f_cushion_color();removeAllOfTextArea();var w=cs*32+margin*2+bcolumns*3;var h=cs*24+blines*5+cs+margin*2;var xh=600-w/2, yh=450-h/2;_f_textWindow('SCORE_TABLE', xh, yh, w, h);i='はちはち'; if(_f_gamemode==_F_GAMEMODE_88 && _f_players==2) i='二人はちはち';if(_f_gamemode==_F_GAMEMODE_MUSHI) i='むし';if(_f_gamemode==_F_GAMEMODE_KOIKOI) i='こいこい';if(_f_gamemode==_F_GAMEMODE_HANAAWASE) i='花合わせ';if(_f_gamemode==_F_GAMEMODE_OICHOKABU) i='おいちょかぶ';if(_f_gamemode==_F_GAMEMODE_KYOKABU) i='京かぶ';if(_f_gamemode==_F_GAMEMODE_SUDAOSHI) i='すだおし';if(_f_gamemode==_F_GAMEMODE_600KEN) i='六百間';if(_f_gamemode==_F_GAMEMODE_HACHI) i='はち';_f_leftText('A_GAME_COMPLETED', xh+margin, yh+margin, cs*24, cs, '#fff', i+' 第'+_f_to_wasuji(_f_game_ctr+1)+'回戦終了');xh+=margin;yh+=margin;var players=(_f_players==3) ? 3 : 1;x=xh+cs*4; y=yh+ch*2;i=-1; while(++i<players){j=_f_seatName[i];if(players==1) i='あなた';_f_rightText('SEAT_NAME'+i, x, yh+ch*2, cs*3, cs, '#ff0', j);x+=cs*5;}while(++bz<=_f_game_ctr){y+=ch; x=xh;_f_rightText('GAME_'+bz+'_HEADINGS', x, y, cs*2, cs, '#ff0', (bz+1));x=xh+cs*4;i=-1; while(++i<players){j=_f[i].result[bz]; tt[i]+=j;if(j<0){_f_rightText('SCORE_'+bz+'_'+i+'_SIGN', x, y, cs, cs, '#fff', '▲');j=-j;}_f_rightText('SCORE_'+bz+'_'+i+'_VAL', x, y, cs*3, cs, '#fff', j);x+=cs*5;}}y+=ch*1.5; x=xh;_f_rightText('GAME_TOTAL_HEADINGS', x, y, cs*2, cs, '#ff0', '計');x=xh+cs*4;i=-1; while(++i<players){j=tt[i];if(j<0){_f_rightText('SCORE_TOTAL_'+i+'_SIGN', x, y, cs, cs, '#fff', '▲');j=-j;}_f_rightText('SCORE_TOTAL_'+i+'_VAL', x, y, cs*3, cs, '#fff', j);x+=cs*5;}d=10;d=_f_textButton2(d, xh+cs*25,yh+margin,cs*5,cs,String.fromCharCode(9655)+'終了','GAME_OVER');if(_f_game_ctr<7) d=_f_textButton2(d, xh+cs*30,yh+margin,cs*5,cs,String.fromCharCode(9655)+'次戦','GAME_END_3');return;}
