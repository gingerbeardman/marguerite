dWidth=1200;dHeight=900;rRatio=1;oWidth=1;xOffset=0;yOffset=24;canvasID='GAME_CANVAS';canvasMapID='GAME_CANVAS_MAP';hst='http:'; if(location.protocol.toLowerCase()!='http:') hst='https:';image_file=[hst+'\/\/www.marguerite.jp/Games/Marguerite_Hanafuda/HTML5_Resouces/Fuda-Base.GIF',hst+'\/\/www.marguerite.jp/Games/Marguerite_Hanafuda/HTML5_Resouces/Atract.GIF',];image=new Array();bg_color='#008020';canvasContext=null;spriteContext=new Object();inputKey=-1;start_code='ATRACT()';menu_bordercolor='#008800';menu_bgcolor='#cccccc';menu_txcolor='#000000';menu_notxcolor='#888888';graph_noSprite=0;function disableselect(e){return(false);}function reEnable(){return(true);}document.onselectstart=new Function("return(false)");if(window.sidebar){document.onmousedown=disableselect;document.onclick=reEnable;}spritesDivID='';_ready=-image_file.length;game_onload=window.onload;window.onload=function(){var e, fn, i;if(game_onload) game_onload();_ready++;e=document.getElementById(canvasID);if(!e || !e.getContext){_ready=-65536; return;}i=image_file.length;while(--i>-1){image[i]=new Image();fn=image_file[i];if('serviceWorker' in navigator) ;else if(location.protocol.toLowerCase()!='file:') fn+='?'+new Date().getTime();image[i].src=fn;image[i].onload = function(){_ready++;};}};timeout_id=null;load_flg=0;loading(start_code);function loading(start_code){var e;if(timeout_id) clearTimeout(timeout_id);if(_ready<-2) return;if(!load_flg){if((e=document.getElementById(canvasID))!=null){load_flg=1;initCanvas('#050');newTextArea('TITLE', 0,40, dWidth, 160, 64, '#050', '#fff');var e=document.getElementById('TITLE');e.style.textAlign='center';e.style.lineHeight='1.0em';e.innerHTML='しらぎくさいと<br /><span style="font-size: 40%; ">HTML 5 システム II 1.10</span>';newTextArea('MESS', 0, Math.floor(dHeight / 3)+46, dWidth, 96, 24, '#050', '#fff');var e=document.getElementById('MESS');e.style.textAlign='center';e.style.fontWeight='bold';e.innerHTML='<p style="margin: 0; padding: 0; ">只今読込中です。</p><p style="margin: 1em 0 0; padding: 0; ">しばらくお待ちください。</p>';}timeout_id=setTimeout('loading(start_code); ', 10);return;}if(_ready>0){removeAllOfTextArea();timeout_hnd=setTimeout(start_code, 10);return;}timeout_id=setTimeout('loading(start_code); ', 10);}mapID='CANVAS_CLICKMAP';function initCanvas(bgColor){var w=document.documentElement.clientWidth || document.body.clientWidth  || window.innerWidth;var h=document.documentElement.clientHeight || document.body.clientHeight  || window.innerHeight;rRatio=h / (dHeight+yOffset); xOffset=0;if(rRatio*dWidth>w){rRatio=w / dWidth;h=Math.floor((dHeight+yOffset) * rRatio);}else xOffset=(w - rRatio*dWidth) >> 1;var e=document.getElementById(canvasID);if(e && e.getContext){e.setAttribute('width', w);e.setAttribute('height', h);canvasContext=e.getContext('2d');if(bgColor!=null){canvasContext.fillStyle=bgColor;canvasContext.fillRect(0, 0, w-1, w-1);}}oWidth=w;var pe=e.parentNode;if(pe.style.position==null || e.style.position.toLowerCase()=='static'){pe.style.position='relative';pe.style.top='0';pe.style.left='0';}var em=document.createElement('img');em.setAttribute('src', 'data:image/gif;base64,R0lGODlhAQABAJH/AP/'+'/'+'/wAAAMDAwAAAACH5BAEAAAIALAAAAAABAAEAAAICVAEAOw==');if(canvasMapID==null || canvasMapID=='') canvasMapID=canvasID+'_MAP';if(!document.getElementById(canvasMapID)){em.setAttribute('id', canvasMapID);em.style.width=w+'px';em.style.height=dHeight+'px';em.style.position='absolute';em.style.left='0';em.style.top=yOffset+'px';em.setAttribute('usemap', '#'+mapID);pe.insertBefore(em, e);removeAllOfTextArea();makeNoClickable();}if(!document.getElementById('___MENUBAR')){e=document.createElement('div');e.setAttribute('id', '___MENUBAR');e.style.position='fixed';e.style.top=e.style.left='0';e.style.width='100%';e.style.height=yOffset+'px';e.style.fontSize=Math.floor(yOffset * 0.8)+'px';e.style.color=menu_txcolor;e.style.background=menu_bgcolor;em=(document.getElementsByTagName('body'))[0];em.appendChild(e);}spritesDivID=canvasID+'------SPRITES';if(!document.getElementById(spritesDivID)){var em=document.createElement('div');em.setAttribute('id', spritesDivID);em.style.width=w+'px';em.style.height=dHeight+'px';em.style.position='absolute';em.style.left='0';em.style.top=yOffset+'px';var e=document.getElementById(canvasID);if((pe=e.nextSibling)!=null){e.parentNode.insertBefore(em, pe);}else {e.parentNode.appendChild(em);}}if(AUDIO_INIT) AUDIO_INIT();}function putPartOfImage(img, sx, sy, sw, sh, dx, dy, dw, dh){canvasContext.drawImage(img, sx, sy, sw, sh,Math.floor(dx*rRatio)+xOffset,Math.floor(dy*rRatio)+yOffset,Math.floor(dw*rRatio),Math.floor(dh*rRatio));}function putRectangleAbs(dx, dy, ex, ey, color){var x1=0, w=ex-dx, h=ey-dy;if(w<0) w=dx-ex;if(h<0) h=dy-ey;w=Math.floor((w+1)*rRatio);h=Math.floor((h+1)*rRatio);canvasContext.fillStyle=color;x1=dx*rRatio+xOffset;if(dx<0){x1=0;w=ex*rRatio+xOffset;if(ex<0) w=oWidth;}else if(ex<0) w=oWidth-(dx*rRatio)+1;canvasContext.fillRect(x1, Math.floor(dy*rRatio)+yOffset, w, h);}function getArea(sx, sy, sw, sh, saver){var w=Math.floor(sw*rRatio)+1;var h=Math.floor(sh*rRatio)+1;saver.x=Math.floor(sx*rRatio)+xOffset;saver.y=Math.floor(sy*rRatio)+yOffset;saver.data=canvasContext.getImageData(saver.x, saver.y, w, h);}function putArea(saver){try {canvasContext.putImageData(saver.data, saver.x, saver.y);saver.data=null;}catch(e){ ; }}function putRectangle(dx, dy, w, h, color){var x1=0;canvasContext.fillStyle=color; x1=Math.floor(dx*rRatio)+xOffset;canvasContext.fillRect(x1, Math.floor(dy*rRatio)+yOffset, Math.floor(w*rRatio), Math.floor(h*rRatio));}function newTextArea(id, x, y, w, h, fontSize, bgColor, fgColor){var e=document.getElementById(canvasID);var ne;if(e){e=e.parentNode;if(e.style.position==null || e.style.position.toLowerCase()=='static'){e.style.position='relative';e.style.top='0';e.style.left='0';}if(!document.getElementById(id)){ne=document.createElement('div');ne.setAttribute('data-bylib', '1');ne.setAttribute('id', id);ne.style.width=Math.floor(w*rRatio)+'px';ne.style.height=Math.floor(h*rRatio)+'px';ne.style.overflow='hidden';ne.style.background=bgColor || '#000';ne.style.color=fgColor || '#fff';ne.style.fontSize=Math.floor(fontSize*rRatio)+'px';ne.style.position='absolute';ne.style.top=Math.floor(y*rRatio+yOffset)+'px';ne.style.left=Math.floor(x*rRatio+xOffset)+'px';e.appendChild(ne);}}}touched=0;function newAnchorArea(inputKeyNumber, x, y, w, h, id, fontSize, bgColor, fgColor){var e=document.getElementById(canvasID);var ne;if(e){e=e.parentNode;if(e.style.position==null || e.style.position.toLowerCase()=='static'){e.style.position='relative';e.style.top='0';e.style.left='0';}if(!document.getElementById(id)){ne=document.createElement('a');ne.setAttribute('data-bylib', '1');ne.setAttribute('id', id);ne.setAttribute('display', 'block');ne.style.width=Math.floor(w*rRatio)+'px';ne.style.height=Math.floor(h*rRatio)+'px';ne.style.overflow='hidden';ne.style.background=bgColor || '#000';ne.style.color=fgColor || '#fff';ne.style.fontSize=Math.floor(fontSize*rRatio)+'px';ne.style.textDecoration='none';ne.style.position='absolute';ne.style.top=Math.floor(y*rRatio+yOffset)+'px';ne.style.left=Math.floor(x*rRatio+xOffset)+'px';ne.style.cursor='pointer';ne.setAttribute('onclick', 'setValue('+inputKeyNumber+'); return(false);');ne.innerHTML='<img alt="" style="width: 100%; height: 100%; border: none; " src="data:image/gif;base64,R0lGODlhAQABAJH/AP/'+'/'+'/wAAAMDAwAAAACH5BAEAAAIALAAAAAABAAEAAAICVAEAOw==">';e.appendChild(ne);}}}function removeTextArea(id){var e=document.getElementById(id);if(e){e.parentNode.removeChild(e);}}function removeAllOfTextArea(){var e=document.getElementsByTagName('div');var i=e.length;while(--i>=0){if(!e[i].getAttribute('data-bylib')) continue;e[i].parentNode.removeChild(e[i]);}var e=document.getElementsByTagName('a');var i=e.length;while(--i>=0){if(!e[i].getAttribute('data-bylib')) continue;e[i].parentNode.removeChild(e[i]);}}function drawText(txt, x, y, w, h, bold, fontSize, lineHeight, bgColor, fgColor, alignment){var x2=x;if(bgColor!=null){if(alignment.toLowerCase()=='center') x2-=w / 2;else if(alignment.toLowerCase()=='right') x2-=w;canvasContext.fillStyle=bgColor;canvasContext.fillRect(Math.floor(x2*rRatio)+xOffset, Math.floor(y*rRatio)+yOffset, Math.floor(w*rRatio), Math.floor(h*rRatio));}if(fgColor!=null) canvasContext.fillStyle=fgColor;var i='normal normal 1em/1em';if(fontSize!=null && fontSize>0){i='normal normal ';if(bold) i='normal bold ';i+=Math.floor(fontSize*rRatio)+'px';if(lineHeight!=null && lineHeight>0) i+='/'+Math.floor(lineHeight*rRatio)+'px';}canvasContext.font=i+' monospace';if(alignment=='') canvasContext.textAlign='left';else canvasContext.textAlign=alignment;canvasContext.textBaseline='top';canvasContext.fillText(txt,Math.floor(x*rRatio)+xOffset,Math.floor(y*rRatio)+yOffset);}function drawTextMincho(txt, x, y, w, h, bold, fontSize, lineHeight, bgColor, fgColor, alignment){var x2=x;if(bgColor!=null){if(alignment.toLowerCase()=='center') x2-=w / 2;else if(alignment.toLowerCase()=='right') x2-=w;canvasContext.fillStyle=bgColor;canvasContext.fillRect(Math.floor(x2*rRatio)+xOffset, Math.floor(y*rRatio)+yOffset, Math.floor(w*rRatio), Math.floor(h*rRatio));}if(fgColor!=null) canvasContext.fillStyle=fgColor;var i='normal normal 1em/1em';if(fontSize!=null && fontSize>0){i='normal normal ';if(bold) i='normal bold ';i+=Math.floor(fontSize*rRatio)+'px';if(lineHeight!=null && lineHeight>0) i+='/'+Math.floor(lineHeight*rRatio)+'px';}canvasContext.font=i+' serif';if(alignment=='') canvasContext.textAlign='left';else canvasContext.textAlign=alignment;canvasContext.textBaseline='top';canvasContext.fillText(txt,Math.floor(x*rRatio)+xOffset,Math.floor(y*rRatio)+yOffset);}function makeClickable(inputKeyNumber, x, y, w, h, areaID){var e=document.getElementById(canvasMapID);var ne, pe, ae, be, areaNode;if(e){if(areaID!=''){areaNode=document.getElementById('CANVAS_CLICKABLE_AREA-'+areaID);if(areaNode){areaNode.parentNode.removeChild(areaNode);}}pe=e.parentNode;ne=document.getElementById(mapID);if(!ne){ne=document.createElement('map');ne.setAttribute('name', mapID);ne.setAttribute('id', mapID);e.setAttribute('usemap', '#CANVAS_CLICKMAP');pe.appendChild(ne);}ae=document.createElement('area');ae.style.cursor='pointer';ae.setAttribute('onclick', 'setValue('+inputKeyNumber+'); return(false);');ae.setAttribute('shape', 'rect');ae.setAttribute('coords', Math.floor(x*rRatio+xOffset)+', '+Math.floor(y*rRatio)+', '+(Math.floor((x+w)*rRatio)+xOffset-1)+', '+(Math.floor((y+h)*rRatio)));if(areaID!=null && areaID!='') ae.setAttribute('id', 'CANVAS_CLICKABLE_AREA-'+areaID);be=ne.childNodes;if(!be) ne.appendChild(ae);else ne.insertBefore(ae, be[0]);}}function setValue(inputKeyNumber){inputKey=inputKeyNumber;}function makeNoClickable(){var e=document.getElementById(canvasMapID);var ne, pe;if(e){pe=e.parentNode;ne=document.getElementById(mapID);if(ne){e.removeAttribute('usemap');pe.removeChild(ne);}}e=document.getElementsByTagName('a');var i=e.length;while(--i>=0){if(!e[i].getAttribute('data-bylib')) continue;e[i].parentNode.removeChild(e[i]);}}function setMenuItem(mId, xPos, chars, text, link, NOlink){var xp=xPos;if(xp<0) xp=dWidth*rRatio+xp-Math.floor(yOffset*chars);var e=document.getElementById('___MENUBAR');if(!e) return;var f=document.getElementById(mId);if(!f){f=document.createElement('a');f.setAttribute('id', mId);}f.style.color=menu_txcolor;f.style.textDecoration='none';f.style.display='block';f.style.position='absolute';f.style.top=Math.floor(yOffset * 0.1)+'px';f.style.left=(xp+xOffset)+'px';f.style.width=Math.floor(yOffset*chars)+'px';f.style.height=Math.floor(yOffset*0.9)+'px';f.style.whiteSpace='noWrap';f.style.margin=f.style.padding='0px';f.innerHTML=text;if(link!=''){f.style.cursor='pointer';f.setAttribute('onclick', link+'; return(false); ');if(NOlink) f.style.color=menu_notxcolor;}else {f.style.cursor='default';f.removeAttribute('onclick');f.style.color=menu_notxcolor;}e.appendChild(f);}function removeMenuItem(mId){var e=document.getElementById('___MENUBAR');if(!e) return;var f=document.getElementById(mId);if(!f) return;e.removeChild(f);}function createSprite(id, x, y, w, h){var e, f, p;if(graph_noSprite) return;if(!id || id==canvasID) return;if((e=document.getElementById(id))!=null){if(e.nodeName.toLowerCase()!='canvas') return;}else {e=document.createElement('canvas');e.setAttribute('id', id);}e.width=Math.floor(rRatio*w);e.height=Math.floor(rRatio*h);e.style.position='absolute';e.style.left=Math.floor(rRatio*x)+'px';e.style.top=Math.floor(rRatio*y)+'px';f=document.getElementById(spritesDivID);f.appendChild(e);spriteContext[id]=e.getContext('2d');}function moveSprite(id, x, y){var e;if(graph_noSprite) return;if(!spriteContext[id]) return;e=document.getElementById(id);if(!e) return;if(e.nodeName.toLowerCase()!='canvas') return;e.style.left=(Math.floor(x*rRatio)+xOffset)+'px';e.style.top=(Math.floor(y*rRatio)+yOffset)+'px';}function disposeSprite(id){var e;if(graph_noSprite) return;if(!spriteContext[id]) return;e=document.getElementById(id);if(!e) return;if(e.nodeName.toLowerCase()!='canvas') return;e.parentNode.removeChild(e);if(spriteContext[id]) delete spriteContext[id];}function resizeSprite(id, w, h){var e, x=Math.floor(rRatio*w), y=Math.floor(rRatio*h), c;if(graph_noSprite) return;if(!spriteContext[id]) return;e=document.getElementById(id);if(!e) return(null);if(e.nodeName.toLowerCase()!='canvas') return(null);e.width=w;e.height=h;spriteContext[id].clearRect(0, 0, x, y);}function clearSprite(id){var e, x, y, c;if(graph_noSprite) return;if(!spriteContext[id]) return;e=document.getElementById(id);if(!e) return(null);if(e.nodeName.toLowerCase()!='canvas') return(null);x=e.width;y=e.height;spriteContext[id].clearRect(0, 0, x, y);}function hideSprite(id){var e, x, y;if(graph_noSprite) return;if(!spriteContext[id]) return;e=document.getElementById(id);if(!e) return;x=e.width;y=e.height;e.style.left='-'+(rRatio*x*2)+'px';e.style.top='-'+(rRatio*y*2)+'px';}function putPartOfImage2Sprite(id, img, sx, sy, sw, sh, dx, dy, dw, dh){if(graph_noSprite) return;if(!spriteContext[id]) return;spriteContext[id].drawImage(img, sx, sy, sw, sh,Math.floor(dx*rRatio),Math.floor(dy*rRatio),Math.floor(dw*rRatio),Math.floor(dh*rRatio));}
