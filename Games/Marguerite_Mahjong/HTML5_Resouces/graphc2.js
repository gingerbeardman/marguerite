_t_haipai_flag=0;function _h5_makeHandClickable(){var  i, k, x, y, _t_imageRate=1.2;i=20; while(--i>0) removeTextArea('SHUPAI-NO'+i);removeTextArea('SHUPAI-BLANK');if(_t_gamemode!=_T_GAMEMODE_TAIWAN){x=1006; y=814-_t_disp_YOffset;if(_t_fulou_dir){x=830-144*_t[0].fulou_ctr;if(_t_gamemode!=_T_GAMEMODE_GUOJI){i=-1; k=-5; while(++i<_t[0].fulou_ctr){k+=5;if(_t[0].fuloupai[k+4]){x+=160*_t_imageRate;}}}}i=15; while(--i>3*_t[0].fulou_ctr){if((_t[0].shupai[i] & 0x3f)!=0) newAnchorArea(i, x, y, 40*_t_imageRate, 60*_t_imageRate, 'SHUPAI-NO'+i, 10, 'transparent', '#fff');x-=40*_t_imageRate;}return;}x=1006; y=810-_t_disp_YOffset;if(_t_fulou_dir) x=974-144*_t[0].fulou_ctr;k=17; while(--k>=3*_t[0].fulou_ctr){i=_tm_suff[k];if((_t[0].shupai[i] & 0x3f)!=0){newAnchorArea(i, x, y, 40*_t_imageRate, 60*_t_imageRate, 'SHUPAI-NO'+i, 10, 'transparent', '#fff');}x-=40*_t_imageRate;}}function _h5_makeHandUnclickable(){var  i=20;while(--i>0) removeTextArea('SHUPAI-NO'+i);}function _t_nukidora_disp0(){var x1, y1, i, x, y, l, ll=4, ll2=4, lm=4, dx=40;_t_imageRate=1; x1=165; y1=752;if(_t_fulou_dir){x1=1030; dx=-40;if(_t_gamemode==_T_GAMEMODE_TAIWAN) x1=1070;}x=x1; y=y1; i=-1; while(++i<_t[0].nukidora_ctr){if(_t[0].nukidora[i] & 0x10000){_t[0].nukidora[i] &= 0xffff;_t_h5_paiX=_t_h5_arrowX=x;_t_h5_paiY=y;_t_h5_arrowY=y-52;_t_h5_arrowD=1;}_t_pai_V(_t[0].nukidora[i], x, y);x+=dx;}}function _t_nukidora_disp2(){var x1, y1, i, x, y, l, jia=2, il=3, dx=-40, x1;if(_t_players==2) jia=1;_t_imageRate=1; x1=950; y1=90;if(_t_fulou_dir){x1=160; dx=40;}x=x1; y=y1; i=-1; while(++i<_t[jia].nukidora_ctr){if(_t[jia].nukidora[i] & 0x10000){_t[jia].nukidora[i] &= 0xffff;_t_h5_paiX=_t_h5_arrowX=x;_t_h5_paiY=y;_t_h5_arrowY=y-52;_t_h5_arrowD=1;}_t_pai_V(_t[jia].nukidora[i] ^ 0x80, x, y);x+=dx;if(i!=5) continue;if(_t_fulou_dir){x=x1; y+=40;}}}function _t_nukidora_disp1(){var x1, y1, i, x, y, l;x=998;if(!_t_fulou_dir){y=730-32*(i=_t[1].nukidora_ctr);if(_t_gamemode==_T_GAMEMODE_TAIWAN) y+=16;while(--i>-1){if(_t[1].nukidora[i] & 0x10000){_t[1].nukidora[i] &= 0xffff;_t_h5_paiX=x;_t_h5_arrowX=x-48;_t_h5_paiY=y;_t_h5_arrowY=y-8;_t_h5_arrowD=2;}_t_pai_H(_t[1].nukidora[i], x, y);y+=32;}return;}y=130; i=-1;if(_t_gamemode==_T_GAMEMODE_TAIWAN) y=100;while(++i<_t[1].nukidora_ctr){if(_t[1].nukidora[i] & 0x10000){_t[1].nukidora[i] &= 0xffff;_t_h5_paiX=x;_t_h5_arrowX=x-48;_t_h5_paiY=y;_t_h5_arrowY=y-8;_t_h5_arrowD=2;}_t_pai_H(_t[1].nukidora[i], x, y);y+=32;}}function _t_nukidora_disp3(){var x1, y1, i, x, y, l, jia=_t_players-1;if(!_t_fulou_dir){x=97+48; i=-1; y=150;if(_t_players==3) y-=100;if(_t_gamemode==_T_GAMEMODE_TAIWAN) y=130;while(++i<_t[jia].nukidora_ctr){if(_t[jia].nukidora[i] & 0x10000){_t[jia].nukidora[i] &= 0xffff;_t_h5_paiX=x;_t_h5_arrowX=x+52;_t_h5_paiY=y;_t_h5_arrowY=y;_t_h5_arrowD=0;}_t_pai_H(_t[jia].nukidora[i] | 0x80, x, y);y+=32;}return;}x=97+48; i=-1; y=750;y-=32*_t[jia].nukidora_ctr; i=_t[jia].nukidora_ctr;while(--i>-1){if(_t[jia].nukidora[i] & 0x10000){_t[jia].nukidora[i] &= 0xffff;_t_h5_paiX=x;_t_h5_arrowX=x+52;_t_h5_paiY=y;_t_h5_arrowY=y;_t_h5_arrowD=0;}_t_pai_H(_t[jia].nukidora[i] | 0x80, x, y);y+=32;}}function _t_shupai_disp(jia){var x, y, i, j, k, j1, l, x1, y1, l, n, o, xx, yy;var tm_p=new Array(3);_t_imageRate=1;if(_t_gamemode==_T_GAMEMODE_TAIWAN){_tm_shupai_disp(jia); return;}if(jia==0){_t_imageRate=1.2;xx=x=1006; y=814-_t_disp_YOffset; if(_t[0].fu[0]>-1 && _t[0].open) y=836;yy=y;if(_t_fulou_dir){x=830-144*_t[0].fulou_ctr;putRectangleAbs(156, yy-22*_t_imageRate, 1006, yy+68*_t_imageRate, _t_tableColor);if(_t_gamemode!=_T_GAMEMODE_GUOJI){i=-1; k=-5; while(++i<_t[0].fulou_ctr){k+=5;if(_t[0].fuloupai[k+4]){x+=160*_t_imageRate;}}}xx=x;}else {putRectangleAbs(xx-40*17.6*_t_imageRate, yy-22*_t_imageRate, xx+48*_t_imageRate, yy+68*_t_imageRate, _t_tableColor);}_t_nukidora_disp0();_t_imageRate=1.2; x=xx; y=yy;i=15; k=14;while(--i>3*_t[0].fulou_ctr){j=_t[0].shupai[i];if(i==14 && j==0){_t_pai_UR0(0xff, x, y);x-=40*_t_imageRate; --k;continue;}if(j & 0x4000)_t_pai_V(j & 0x41ff, x+16*_t_imageRate, y);else if(j & 0x200)_t_pai_V(j & 0x01ff, x+16*_t_imageRate, y);else {if(_t_haipai_flag && (j & 0x3f)) j=-2;if((j & 0x300)!=0 || _t[0].open)_t_pai_V(j, x, y);else
_t_pai_UR0(j, x, y);}x-=40*_t_imageRate; --k;}x+=40*_t_imageRate;if(_t_gamemode!=_T_GAMEMODE_GUOJI){i=-1; k=-5;while(++i<_t[0].fulou_ctr){k+=5;if(_t[0].fuloupai[k+4]){x-=160*_t_imageRate;if(_t[0].fuloupai[k+4] & 0x10000){_t[0].fuloupai[k+4] &= 0xffff;_t_h5_paiX=_t_h5_arrowX=x+80*_t_imageRate;_t_h5_paiY=_t_h5_arrowY=y-56;_t_h5_arrowD=1;}if(_t[0].open){_t_pai_V(-1, x, y);_t_pai_V(_t[0].fuloupai[k+2], x+40*_t_imageRate, y);_t_pai_V(_t[0].fuloupai[k+1], x+80*_t_imageRate, y);_t_pai_V(-1, x+120*_t_imageRate, y);}else {_t_pai_UR0(-1, x, y);_t_pai_UR0(_t[0].fuloupai[k+2], x+40*_t_imageRate, y);_t_pai_UR0(_t[0].fuloupai[k+1], x+80*_t_imageRate, y);_t_pai_UR0(-1, x+120*_t_imageRate, y);}}}}x=165; y=844-6;if(!_t_fulou_dir){i=-1; k=-5;while(++i<_t[0].fulou_ctr){k+=5;if(_t[0].fuloupai[k+4]){if(_t_gamemode!=_T_GAMEMODE_GUOJI) continue;if(!_t[0].open && !_t_open_mode){_t_pai_UR0(_t[0].fuloupai[k+4], x, y);_t_pai_V(-1, x+40*_t_imageRate, y);_t_pai_V(-1, x+80*_t_imageRate, y);_t_pai_V(-1, x+120*_t_imageRate, y);}else if(_t[0].open>1){_t_pai_V(_t[0].fuloupai[k], x, y);_t_pai_V(-1, x+40*_t_imageRate, y);_t_pai_V(-1, x+80*_t_imageRate, y);_t_pai_V(_t[0].fuloupai[k+4], x+120*_t_imageRate, y);}else {_t_pai_V(_t[0].fuloupai[k], x, y);_t_pai_V(_t[0].fuloupai[k+1], x+40*_t_imageRate, y);_t_pai_V(_t[0].fuloupai[k+2], x+80*_t_imageRate, y);_t_pai_V(_t[0].fuloupai[k+4], x+120*_t_imageRate, y);}x+=160*_t_imageRate; continue;continue;}if(_t[0].fuloupai[k+3] && _t[0].fulou_jiagang[i]){j=-1; while(++j<3){if((l=_t[0].fuloupai[k+j]) & 0x80){if(_t[0].fuloupai[k+3] & 0x10000){_t[0].fuloupai[k+3] &= 0xffff;_t_h5_paiX=_t_h5_arrowX=x;_t_h5_paiY=_t_h5_arrowY=y-62-16*_t_imageRate;_t_h5_arrowD=1;}_t_pai_H(_t[0].fuloupai[k+3] & 0x7f, x, y-24*_t_imageRate);_t_pai_H(l ^ 0x80, x, y+8*_t_imageRate);x+=48*_t_imageRate; continue;}_t_pai_V(l, x, y);x+=40*_t_imageRate;}continue;}j=-1; while(++j<4){if((l=_t[0].fuloupai[k+j]) & 0x80){_t_pai_H(l ^ 0x80, x, y+8*_t_imageRate);x+=48*_t_imageRate; continue;}if(!l) continue;_t_pai_V(l, x, y);x+=40*_t_imageRate;}}}else {x=1070;i=-1; k=-5;while(++i<_t[0].fulou_ctr){k+=5;if(_t[0].fuloupai[k+4]){if(_t_gamemode!=_T_GAMEMODE_GUOJI) continue;x-=160*_t_imageRate;if(!_t[0].open && !_t_open_mode){_t_pai_UR0(_t[0].fuloupai[k+4], x, y);_t_pai_V(-1, x+40*_t_imageRate, y);_t_pai_V(-1, x+80*_t_imageRate, y);_t_pai_V(-1, x+120*_t_imageRate, y);}else if(_t[0].open>1){_t_pai_V(_t[0].fuloupai[k], x, y);_t_pai_V(-1, x+40*_t_imageRate, y);_t_pai_V(-1, x+80*_t_imageRate, y);_t_pai_V(_t[0].fuloupai[k+4], x+120*_t_imageRate, y);}else {_t_pai_V(_t[0].fuloupai[k], x, y);_t_pai_V(_t[0].fuloupai[k+1], x+40*_t_imageRate, y);_t_pai_V(_t[0].fuloupai[k+2], x+80*_t_imageRate, y);_t_pai_V(_t[0].fuloupai[k+4], x+120*_t_imageRate, y);}continue;}if(_t[0].fuloupai[k+3] && _t[0].fulou_jiagang[i]){j=3; while(--j>-1){if((l=_t[0].fuloupai[k+j]) & 0x80){x-=48*_t_imageRate;if(_t[0].fuloupai[k+3] & 0x10000){_t[0].fuloupai[k+3] &= 0xffff;_t_h5_paiX=_t_h5_arrowX=x;_t_h5_paiY=_t_h5_arrowY=y-62-16*_t_imageRate;_t_h5_arrowD=1;}_t_pai_H(_t[0].fuloupai[k+3] & 0x7f, x, y-24*_t_imageRate);_t_pai_H(l ^ 0x80, x, y+8*_t_imageRate);continue;}x-=40*_t_imageRate;_t_pai_V(l, x, y);}continue;}j=4; while(--j>-1){if((l=_t[0].fuloupai[k+j]) & 0x80){x-=48*_t_imageRate;_t_pai_H(l ^ 0x80, x, y+8*_t_imageRate);continue;}if(!l) continue;x-=40*_t_imageRate;_t_pai_V(l, x, y);}}}_t_imageRate=1.2;if(!_t[0].open){_t_imageRate=1;_t_bipai_disp_sub(0);return;}x=978+74; y=yy-28*_t_imageRate;if(_t_fulou_dir){x-=176+144*_t[0].fulou_ctr;i=-1; k=-5; while(++i<_t[0].fulou_ctr){k+=5;if(_t[0].fuloupai[k+4]){x+=160*_t_imageRate;}}}i=10; while((i-=2)>=0){ if(_t[0].fu[i]>-1){ i+=2; break; } }if(i<0){_t_imageRate=1;_t_bipai_disp_sub(0);return;}while((i-=2)>=0){if((j=_t[0].fu[i])==2) x-=80*_t_imageRate; else x-=120*_t_imageRate;_t_fu_disp4menzi (0, j, _t[0].fu[i+1], x, y);}i=-1; k=-5; while(++i<_t[0].fulou_ctr){k+=5;if(_t[0].fuloupai[k+4]){x-=160*_t_imageRate;_t_fu_disp4menzi (0, 4, _t[0].fulou_fu[i], x, y);}}if(!_t_fulou_dir){x=165; y=844-6-28*_t_imageRate;i=-1; k=-5; while(++i<_t[0].fulou_ctr){k+=5;if(_t[0].fuloupai[k+4]) continue;if(_t[0].fuloupai[k+3] && !_t[0].fulou_jiagang[i]){_t_fu_disp4menzi (0, -4, _t[0].fulou_fu[i], x, y);x+=168*_t_imageRate; continue;}_t_fu_disp4menzi (0, -3, _t[0].fulou_fu[i], x, y);x+=128*_t_imageRate;}_t_imageRate=1;}else {x=1070;y=844-6-28*_t_imageRate;i=-1; k=-5; while(++i<_t[0].fulou_ctr){k+=5;if(_t[0].fuloupai[k+4]) continue;if(_t[0].fuloupai[k+3] && !_t[0].fulou_jiagang[i]){x-=168*_t_imageRate;_t_fu_disp4menzi (0, -4, _t[0].fulou_fu[i], x, y);continue;}x-=128*_t_imageRate;_t_fu_disp4menzi (0, -3, _t[0].fulou_fu[i], x, y);}_t_imageRate=1;}return;}if((_t_players==4 && jia==2) || (_t_players==2 && jia==1)){putRectangleAbs(222, 0, 224+40*19, 96, _t_tableColor);x=224; y=0;if(_t_fulou_dir){x=416+120*_t[jia].fulou_ctr;i=_t[jia].fulou_ctr; k=-5; while(--i>-1){k+=5;if(_t[jia].fuloupai[k+4]) x-=160;}}i=15; while(--i>3*_t[jia].fulou_ctr){j=_t[jia].shupai[i];if(_t_haipai_flag && j){_t_pai_V(-1, x, y+24);}else if(j & 0x4000) _t_pai_V((j & 0x40ff) ^ 0x80, x-8, y+32);else if(j & 0x200){var x1=x, y1=y+32;if(i==14 && _t_dapai_flag==0){x1-=8;if(_t[jia].fu[0]<1) y1+=32;}_t_pai_V((j & 0x40ff) ^ 0x80, x1, y1);}else if((j & 0x100) || _t[jia].open){_t_pai_V((j & 0x40ff) ^ 0x80, x, y+32);}else if(j){if(_t_open_mode) _t_pai_V(((j & 0x40ff) ^ 0x80) | 0x200, x, y+32);else if(i!=14 || _t_dapai_flag || graph_noSprite) _t_pai_UR2(-1, x, y);}x+=40;}x-=40;if(_t_gamemode!=_T_GAMEMODE_GUOJI){i=-1; k=-5;while(++i<_t[jia].fulou_ctr){k+=5;if(_t[jia].fuloupai[k+4]){x+=160;if(_t[jia].fuloupai[k+4] & 0x10000){_t[jia].fuloupai[k+4] &= 0xffff;_t_h5_paiX=x-44;_t_h5_arrowX=x-4;_t_h5_paiY=82;_t_h5_arrowY=56;_t_h5_arrowD=3;}if(_t[jia].open || _t_open_mode){_t_pai_V(-1, x, y+32);_t_pai_V(_t[jia].fuloupai[k+1] ^ 0x80, x-40, y+32);_t_pai_V(_t[jia].fuloupai[k+2] ^ 0x80, x-80, y+32);_t_pai_V(-1, x-120, y+32);}else {_t_pai_UR2(_t[jia].fuloupai[k], x, y);_t_pai_UR2(-1, x-40, y);_t_pai_UR2(-1, x-80, y);_t_pai_UR2(_t[jia].fuloupai[k+4], x-120, y);}}}}if(!_t_fulou_dir){x=990; y=0;i=-1; k=-5;while(++i<_t[jia].fulou_ctr){k+=5;if(_t[jia].fuloupai[k+4]){if(_t_gamemode==_T_GAMEMODE_GUOJI){x-=160;var l1, l2, l3, l4;l1=_t[jia].fuloupai[k+4] ^ 0x80;l2=_t[jia].fuloupai[k+2] ^ 0x80;l3=_t[jia].fuloupai[k+1] ^ 0x80;l4=_t[jia].fuloupai[k]   ^ 0x80;if(!_t[jia].open && !_t_open_mode) l1=l2=l3=l4=-1;else if(_t[jia].open>1) l2=l3=-1;_t_pai_V(l4, x+120, y);_t_pai_V(l3, x+80, y);_t_pai_V(l2, x+40, y);_t_pai_V(l1, x, y);_t_pai_V(l, x, y);continue;}continue;}if(_t[jia].fuloupai[k+3] && _t[jia].fulou_jiagang[i]){j=-1; while(++j<3){if(!(l=_t[jia].fuloupai[k+j])) continue;if(l & 0x80){x-=48;if(_t[jia].fuloupai[k+3] & 0x10000){_t[jia].fuloupai[k+3] &= 0xffff;_t_h5_paiX=_t_h5_arrowX=x;_t_h5_paiY=_t_h5_arrowY=80;_t_h5_arrowD=3;}_t_pai_H(l, x, y);_t_pai_H(_t[jia].fuloupai[k+3] | 0x80, x, y+32);continue;}x-=40;_t_pai_V(l ^ 0x80, x, y);}continue;}j=-1; while(++j<4){if(!(l=_t[jia].fuloupai[k+j])) continue;if(l & 0x80){x-=48;_t_pai_H(l, x, y);continue;}x-=40; _t_pai_V(l ^ 0x80, x, y);}}}else {x=160; y=0;i=-1; k=-5;while(++i<_t[jia].fulou_ctr){k+=5;if(_t[jia].fuloupai[k+4]){if(_t_gamemode==_T_GAMEMODE_GUOJI){var l1, l2, l3, l4;l1=_t[jia].fuloupai[k+4] ^ 0x80;l2=_t[jia].fuloupai[k+2] ^ 0x80;l3=_t[jia].fuloupai[k+1] ^ 0x80;l4=_t[jia].fuloupai[k]   ^ 0x80;if(!_t[jia].open && !_t_open_mode) l1=l2=l3=l4=-1;else if(_t[jia].open>1) l2=l3=-1;_t_pai_V(l4, x+120, y);_t_pai_V(l3, x+80, y);_t_pai_V(l2, x+40, y);_t_pai_V(l1, x, y);x+=160;continue;}continue;}if(_t[jia].fuloupai[k+3] && _t[jia].fulou_jiagang[i]){j=3; while(--j>-1){if(!(l=_t[jia].fuloupai[k+j])) continue;if(l & 0x80){if(_t[jia].fuloupai[k+3] & 0x10000){_t[jia].fuloupai[k+3] &= 0xffff;_t_h5_paiX=_t_h5_arrowX=x;_t_h5_paiY=_t_h5_arrowY=80;_t_h5_arrowD=3;}_t_pai_H(l, x, y);_t_pai_H(_t[jia].fuloupai[k+3] | 0x80, x, y+32);x+=48;continue;}_t_pai_V(l ^ 0x80, x, y);x+=40;}continue;}j=4; while(--j>-1){if(!(l=_t[jia].fuloupai[k+j])) continue;if(l & 0x80){_t_pai_H(l, x, y);x+=48;continue;}_t_pai_V(l ^ 0x80, x, y);x+=40;}}}_t_nukidora_disp2();if(_t[jia].nukidora_ctr>0 && !_t_fulou_dir){_t_bipai_disp_sub(1);}if(!_t[jia].open){_t_bipai_disp_sub(jia);return;}x=224; y=4;if(_t_fulou_dir){x=416+120*_t[jia].fulou_ctr;i=_t[jia].fulou_ctr; k=-5; while(--i>-1){k+=5;if(_t[jia].fuloupai[k+4]) x-=160;}}i=10; while((i-=2)>=0){ if(_t[jia].fu[i]>-1){ i+=2; break; } }if(i<0){_t_bipai_disp_sub(jia);return;}while((i-=2)>=0){j=_t[jia].fu[i];_t_fu_disp4menzi (0, j, _t[jia].fu[i+1], x, y);if(j==2) x+=80; else x+=120;}i=-1; k=-5; while(++i<_t[jia].fulou_ctr){k+=5;if(_t[jia].fuloupai[k+4]){_t_fu_disp4menzi (0, 4, _t[jia].fulou_fu[i], x, y);x+=160;}}if(!_t_fulou_dir){y=72-16; x=990;i=-1; k=-5;while(++i<_t[jia].fulou_ctr){k+=5;if(_t[jia].fuloupai[k+4]) continue;if(_t[jia].fuloupai[k+3] && !_t[jia].fulou_jiagang[i]){x-=168;_t_fu_disp4menzi (2, -4, _t[jia].fulou_fu[i], x, y);continue;}x-=128;_t_fu_disp4menzi (2, -3, _t[jia].fulou_fu[i], x, y);}}else {y=72-16; x=160;i=-1; k=-5;while(++i<_t[jia].fulou_ctr){k+=5;if(_t[jia].fuloupai[k+4]) continue;if(_t[jia].fuloupai[k+3] && !_t[jia].fulou_jiagang[i]){_t_fu_disp4menzi (2, -4, _t[jia].fulou_fu[i], x, y);x+=168;continue;}_t_fu_disp4menzi (2, -3, _t[jia].fulou_fu[i], x, y);x+=128;}}_t_imageRate=1;return;}_t_imageRate=1;if(jia==1){y=122-_t_disp_YOffset;if(_t_fulou_dir){y=200+96*_t[1].fulou_ctr;putRectangleAbs(1143-80, 196, 1200, 700, _t_tableColor);}else {putRectangleAbs(1143-80, y+8, 1200, y+32*16, _t_tableColor);}i=15; while(--i>3*_t[1].fulou_ctr){if((l=_t[1].shupai[i])!=0){var x1=1096, y1=y;if(l & 0x4000){ y1-=8; l &= 0x040ff; l |= 0x100; }else if(i==14 && _t_dapai_flag==0 && (l & 0x200)){y1-=8;l &= 0x040ff; l |= 0x100;}if(_t_haipai_flag) l=-2;else if(_t[1].open) l |= 0x100;else if(_t_open_mode) l |= 0x200;else if(!(l & 0x100)) l=-1;if(i!=14 || _t_dapai_flag || l!=-1 || graph_noSprite) _t_pai_UR1(l, x1, y1);}y+=32;}if(!_t_fulou_dir){x=1144-32; y=730; i=_t[1].fulou_ctr; k=i*5;while(--i>-1){k-=5;if(_t[1].fuloupai[k+4]){ y-=128; continue; }if(_t[1].fuloupai[k+3] && !_t[1].fulou_jiagang[i]){ y-=136; continue; }y-=104;}i=_t[1].fulou_ctr; k=i*5;while(--i>-1){k-=5;if(_t[1].fuloupai[k+4]){if(_t_gamemode!=_T_GAMEMODE_GUOJI){if(_t[1].fuloupai[k+4] & 0x10000){_t[1].fuloupai[k+4] &= 0xffff;_t_h5_paiX=_t_h5_arrowX=x-48;_t_h5_paiY=_t_h5_arrowY=y-8;_t_h5_arrowD=2;}_t_pai_H(_t[1].fuloupai[k], x, y);_t_pai_H(-1, x, y+32);_t_pai_H(-1, x, y+64);_t_pai_H(_t[1].fuloupai[k+4], x, y+96);}else if(!_t[1].open && !_t_open_mode){_t_pai_H(-1, x, y);_t_pai_H(-1, x, y+32);_t_pai_H(-1, x, y+64);_t_pai_H(-1, x, y+96);}else if(_t[1].open==2){_t_pai_H(_t[1].fuloupai[k+4], x, y);_t_pai_H(-1, x, y+32);_t_pai_H(-1, x, y+64);_t_pai_H(_t[1].fuloupai[k], x, y+96);}else {_t_pai_H(_t[1].fuloupai[k+4], x, y);_t_pai_H(_t[1].fuloupai[k+2], x, y+32);_t_pai_H(_t[1].fuloupai[k+1], x, y+64);_t_pai_H(_t[1].fuloupai[k], x, y+96);}y+=128;continue;}if(_t[1].fuloupai[k+3] && _t[1].fulou_jiagang[i]){j=3;while(--j>=0){if((l=_t[1].fuloupai[k+j]) & 0x80){if(_t[1].fuloupai[k+3] & 0x10000){_t[1].fuloupai[k+3] &= 0xffff;_t_h5_paiX=_t_h5_arrowX=x-82;_t_h5_paiY=_t_h5_arrowY=y;_t_h5_arrowD=2;}_t_pai_V(l | 0x80, x+7, y);_t_pai_V(_t[1].fuloupai[k+3] | 0x80, x-33, y);y+=40; continue;}_t_pai_H(l, x, y);y+=32;}continue;}j=3;if(_t[1].fuloupai[k+3]){ ++j; }while(--j>=0){if((l=_t[1].fuloupai[k+j]) & 0x80){_t_pai_V(l, x+7, y);y+=40; continue;}_t_pai_H(l, x, y);y+=32;}}}else {x=1144-32; y=130; i=_t[1].fulou_ctr; k=i*5;i=-1; k=-5;while(++i<_t[1].fulou_ctr){k+=5;if(_t[1].fuloupai[k+4]){if(_t_gamemode!=_T_GAMEMODE_GUOJI){if(_t[1].fuloupai[k+4] & 0x10000){_t[1].fuloupai[k+4] &= 0xffff;_t_h5_paiX=_t_h5_arrowX=x-48;_t_h5_paiY=_t_h5_arrowY=y-8;_t_h5_arrowD=2;}_t_pai_H(_t[1].fuloupai[k], x, y);_t_pai_H(-1, x, y+32);_t_pai_H(-1, x, y+64);_t_pai_H(_t[1].fuloupai[k+4], x, y+96);}else if(!_t[1].open && !_t_open_mode){_t_pai_H(-1, x, y);_t_pai_H(-1, x, y+32);_t_pai_H(-1, x, y+64);_t_pai_H(-1, x, y+96);}else if(_t[1].open==2){_t_pai_H(_t[1].fuloupai[k+4], x, y);_t_pai_H(-1, x, y+32);_t_pai_H(-1, x, y+64);_t_pai_H(_t[1].fuloupai[k], x, y+96);}else {_t_pai_H(_t[1].fuloupai[k+4], x, y);_t_pai_H(_t[1].fuloupai[k+2], x, y+32);_t_pai_H(_t[1].fuloupai[k+1], x, y+64);_t_pai_H(_t[1].fuloupai[k], x, y+96);}y+=128;continue;}if(_t[1].fuloupai[k+3] && _t[1].fulou_jiagang[i]){j=3;while(--j>=0){if((l=_t[1].fuloupai[k+j]) & 0x80){if(_t[1].fuloupai[k+3] & 0x10000){_t[1].fuloupai[k+3] &= 0xffff;_t_h5_paiX=_t_h5_arrowX=x-82;_t_h5_paiY=_t_h5_arrowY=y;_t_h5_arrowD=2;}_t_pai_V(l | 0x80, x+7, y);_t_pai_V(_t[1].fuloupai[k+3] | 0x80, x-33, y);y+=40; continue;}_t_pai_H(l, x, y);y+=32;}continue;}j=3;if(_t[1].fuloupai[k+3]){ ++j; }while(--j>=0){if((l=_t[1].fuloupai[k+j]) & 0x80){_t_pai_V(l, x+7, y);y+=40; continue;}_t_pai_H(l, x, y);y+=32;}}}_t_nukidora_disp1();if(_t[1].open){x=1110; y=154;if(_t_fulou_dir){y=232+96*_t[1].fulou_ctr;}i=10; while((i-=2)>=0){ if(_t[1].fu[i]>-1){ i+=2; break; } }if(i>-1){while((i-=2)>=0){j=_t[1].fu[i];_t_fu_disp4menzi (3, j, _t[1].fu[i+1], x, y);if((j=_t[1].fu[i])==2) y+=64; else y+=96;}x=1084;if(!_t_fulou_dir){y=730; i=_t[1].fulou_ctr; k=i*5;while(--i>-1){k-=5;if(_t[1].fuloupai[k+4]){ y-=128; continue; }if(_t[1].fuloupai[k+3] && !_t[1].fulou_jiagang[i]){ y-=136; continue; }y-=104;}i=_t[1].fulou_ctr; k=i*5;while(--i>-1){k-=5;if(_t[1].fuloupai[k+4]){_t_fu_disp4menzi (1, 4, _t[1].fulou_fu[i], x, y);y+=128;continue;}if(_t[1].fuloupai[k+3] && !_t[1].fulou_jiagang[i]){_t_fu_disp4menzi (1, -4, _t[1].fulou_fu[i], x, y);y+=136;continue;}_t_fu_disp4menzi (1, -3, _t[1].fulou_fu[i], x, y);y+=104;}}else {i=_t[1].fulou_ctr; y=130;i=-1; k=-5;while(++i<_t[1].fulou_ctr){k+=5;if(_t[1].fuloupai[k+4]){_t_fu_disp4menzi (1, 4, _t[1].fulou_fu[i], x, y);y+=128;continue;}if(_t[1].fuloupai[k+3] && !_t[1].fulou_jiagang[i]){_t_fu_disp4menzi (1, -4, _t[1].fulou_fu[i], x, y);y+=136;continue;}_t_fu_disp4menzi (1, -3, _t[1].fulou_fu[i], x, y);y+=104;}}}}return;}y=250+96*_t[jia].fulou_ctr-_t_disp_YOffset;if(_t_fulou_dir) y=146;var dy=0;if(_t_players==3){y-=80; dy=-80;}if(_t_fulou_dir){putRectangleAbs(0, 146+dy, 136, 654+dy, _t_tableColor);}else {putRectangleAbs(0, 258+dy, 136, 750+dy, _t_tableColor);}i=3*_t[jia].fulou_ctr; while(++i<15){if((l=_t[jia].shupai[i])!=0){var x1=8+48, y1=y;if(l & 0x4000){ y1+=8; l &= 0x041ff; l |= 0x100; }else if(i==14 && _t_dapai_flag==0 && (l & 0x200)){if(_t[jia].fu[0]<1) x1+=60;y1+=8; ; l &= 0x040ff; l |= 0x100;}if(_t_haipai_flag) l=-2;else if(_t[jia].open) l |= 0x100;else if(_t_open_mode) l |= 0x200;else if(!(l & 0x100)) l=-1;if(i!=14 || _t_dapai_flag || l!=-1 || graph_noSprite) _t_pai_UR3(l, x1, y1);}y+=32;}if(!_t_fulou_dir){x=8; y=150; i=-1; k=-5;if(_t_players==3) y-=100;while(++i<_t[jia].fulou_ctr){k+=5;if(_t[jia].fuloupai[k+4]){if(_t_gamemode!=_T_GAMEMODE_GUOJI){if(_t[jia].fuloupai[k+4] & 0x10000){_t[jia].fuloupai[k+4] &= 0xffff;_t_h5_paiX=_t_h5_arrowX=x+52;_t_h5_paiY=_t_h5_arrowY=y+88;_t_h5_arrowD=0;}_t_pai_H(_t[jia].fuloupai[k] ^ 0x80, x, y);_t_pai_H(-1, x, y+32);_t_pai_H(-1, x, y+64);_t_pai_H(_t[jia].fuloupai[k+4] ^ 0x80, x, y+96);}else if(!_t[jia].open && !_t_open_mode){_t_pai_H(-1, x, y);_t_pai_H(-1, x, y+32);_t_pai_H(-1, x, y+64);_t_pai_H(-1, x, y+96);}else if(_t[jia].open==2){_t_pai_H(_t[jia].fuloupai[k+4] ^ 0x80, x, y);_t_pai_H(-1, x, y+32);_t_pai_H(-1, x, y+64);_t_pai_H(_t[jia].fuloupai[k] ^ 0x80, x, y+96);}else {_t_pai_H(_t[jia].fuloupai[k+4] ^ 0x80, x, y);_t_pai_H(_t[jia].fuloupai[k+2] ^ 0x80, x, y+32);_t_pai_H(_t[jia].fuloupai[k+1] ^ 0x80, x, y+64);_t_pai_H(_t[jia].fuloupai[k] ^ 0x80, x, y+96);}y+=128;continue;}if(_t[jia].fuloupai[k+3] && _t[jia].fulou_jiagang[i]){j=-1;while(++j<3){if((l=_t[jia].fuloupai[k+j]) & 0x80){if(_t[jia].fuloupai[k+3] & 0x10000){_t[jia].fuloupai[k+3] &= 0xffff;_t_h5_paiX=_t_h5_arrowX=x+82;_t_h5_paiY=_t_h5_arrowY=y;_t_h5_arrowD=0;}_t_pai_V(l & 0x7f, x, y);_t_pai_V(_t[jia].fuloupai[k+3] & 0x7f, x+40, y);y+=40; continue;}_t_pai_H(l | 0x80, x, y);y+=32;}continue;}j=-1; while(++j<4){if((l=_t[jia].fuloupai[k+j]) & 0x80){_t_pai_V(l ^ 0x80, x, y);y+=40; continue;}if(l){_t_pai_H(l ^ 0x80, x, y);y+=32;}}}}else {x=8; y=750;i=_t[jia].fulou_ctr; k=i*5;while(--i>-1){k-=5;if(_t[jia].fuloupai[k+4]){ y-=128; continue; }if(_t[jia].fuloupai[k+3] && !_t[jia].fulou_jiagang[i]){ y-=136; continue; }y-=104;}i=_t[jia].fulou_ctr; k=i*5; while(--i>-1){k-=5;if(_t[jia].fuloupai[k+4]){if(_t_gamemode!=_T_GAMEMODE_GUOJI){if(_t[jia].fuloupai[k+4] & 0x10000){_t[jia].fuloupai[k+4] &= 0xffff;_t_h5_paiX=_t_h5_arrowX=x+52;_t_h5_paiY=_t_h5_arrowY=y+88;_t_h5_arrowD=0;}_t_pai_H(_t[jia].fuloupai[k] ^ 0x80, x, y);_t_pai_H(-1, x, y+32);_t_pai_H(-1, x, y+64);_t_pai_H(_t[jia].fuloupai[k+4] ^ 0x80, x, y+96);}else if(!_t[jia].open && !_t_open_mode){_t_pai_H(-1, x, y);_t_pai_H(-1, x, y+32);_t_pai_H(-1, x, y+64);_t_pai_H(-1, x, y+96);}else if(_t[jia].open==2){_t_pai_H(_t[jia].fuloupai[k+4] ^ 0x80, x, y);_t_pai_H(-1, x, y+32);_t_pai_H(-1, x, y+64);_t_pai_H(_t[jia].fuloupai[k] ^ 0x80, x, y+96);}else {_t_pai_H(_t[jia].fuloupai[k+4] ^ 0x80, x, y);_t_pai_H(_t[jia].fuloupai[k+2] ^ 0x80, x, y+32);_t_pai_H(_t[jia].fuloupai[k+1] ^ 0x80, x, y+64);_t_pai_H(_t[jia].fuloupai[k] ^ 0x80, x, y+96);}y+=128;continue;}if(_t[jia].fuloupai[k+3] && _t[jia].fulou_jiagang[i]){j=-1;while(++j<3){if((l=_t[jia].fuloupai[k+j]) & 0x80){if(_t[jia].fuloupai[k+3] & 0x10000){_t[jia].fuloupai[k+3] &= 0xffff;_t_h5_paiX=_t_h5_arrowX=x+82;_t_h5_paiY=_t_h5_arrowY=y;_t_h5_arrowD=0;}_t_pai_V(l & 0x7f, x, y);_t_pai_V(_t[jia].fuloupai[k+3] & 0x7f, x+40, y);y+=40;continue;}_t_pai_H(l | 0x80, x, y);y+=32;}continue;}j=-1; while(++j<4){if((l=_t[jia].fuloupai[k+j]) & 0x80){_t_pai_V(l ^ 0x80, x, y);y+=40;continue;}if(l){_t_pai_H(l ^ 0x80, x, y);y+=32;}}}}_t_nukidora_disp3();if(_t[jia].open && _t[jia].fu[0]>-1){x=30; y=282+96*_t[jia].fulou_ctr; i=-2;if(_t_players==3){y-=80;if(_t_fulou_dir) y-=50;}else if(_t_fulou_dir) y=178;while((i+=2)<10){if((j=_t[jia].fu[i])<0) break;_t_fu_disp4menzi (1, j, _t[jia].fu[i+1], x, y);if((j=_t[jia].fu[i])==2) y+=64; else y+=96;}if(!_t_fulou_dir){x=48+8; y=150;if(_t_players==3) y-=100;i=-1; k=-5; while(++i<_t[jia].fulou_ctr){k+=5;if(_t[jia].fuloupai[k+4]){_t_fu_disp4menzi (3, 4, _t[jia].fulou_fu[i], x, y);y+=128;continue;}if(_t[jia].fuloupai[k+3] && !_t[jia].fulou_jiagang[i]){_t_fu_disp4menzi (3, -4, _t[jia].fulou_fu[i], x, y);y+=136;continue;}_t_fu_disp4menzi (3, -3, _t[jia].fulou_fu[i], x, y);y+=104;}}else {x=48+8; y=750;i=_t[jia].fulou_ctr; k=i*5;while(--i>-1){k-=5;if(_t[jia].fuloupai[k+4]){ y-=128; continue; }if(_t[jia].fuloupai[k+3] && !_t[jia].fulou_jiagang[i]){ y-=136; continue; }y-=104;}i=_t[jia].fulou_ctr; k=i*5; while(--i>-1){k-=5;if(_t[jia].fuloupai[k+4]){_t_fu_disp4menzi (3, 4, _t[jia].fulou_fu[i], x, y);y+=128;continue;}if(_t[jia].fuloupai[k+3] && !_t[jia].fulou_jiagang[i]){_t_fu_disp4menzi (3, -4, _t[jia].fulou_fu[i], x, y);y+=136;continue;}_t_fu_disp4menzi (3, -3, _t[jia].fulou_fu[i], x, y);y+=104;}}}return;}_t_haipai_flag=0;function _tm_shupai_disp(jia){var x, y, i, j, k, j1, l, x1, y1, l, n, o, xx, yy;var tm_p=new Array(3);_t_imageRate=1;if(jia==0){xx=1006;yy=814-_t_disp_YOffset;_t_imageRate=1.2;if(_t_fulou_dir){xx=x=974-144*_t[0].fulou_ctr;putRectangleAbs(202, yy-22*_t_imageRate, 1024, yy+68*_t_imageRate, _t_tableColor);}else {putRectangleAbs(xx-40*16*_t_imageRate-4, yy-22*_t_imageRate, xx+41*_t_imageRate, yy+68*_t_imageRate, _t_tableColor);}_t_nukidora_disp0();_t_imageRate=1.2; y=814-_t_disp_YOffset;x=xx; k=17;while(--k>=3*_t[0].fulou_ctr){i=_tm_suff[k];j=_t[0].shupai[i];if(i==14 && j==0){_t_pai_UR0(0xff, x, 710);x-=40*_t_imageRate;continue;}if(j & 0x4000)_t_pai_V(j & 0x41ff, x+16*_t_imageRate, y);else if(j & 0x200)_t_pai_V(j & 0x01ff, x+16*_t_imageRate, y);else {if(_t_haipai_flag && (j & 0x3f)) j=-2;if((j & 0x300)!=0 || _t[0].open)_t_pai_V(j, x, y);else if(j & 0x1000)_t_pai_V(-1, x, y);else
_t_pai_UR0(j, x, y);}x-=40*_t_imageRate;}_t_imageRate=1.2; y=844-6;if(!_t_fulou_dir){x=165;i=-1; k=-5;while(++i<_t[0].fulou_ctr){k+=5;if((l=_t[0].fuloupai[k+4])!=0){_t[0].fuloupai[k+4] &= 0xffff;l &= 0x7f;if(!_t[0].open && !_t_open_mode){_t_pai_H(-1, x+36*_t_imageRate, y-32*_t_imageRate);_t_pai_UR0(l, x, y);_t_pai_V(-1, x+40*_t_imageRate, y);_t_pai_V(-1, x+80*_t_imageRate, y);}else if(_t[0].open>1){_t_pai_H(-1, x+36*_t_imageRate, y-32*_t_imageRate);_t_pai_V(l,  x, y);_t_pai_V(-1, x+40*_t_imageRate, y);_t_pai_V(l,  x+80*_t_imageRate, y);}else {_t_pai_H(l, x+36*_t_imageRate, y-32*_t_imageRate);_t_pai_V(l, x, y);_t_pai_V(l, x+40*_t_imageRate, y);_t_pai_V(l, x+80*_t_imageRate, y);}x+=120*_t_imageRate; continue;}j=-1; while(++j<3){if((l=_t[0].fuloupai[k+j]) & 0x80){if(_t[0].fuloupai[k+3] & 0x10000){_t[0].fuloupai[k+3] &= 0xffff;_t_h5_paiX=_t_h5_arrowX=x;_t_h5_paiY=_t_h5_arrowY=y-62-16*_t_imageRate;_t_h5_arrowD=1;}if(_t[0].fuloupai[k+3]){_t_pai_H(_t[0].fuloupai[k+3] & 0x7f, x, y-24*_t_imageRate);}_t_pai_H(l ^ 0x80, x, y+8*_t_imageRate);x+=48*_t_imageRate; continue;}_t_pai_V(l, x, y);x+=40*_t_imageRate;}}}else {x=1110;i=-1; k=-5;while(++i<_t[0].fulou_ctr){k+=5;if((l=_t[0].fuloupai[k+4])!=0){x-=120*_t_imageRate;_t[0].fuloupai[k+4] &= 0xffff;l &= 0x7f;if(!_t[0].open && !_t_open_mode){_t_pai_H(-1, x+36*_t_imageRate, y-32*_t_imageRate);_t_pai_UR0(l, x, y);_t_pai_V(-1, x+40*_t_imageRate, y);_t_pai_V(-1, x+80*_t_imageRate, y);}else if(_t[0].open>1){_t_pai_H(-1, x+36*_t_imageRate, y-32*_t_imageRate);_t_pai_V(l,  x, y);_t_pai_V(-1, x+40*_t_imageRate, y);_t_pai_V(l,  x+80*_t_imageRate, y);}else {_t_pai_H(l, x+36*_t_imageRate, y-32*_t_imageRate);_t_pai_V(l, x, y);_t_pai_V(l, x+40*_t_imageRate, y);_t_pai_V(l, x+80*_t_imageRate, y);}continue;}j=3; while(--j>-1){if((l=_t[0].fuloupai[k+j]) & 0x80){x-=48*_t_imageRate;if(_t[0].fuloupai[k+3] & 0x10000){_t[0].fuloupai[k+3] &= 0xffff;_t_h5_paiX=_t_h5_arrowX=x;_t_h5_paiY=_t_h5_arrowY=y-62-16*_t_imageRate;_t_h5_arrowD=1;}if(_t[0].fuloupai[k+3]){_t_pai_H(_t[0].fuloupai[k+3] & 0x7f, x, y-24*_t_imageRate);}_t_pai_H(l ^ 0x80, x, y+8*_t_imageRate);continue;}x-=40*_t_imageRate;_t_pai_V(l, x, y);}}}_t_imageRate=1;return;}if(jia==2){x=224; y=0;if(_t_fulou_dir){x=296+120*_t[2].fulou_ctr;putRectangleAbs(284, 0, 980, 96, _t_tableColor);}else {putRectangleAbs(222, 0, 906, 96, _t_tableColor);}k=17;while(--k>=3*_t[2].fulou_ctr){i=_tm_suff[k];var x1=x, y1=y;j=_t[2].shupai[i];if(_t_haipai_flag && j){_t_pai_V(-1, x1, y1+24);}else if(j & 0x4000) _t_pai_V((j & 0x40ff) ^ 0x80, x1-8, y1+32);else if(j & 0x200){if(i==14){if(_t_dapai_flag==0){ x1-=8; y1+=64; }}_t_pai_V((j & 0x40ff) ^ 0x80, x1, y1);}else if((j & 0x100) || _t[jia].open){_t_pai_V((j & 0x40ff) ^ 0x80, x1, y1+32);}else if(j & 0x1000){_t_pai_V(-1, x1, y1+32);}else if(j){if(_t_open_mode) _t_pai_V(((j & 0x40ff) ^ 0x80) | 0x200, x, y+32);else if(i!=14 || _t_dapai_flag || graph_noSprite) _t_pai_UR2(-1, x1, y1);}x+=40;}if(!_t_fulou_dir){i=-1; ; k=-5; x=990; y=0;while(++i<_t[2].fulou_ctr){k+=5;if(_t[2].fuloupai[k+4]){_t[2].fuloupai[k+4] &= 0xffff;x-=120;l=_t[2].fuloupai[k+4] | 0x80; var l2=l;if(!_t[2].open && !_t_open_mode) l=l2=-1;else if(_t[2].open>1) l=-1;else l=l2=l | 0x80;_t_pai_V(l2, x, y);_t_pai_V(l,  x+40, y);_t_pai_V(l2, x+80, y);_t_pai_H(l,  x+36, y+40);continue;}j=-1; while(++j<3){if(!(l=_t[2].fuloupai[k+j])) continue;if(l & 0x80){x-=48;if(_t[2].fuloupai[k+3] & 0x10000){_t[2].fuloupai[k+3] &= 0xffff;_t_h5_paiX=_t_h5_arrowX=x;_t_h5_paiY=_t_h5_arrowY=80;_t_h5_arrowD=3;}_t_pai_H(l, x, y);if(_t[2].fuloupai[k+3]) _t_pai_H(_t[2].fuloupai[k+3] | 0x80, x, y+32);continue;}x-=40;_t_pai_V(l ^ 0x80, x, y);}}}else {x=240; y=0;i=-1; k=-5;while(++i<_t[jia].fulou_ctr){k+=5;if(_t[2].fuloupai[k+4]){_t[2].fuloupai[k+4] &= 0xffff;l=_t[2].fuloupai[k+4] | 0x80; var l2=l;if(!_t[2].open && !_t_open_mode) l=l2=-1;else if(_t[2].open>1) l=-1;else l=l2=l | 0x80;_t_pai_V(l2, x, y);_t_pai_V(l,  x+40, y);_t_pai_V(l2, x+80, y);_t_pai_H(l,  x+36, y+40);x+=120;continue;}j=3; while(--j>-1){if(!(l=_t[2].fuloupai[k+j])) continue;if(l & 0x80){if(_t[2].fuloupai[k+3] & 0x10000){_t[2].fuloupai[k+3] &= 0xffff;_t_h5_paiX=_t_h5_arrowX=x;_t_h5_paiY=_t_h5_arrowY=80;_t_h5_arrowD=3;}_t_pai_H(l, x, y);if(_t[2].fuloupai[k+3]) _t_pai_H(_t[2].fuloupai[k+3] | 0x80, x, y+32);x+=48;continue;}_t_pai_V(l ^ 0x80, x, y);x+=40;}}}_t_nukidora_disp2();_t_imageRate=1;return;}_t_imageRate=1;if(jia==1){y=98; k=17;if(_t_fulou_dir){y=130+96*_t[1].fulou_ctr;putRectangleAbs(1063, 114, 1200, 724, _t_tableColor);}else {putRectangleAbs(1063, 104, 1200, 694, _t_tableColor);}while(--k>=3*_t[1].fulou_ctr){i=_tm_suff[k];if((l=_t[1].shupai[i])!=0){var x1=1144-48, y1=y;if(l & 0x4000){ y1-=8; l &= 0x040ff; l |= 0x100; }else if(i==14 && _t_dapai_flag==0 && (l & 0x200)){ x1-=60; y1-=8; l &= 0x040ff; l |= 0x100; }if(_t_haipai_flag) l=-2;else if(_t[1].open) l |= 0x100;else if(_t_open_mode) l |= 0x200;else if(l & 0x1000) l=-2;else if(!(l & 0x100)) l=-1;if(i!=14 || _t_dapai_flag || l!=-1 || graph_noSprite) _t_pai_UR1(l, x1, y1);}y+=32;}if(!_t_fulou_dir){y=746-_t[1].fulou_ctr*104;i=_t[1].fulou_ctr; k=i*5; while(--i>=0){k-=5;if((l=_t[1].fuloupai[k+4])!=0) y+=8;}x=1144-32; i=_t[1].fulou_ctr; k=i*5;while(--i>=0){k-=5;if((l=_t[1].fuloupai[k+4])!=0){_t[1].fuloupai[k+4] &= 0xffff;l &= 0x7f; var l2=l;if(!_t[1].open && !_t_open_mode) l=l2=-1;else if(_t[1].open>1) l=-1;_t_pai_H(l2, x, y);_t_pai_H(l , x, y+32);_t_pai_H(l2, x, y+64);_t_pai_V(l , x-40, y+28);y+=96; continue;}j=3; while(--j>-1){if((l=_t[1].fuloupai[k+j]) & 0x80){_t_pai_V(l | 0x80, x+7, y);if(_t[1].fuloupai[k+3]){_t_pai_V(_t[1].fuloupai[k+3] | 0x80, x-33, y);if(_t[1].fuloupai[k+3] & 0x10000){_t[1].fuloupai[k+3] &= 0xffff;_t_h5_paiX=_t_h5_arrowX=x-82;_t_h5_paiY=_t_h5_arrowY=y;_t_h5_arrowD=2;}}y+=40; continue;}_t_pai_H(l, x, y);y+=32;}}}else {y=100; x=1144-32;i=-1; k=-5; while(++i<_t[1].fulou_ctr){k+=5;if((l=_t[1].fuloupai[k+4])!=0){_t[1].fuloupai[k+4] &= 0xffff;l &= 0x7f; var l2=l;if(!_t[1].open && !_t_open_mode) l=l2=-1;else if(_t[1].open>1) l=-1;_t_pai_H(l2, x, y);_t_pai_H(l , x, y+32);_t_pai_H(l2, x, y+64);_t_pai_V(l , x-40, y+28);y+=96; continue;}j=3; while(--j>-1){if((l=_t[1].fuloupai[k+j]) & 0x80){_t_pai_V(l | 0x80, x+7, y);if(_t[1].fuloupai[k+3]){_t_pai_V(_t[1].fuloupai[k+3] | 0x80, x-33, y);if(_t[1].fuloupai[k+3] & 0x10000){_t[1].fuloupai[k+3] &= 0xffff;_t_h5_paiX=_t_h5_arrowX=x-82;_t_h5_paiY=_t_h5_arrowY=y;_t_h5_arrowD=2;}}y+=40; continue;}_t_pai_H(l, x, y);y+=32;}}}_t_nukidora_disp1();return;}if(_t_fulou_dir){putRectangleAbs(0, 134, 136, 728, _t_tableColor);}else {putRectangleAbs(0, 130, 136, 764, _t_tableColor);}if(!_t_fulou_dir){x=8; y=130; i=-1; k=-5;while(++i<_t[jia].fulou_ctr){k+=5;if((l=_t[jia].fuloupai[k+4])!=0){_t[jia].fuloupai[k+4] &= 0xffff;l |= 0x80; var l2=l;if(!_t[jia].open && !_t_open_mode) l=l2=-1;else if(_t[jia].open>1) l=-1;_t_pai_H(l2, x, y);_t_pai_H(l,  x, y+32);_t_pai_H(l2, x, y+64);_t_pai_V(l,  x+48, y+28);y+=96;continue;}j=-1;while(++j<3){if((l=_t[jia].fuloupai[k+j]) & 0x80){_t_pai_V(l & 0x7f, x, y);if(_t[jia].fuloupai[k+3]){_t_pai_V(_t[jia].fuloupai[k+3] & 0x7f, x+40, y);if(_t[jia].fuloupai[k+3] & 0x10000){_t[jia].fuloupai[k+3] &= 0xffff;_t_h5_paiX=_t_h5_arrowX=x+82;_t_h5_paiY=_t_h5_arrowY=y;_t_h5_arrowD=0;}}y+=40; continue;}_t_pai_H(l | 0x80, x, y);y+=32;}}}else {x=8; y=750;i=_t[jia].fulou_ctr; k=i*5;while(--i>-1){k-=5;if(_t[jia].fuloupai[k+4]){ y-=96; continue; }y-=104;}i=_t[jia].fulou_ctr; k=i*5; while(--i>-1){k-=5;if((l=_t[jia].fuloupai[k+4])!=0){_t[jia].fuloupai[k+4] &= 0xffff;l |= 0x80; var l2=l;if(!_t[jia].open && !_t_open_mode) l=l2=-1;else if(_t[jia].open>1) l=-1;_t_pai_H(l2, x, y);_t_pai_H(l,  x, y+32);_t_pai_H(l2, x, y+64);_t_pai_V(l,  x+48, y+28);y+=96;continue;}j=-1;while(++j<3){if((l=_t[jia].fuloupai[k+j]) & 0x80){_t_pai_V(l & 0x7f, x, y);if(_t[jia].fuloupai[k+3]){_t_pai_V(_t[jia].fuloupai[k+3] & 0x7f, x+40, y);if(_t[jia].fuloupai[k+3] & 0x10000){_t[jia].fuloupai[k+3] &= 0xffff;_t_h5_paiX=_t_h5_arrowX=x+82;_t_h5_paiY=_t_h5_arrowY=y;_t_h5_arrowD=0;}}y+=40; continue;}_t_pai_H(l | 0x80, x, y);y+=32;}}}_t_nukidora_disp3();y=150+96*_t[jia].fulou_ctr-_t_disp_YOffset; k=3*_t[jia].fulou_ctr-1;if(_t_fulou_dir) y=130;while(++k<17){i=_tm_suff[k];if((l=_t[jia].shupai[i])!=0){var x1=8+48, y1=y;if(l & 0x4000){ y1+=8; l &= 0x041ff; l |= 0x100; }else if(i==14 && _t_dapai_flag==0 && (l & 0x200)){ x1+=60; y1+=8; ; l &= 0x040ff; l |= 0x100; }if(_t_haipai_flag) l=-2;else if(_t[jia].open) l |= 0x100;else if(_t_open_mode) l |= 0x200;else if(l & 0x1000) l=-2;else if(!(l & 0x100)) l=-1;if(i!=14 || _t_dapai_flag || l!=-1 || graph_noSprite) _t_pai_UR3(l, x1, y1);}y+=32;}if(_t_fulou_dir && _t_zhuangjia==2) _t_h5_sticks_and_dice_disp();return;}_t_h5_bipai2cpuOffset=0;function _t_bipai_disp(){var i=_t_players; while(--i>-1){_t_bipai_disp_sub(i);}}function _t_bipai_disp_sub(jia){var x, y, i, l;_t_imageRate=1;if(jia==0){x=340; y=680-_t_disp_YOffset; l=12; var dy=0;if(_t_gamemode==_T_GAMEMODE_TAIWAN){x+=40; l-=2;}if(_t_lang!='ja') x-=80;if(_t_rule.hana){ x-=40; l++; }if(_t_players==3){x-=40; l+=2;if(_t_fulou_dir) x-=40;}if(_t_gamemode==_T_GAMEMODE_GUOJI){x=380; l++;}putRectangleAbs(x, y, x+40*l, y+72, _t_tableColor);i=-2;while((i+=2)<32){_t_yizhuang_V(_t_bipai4disp[0][i], _t_bipai4disp[0][i+1], 0, x, y+dy);x+=40;}return;}if((jia==2 && _t_players==4) || (jia==1 && _t_players==2)){x=820-_t_h5_bipai2cpuOffset; i=-2; var xl=860, xr=819-40*12-_t_h5_bipai2cpuOffset;if(_t_gamemode==_T_GAMEMODE_GUOJI){x-=120; xr-=120; xl-=120;if(_t_fulou_dir){x+=200; xr+=200; xl+=200;}}else if(_t_gamemode==_T_GAMEMODE_TAIWAN){x-=140; xr-=80; xl-=160;if(_t_fulou_dir){x+=180; xl+=200; xr+=160;}}putRectangleAbs(xr, 100-_t_disp_YOffset, xl, 171-_t_disp_YOffset, _t_tableColor);while((i+=2)<32){_t_yizhuang_V(_t_bipai4disp[jia][i], _t_bipai4disp[jia][i+1], 1, x, 100-_t_disp_YOffset);x-=40;}return;}if(jia==1){y=594-_t_disp_YOffset+24;if(_t_players==3){y-=64;putRectangleAbs(921, 0, 969, y, _t_tableColor);}putRectangleAbs(920, y-33*13, 969, y+48, _t_tableColor);i=-2; while((i+=2)<32){if(!_t_bipai4disp[1][i+2] && _t_bipai4disp[1][i+3] && _t_bipai4disp[1][i] && _t_bipai4disp[1][i+1]<0) ;else if(_t_bipai4disp[1][i+1]>0 && i>=2 && _t_bipai4disp[1][i-2]<0) y-=16;y-=33;}i=32; while((i-=2)>-1){if(!_t_bipai4disp[1][i] && !_t_bipai4disp[1][i+1]){y+=33; continue;}if(!_t_bipai4disp[1][i+2] && _t_bipai4disp[1][i+3] && _t_bipai4disp[1][i] && _t_bipai4disp[1][i+1]<0){putRectangle(922, y-20, 48, 20, 'rgba(0, 0, 0, 0.10)');}else if(_t_bipai4disp[1][i+3]>0 && _t_bipai4disp[1][i]<0) y+=16;_t_yizhuang_H(_t_bipai4disp[1][i], _t_bipai4disp[1][i+1], 0, 922, y);if(!_t_bipai4disp[1][i] && _t_bipai4disp[1][i+1]>0){y+=16;}y+=33;}if(_t_players==4){j=0; i=-1; while(++i<_t[0].fusipai_ctr){if(!((l=_t[0].fusipai2[i]) & 0x7f)) break;if(l<0) continue;if(l & 0x200) continue;j++;}if(j>21) _t_dapai_disp(0);}return;}y=170-_t_disp_YOffset;if(_t_players==3) y-=96;if(_t_gamemode==_T_GAMEMODE_GUOJI && _t_fulou_dir){y+=48;}else if(_t_gamemode==_T_GAMEMODE_TAIWAN){y+=40;if(_t_fulou_dir) y+=40;}if(_t_gamemode!=_T_GAMEMODE_BEINUKI){putRectangleAbs(226, y, 280, y+33*15, _t_tableColor);}else {putRectangleAbs(204, y, 302, y+33*15, _t_tableColor);}i=-2; while((i+=2)<32){if(!_t_bipai4disp[jia][i-2] && _t_bipai4disp[jia][i-1] && _t_bipai4disp[jia][i] && _t_bipai4disp[jia][i+1]<0){putRectangle(230, y-20, 48, 20, 'rgba(0, 0, 0, 0.10)');}_t_yizhuang_H(_t_bipai4disp[jia][i], _t_bipai4disp[jia][i+1], 1, 230, y);y+=33;if(_t_bipai4disp[jia][i+1]>0 && _t_bipai4disp[jia][i+2]!=0 && _t_bipai4disp[jia][i+3]<0) y+=16;}if(_t_players==4){j=0; i=-1; while(++i<_t[2].fusipai_ctr){if(!((l=_t[2].fusipai2[i]) & 0x7f)) break;if(l<0) continue;if(l & 0x200) continue;j++;}if(j>21) _t_dapai_disp(2);}if(_t_gamemode==_T_GAMEMODE_TAIWAN && _t[jia].nukidora_ctr>0){_t_nukidora_disp3();}else if(_t_players==4){_t_nukidora_disp0();if(_t_fulou_dir) _t_nukidora_disp2();}return;}_tm_W=new Array(40, 48, 52, 52, 46, 46, 54, 54);_tm_H=new Array(40, 32, 50, 50, 58, 58, 56, 56);_tm_0X=new Array(5, 3, 4, 5, 6, 7, 3, 4, 5, 6, 7, 2, 3, 4, 5, 6, 7, 8, 1, 2, 3, 4, 5, 6, 7, 8, 9);_tm_0Y=new Array(4, 5, 5, 5, 5, 5, 6, 6, 6, 6, 6, 7, 7, 7, 7, 7, 7, 7, 8, 8, 8, 8, 8, 8, 8, 8, 8);_tm_1X=new Array(5, 6, 7, 7, 7, 8, 8, 8, 8, 9, 9, 9, 9, 9, 10, 10, 10, 10, 10);_tm_1Y=new Array(4, 4, 5, 4, 3, 5, 4, 3, 2, 5, 4, 3, 2, 1, 5, 4, 3, 2, 1);_tm_3Y=new Array(4, 4, 3, 4, 5, 2, 3, 4, 5, 2, 3, 4, 5, 6, 2, 3, 4, 5, 6);function _tm_getFusipaiCoords(jia){var i, j, x=5, y=4, xl, yl, x2, y2;_tm_dapaiA=Math.floor(Math.random()*16);if(jia==0){do {if(_tm_dapai_ctr[0]>=_tm_0X.length){_tm_dapaiHX=_tm_0X[_tm_0X.length-1]; _tm_dapaiHY=_tm_0Y[_tm_0Y.length-1];break;}_tm_dapaiHX=_tm_0X[_tm_dapai_ctr[0]]; _tm_dapaiHY=_tm_0Y[_tm_dapai_ctr[0]++];} while(_tm_fusipaiC[_tm_dapaiHX][_tm_dapaiHY]);x=_tm_dapaiHX; y=_tm_dapaiHY;_tm_dapaiX=x1=_tm_fusipaiX[x][y];_tm_dapaiY=y1=_tm_fusipaiY[x][y];_tm_fusipaiX[x][y]=x1;_tm_fusipaiY[x][y]=y1;_tm_fusipaiA[x][y]=_tm_dapaiA;j=y; y2=y1+_tm_H[_tm_dapaiA >> 1];while(++j<9){if(_tm_fusipaiC[x][j]) break;_tm_fusipaiY[x][j]=y2;y2+=56;}i=x; x2=x1+_tm_W[_tm_dapaiA >> 1];while(++i<11){if(_tm_fusipaiC[i][y]) break;_tm_fusipaiX[i][y]=x2;x2+=54;}return;}if(jia==2){do {if(_tm_dapai_ctr[2]>=_tm_0X.length){_tm_dapaiHX=10-_tm_0X[_tm_0X.length-1]; _tm_dapaiHY=8-_tm_0Y[_tm_0Y.length-1];break;}_tm_dapaiHX=10-_tm_0X[_tm_dapai_ctr[2]]; _tm_dapaiHY=8-_tm_0Y[_tm_dapai_ctr[2]++];} while(_tm_fusipaiC[_tm_dapaiHX][_tm_dapaiHY]);x=_tm_dapaiHX; y=_tm_dapaiHY;_tm_dapaiX=x1=_tm_fusipaiX[x+1][y]-_tm_W[_tm_dapaiA >> 1];_tm_dapaiY=y1=_tm_fusipaiY[x][y+1]-_tm_H[_tm_dapaiA >> 1];_tm_fusipaiX[x][y]=x1;_tm_fusipaiY[x][y]=y1;_tm_fusipaiA[x][y]=_tm_dapaiA;j=y; y2=y1;while(--j>=0){y2-=56;_tm_fusipaiY[x][j]=y2;}i=x; x2=x1-54;while(--i>=0){if(_tm_fusipaiC[i][y]) break;_tm_fusipaiX[i][y]=x2;x2-=54;}return;}if(jia==1){do {if(_tm_dapai_ctr[1]>=_tm_1X.length){_tm_dapaiHX=_tm_1X[_tm_1X.length-1]; _tm_dapaiHY=_tm_1Y[_tm_1Y.length-1];break;}_tm_dapaiHX=_tm_1X[_tm_dapai_ctr[1]]; _tm_dapaiHY=_tm_1Y[_tm_dapai_ctr[1]++];} while(_tm_fusipaiC[_tm_dapaiHX][_tm_dapaiHY]);x=_tm_dapaiHX; y=_tm_dapaiHY;_tm_dapaiX=x1=_tm_fusipaiX[x][y]-(_tm_W[_tm_dapaiA >> 1]-54);_tm_dapaiY=y1=_tm_fusipaiY[x][y]-(_tm_H[_tm_dapaiA >> 1]-56);_tm_fusipaiX[x][y]=x1;_tm_fusipaiY[x][y]=y1;_tm_fusipaiA[x][y]=_tm_dapaiA;i=x; x2=x1+_tm_W[_tm_dapaiA >> 1];while(++i<11){_tm_fusipaiX[i][y]=x2;x2+=54;}j=y; y2=y1-56;while(--j>=0){if(_tm_fusipaiC[x][j]) break;_tm_fusipaiY[x][j]=y2;y2-=56;}return;}do {if(_tm_dapai_ctr[3]>=_tm_1X.length){_tm_dapaiHX=10-_tm_1X[_tm_1X.length-1]; _tm_dapaiHY=_tm_3Y[_tm_3Y.length-1];break;}_tm_dapaiHX=10-_tm_1X[_tm_dapai_ctr[3]]; _tm_dapaiHY=_tm_3Y[_tm_dapai_ctr[3]++];} while(_tm_fusipaiC[_tm_dapaiHX][_tm_dapaiHY]);x=_tm_dapaiHX; y=_tm_dapaiHY;_tm_dapaiX=x1=_tm_fusipaiX[x+1][y]-_tm_W[_tm_dapaiA >> 1];_tm_dapaiY=y1=_tm_fusipaiY[x][y];_tm_fusipaiX[x][y]=x1;_tm_fusipaiY[x][y]=y1;_tm_fusipaiA[x][y]=_tm_dapaiA;i=x; x2=x1-54;while(--i>=0){_tm_fusipaiX[i][y]=x2;x2-=54;}j=y; y2=y1+_tm_H[_tm_dapaiA >> 1];while(++j<9){if(_tm_fusipaiC[x][j]) break;_tm_fusipaiY[x][j]=y2;y2+=56;}return;}function _tm_fusipai_disp(){if(_t_gamemode!=_T_GAMEMODE_TAIWAN) return;var i=-1, j, x, y;j=-1; while(++j<_tm_fusipaiC[0].length){i=-1; while(++i<_tm_fusipaiC.length){if(_tm_fusipaiC[i][j]==0) continue;_tm_pai_4dapai(_tm_fusipaiC[i][j], _tm_fusipaiX[i][j], _tm_fusipaiY[i][j]+50, _tm_fusipaiA[i][j]);}}}function _tm_dapai_erase(jia){var i, x, y;putRectangle(_t_h5_paiX, _t_h5_paiY, 48, 69, _t_tableColor);}function _t_dapai_disp(jia){var i, j, p, x, y, x1, y1, l, x2=0, y2=0, lm=6, ln=2, xyb, rf=0;_t_imageRate=1;if(_t_gamemode==_T_GAMEMODE_TAIWAN){if(jia<0){_t_get_dapai_coords(_t_dajia);putRectangle(_t_h5_paiX, _t_h5_paiY, 48, 56, _t_tableColor);return;}if(jia==0) _t_pai_V(_t_dapai_buff & 0x7f, _t_h5_paiX, _t_h5_paiY);else if(jia==2) _t_pai_V(_t_dapai_buff | 0x80, _t_h5_paiX, _t_h5_paiY);else if(jia==1) _t_pai_H(_t_dapai_buff & 0x7f, _t_h5_paiX, _t_h5_paiY);else _t_pai_H(_t_dapai_buff | 0x80, _t_h5_paiX, _t_h5_paiY);return;}var fsp=new Array(), fspc=0, f=0;i=-1; while(++i<_t[jia].fusipai_ctr){if(!((l=_t[jia].fusipai2[i]) & 0x7f)) break;if(l<0) continue;if(l & 0x100) f=0x0100;if(l & 0x200) continue;if(_t_rule_sel['UI_mogiriMark'] && (_t[jia].fusipai2[i] & 0x1000)) f |= 0x6200;fsp[fspc++]=l | f; f=0;}fsp[fspc]=0;if(jia==0){p=-1; xyb=x=480; y=535; x1=y1=0;i=x+440;if(_t_gamemode==_T_GAMEMODE_PENGLI) i+=120;putRectangleAbs(x-2, y, x+(40*lm+8), y+136, _t_tableColor);putRectangleAbs(x-2, y+80, i, y+136, _t_tableColor);x=xyb; i=-1; while(((l=fsp[++i]) & 0x7f)!=0){if(l & 0x100){_t_pai_H(l, x, y+8);x+=48;}else {_t_pai_V(l, x, y);x+=40;}if(i==lm-1 || i==lm+lm-1){x=xyb; y+=40;}}if(_t[0].reach_flag && (_t_gamemode==_T_GAMEMODE_REACH || _t_gamemode==_T_GAMEMODE_EASTERN_BOO)){_t_h5_stick_disp(1, 1, 552, 515, 96, 6);}if(_t_players==3) _t_nukidora_disp0();return;}if(_t_players==4 && jia==2 || _t_players==2){p=-1; xyb=x=680; y=180; x1=y1=0;putRectangleAbs(x-40*lm+26, y-2, x+50, y+140, _t_tableColor);putRectangleAbs(x-40*10, y-2, x+50, y+60, _t_tableColor);if(fspc>lm+lm){i=lm+lm-1; while(++i<fspc){l=fsp[i];if(l & 0x100){_t_pai_H(l ^ 0x80, x-8, y);x-=48;}else {_t_pai_V(l ^ 0x80, x, y);x-=40;}}}y+=40; x=xyb;if(fspc>lm){i=lm-1; while(++i<lm+lm){if(!(l=fsp[i])) break;if(l & 0x100){_t_pai_H(l ^ 0x80, x-8, y);x-=48;}else {_t_pai_V(l ^ 0x80, x, y);x-=40;}}}y+=40; x=xyb;i=-1; while(++i<lm){if(!(l=fsp[i])) break;if(l & 0x100){_t_pai_H(l ^ 0x80, x-8, y);x-=48;}else {_t_pai_V(l ^ 0x80, x, y);x-=40;}}if(_t[jia].reach_flag && (_t_gamemode==_T_GAMEMODE_REACH || _t_gamemode==_T_GAMEMODE_EASTERN_BOO)){_t_h5_stick_disp(1, 1, 552, 326, 96, 6);}if(_t_fulou_dir && _t[jia].nukidora_ctr>4) _t_nukidora_disp2();return;}if(jia==1){p=-1; x=750; xyb=y=510; x1=0; y1=0;i=y-330;if(_t_players==3){xyb=(y-=20);if(_t_gamemode==_T_GAMEMODE_PENGLI){i-=80;}}else if(_t_gamemode==_T_GAMEMODE_GUOJI){xyb=(y+=32); i-=32;}putRectangleAbs(x-2, y-266, x+146, y+16, _t_tableColor);putRectangleAbs(x+94, i, x+146, y+16, _t_tableColor);y=xyb; i=-1; while(++i<lm){if(!((l=fsp[i]) & 0x7f)) break;if(l & 0x100){ y-=40; continue; }y-=32;}while(--i>-1){l=fsp[i];if(l & 0x100){_t_pai_V(l ^ 0x80, x+8, y);y+=40;}else {_t_pai_H(l, x, y);y+=32;}}if(fspc>lm){x+=48; y=xyb; i=lm-1; while(++i<lm+lm){if(!((l=fsp[i]) & 0x7f)) break;if(l & 0x100){ y-=40; continue; }y-=32;}while(--i>lm-1){l=fsp[i];if(l & 0x100){_t_pai_V(l ^ 0x80, x+8, y);y+=40;}else {_t_pai_H(l, x, y);y+=32;}}if(fspc>lm+lm){x+=48; y=xyb;i=lm+lm-1; while(((l=fsp[++i]) & 0x7f)!=0){if(l & 0x100){ y-=40; continue; }y-=32;}while(--i>lm+lm-1){l=fsp[i];if(l & 0x100){_t_pai_V(l ^ 0x80, x+8, y);y+=40;}else {_t_pai_H(l, x, y);y+=32;}}}}if(_t[jia].reach_flag && (_t_gamemode==_T_GAMEMODE_REACH || _t_gamemode==_T_GAMEMODE_EASTERN_BOO)){var y=370; if(_t_players==3) y-=20;_t_h5_stick_disp(1, 0, 732, y, 7, 88);}if(_t_gamemode==_T_GAMEMODE_GUOJI && _t_fulou_dir){_t_bipai_disp_sub(2);}return;}p=-1; x=402; xyb=y=325; i=y+342;if(_t_players==3){xyb=(y-=84);if(_t_gamemode==_T_GAMEMODE_PENGLI){xyb=(y-=32);}}else if(_t_gamemode==_T_GAMEMODE_GUOJI){xyb=(y-=32);}putRectangleAbs(x-100, y-2, x+50, y+lm*32+26, _t_tableColor);putRectangleAbs(x-100, y-2, x-46, i, _t_tableColor);y=xyb; i=-1; while(((l=fsp[++i]) & 0x7f)!=0){if(l & 0x100){_t_pai_V(l, x, y);y+=40;}else {_t_pai_H(l ^ 0x80, x, y);y+=32;}if(i==lm-1 || i==lm+lm-1){y=xyb; x-=48;}}if(_t[jia].reach_flag && (_t_gamemode==_T_GAMEMODE_REACH || _t_gamemode==_T_GAMEMODE_EASTERN_BOO)){var y=378; if(_t_players==3) y-=84;_t_h5_stick_disp(1, 0, 460, y, 7, 88);}}_t_h5_dice=[0, 0, 0];_t_h5_reachbet=0;function _t_h5_sticks_and_dice_disp(){var i, j, k, l, x, y, o, e, dx, dy;if(_t_h5_dice[0]>0){i=2; if(_t_gamemode==_T_GAMEMODE_TAIWAN) i++;if(_t_zhuangjia==0){x=1172; y=840; if(i==3) y-=26;if(_t_players==3) x+=20;dx=0; dy=26;}else if((_t_players==4 && _t_zhuangjia==2) || _t_players==2){x=3; y=3; dx=0; dy=26;}else if(_t_zhuangjia==1){x=1132; y=4;dx=-26; dy=0;}else {x=6; y=854;dx=26; dy=0;}while(--i>=0){_t_h5_dice_disp(_t_h5_dice[i], x, y, 24, 32);x+=dx; y+=dy;}}if(_t_gamemode==_T_GAMEMODE_PENGLI || _t_gamemode==_T_GAMEMODE_ARSHIAR || _t_gamemode==_T_GAMEMODE_GUOJI){return;}if(_t_zhuangjia==0){x=1164; j=_t_tsumibo_ctr;y=800;if(j>5) j=5;i=-1; while(++i<j){x-=8;o=800; if(_t_gamemode==_T_GAMEMODE_BOO) o=790;putPartOfImage(image[0], o, 479, 7, 118, x, y, 7, 90);}_t_h5_stick_number('TSUMIBO_CTR_NUMBER', x, 830, _t_tsumibo_ctr);x-=8; k=Math.floor(_t_h5_reachbet / 10); j=k;if(j>5) j=5;i=-1; while(++i<j){x-=8;putPartOfImage(image[0], 790, 479, 7, 118, x, y, 7, 90);}_t_h5_stick_number('REACHBO_CTR_NUMBER', x, 830, k);return;}if(_t_zhuangjia==1){var y1;x=1060; y1=y=32; j=_t_tsumibo_ctr;if(j>5) j=5;i=-1; while(++i<j){y+=7;o=470; if(_t_gamemode==_T_GAMEMODE_BOO) o=460;putPartOfImage(image[0], 789, o, 118, 7, x, y+4, 98, 6);}_t_h5_stick_number('TSUMIBO_CTR_NUMBER', x+30, y1+6, _t_tsumibo_ctr);k=Math.floor(_t_h5_reachbet / 10); j=k;if(j>5) j=5;if(_t_tsumibo_ctr){ y+=6; }y1=y;i=-1; while(++i<j){y+=7;putPartOfImage(image[0], 789, 460, 118, 7, x, y+4, 98, 6);}_t_h5_stick_number('REACHBO_CTR_NUMBER', x+30, y1+6, k);return;}if(_t_zhuangjia==2 && _t_players==4){x=28; j=_t_tsumibo_ctr;if(j>5) j=5;i=-1; while(++i<j){x+=8;o=800; if(_t_gamemode==_T_GAMEMODE_BOO) o=790;putPartOfImage(image[0], o, 479, 7, 118, x, 0, 7, 90);}_t_h5_stick_number('TSUMIBO_CTR_NUMBER', x-32, 4, _t_tsumibo_ctr);x+=8; k=_t_h5_reachbet/10; j=k;if(j>5) j=5;i=-1; while(++i<j){x+=8;putPartOfImage(image[0], 790, 479, 7, 118, x, 0, 7, 90);}_t_h5_stick_number('REACHBO_CTR_NUMBER', x-32, 4, k);return;}if(_t_zhuangjia==3 || (_t_zhuangjia==2 && _t_players==3)){var y1;x=6; y1=y=848; j=_t_tsumibo_ctr;if(_t_gamemode==_T_GAMEMODE_TAIWAN) x=0;if(j>5) j=5;i=-1;while(++i<j){y-=7;o=470; if(_t_gamemode==_T_GAMEMODE_BOO) o=460;putPartOfImage(image[0], 789, o, 118, 7, x, y, 98, 6);}_t_h5_stick_number('TSUMIBO_CTR_NUMBER', x+30, y1-40, _t_tsumibo_ctr);k=_t_h5_reachbet/10; j=k;if(j>5) j=5;if(_t_tsumibo_ctr){ y1=(y-=6); }i=-1;while(++i<j){y-=7;putPartOfImage(image[0], 789, 460, 118, 7, x, y, 98, 6);}_t_h5_stick_number('REACHBO_CTR_NUMBER', x+30, y1-40, k);}}function _t_h5_stick_number(n, x, y, v){var e;if(v<5) return;newTextArea(n, x, y, 40, 40, 29, 'rgba(0,0,0,0.7)', '#FFF');e=document.getElementById(n);e.style.textAlign='center';e.style.verticalAlign='top';e.style.lineHeight='29px';e.style.fontFamily='serif';e.style.fontWeight='bold';e.innerHTML=v;}wasuji_str=new Array('一', '二', '三', '四', '五', '六', '七', '八', '九');feng_str=new Array('東', '南', '西', '北');fullFeng_str=new Array('東', '南', '西', '北');function _t_playfield(){var i, j, k, x, y, o, yofs=0, e;_t_table_color();if(_t_gamemode!=_T_GAMEMODE_TAIWAN){var c='#ff0000'; if(_t_pai_color[(_t_pai_flag & 1)]=='_4') c='#0000ff';putRectangleAbs(480, 346+yofs, 720, 505+yofs, c);putRectangleAbs(483, 349+yofs, 717, 502+yofs, _t_tableColor);}x=530; y=410+yofs;if(_t_gamemode==_T_GAMEMODE_TAIWAN){x=32; y=32;}var s='';var q=_t_jushou_ctr;if(_t_lang=='en'){q %= _t_players;switch (q){case 0: s='1st '; break;case 1: s='2nd '; break;case 2: s='3rd '; break;case 3: s='4th '; break;}s+='Hand of<br />'+fullFeng_str[(_t_zhuangfeng[0]-0x31) & 3]+'.';_t_centerText('HAND_STATUS-BAKYOKU', x-32, y-16, 208, 64, '#fff', s);}else {if(_t_gamemode==_T_GAMEMODE_BEINUKI || _t_gamemode==_T_GAMEMODE_PENGLI || (_t_players==3 && _t_gamemode==_T_GAMEMODE_CHIP_MAHJONG)){s='第';if(_t_gamemode==_T_GAMEMODE_CHIP_MAHJONG) s=feng_str[(_t_zhuangfeng[0]-0x31) & 3]+'場';}else {i=Math.floor(q / _t_players);q %= _t_players;s=feng_str[(_t_zhuangfeng[0]-0x31) & 3]; j='場';if(_t_zhuangfeng[1]>0x30) j=feng_str[(_t_zhuangfeng[1]-0x31) & 3];if(i>3){ j=s; s='返'; }else if(_t_rule.zhuangfeng==3){j=s; s='表';if(i>0) s='裏';}s+=j;}_t_centerText('HAND_STATUS-BAKYOKU', x, y-3, 140, 32, '#fff', s+wasuji_str[q]+'局');var e=document.getElementById('HAND_STATUS-BAKYOKU');e.style.paddingTop='2px';}_t_h5_sticks_and_dice_disp();}function _t_score_str(score){var j='', i='0', k, s;_t_i='';_t_overflow=0;i='0';if(_t_gamemode==_T_GAMEMODE_GUOJI){i=score;if(score<0) i=-score;i='   '+i.toString(10);i=i.substring(i.length-3, i.length);if(score<0) return('-'+i);return(' '+i);}if(score){i=score;if(score<0) i=-score;i=i.toString(10);if(_t_gamemode==_T_GAMEMODE_REACH || _t_gamemode==_T_GAMEMODE_EASTERN_BOO) i+='00';if(_t_gamemode==_T_GAMEMODE_BOO || _t_gamemode==_T_GAMEMODE_ARSHIAR) i+='0';}if(i.length>5){if(i.length>20){s=i.substring(0, i.length-20)+'.'+i.substring(i.length-20, i.length);s=s.substring(0, 5)+'垓';}else if(i.length>16){s=i.substring(0, i.length-16)+'.'+i.substring(i.length-16, i.length);s=s.substring(0, 5)+'京';}else if(i.length>12){s=i.substring(0, i.length-12)+'.'+i.substring(i.length-12, i.length);s=s.substring(0, 5)+'兆';}else if(i.length>8){s=i.substring(0, i.length-8)+'.'+i.substring(i.length-8, i.length);s=s.substring(0, 5)+'億';}else {s=i.substring(0, i.length-4)+'.'+i.substring(i.length-4, i.length);s=s.substring(0, 5)+'万';}if(s.charAt(4)=='.'){s=' '+s.substring(0, 4)+s.substring(5, s.length);}while(i.length>3){k=i.substring(i.length-3, i.length);i=i.substring(0, i.length-3);if(j=='') j=k; else j=k+','+j;}if(i.length>0){if(j=='') j=i; else j=i+','+j;}if(score<0){j='-'+j;s='-'+s;}else {j=' '+j;s=' '+s;}_t_i=j;return(s);}while(i.length>3){k=i.substring(i.length-3, i.length);i=i.substring(0, i.length-3);if(j=='') j=k; else j=k+','+j;}if(i.length>0){if(j=='') j=i; else j=i+','+j;}if(_t_gamemode!=_T_GAMEMODE_BEINUKI && _t_gamemode!=_T_GAMEMODE_CHIP_MAHJONG && _t_gamemode!=_T_GAMEMODE_TAIWAN){if(score==0) return('      0');if(score<0){j='        '+j;j=j.substring(j.length-6, j.length);return('-'+j);}j='         '+j;j=j.substring(j.length-7, j.length);return(j);}if(score==0){return('   0点');}if(score<0){if(j.length>3){_t_overflow=((j.length-4) >> 1)+1;if(!(j.length & 1)) j=' '+j;}else {j='   '+j;j=j.substring(j.length-3, j.length);}return('-'+j+'点');}if(j.length>4){_t_overflow=((j.length-5) >> 1)+1;if(j.length & 1) j=' '+j;}else {j='    '+j;j=j.substring(j.length-4, j.length);}return(j+'点');}function _t_chip_text(c){var j;if(c<0){j='   '+(-c);j=j.substring(j.length-3, j.length);return('-'+j);}j='    '+c;j=j.substring(j.length-4, j.length);return(j);}function _t_textArea2(x, y, w, jia){var n='SCORE_'+jia, e, c, h=34;if(_t_rule.chip.any || _t_rule.yakitori) h=60;newTextArea(n, x, y, w, h, 29, '#000', '#FFF');e=document.getElementById(n);c='#000';if(_t[jia].menfeng>0 && _t_zhuangjia==jia){c='#ff0';}else if(_t_rule_sel['UI_table']=='') c='#888';e.style.border=c+' solid 1px';e.style.textAlign='right';e.style.fontFamily='serif';e.style.paddingRight='2px';return(e);}_t_h5_gif_chip='data:image/gif;base64,R0lGODlhEAAOAMT/AP/'+'/'+'/'+'/'+'/'+'/Cf7+Cfr6CfT0CcrKCcLCCcHBCcDACb+/Cb29CZ+fDH59CHRyBjY1BS8vBSYmAyAeAgcFAgMFAgEBBAEAAgAAAwAAAgAAAQAAAMDAwAAAAAAAAAAAAAAAAAAAACH5BAEAABoALAAAAAAQAA4AAAVQoCaKS2mOqFYaLJuU6eIGtJHcyyjbBu0HOBXPFuAlXC/ZMVFbOkvL3g/YWh0DhJb0ZrAab1eXlVmcUbvCRIF2Lb90vJ/tjVK2uLmUysRHhQAAOw==';_t_h5_gif_yakitori='data:image/gif;base64,R0lGODlhIwAQAKL/AP/'+'/'+'/'+'/'+'/3zvezVwAAAMDAwAAAAAAAAAAAACH5BAEAAAQALAAAAAAjABAAAANMSLrc/jDKGYW16mKiRdYVyIndd4XnmJbq9rAwKb7yWrtEoOsdr/kXoGVHFAqMyEBv14jZnrjmzdOismhQ6xS1cXZnDq82Symbz2hGAgA7';function _t_score_disp(jia, col){var zr=1, i, e, er, el, o, str;str=_t_score_str(_t[jia].score);var ofs=0;if(_t_gamemode==_T_GAMEMODE_GUOJI) ofs=36;if(_t[jia].menfeng<0) i='';else if(_t[jia].menfeng==0){i='仮';if(_t_lang=='en') i='Tmp.';}else {i=feng_str[(_t[jia].menfeng & 7)-1];if(_t_gamemode==_T_GAMEMODE_BEINUKI || _t_gamemode==_T_GAMEMODE_PENGLI) i=(_t_zhuangjia==jia) ? '荘' : '散';else if(_t_gamemode==_T_GAMEMODE_TAIWAN && _t[jia].reach_flag) i+='聴';}if(jia==0){var x=296, y=615;if(_t_rule.chip.any || _t_rule.yakitori) y-=24;if(_t_gamemode==_T_GAMEMODE_PENGLI) x-=20;if(_t_gamemode==_T_GAMEMODE_GUOJI) x+=20;x+=ofs;er=_t_textArea2(x-_t_overflow*29, y, 150+_t_overflow*29-ofs, 0);er.style.paddingTop='2px';newTextArea('SEATWIND_0', x-_t_overflow*29, y, 150+_t_overflow*29-ofs, 36, 29, 'rgba(0,0,0,0)', '#FFF');el=document.getElementById('SEATWIND_0');el.style.textAlign='left';el.style.fontFamily='serif';el.style.verticalAlign='text-top';el.style.lineHeight='1em';el.style.color=col;el.style.paddingTop='2px';el.style.paddingLeft='4px';el.innerHTML=i;er.style.verticalAlign='text-top';er.style.lineHeight='1em';er.innerHTML=str;if(_t_rule.yakitori && _t[jia].yakitori_flag){newTextArea('YAKITORI_0', x, y+41, 35, 16, 16, 'transparent', '#FFF');e=document.getElementById('YAKITORI_0');e.style.paddingLeft='3px';e.innerHTML='<img alt="" style="width: auto; height: 100% " src="'+_t_h5_gif_yakitori+'"/>';}if(_t_rule.chip.any){newTextArea('CHIPICON_0', x+42, y+37, 110, 24, 20, 'transparent', '#FFF');newTextArea('CHIPCOUNT_0', x+42, y+37, 110, 24, 20, 'transparent', '#FFF');e=document.getElementById('CHIPICON_0');e.innerHTML='<img alt="" style="width: auto; height: 90% " src="'+_t_h5_gif_chip+'"/>';e=document.getElementById('CHIPCOUNT_0');e.style.paddingRight='6px';e.style.textAlign='right';e.style.verticalAlign='text-top';e.style.lineHeight='1em';e.innerHTML=_t_chip_text(_t[jia].chip);}if(_t_i!='') _t_point_detail_set(x+8, y+42, x, y, 150-ofs, jia);else {removeTextArea('POINT_DETAIL_'+jia);removeTextArea('POINT_DETAIL_SW_'+jia);}return;}if((jia==2 && _t_players==4) || (jia==1 && _t_players==2)){var x=750, y=180;if(_t_players==3){ x=520; y=480; }if(_t_gamemode==_T_GAMEMODE_GUOJI) x-=20;er=_t_textArea2(x, y, 150-ofs, 2);er.style.paddingTop='2px';newTextArea('SEATWIND_'+jia, x, y, 150-ofs, 36, 29, 'transparent', '#FFF');el=document.getElementById('SEATWIND_'+jia);el.style.textAlign='left';el.style.fontFamily='serif';el.style.verticalAlign='text-top';el.style.lineHeight='1em';el.style.color=col;el.style.paddingTop='2px';el.style.paddingLeft='4px';el.innerHTML=i;er.style.verticalAlign='text-top';er.style.lineHeight='1em';er.innerHTML=str;if(_t_rule.yakitori && _t[jia].yakitori_flag){newTextArea('YAKITORI_'+jia, x, y+41, 35, 16, 16, 'transparent', '#FFF');e=document.getElementById('YAKITORI_'+jia);e.style.paddingLeft='3px';e.innerHTML='<img alt="" style="width: auto; height: 100% " src="'+_t_h5_gif_yakitori+'"/>';}if(_t_rule.chip.any){newTextArea('CHIPICON_'+jia, x+42, y+37, 110, 24, 20, 'transparent', '#FFF');newTextArea('CHIPCOUNT_'+jia, x+42, y+37, 110, 24, 20, 'transparent', '#FFF');e=document.getElementById('CHIPICON_'+jia);e.innerHTML='<img alt="" style="width: auto; height: 90% " src="'+_t_h5_gif_chip+'"/>';e=document.getElementById('CHIPCOUNT_'+jia);e.style.paddingRight='6px';e.style.textAlign='right';e.style.verticalAlign='text-top';e.style.lineHeight='1em';e.innerHTML=_t_chip_text(_t[jia].chip);}if(_t_i!='') _t_point_detail_set(x+8, y+42, x, y, 150-ofs, jia);else {removeTextArea('POINT_DETAIL_'+jia);removeTextArea('POINT_DETAIL_SW_'+jia);}return;}if(jia==1){var x=750, y=526;x+=ofs;if(_t_players==3) y-=20;else if(_t_gamemode==_T_GAMEMODE_GUOJI){y+=32;}else if(_t_gamemode==_T_GAMEMODE_TAIWAN){y+=20;}er=_t_textArea2(x, y, 150-ofs, 1);er.style.paddingTop='2px';newTextArea('SEATWIND_1', x, y, 150-ofs, 36, 29, 'transparent', '#FFF');el=document.getElementById('SEATWIND_1');el.style.textAlign='left';el.style.fontFamily='serif';el.style.verticalAlign='text-top';el.style.lineHeight='1em';el.style.paddingTop='2px';el.style.paddingLeft='4px';el.style.color=col;el.innerHTML=i;er.style.verticalAlign='text-top';er.style.lineHeight='1em';er.innerHTML=str;if(_t_rule.yakitori && _t[jia].yakitori_flag){newTextArea('YAKITORI_1', x, y+41, 35, 16, 16, 'transparent', '#FFF');e=document.getElementById('YAKITORI_1');e.style.paddingLeft='3px';e.innerHTML='<img alt="" style="width: auto; height: 100% " src="'+_t_h5_gif_yakitori+'"/>';}if(_t_rule.chip.any){newTextArea('CHIPICON_1', x+42, y+37, 110, 24, 20, 'transparent', '#FFF');newTextArea('CHIPCOUNT_1', x+42, y+37, 110, 24, 20, 'transparent', '#FFF');e=document.getElementById('CHIPICON_1');e.innerHTML='<img alt="" style="width: auto; height: 90% " src="'+_t_h5_gif_chip+'"/>';e=document.getElementById('CHIPCOUNT_1');e.style.paddingRight='6px';e.style.textAlign='right';e.style.verticalAlign='text-top';e.style.lineHeight='1em';e.innerHTML=_t_chip_text(_t[jia].chip);}if(_t_i!='') _t_point_detail_set(x+8, y+42, x, y, 150-ofs, jia);else {removeTextArea('POINT_DETAIL_'+jia);removeTextArea('POINT_DETAIL_SW_'+jia);}return;}var x=296, y=284;if(_t_rule.chip.any || _t_rule.yakitori) y-=24;if(_t_players==3){y-=84;if(_t_gamemode==_T_GAMEMODE_PENGLI) y-=32;}else if(_t_gamemode==_T_GAMEMODE_GUOJI){y-=32;}else if(_t_gamemode==_T_GAMEMODE_TAIWAN){y-=40;}er=_t_textArea2(x, y, 150-ofs, jia);er.style.paddingTop='2px';newTextArea('SEATWIND_'+jia, x, y, 150-ofs, 36, 29, 'transparent', '#FFF');el=document.getElementById('SEATWIND_'+jia);el.style.textAlign='left';el.style.fontFamily='serif';el.style.verticalAlign='text-top';el.style.lineHeight='1em';el.style.color=col;el.style.paddingTop='2px';el.style.paddingLeft='4px';el.innerHTML=i;er.style.verticalAlign='text-top';er.style.lineHeight='1em';er.innerHTML=str;if(_t_rule.yakitori && _t[jia].yakitori_flag){newTextArea('YAKITORI_'+jia, x, y+41, 35, 16, 16, 'transparent', '#FFF');e=document.getElementById('YAKITORI_'+jia);e.style.paddingLeft='3px';e.innerHTML='<img alt="" style="width: auto; height: 100% " src="'+_t_h5_gif_yakitori+'"/>';}if(_t_rule.chip.any){newTextArea('CHIPICON_'+jia, x+42, y+37, 110, 24, 20, 'transparent', '#FFF');newTextArea('CHIPCOUNT_'+jia, x+42, y+37, 110, 24, 20, 'transparent', '#FFF');e=document.getElementById('CHIPICON_'+jia);e.innerHTML='<img alt="" style="width: auto; height: 90% " src="'+_t_h5_gif_chip+'"/>';e=document.getElementById('CHIPCOUNT_'+jia);e.style.paddingRight='6px';e.style.textAlign='right';e.style.verticalAlign='text-top';e.style.lineHeight='1em';e.innerHTML=_t_chip_text(_t[jia].chip);}if(_t_i!='') _t_point_detail_set(x+8, y+42, x, y, 150-ofs, jia);else {removeTextArea('POINT_DETAIL_'+jia);removeTextArea('POINT_DETAIL_SW_'+jia);}return;}function _t_point_detail_set(xp, yp, xo, yo, w, jia){var e, f, s, i;var w=((_t_i.length+2.5)*29) >> 1;if(jia==1 && _t_players!=2){xp-=148;}var n1='POINT_DETAIL_'+jia;if(!(e=document.getElementById(n1))){newTextArea(n1, xp, yp, w, 39, 29, '#000', '#FFF');e=document.getElementById(n1);e.style.display='none';e.style.border='3px solid #ffc';e.style.paddingTop='5px';if((i=Math.floor(4*rRatio))<2) i=1;e.style.paddingRight=i+'px';e.style.textAlign='right';e.style.fontFamily='serif';}else {s=e.style.display || '';s=s.toLowerCase();if(s!='none' && s!='block'){e.style='none';}}e.innerHTML=_t_i+'点';var n='POINT_DETAIL_SW_'+jia;newAnchorArea(0, xo, yo, w, 34, n, 29, 'transparent', '#FFF');f=document.getElementById(n);f.setAttribute('data-popup', n1);f.style.cursor='pointer';f.setAttribute('href', 'javascript: SCORE_POPUP('+jia+')');f.removeAttribute('onclick');}function SCORE_POPUP(jia){var n='POINT_DETAIL_'+jia;var s=document.getElementById(n);if(s.style.display=='none'){s.style.display='block';s.parentNode.appendChild(s);}else s.style.display='none';}
