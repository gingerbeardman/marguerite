function a0104(jia){var mxf =mxf2=mxfc =mxfc2=tgw =mny =mny2=    mpch =mpch2=mpct =mpct2=    yfa =avf = avf2=nrc =nrc2= frt = frt2=    ntt =ntt2=sbt =sbt2=ex =ex2=0;var exT=mpchT=mpctT=frtT=sbtT=avfT=tgwT=0;var mny =mny2=-1;var max_ex_pos=max_ex_posT=-1;var i, j, k, l, m, n, o, p;var dpp, dp, dp2;var nm, dpq, dq, dq2;var ls=_t_lingshang_flag; _t_lingshang_flag=0;var zz=_t_zampai_ctr; _t_zampai_ctr=100;i=0x40; while(--i>-1) dpf[i]=0;dpp=20; while(--dpp>-1){dp=_t[jia].shupai[dpp];if((dp2=dp & 0x3f)<1 || dp2>0x37) continue;if(noDapai_tbl[dp2]) continue;if(vDanger[dp2]>0x10000) continue;if(dpf[dp2]) continue;_t[jia].shupai[dpp]=0; dpf[dp2]++;if(a0111(jia)){mxc =mxfc =tgrf =mpch =mpct =yfa =avf =nrc =frt =ntt =sbt =ex =0;mny =-1;hp=0; while(++hp<0x38){if(!(hp & 0x0f) || (hp & 0x0f)>9) continue;if(mpcd[hp]<1 && mpcd[hp & 0x30]<1) continue;_t[jia].shupai[15]=hp;if(vZpt[hp]>0 && _t_yaku_judge(jia, 2, -1)>0){mpch++;yfa+=_t_yakufan_ctr;mpct+=vZpt[hp];ex+=vZpt[hp]*_t_yakufan_ctr;if(mny<0 || _t_yakufan_ctr<mny) mny=_t_yakufan_ctr;}_t[jia].shupai[15]=0;}if(mpch>0){i=Math.floor(yfa / mpch);if(mpch>mpch2 || (mpch==mpch2 && mpct>mpct2)){mpch2=mpch; mpct2=mpct;tgw=0; max_ex_pos=dpp;sbt2=sbt; avf=i;}}}_t[jia].shupai[dpp]=dp;}_t_zampai_ctr=zz;_t_lingshang_flag=ls;if(max_ex_pos>0 && _t[jia].shupai[max_ex_pos]>0){_t[jia].declare_command=0;_t[jia].declare_param1=max_ex_pos;p=_t[jia].shupai[max_ex_pos] & 0x7f;if(p>0x40){i=20; while(--i>0){if((_t[jia].shupai[i] & 0x7f)==(p & 0x3f)){_t[jia].declare_param1=i; p=_t[jia].shupai[i] & 0x3f;break;}}}if((_t[jia].shupai[14] & 0x7f)==p) _t[jia].declare_param1=14;j=p & 0x3f; i=_t_gangpai_ctr; while(--i>=0){if((_t_gangpai[i] & 0x3f)==j) break;}if(i>-1){if(j>0x30){_t[jia].declare_command=21;_t[jia].declare_param1=p;return(21);}i=20; while(--i>0){if((k=_t[jia].shupai[i] & 0x3f)<1) continue;if((k ^ j) & 0x30) continue;if(k-j==1 || k-j==-1 || k-j==2 || k-j==-2) break;}if(i<1){_t[jia].declare_command=21;_t[jia].declare_param1=p;return(21);}i=_t[jia].fulou_ctr; k=-5;while(--i>=0){k+=5;m=_t[jia].fuloupai[k] & 0x3f;n=_t[jia].fuloupai[k+1] & 0x3f;if(m==n && m==j) break;}if(i>-1){_t[jia].declare_command=21;_t[jia].declare_param1=p;return(21);}}if(!_t[jia].menqian_flag && !_t_yixun_flag) _t_reach_declare_flag=1;return(0);}a0114(jia);p=a0107(jia, -1, 0x10000);_t[jia].declare_command=0;i=20; while(--i>0){if((_t[jia].shupai[i] & 0x7f)==p){_t[jia].declare_param1=i; break;}}if(i<1){i=20; while(--i>0){if((_t[jia].shupai[i] & 0x3f)==p){_t[jia].declare_param1=i; p=_t[jia].shupai[i]; break;}}}if((_t[jia].shupai[14] & 0x7f)==p) _t[jia].declare_param1=14;j=p & 0x3f; i=_t_gangpai_ctr; while(--i>=0){if((_t_gangpai[i] & 0x3f)==j) break;}if(i>-1){if(j>0x30){_t[jia].declare_command=21;_t[jia].declare_param1=p;return(21);}i=20; while(--i>0){if((k=_t[jia].shupai[i] & 0x3f)<1) continue;if((k ^ j) & 0x30) continue;if(k-j==1 || k-j==-1 || k-j==2 || k-j==-2) break;}if(i<1){_t[jia].declare_command=21;_t[jia].declare_param1=p;return(21);}i=_t[jia].fulou_ctr; k=-5;while(--i>=0){k+=5;m=_t[jia].fuloupai[k] & 0x3f;n=_t[jia].fuloupai[k+1] & 0x3f;if(m==n && m==j) break;}if(i>-1){_t[jia].declare_command=21;_t[jia].declare_param1=p;return(21);}}var ppp=_t[jia].shupai[_t[jia].declare_param1]; _t[jia].shupai[_t[jia].declare_param1]=0;a0091(jia);_t[jia].shupai[_t[jia].declare_param1]=ppp;return(0);}var v0105_1=new Array(0x40);function a0105(jia){var mxf =mxf2=mxfc =mxfc2=tgw =mny =mny2=    mpch =mpch2=mpct =mpct2=    yfa =avf = avf2=nrc =nrc2= frt = frt2=    ntt =ntt2=sbt =sbt2=ex =ex2=0;var exT=mpchT=mpctT=frtT=sbtT=avfT=tgwT=0;var mny =mny2=-1;var max_ex_pos=max_ex_posT=-1;var i, j, k, l, m, n, o, p;var dpp, dp, dp2;var nm, dpq, dq, dq2;var ls=_t_lingshang_flag; _t_lingshang_flag=0;var zz=_t_zampai_ctr; _t_zampai_ctr=100;_t[jia].exp.mxf=_t[jia].exp.mxfc=_t[jia].exp.avf=_t[jia].exp.flag=0;i=0x40; while(--i>-1) dpf[i]=0;dpp=20; while(--dpp>-1){dp=_t[jia].shupai[dpp];if((dp2=dp & 0x3f)<1 || dp2>0x37) continue;if(noDapai_tbl[dp2]) continue;if(vDanger[dp2]>0x10000) continue;if(dpf[dp2]) continue;_t[jia].shupai[dpp]=0; dpf[dp2]++;if(a0111_1(jia)){mxc =mxfc =tgrf =mpch =mpct =yfa =avf =ex =0;mny =-1;hp=0; while(++hp<0x38){if(!(hp & 0x0f) || (hp & 0x0f)>9) continue;if(mpcd[hp]<1 && mpcd[hp & 0x30]<1) continue;_t[jia].shupai[15]=hp;var keishikiHele=_t_yaku_judge(jia, 2, -1);if(keishikiHele>0){if(vZpt[hp]>0){mpch++; yfa+=_t_yakufan_ctr;if(_t_yakufan_ctr>=mxf){if(_t_yakufan_ctr>mxf){mxf=_t_yakufan_ctr; mxfc=0;}mxfc++;}}}else if(keishikiHele>-1){if(_t[jia].menqian_flag){if(_t_yakufan_ctr-_t_fan==1 && _t[jia].fulou_ctr<4){_t_yakufan_ctr+=7; yfa+=_t_yakufan_ctr;if(_t_yakufan_ctr>=mxf){if(_t_yakufan_ctr>mxf){mxf=_t_yakufan_ctr; mxfc=0;}mxfc++;}}else if(_t_yakufan_ctr-_t_fan>3 && _t[jia].fulou_ctr==4 && !(_t[jia].fuloupai[4]+_t[jia].fuloupai[9]+_t[jia].fuloupai[14]+_t[jia].fuloupai[19])){_t_yakufan_ctr+=4; yfa+=_t_yakufan_ctr;if(_t_yakufan_ctr>=mxf){if(_t_yakufan_ctr>mxf){mxf=_t_yakufan_ctr; mxfc=0;}mxfc++;}}}}_t[jia].shupai[15]=0;}if(mpch>0){i=Math.floor(yfa / mpch);if(mxf>mxf2 || (mxf==mxf2 && (mxfc>mxfc2 || (mxfc==mxfc2 || i>avf)))){mxf2=mxf;mxfc2=mxfc;max_ex_pos=dpp;avf=i;}}}_t[jia].shupai[dpp]=dp;}_t_zampai_ctr=zz;_t_lingshang_flag=ls;if(max_ex_pos>0 && _t[jia].shupai[max_ex_pos]>0){_t[jia].exp.mxf=mxf2;_t[jia].exp.mxfc=mxfc2;_t[jia].exp.avf=avf;_t[jia].exp.flag=1;_t[jia].declare_command=0;_t[jia].declare_param1=max_ex_pos;p=_t[jia].shupai[max_ex_pos] & 0x7f;if(p>0x40){i=20; while(--i>0){if((_t[jia].shupai[i] & 0x7f)==(p & 0x3f)){_t[jia].declare_param1=i; p=_t[jia].shupai[i] & 0x3f;break;}}}if((_t[jia].shupai[14] & 0x7f)==p) _t[jia].declare_param1=14;j=p & 0x3f; i=_t_gangpai_ctr; while(--i>=0){if((_t_gangpai[i] & 0x3f)==j) break;}if(i>-1){if(j>0x30){_t[jia].declare_command=21;_t[jia].declare_param1=p;return(21);}i=20; while(--i>0){if((k=_t[jia].shupai[i] & 0x3f)<1) continue;if((k ^ j) & 0x30) continue;if(k-j==1 || k-j==-1 || k-j==2 || k-j==-2) break;}if(i<1){_t[jia].declare_command=21;_t[jia].declare_param1=p;return(21);}i=_t[jia].fulou_ctr; k=-5;while(--i>=0){k+=5;m=_t[jia].fuloupai[k] & 0x3f;n=_t[jia].fuloupai[k+1] & 0x3f;if(m==n && m==j) break;}if(i>-1){_t[jia].declare_command=21;_t[jia].declare_param1=p;return(21);}}return(0);}p=-1;_t[jia].exp.mxf=_t[jia].exp.mxfc=_t[jia].exp.avf=_t[jia].exp.flag=0;var f=0;var nxt=a0000(jia, 1); if((p=a0132(jia, nxt))>0) f=1;else if((p=a0133(jia, nxt))>0) f=1;else if(a0131(jia, nxt)) f=1;else if(a0120(jia)) f=1;else if(a0121(jia)) f=1;else if(a0122(jia)) f=1;else if(a0127(jia)) f=1;else if(a0128(jia)){f=1; a0123(jia); a0124(jia, 0, -1);}else if(a0172(jia, 0, -1)) f=1;else if(a0124(jia, 0, -1)) f=1;else if(a0126(jia)) f=1;a0114(jia);if(p<1){if(f) p=a0109(jia, 0x10000);else p=a0106(jia, 0x10000);}_t[jia].declare_command=0;i=20; while(--i>0){if((_t[jia].shupai[i] & 0x7f)==p){_t[jia].declare_param1=i; break;}}if(i<1){i=20; while(--i>0){if((_t[jia].shupai[i] & 0x3f)==p){_t[jia].declare_param1=i; p=_t[jia].shupai[i]; break;}}}if((_t[jia].shupai[14] & 0x7f)==p) _t[jia].declare_param1=14;j=p & 0x3f; i=_t_gangpai_ctr; while(--i>=0){if((_t_gangpai[i] & 0x3f)==j) break;}if(i>-1){if(j>0x30){_t[jia].declare_command=21;_t[jia].declare_param1=p;return(21);}i=20; while(--i>0){if((k=_t[jia].shupai[i] & 0x3f)<1) continue;if((k ^ j) & 0x30) continue;if(k-j==1 || k-j==-1 || k-j==2 || k-j==-2) break;}if(i<1){_t[jia].declare_command=21;_t[jia].declare_param1=p;return(21);}i=_t[jia].fulou_ctr; k=-5;while(--i>=0){k+=5;m=_t[jia].fuloupai[k] & 0x3f;n=_t[jia].fuloupai[k+1] & 0x3f;if(m==n && m==j) break;}if(i>-1){_t[jia].declare_command=21;_t[jia].declare_param1=p;return(21);}}var ppp=_t[jia].shupai[_t[jia].declare_param1]; _t[jia].shupai[_t[jia].declare_param1]=0;a0091(jia);_t[jia].shupai[_t[jia].declare_param1]=ppp;return(0);}function a0106(jia, dlim){var i, j, x, y;var pai_tbln=new Array(), pai_tblv=new Array(), pai_tblc=0;var qtn=new Array(), qtv=new Array(), qtc=0;i=_t_nukidora.length; while(--i>-1){if((j=_t_nukidora[i])<1 || j>0x37 || noDapai_tbl[j] || ai_ndrq[i]) continue;x=20; while(--x>-1){if((_t[jia].shupai[x] & 0x3f)==j){return(j);}}}x=255; i=vPtn_ctr; while(--i>-1){if((j=vPtn[i].pi & 0x3f)<1 || j>0x37 || noDapai_tbl[j]) continue;if(vDanger[j]>dlim) continue;if(x<vPtn[i].xt) continue;if(x>vPtn[i].xt){x=vPtn[i].xt; pai_tblc=0;}pai_tbln[pai_tblc]=j;pai_tblv[pai_tblc++]=vPtn[i].value;}if(pai_tblc<1){x=-1; i=vPtn_ctr; while(--i>-1){if((j=vPtn[i].pi & 0x3f)<1 || j>0x37 || noDapai_tbl[j]) continue;if(x<0){x=vDanger[j]; pai_tblc=0;pai_tbln[pai_tblc]=j;pai_tblv[pai_tblc++]=vPtn[i].value;continue;}if(x>vDanger[j]){x=vDanger[j]; pai_tblc=0;pai_tbln[pai_tblc]=j;pai_tblv[pai_tblc++]=vPtn[i].value;continue;}}}if(pai_tblc==1) return(pai_tbln[0]);y=-1; i=pai_tblc; while(--i>-1){j=pai_tbln[i];if(y<0){y=vYaku[j];qtc=1;qtn[0]=j;qtv[0]=pai_tblv[i];continue;}if(y<vYaku[j]) continue;if(y>vYaku[j]){y=vYaku[j];qtc=0;}qtn[qtc]=j;qtv[qtc++]=pai_tblv[i];}if(qtc==1) return(qtn[0]);i=0x40; while(--i>-1) _t_bipai2[i]=-1;i=qtc; while(--i>-1){_t_bipai2[qtn[i]]=qtv[i];}x=0; y=-1; i=_t[jia].menfeng; while(--i>0x30){if(noDapai_tbl[i]) continue;if(i==_t_zhuangfeng[0] || i==_t_zhuangfeng[1]) continue;if(x>=_t_bipai2[i]) continue;x=_t_bipai2[i]; y=i;}i=35; while(--i>_t[jia].menfeng){if(noDapai_tbl[i]) continue;if(i==_t_zhuangfeng[0] ||  i==_t_zhuangfeng[1]) continue;if(x>=_t_bipai2[i]) continue;x=_t_bipai2[i]; y=i;}i=0x38; while(--i>0x30){if(noDapai_tbl[i]) continue;if(x>=_t_bipai2[i]) continue;x=_t_bipai2[i]; y=i;}i=5; while(--i>-1){if(!noDapai_tbl[0x25+i] && x<_t_bipai2[0x25+i]){ x=_t_bipai2[0x25+i]; y=0x25+i; }if(!noDapai_tbl[0x25-i] && x<_t_bipai2[0x25-i]){ x=_t_bipai2[0x25-i]; y=0x25-i; }if(!noDapai_tbl[0x15+i] && x<_t_bipai2[0x15+i]){ x=_t_bipai2[0x15+i]; y=0x15+i; }if(!noDapai_tbl[0x15-i] && x<_t_bipai2[0x15-i]){ x=_t_bipai2[0x15-i]; y=0x15-i; }if(!noDapai_tbl[0x05+i] && x<_t_bipai2[0x05+i]){ x=_t_bipai2[0x05+i]; y=0x05+i; }if(!noDapai_tbl[0x05-i] && x<_t_bipai2[0x05-i]){ x=_t_bipai2[0x05-i]; y=0x05-i; }}if(y<0) y=a0110(jia);return(y);}function a0107(jia, fan, dlim){var i, j, x, y;var pai_tbln=new Array(), pai_tblv=new Array(), pai_tblc=0;i=_t_nukidora.length; while(--i>-1){if((j=_t_nukidora[i])<1 || j>0x37 || noDapai_tbl[j] || ai_ndrq[i]) continue;x=20; while(--x>-1){if((_t[jia].shupai[x] & 0x3f)==j){return(j);}}}x=255; i=vPtn_ctr; while(--i>-1){if((j=vPtn[i].pi & 0x3f)<1 || j>0x37 || noDapai_tbl[j]) continue;if(vDanger[j]>dlim) continue;if(x<vPtn[i].xt) continue;if(x>vPtn[i].xt){ x=vPtn[i].xt; pai_tblc=0; }if(vYaku[j]<fan) continue;pai_tbln[pai_tblc]=j;pai_tblv[pai_tblc++]=vPtn[i].value;}if(pai_tblc<1){x=-1; i=vPtn_ctr; while(--i>-1){if((j=vPtn[i].pi & 0x3f)<1 || j>0x37 || noDapai_tbl[j]) continue;if(x<0){x=vDanger[j]; pai_tblc=0;pai_tbln[pai_tblc]=j;pai_tblv[pai_tblc++]=vPtn[i].value;continue;}if(x>vDanger[j]){x=vDanger[j]; pai_tblc=0;pai_tbln[pai_tblc]=j;pai_tblv[pai_tblc++]=vPtn[i].value;continue;}}}if(pai_tblc==1) return(pai_tbln[0]);i=0x40; while(--i>-1) _t_bipai2[i]=-1;i=pai_tblc; while(--i>-1){_t_bipai2[pai_tbln[i]]=pai_tblv[i];}x=-1; y=-1; i=_t[jia].menfeng; while(--i>0x30){if(noDapai_tbl[i]) continue;if(i==_t_zhuangfeng[0] || i==_t_zhuangfeng[1]) continue;if(x>_t_bipai2[i]) continue;x=_t_bipai2[i]; y=i;}i=35; while(--i>_t[jia].menfeng){if(noDapai_tbl[i]) continue;if(i==_t_zhuangfeng[0] ||  i==_t_zhuangfeng[1]) continue;if(x>_t_bipai2[i]) continue;x=_t_bipai2[i]; y=i;}i=0x38; while(--i>0x30){if(noDapai_tbl[i]) continue;if(x>_t_bipai2[i]) continue;x=_t_bipai2[i]; y=i;}i=5; while(--i>-1){if(!noDapai_tbl[0x25+i] && x<_t_bipai2[0x25+i]){ x=_t_bipai2[0x25+i]; y=0x25+i; }if(!noDapai_tbl[0x25-i] && x<_t_bipai2[0x25-i]){ x=_t_bipai2[0x25-i]; y=0x25-i; }if(!noDapai_tbl[0x15+i] && x<_t_bipai2[0x15+i]){ x=_t_bipai2[0x15+i]; y=0x15+i; }if(!noDapai_tbl[0x15-i] && x<_t_bipai2[0x15-i]){ x=_t_bipai2[0x15-i]; y=0x15-i; }if(!noDapai_tbl[0x05+i] && x<_t_bipai2[0x05+i]){ x=_t_bipai2[0x05+i]; y=0x05+i; }if(!noDapai_tbl[0x05-i] && x<_t_bipai2[0x05-i]){ x=_t_bipai2[0x05-i]; y=0x05-i; }}if(y<0) y=a0110(jia);return(y);}function a0109(jia, dlim){var i, j, x, y, dlim=vDanger_limit_heavy;var pai_tbln=new Array(), pai_tblv=new Array(), pai_tblc=0;var qtn=new Array(), qtv=new Array(), qtc=0;i=_t_nukidora.length; while(--i>-1){if((j=_t_nukidora[i])<1 || j>0x37 || noDapai_tbl[j] || ai_ndrq[i]) continue;x=20; while(--x>-1){if((_t[jia].shupai[x] & 0x3f)==j){return(j);}}}pai_tblc=0;x=-65536; i=vPtn_ctr; while(--i>-1){if((j=vPtn[i].pi & 0x3f)<1 || j>0x37 || noDapai_tbl[j]) continue;if(vDanger[j]>dlim) continue;if(x<0 || x>vYaku[j]) x=vYaku[j];}++x;i=vPtn_ctr; while(--i>-1){if((j=vPtn[i].pi & 0x3f)<1 || j>0x37 || noDapai_tbl[j]) continue;if(vDanger[j]>dlim) continue;if(vYaku[j]<x){pai_tbln[pai_tblc]=j;pai_tblv[pai_tblc++]=i;}}if(pai_tblc==1) return(pai_tbln[0]);if(pai_tblc<1){x=-65536; i=vPtn_ctr; while(--i>-1){if((j=vPtn[i].pi & 0x3f)<1 || j>0x37 || noDapai_tbl[j]) continue;if(vDanger[j]>dlim) continue;if(x<vYaku[j]) x=vYaku[j];}i=vPtn_ctr; while(--i>-1){if((j=vPtn[i].pi & 0x3f)<1 || j>0x37 || noDapai_tbl[j]) continue;if(vDanger[j]>dlim) continue;if(vYaku[j]<x){pai_tbln[pai_tblc]=j;pai_tblv[pai_tblc++]=i;}}}if(pai_tblc==1) return(pai_tbln[0]);if(pai_tblc<1){pai_tblc=0; i=vPtn_ctr; while(--i>-1){if((j=vPtn[i].pi & 0x3f)<1 || j>0x37 || noDapai_tbl[j]) continue;if(vDanger[j]>dlim) continue;pai_tbln[pai_tblc]=j;pai_tblv[pai_tblc++]=i;}if(pai_tblc==1) return(pai_tbln[0]);}if(pai_tblc<1){pai_tblc=0; i=vPtn_ctr; while(--i>-1){if((j=vPtn[i].pi & 0x3f)<1 || j>0x37 || noDapai_tbl[j]) continue;pai_tbln[pai_tblc]=j;pai_tblv[pai_tblc++]=i;}if(pai_tblc==1) return(pai_tbln[0]);}y=65535; i=pai_tblc; while(--i>-1){j=pai_tblv[i];if(y<vPtn[j].xt) continue;if(y>vPtn[j].xt){y=vPtn[j].xt;qtc=0;}qtn[qtc]=pai_tbln[i];qtv[qtc++]=j;}if(qtc==1) return(qtn[0]);i=0x40; while(--i>-1) _t_bipai2[i]=-1;i=qtc; while(--i>-1) _t_bipai2[qtn[i]]=vPtn[qtv[i]].value;if(!noDapai_tbl[0x29] && x<_t_bipai2[0x29]){ x=_t_bipai2[0x29]; y=0x29; }if(!noDapai_tbl[0x21] && x<_t_bipai2[0x21]){ x=_t_bipai2[0x21]; y=0x21; }if(!noDapai_tbl[0x19] && x<_t_bipai2[0x19]){ x=_t_bipai2[0x19]; y=0x19; }if(!noDapai_tbl[0x11] && x<_t_bipai2[0x11]){ x=_t_bipai2[0x11]; y=0x11; }if(!noDapai_tbl[0x09] && x<_t_bipai2[0x09]){ x=_t_bipai2[0x09]; y=0x09; }if(!noDapai_tbl[0x01] && x<_t_bipai2[0x01]){ x=_t_bipai2[0x01]; y=0x01; }x=0; y=-1; i=_t[jia].menfeng; while(--i>0x30){if(noDapai_tbl[i]) continue;if(i==_t_zhuangfeng[0] || i==_t_zhuangfeng[1]) continue;if(x>=_t_bipai2[i]) continue;x=_t_bipai2[i]; y=i;}i=35; while(--i>_t[jia].menfeng){if(noDapai_tbl[i]) continue;if(i==_t_zhuangfeng[0] ||  i==_t_zhuangfeng[1]) continue;if(x>=_t_bipai2[i]) continue;x=_t_bipai2[i]; y=i;}i=0x38; while(--i>0x30){if(noDapai_tbl[i]) continue;if(x>=_t_bipai2[i]) continue;x=_t_bipai2[i]; y=i;}i=4; while(--i>-1){if(!noDapai_tbl[0x25+i] && x<_t_bipai2[0x25+i]){ x=_t_bipai2[0x25+i]; y=0x25+i; }if(!noDapai_tbl[0x25-i] && x<_t_bipai2[0x25-i]){ x=_t_bipai2[0x25-i]; y=0x25-i; }if(!noDapai_tbl[0x15+i] && x<_t_bipai2[0x15+i]){ x=_t_bipai2[0x15+i]; y=0x15+i; }if(!noDapai_tbl[0x15-i] && x<_t_bipai2[0x15-i]){ x=_t_bipai2[0x15-i]; y=0x15-i; }if(!noDapai_tbl[0x05+i] && x<_t_bipai2[0x05+i]){ x=_t_bipai2[0x05+i]; y=0x05+i; }if(!noDapai_tbl[0x05-i] && x<_t_bipai2[0x05-i]){ x=_t_bipai2[0x05-i]; y=0x05-i; }}if(y<0) y=a0110(jia);return(y);}function a0110(jia){var i, j, x;i=_t_nukidora.length; while(--i>-1){if((j=_t_nukidora[i])<1 || j>0x37 || noDapai_tbl[j] || ai_ndrq[i]) continue;x=20; while(--x>-1){if((_t[jia].shupai[x] & 0x3f)==j) return(j);}}i=_t[jia].menfeng; while(--i>0x30){if(noDapai_tbl[i]) continue;if(i==_t_zhuangfeng[0] ||  i==_t_zhuangfeng[1]) continue;j=20; while(--j>-1){if((_t[jia].shupai[j] & 0x3f)==i) return(i);}}i=35; while(--i>_t[jia].menfeng){if(noDapai_tbl[i]) continue;if(i==_t_zhuangfeng[0] ||  i==_t_zhuangfeng[1]) continue;j=20; while(--j>-1){if((_t[jia].shupai[j] & 0x3f)==i) return(i);}}i=0x38; while(--i>0x30){if(noDapai_tbl[i]) continue;j=20; while(--j>-1){if((_t[jia].shupai[j] & 0x3f)==i) return(i);}}i=5; while(--i>-1){j=20; while(--j>-1){k=_t[jia].shupai[j] & 0x3f;if(k==0x25+i && !noDapai_tbl[k]) return(k);if(k==0x25-i && !noDapai_tbl[k]) return(k);if(k==0x15+i && !noDapai_tbl[k]) return(k);if(k==0x15-i && !noDapai_tbl[k]) return(k);if(k==0x05+i && !noDapai_tbl[k]) return(k);if(k==0x05-i && !noDapai_tbl[k]) return(k);}}return(_t[jia].shupai[14] & 0x3f);}function a0111(jia){var i, j, k, l, m;var x, y, z;var p, q;var mn=[0, 0, 0, 0, 0, 0, 0];i=0x40; while(--i>-1) mpcd[i]=0;_t_shupai_move(jia);if(_t_gamemode!=_T_GAMEMODE_TAIWAN){j=k=0; z=-1;i=0x01-0x08; while((i+=0x08)<0x30){if(_t_bipai2[i]==2) k++;if(_t_bipai2[i]==1) j++;if(_t_bipai2[i]<1) z=i;}i=0x30; while(++i<0x38){if(_t_bipai2[i]==2) k++;if(_t_bipai2[i]==1) j++;if(_t_bipai2[i]<1) z=i;}if(j==13){mpcd[0x01]=mpcd[0x09]=mpcd[0x11]=mpcd[0x19]=mpcd[0x21]=mpcd[0x29]=mpcd[0x31]=mpcd[0x32]=mpcd[0x33]=mpcd[0x34]=mpcd[0x35]=mpcd[0x36]=mpcd[0x37]=1;return(-1);}if(j==12 && k==1){mpcd[z]=1;return(-1);}}mn=[0, 0, 0, 0, 0, 0, 0, 0]; m=0;x=y=z=l=0;i=0; while(++i<0x38){if((i & 0x0f)<1 || (i & 0x0f)>9 || _t_bipai2[i]<1){ l=0; continue; }if(l<1 && i<0x30 && _t_bipai2[i+1]>0 && _t_bipai2[i+2]>0){_t_bipai2[i]--; _t_bipai2[i+1]--; _t_bipai2[i+2]--;mn[m++]=i;--i; l=0; continue;}if(l<2 && _t_bipai2[i]>1){if(!x){x=i; _t_bipai2[i]-=2;mn[m++]=i | 0x100;--i; l=0; continue;}if(!y){y=i; _t_bipai2[i]-=2;mn[m++]=i | 0x200;--i; l=0; continue;}}if(l<3 && _t_bipai2[i]>2){_t_bipai2[i]-=3;mn[m++]=i | 0x300;--i; l=0; continue;}if(l<4 && !y && i<0x30 && _t_bipai2[i+1]>0){y=i; _t_bipai2[i]--; _t_bipai2[i+1]--;mn[m++]=i | 0x400;--i; l=0; continue;}if(l<5 && !y && i<0x30 && (i & 0x0f)<8 && _t_bipai2[i+2]>0){y=i; _t_bipai2[i]--; _t_bipai2[i+2]--;mn[m++]=i | 0x500;--i; l=0; continue;}if(!z){z=i; _t_bipai2[i]--;mn[m++]=i | 0x600;--i; l=0; continue;}for(;;){if(m<1) break;i=mn[--m];if(i<0x100){_t_bipai2[i]++; _t_bipai2[i+1]++; _t_bipai2[i+2]++;l=1; --i; break;}if(i<0x200){x=0; i &= 0x3f;_t_bipai2[i]+=2;l=2; --i; break;}if(i<0x300){y=0; i &= 0x3f;_t_bipai2[i]+=2;l=2; --i; break;}if(i<0x400){i &= 0x3f;_t_bipai2[i]+=3;l=3; --i; break;}if(i<0x500){y=0; i &= 0x3f;_t_bipai2[i]++; _t_bipai2[i+1]++;l=4; --i; break;}if(i<0x600){y=0; i &= 0x3f;_t_bipai2[i]++; _t_bipai2[i+2]++;l=5; --i; break;}z=0; _t_bipai2[i & 0x3f]++;}}if(m>0){if(x>0 && y>0){mpcd[x & 0x30]=1;mpcd[y & 0x30]=1;return(1);}if(z>0){mpcd[z & 0x30]=1;return(1);}}if(_t_gamemode==_T_GAMEMODE_TAIWAN || (_t_gamemode==_T_GAMEMODE_ARSHIAR && !_t_rule.qiduizi)) return(0);j=k=x=0;i=0x38; while(--i>0){if(_t_bipai2[i]==2) j++;if(_t_bipai2[i]==1){ k++; x=i; }}if(j==6 && k==1){mpcd[x & 0x30]=1;return(1);}return(0);}function a0111_1(jia){var i, j, k, l, m;var x, y, z;var p, q;var mn=[0, 0, 0, 0, 0, 0, 0];i=0x40; while(--i>-1) mpcd[i]=0;_t_shupai_move(jia);j=k=0; z=-1;i=0x01-0x08; while((i+=0x08)<0x30){if(_t_bipai2[i]==2) k++;if(_t_bipai2[i]==1) j++;if(_t_bipai2[i]<1) z=i;}i=0x30; while(++i<0x38){if(_t_bipai2[i]==2) k++;if(_t_bipai2[i]==1) j++;if(_t_bipai2[i]<1) z=i;}if(j==13){mpcd[0x01]=mpcd[0x09]=mpcd[0x11]=mpcd[0x19]=mpcd[0x21]=mpcd[0x29]=mpcd[0x31]=mpcd[0x32]=mpcd[0x33]=mpcd[0x34]=mpcd[0x35]=mpcd[0x36]=mpcd[0x37]=1;return(-1);}if(j==12 && k==1){mpcd[z]=1;return(-1);}if(_t[jia].fulou_ctr<2){i=0;if(_t_bipai2[0x01]>0) i++;if(_t_bipai2[0x04]>0) i++;if(_t_bipai2[0x07]>0) i++;j=i;if(_t_bipai2[0x12]>0) j++;if(_t_bipai2[0x15]>0) j++;if(_t_bipai2[0x18]>0) j++;if(_t_bipai2[0x23]>0) j++;if(_t_bipai2[0x26]>0) j++;if(_t_bipai2[0x29]>0) j++;k=j; l=0x012;j=i;if(_t_bipai2[0x13]>0) j++;if(_t_bipai2[0x16]>0) j++;if(_t_bipai2[0x19]>0) j++;if(_t_bipai2[0x22]>0) j++;if(_t_bipai2[0x25]>0) j++;if(_t_bipai2[0x28]>0) j++;if(j>k){k=j; l=0x021;}i=0;if(_t_bipai2[0x11]>0) i++;if(_t_bipai2[0x14]>0) i++;if(_t_bipai2[0x17]>0) i++;j=i;if(_t_bipai2[0x02]>0) j++;if(_t_bipai2[0x05]>0) j++;if(_t_bipai2[0x08]>0) j++;if(_t_bipai2[0x23]>0) j++;if(_t_bipai2[0x26]>0) j++;if(_t_bipai2[0x29]>0) j++;if(j>k){k=j; l=0x102;}j=i;if(_t_bipai2[0x03]>0) j++;if(_t_bipai2[0x06]>0) j++;if(_t_bipai2[0x09]>0) j++;if(_t_bipai2[0x22]>0) j++;if(_t_bipai2[0x25]>0) j++;if(_t_bipai2[0x28]>0) j++;if(j>k){k=j; l=0x120;}i=0;if(_t_bipai2[0x21]>0) i++;if(_t_bipai2[0x24]>0) i++;if(_t_bipai2[0x27]>0) i++;j=i;if(_t_bipai2[0x02]>0) j++;if(_t_bipai2[0x05]>0) j++;if(_t_bipai2[0x08]>0) j++;if(_t_bipai2[0x13]>0) j++;if(_t_bipai2[0x16]>0) j++;if(_t_bipai2[0x19]>0) j++;if(j>k){k=j; l=0x201;}j=i;if(_t_bipai2[0x03]>0) j++;if(_t_bipai2[0x06]>0) j++;if(_t_bipai2[0x09]>0) j++;if(_t_bipai2[0x12]>0) j++;if(_t_bipai2[0x15]>0) j++;if(_t_bipai2[0x18]>0) j++;if(j>k){k=j; l=0x210;}i=0x30; while(++i<0x38){if(_t_bipai2[i]>0) k++;}if(k>12){i=((l >> 8) & 3)*10;if(_t_bipai2[i+1]<1) mpcd[i+1]=1;if(_t_bipai2[i+4]<1) mpcd[i+4]=1;if(_t_bipai2[i+7]<1) mpcd[i+7]=1;i=((l >> 4) & 3)*10;if(_t_bipai2[i+2]<1) mpcd[i+2]=1;if(_t_bipai2[i+5]<1) mpcd[i+5]=1;if(_t_bipai2[i+8]<1) mpcd[i+8]=1;i=(l  & 3)*10;if(_t_bipai2[i+3]<1) mpcd[i+3]=1;if(_t_bipai2[i+6]<1) mpcd[i+6]=1;if(_t_bipai2[i+9]<1) mpcd[i+9]=1;i=0x30; while(++i<0x38){if(_t_bipai2[i]<1) mpcd[i]=1;}return(1);}if(k>7){var bf=new Array(0x40); m=-1;i=0x40; while(--i>-1) bf[i]=_t_bipai2[i];i=((l >> 8) & 3) << 4;if(bf[i+1]>0) bf[i+1]--; else m=i+1;if(bf[i+4]>0) bf[i+4]--; else m=i+4;if(bf[i+7]>0) bf[i+7]--; else m=i+7;i=((l >> 4) & 3) << 4;if(bf[i+2]>0) bf[i+2]--; else m=i+2;if(bf[i+5]>0) bf[i+5]--; else m=i+5;if(bf[i+8]>0) bf[i+8]--; else m=i+8;i=(l  & 3) << 4;if(bf[i+3]>0) bf[i+3]--; else m=i+3;if(bf[i+6]>0) bf[i+6]--; else m=i+6;if(bf[i+9]>0) bf[i+9]--; else m=i+9;if(k>8){if((j=_t[jia].fulou_ctr)<1){i=0; while(++i<0x38){if(i<0x30 && bf[i]>0 && bf[i+1]>0 && bf[i+2]>0){bf[i]--; bf[i+1]--; bf[i+2]--; j++; break;}if(bf[i]>2){bf[i]=0; j++; break;}}}if(j>0){i=0x38; while(--i>0){if(bf[i]>0){mpcd[i & 0x30]=1;return(1);}}return(0);}i=0x38; while(--i>0){if(bf[i]>1) break;}if(i>0){j=i; while(--j>0){if(bf[j]>1) break;}if(j>0){mpcd[i]=mpcd[j]=1; return(1);}j=29; while(--j>0){if(bf[j]>0 && bf[j+1]>0){mpcd[j & 0x30]=1;return(1);}if((j & 0x0f)<8 && bf[j]>0 && bf[j+2]>0){mpcd[j & 0x30]=1;return(1);}}}}if(k==8 && m>0){x=_t[jia].fulou_ctr; y=z=0;i=0; while(++i<0x38){if(i<28 && _t[jia].fulou_ctr<1){if(bf[i]>2 && bf[i+1]>0 && bf[i+2]>0 && bf[i+3]>0){bf[i]-=2; bf[i+1]--; bf[i+2]--; bf[i+3]--;mpcd[i & 0x30]=mpcd[m & 0x30]=1; return(1);}if(bf[i]>0 && bf[i+1]>0 && bf[i+2]>0){bf[i]--; bf[i+1]--; bf[i+2]--;x++;}}if(bf[i]>2 && _t[jia].fulou_ctr<1){ bf[i]-=3; x++; continue; }if(bf[i]>1){ bf[i]-=2; y++; continue; }}if(x>0 && y>0){mpcd[m & 0x30]=1; return(1);}}}if(_t[jia].fulou_ctr<1){j=k=x=0;i=0x38; while(--i>0){if(_t_bipai2[i]==4) j+=2;else if(_t_bipai2[i]==3){ j++; k++; x=i; }else if(_t_bipai2[i]==2) j++;else if(_t_bipai2[i]==1){ k++; x=i; }}if(j==6 && k>0){mpcd[x & 0x30]=1;}}}mn=[0, 0, 0, 0, 0, 0, 0, 0]; m=0;x=y=z=l=0;i=0; while(++i<0x38){if((i & 0x0f)<1 || (i & 0x0f)>9 || _t_bipai2[i]<1){ l=0; continue; }if(l<1 && i<0x30 && _t_bipai2[i+1]>0 && _t_bipai2[i+2]>0){_t_bipai2[i]--; _t_bipai2[i+1]--; _t_bipai2[i+2]--;mn[m++]=i;--i; l=0; continue;}if(l<2 && _t_bipai2[i]>1){if(!x){x=i; _t_bipai2[i]-=2;mn[m++]=i | 0x100;--i; l=0; continue;}if(!y){y=i; _t_bipai2[i]-=2;mn[m++]=i | 0x200;--i; l=0; continue;}}if(l<3 && _t_bipai2[i]>2){_t_bipai2[i]-=3;mn[m++]=i | 0x300;--i; l=0; continue;}if(l<4 && !y && i<0x30 && _t_bipai2[i+1]>0){y=i; _t_bipai2[i]--; _t_bipai2[i+1]--;mn[m++]=i | 0x400;--i; l=0; continue;}if(l<5 && !y && i<0x30 && (i & 0x0f)<8 && _t_bipai2[i+2]>0){y=i; _t_bipai2[i]--; _t_bipai2[i+2]--;mn[m++]=i | 0x500;--i; l=0; continue;}if(!z){z=i; _t_bipai2[i]--;mn[m++]=i | 0x600;--i; l=0; continue;}for(;;){if(m<1) break;i=mn[--m];if(i<0x100){_t_bipai2[i]++; _t_bipai2[i+1]++; _t_bipai2[i+2]++;l=1; --i; break;}if(i<0x200){x=0; i &= 0x3f;_t_bipai2[i]+=2;l=2; --i; break;}if(i<0x300){y=0; i &= 0x3f;_t_bipai2[i]+=2;l=2; --i; break;}if(i<0x400){i &= 0x3f;_t_bipai2[i]+=3;l=3; --i; break;}if(i<0x500){y=0; i &= 0x3f;_t_bipai2[i]++; _t_bipai2[i+1]++;l=4; --i; break;}if(i<0x600){y=0; i &= 0x3f;_t_bipai2[i]++; _t_bipai2[i+2]++;l=5; --i; break;}z=0; _t_bipai2[i & 0x3f]++;}}if(m>0){if(x>0 && y>0){mpcd[x & 0x30]=1;mpcd[y & 0x30]=1;return(1);}if(z>0){mpcd[z & 0x30]=1;return(1);}}return(0);}function a0111_2(jia){var i, j, k, l, m;var x, y, z, w;var p, q;var mn=[0, 0, 0, 0, 0, 0, 0];_t_shupai_move(jia);if(_t[jia].fulou_ctr<2){i=0;if(_t_bipai2[0x01]>0) i++;if(_t_bipai2[0x04]>0) i++;if(_t_bipai2[0x07]>0) i++;j=i;if(_t_bipai2[0x12]>0) j++;if(_t_bipai2[0x15]>0) j++;if(_t_bipai2[0x18]>0) j++;if(_t_bipai2[0x23]>0) j++;if(_t_bipai2[0x26]>0) j++;if(_t_bipai2[0x29]>0) j++;k=j; l=0x012;j=i;if(_t_bipai2[0x13]>0) j++;if(_t_bipai2[0x16]>0) j++;if(_t_bipai2[0x19]>0) j++;if(_t_bipai2[0x22]>0) j++;if(_t_bipai2[0x25]>0) j++;if(_t_bipai2[0x28]>0) j++;if(j>k){k=j; l=0x021;}i=0;if(_t_bipai2[0x11]>0) i++;if(_t_bipai2[0x14]>0) i++;if(_t_bipai2[0x17]>0) i++;j=i;if(_t_bipai2[0x02]>0) j++;if(_t_bipai2[0x05]>0) j++;if(_t_bipai2[0x08]>0) j++;if(_t_bipai2[0x23]>0) j++;if(_t_bipai2[0x26]>0) j++;if(_t_bipai2[0x29]>0) j++;if(j>k){k=j; l=0x102;}j=i;if(_t_bipai2[0x03]>0) j++;if(_t_bipai2[0x06]>0) j++;if(_t_bipai2[0x09]>0) j++;if(_t_bipai2[0x22]>0) j++;if(_t_bipai2[0x25]>0) j++;if(_t_bipai2[0x28]>0) j++;if(j>k){k=j; l=0x120;}i=0;if(_t_bipai2[0x21]>0) i++;if(_t_bipai2[0x24]>0) i++;if(_t_bipai2[0x27]>0) i++;j=i;if(_t_bipai2[0x02]>0) j++;if(_t_bipai2[0x05]>0) j++;if(_t_bipai2[0x08]>0) j++;if(_t_bipai2[0x13]>0) j++;if(_t_bipai2[0x16]>0) j++;if(_t_bipai2[0x19]>0) j++;if(j>k){k=j; l=0x201;}j=i;if(_t_bipai2[0x03]>0) j++;if(_t_bipai2[0x06]>0) j++;if(_t_bipai2[0x09]>0) j++;if(_t_bipai2[0x12]>0) j++;if(_t_bipai2[0x15]>0) j++;if(_t_bipai2[0x18]>0) j++;if(j>k){k=j; l=0x210;}if(k>7){var bf=new Array(0x40); m=-1;i=0x40; while(--i>-1) bf[i]=_t_bipai2[i];i=((l >> 8) & 3) << 4;if(bf[i+1]>0) bf[i+1]--; else m=i+1;if(bf[i+4]>0) bf[i+4]--; else m=i+4;if(bf[i+7]>0) bf[i+7]--; else m=i+7;i=((l >> 4) & 3) << 4;if(bf[i+2]>0) bf[i+2]--; else m=i+2;if(bf[i+5]>0) bf[i+5]--; else m=i+5;if(bf[i+8]>0) bf[i+8]--; else m=i+8;i=(l  & 3) << 4;if(bf[i+3]>0) bf[i+3]--; else m=i+3;if(bf[i+6]>0) bf[i+6]--; else m=i+6;if(bf[i+9]>0) bf[i+9]--; else m=i+9;if(k>8){if((j=_t[jia].fulou_ctr)<1){i=0; while(++i<0x38){if(i<0x30 && bf[i]>0 && bf[i+1]>0 && bf[i+2]>0){bf[i]--; bf[i+1]--; bf[i+2]--; j++; break;}if(bf[i]>2){bf[i]=0; j++; break;}}}if(j>0) return(1);i=0x38; while(--i>0){if(bf[i]>1) break;}if(i>0){j=i; while(--j>0){if(bf[j]>1) return(1);}j=29; while(--j>0){if(bf[j]>0 && bf[j+1]>0) return(1);if((j & 0x0f)<8 && bf[j]>0 && bf[j+2]>0) return(1);}}}if(k==8 && m>0){x=_t[jia].fulou_ctr; y=z=0;i=0; while(++i<0x38){if(i<28 && _t[jia].fulou_ctr<1){if(bf[i]>2 && bf[i+1]>0 && bf[i+2]>0 && bf[i+3]>0){return(1);}if(bf[i]>0 && bf[i+1]>0 && bf[i+2]>0){bf[i]--; bf[i+1]--; bf[i+2]--;x++;}}if(bf[i]>2 && _t[jia].fulou_ctr<1){ bf[i]-=3; x++; continue; }if(bf[i]>1){ bf[i]-=2; y++; continue; }}if(x>0 && y>0) return(1);}}}mn=[0, 0, 0, 0, 0, 0, 0, 0]; m=0;x=y=z=l=0; w=_t[jia].fulou_ctr;i=0; while(++i<0x38){if(w>3) return(1);if(w>2 && (x>1 || (x>0 && y>0))) return(1);if((i & 0x0f)<1 || (i & 0x0f)>9 || _t_bipai2[i]<1){ l=0; continue; }if(l<1 && i<0x30 && _t_bipai2[i+1]>0 && _t_bipai2[i+2]>0){w++; _t_bipai2[i]--; _t_bipai2[i+1]--; _t_bipai2[i+2]--;mn[m++]=i;--i; l=0; continue;}if(l<2 && _t_bipai2[i]>1){x++; _t_bipai2[i]-=2;mn[m++]=i | 0x100;--i; l=0; continue;}if(l<3 && _t_bipai2[i]>2){w++; _t_bipai2[i]-=3;mn[m++]=i | 0x300;--i; l=0; continue;}if(l<4 && !y && i<0x30 && _t_bipai2[i+1]>0){++y; _t_bipai2[i]--; _t_bipai2[i+1]--;mn[m++]=i | 0x400;--i; l=0; continue;}if(l<5 && !y && i<0x30 && (i & 0x0f)<8 && _t_bipai2[i+2]>0){++y; _t_bipai2[i]--; _t_bipai2[i+2]--;mn[m++]=i | 0x500;--i; l=0; continue;}++z; _t_bipai2[i]--;mn[m++]=i | 0x600;--i; l=0; continue;for(;;){if(m<1) break;i=mn[--m];if(i<0x100){--w;_t_bipai2[i]++; _t_bipai2[i+1]++; _t_bipai2[i+2]++;l=1; --i; break;}if(i<0x200){--x; i &= 0x3f;_t_bipai2[i]+=2;l=2; --i; break;}if(i<0x400){--w;i &= 0x3f;_t_bipai2[i]+=3;l=3; --i; break;}if(i<0x500){--y; i &= 0x3f;_t_bipai2[i]++; _t_bipai2[i+1]++;l=4; --i; break;}if(i<0x600){--y; i &= 0x3f;_t_bipai2[i]++; _t_bipai2[i+2]++;l=5; --i; break;}--z; _t_bipai2[i & 0x3f]++;}}if(m>0){if(x>0 && y>0) return(1);if(z>0) return(1);}return(0);}t_XOO=new Array(0x40);t_OXO=new Array(0x40);t_OOX=new Array(0x40);t_OOO=new Array(0x40);function a0031(){var i=0;t_XOO=new Array(0x40);t_OXO=new Array(0x40);t_OOX=new Array(0x40);t_OOO=new Array(0x40);i=0x40; while(--i>-1){t_OOO[i]=t_XOO[i]=t_OXO[i]=t_OOX[i]=0;if(vZpt[i]>2 || (vZpt[i]>1 && _t_bipai2[i]>0)) t_OOO[i]=3;else if(vZpt[i]>1 || (vZpt[i]>0 && _t_bipai2[i]>0)) t_OOO[i]=1;if(i>0x30 || (i & 0x0f)>7) continue;if(vZpt[i]+_t_bipai2[i  ]>0 && vZpt[i+1]>0 && vZpt[i+2]>0) t_XOO[i]+=Math.min(vZpt[i+1], vZpt[i+2]);if(vZpt[i]>0 && vZpt[i+1]+_t_bipai2[i+1]>0 && vZpt[i+2]>0) t_OXO[i]+=Math.min(vZpt[i], vZpt[i+2]);if( vZpt[i]>0 && vZpt[i+1]>0 && vZpt[i+2]+_t_bipai2[i+2]>0) t_OOX[i]+=Math.min(vZpt[i], vZpt[i+1]);}}function a0032(jia, ej, mode){var i=0x40, j, k, l, x, y, z, ii;var p;var f;var zipai=sanyuan=yaojiu=green=red_so=fenghuaxueyue=gang=0;var suit=[0, 0, 0, 0];var b=[0, 0, 0, 0];var aa=new Array(0x40);var rv=new Array(0x40);var ke=new Array(0x40), ke_ctr=0;var sh=new Array(0x40), sh_ctr=0;var gang=0;var dr=0;if(jia==ej || (f=_t[ej].fulou_ctr)<2) return(0);i=0x40; while(--i>-1){t_dgr[i]=1000; aa[i]=0;}if(_t_players==2) xiajia=1;else  if(_t_players==4){if((i=jia+1)>3) i=9;if(i==ej) xiajia=1;}k=-5; i=f; while(--i>=0){k+=5;x=_t[ej].fuloupai[k] & 0x3f;suit[x >> 4]++;if(_t[ej].fuloupai[k+3] || _t[ej].fuloupai[k+4]) gang++;if(x==(_t[ej].fuloupai[k+1] & 0x3f)){ke[ke_ctr++]=i;if(x>0x30){if(x>0x34) sanyuan++;zipai++; yaojiu++;}else if((x & 0x0f)==1 || (x & 0x0f)==9) yaojiu++;if(x==0x36 || x==3 || !(x & 0x31)) green++;else if(x==0x37 || !(x & 0x30)) red_so++;if(x==_t[ej].menfeng || x==0x35 || x==0x11 || x==0x15) fenghuaxueyue++;}else {x=Math.floor((x+(_t[ej].fuloupai[k+1] & 0x3f)+(_t[ej].fuloupai[k+2] & 0x3f)) / 3)-1;sh[sh_ctr++]=x;if(!((x+1) & 5)) yaojiu++;if(x==0x02) green++;}}dr=0;if(_t_gamemode==_T_GAMEMODE_REACH || _t_gamemode==_T_GAMEMODE_CHIP_MAHJONG || _t_gamemode==_T_GAMEMODE_BOO || _t_gamemode==_T_GAMEMODE_EASTERN_BOO || _t_gamemode==_T_GAMEMODE_BEINUKI){i=_t_dora_disp_ctr; while(--i>-1) aa[_t_dora[i] & 0x3f]++;k=-f*5; while(--k>=0){p=_t[ej].fuloupai[k] & 0x3f;if(p<1 || p>0x37) continue;dr+=aa[p];if((_t[ej].fuloupai[k] & 0x7f)<0x40) continue;dr++;}}if(sanyuan>2){ yaku+=256; fan+=256; }else if(sanyuan>1){k=f; j=0; i=0x34; while(++i<0x38){if(t_OOO[i]>1) ++k;else if(j<1 && t_OOO[i]) ++j;}if(k>2 || (k+j>2 && _t_gamemode==_T_GAMEMODE_GUOJI)){i=0x34; while(++i<0x38){if(t_OOO[i]) t_dgr[i] |= 0x0fff0000; continue;}}else if(k+j>2){i=0x34; while(++i<0x38){if(t_OOO[i]) t_dgr[i] |= 0x0fff0000; continue;}}}j=zipai-sanyuan;if(j>3){ yaku+=256; fan+=256; }else if(j>2){k=f; j=0; i=0x30; while(++i<0x35){if(t_OOO[i]>1) ++k;else if(j<1 && t_OOO[i]) ++j;}if(k+j>4){i=0x35; while(--i>0x30){if(t_OOO[i]){t_dgr[i] |= 0x0fff0000; continue;}}}else if(k>2 && (_t_gamemode==_T_GAMEMODE_GUOJI)){i=0x35; while(--i>0x30){if(t_OOO[i]){t_dgr[i] |= 0x004000; continue;}}}}if(zipai==yaojiu && zipai>=f && f>2){k=f; j=0; i=0x30; while(++i<0x38){if(t_OOO[i]>1) ++k;else if(j<1 && t_OOO[i]) ++j;}if(k+j>4){i=0x30; while(++i<0x38){if(!t_OOO[i]) continue;t_dgr[i] |= 0x0fff0000;}}}if(_t_gamemode!=_T_GAMEMODE_GUOJI && (_t_gamemode!=_T_GAMEMODE_BEINUKI || zipai<1)){z=0; x=-1;if(suit[0]>0){ x=0; ++z; }if(suit[1]>0){ x=0x10; ++z; }if(suit[2]>0){ x=0x20; ++z; }b[0]=b[1]=b[2]=b[3]=2;if(_t_gamemode==_T_GAMEMODE_REACH || _t_gamemode==_T_GAMEMODE_CHIP_MAHJONG || _t_gamemode==_T_GAMEMODE_BOO || _t_gamemode==_T_GAMEMODE_EASTERN_BOO){i=_t_dora_disp_ctr; while(--i>-1){j=_t_dora[i] & 0x3f;k=vZpt[j]; if(_t_bipai2[j]>0) ++k;if(f>3 && k>2) k=2;else if(f<4 && k>3) k=3;b[j >> 4]+=k;}}if(z<1 && f>2){i=0x40; while(--i>-1) aa[i]=0;i=0; while(++i<0x30){if(f<4){if(t_XOO[i]) aa[i]++;if(t_OXO[i]) aa[i+1]++;if(t_OOX[i]) aa[i+2]++;}if(t_OOO[i]) aa[i]++;}i=0x30; while(--i>-1){if(aa[i]) t_dgr[i] |= 0x001000;}i=0x30; while(++i<0x38){if(t_OOO[i]) t_dgr[i] |= 0x004000;}}else if(z==1 && f>1){i=0x40; while(--i>-1) aa[i]=0;i=x; l=10; while(--l>0){++i;if(f<4){if(t_XOO[i]) aa[i]++;if(t_OXO[i]) aa[i+1]++;if(t_OOX[i]) aa[i+2]++;}if(t_OOO[i]) aa[i]++;}i=x; l=10; while(--l>0){++i;if(aa[i]) t_dgr[i] |= 0x004000;}i=0x30; while(++i<0x38){if(t_OOO[i]) t_dgr[i] |= 0x004000;}}}if(_t_gamemode==_T_GAMEMODE_TAIWAN){i=0x40; while(--i>-1){vDanger[i]+=t_dgr[i];}return(0);}if(_t_gamemode!=_T_GAMEMODE_ARSHIAR && _t_gamemode!=_T_GAMEMODE_BOO){if((gang==3 && f==3 && _t_gang_ctr==3) ||    (gang==2 && f<4 && _t_gang_ctr<3)){m=0x0fff0000; if(gang<3) m=0x004000;i=0x38; while(--i>-1){if(_t_bipai2[i]<2 && vZpt[i]+_t_bipai2[i]>3) t_dgr[i] |= m;}}if(f>2 && green>=f){if((j=4-f)>0){var k1=j1=j;x=vZpt[0x02]; y=vZpt[0x03]; z=vZpt[0x04];l=_t_bipai2[0x02]; m=_t_bipai2[0x03]; n=_t_bipai2[0x04];if(x>0 && y>0 && z>0){w=Math.min(x, Math.min(y, z));x-=w; y-=w; z-=w; j1-=w;}if(x>0 && y>0 && z<1 && n>0){--x; --y; --n; --j1;}else if(x>0 && y<1 && z>0 && m>0){--x; --z; --m; --j1;}else if(x<1 && y>0 && z>0 && l>0){--y; --z; --l; --j1;}if(x>2){ --j1; --k1; }else if(x>1){--k1; if(l>0) --j1;}else if(x>0 && l>0) --k1;if(y>2){ --j1; --k1; }else if(y>1){--k1; if(m>0) --j1;}else if(y>0 && m>0) --k1;if(z>2){ --j1; --k1; }else if(z>1){--k1; if(n>0) --j1;}else if(z>0 && n>0) --k1;k=j;x=vZpt[0x02]; y=vZpt[0x03]; z=vZpt[0x04];l=_t_bipai2[0x02]; m=_t_bipai2[0x03]; n=_t_bipai2[0x04];if(x>2){ --j; x-=3; }if(y>2){ --j; y-=3; }if(z>2){ --j; z-=3; }if(x>0 && y>0 && z>0){w=Math.min(x, Math.min(y, z));x-=w; y-=w; z-=w; j-=w;}if(x>0 && y>0 && z<1 && n>0){--x; --y; --n; --j;}else if(x>0 && y<1 && z>0 && m>0){--x; --z; --m; --j;}else if(x<1 && y>0 && z>0 && l>0){--y; --z; --l; --j;}if(x>1){--k; if(l>0) --j;}else if(x>0 && l>0) --k;if(y>1){--k; if(m>0) --j;}else if(y>0 && m>0) --k;if(z>1){--k; if(n>0) --j;}else if(z>0 && n>0) --k;if(j>j1 || (j==j1 && k>k1)){ j=j1; k=k1; }if((z=vZpt[0x06])>2){ --j; --k; }else if(z>1){--k; if(_t_bipai2[0x06]>0) --j;}else if(z>0 && _t_bipai2[0x06]>0) --k;if((z=vZpt[0x08])>2){ --j; --k; }else if(z>1){--k; if(_t_bipai2[0x08]>0) --j;}else if(z>0 && _t_bipai2[0x08]>0) --k;if((z=vZpt[0x36])>2){ --j; --k; }else if(z>1){--k; if(_t_bipai2[0x36]>0) --j;}else if(z>0 && _t_bipai2[0x36]>0) --k;if(k<0 && j<1 && _t_gamemode!=_T_GAMEMODE_ARSHIAR && _t_gamemode!=_T_GAMEMODE_BOO){j=0x4000; if(f>3) j=0x10000;if(t_XOO[0x02]+t_OOO[0x02]) t_dgr[0x02] |= j;if(t_OXO[0x02]+t_OOO[0x03]) t_dgr[0x03] |= j;if(t_OOX[0x02]+t_OOO[0x04]) t_dgr[0x04] |= j;if(t_OOO[0x06]) t_dgr[0x06] |= j;if(t_OOO[0x08]) t_dgr[0x08] |= j;if(t_OOO[0x36]) t_dgr[0x36] |= j;}}else {j=0x10000;if(t_OOO[0x02]) t_dgr[0x02] |= j;if(t_OOO[0x03]) t_dgr[0x03] |= j;if(t_OOO[0x04]) t_dgr[0x04] |= j;if(t_OOO[0x06]) t_dgr[0x06] |= j;if(t_OOO[0x08]) t_dgr[0x08] |= j;if(t_OOO[0x36]) t_dgr[0x36] |= j;}}}if(f==yaojiu && yaojiu>1){k=f; j=0; i=0x01-0x08; while((i+=0x08)<0x30){if(t_OOO[i]>1) ++k;else if(j<1 && t_OOO[i]) ++j;}if(zipai<1 && sh_ctr<1 && k+j>4){i=0x01-0x08; while((i+=0x08)<0x30){if(t_OOO[i]) t_dgr[i] |= 0x0fff0000; continue;}}else if(sh_ctr<1){i=0x30; while(++i<0x38){if(t_OOO[i]>1) ++k;else if(j<1 && t_OOO[i]) ++j;}if(k+j>4){i=0x01-0x08; while((i+=0x08)<0x30){if(t_OOO[i]) t_dgr[i] |= 0x004000; continue;}i=0x30; while(++i<0x38){if(t_OOO[i]) t_dgr[i] |= 0x004000; continue;}}}if((j=4-f)>0 && (_t_gamemode!=_T_GAMEMODE_BOO || _t_rule.yaku.quandaiyao)){k=j; i=-0x10; while((i+=0x10)<0x30){x=vZpt[i+1]; y=vZpt[i+2]; z=vZpt[i+3];l=_t_bipai2[i+1];if(x>0 && y>0 && z>0){w=Math.min(x, Math.min(y, z));x-=w; y-=w; z-=w; j-=w;}if(x>0 && y>0 && z<1 && _t_bipai2[i+3]>0){j--;}else if(x>0 && y<1 && z>0 && _t_bipai2[i+2]>0){j--;}else if(x<1 && y>0 && z>0 && l>0){j--; l--;}if(x>2){ j--; k--; }else if(x>1){k--;if(l>0) j--;}else if(x>0 && l>0) k--;x=vZpt[i+7]; y=vZpt[i+8]; z=vZpt[i+9];l=_t_bipai2[i+9];if(x>0 && y>0 && z>0){w=Math.min(x, Math.min(y, z));x-=w; y-=w; z-=w; j-=w;}if(x>0 && y>0 && z<1 && l>0){j--; l--;}else if(x>0 && y<1 && z>0 && _t_bipai2[i+8]>0){j--;}else if(x<1 && y>0 && z>0 && _t_bipai2[i+7]>0){j--;}if(z>2){ j--; k--; }else if(z>1){k--;if(l>0) j--;}else if(z>0 && l>0) k--;}z=zipai; if(k>-1 || j>0) z=1;i=0x30; while(++i<0x38){if(vZpt[i]>2){ --j; --k; }else if(vZpt[i]>1){--k;if(_t_bipai2[i]>0) --j;}else if(vZpt[i]>0){if(_t_bipai2[i]>0) --k;}}if(k<0 && j<1){j=1; if(z<1) j++;i=-0x10; while((i+=0x10)<0x30){if(t_XOO[i+1]+t_OOO[i+1]) t_dgr[i+1] |= 0x001000;if(t_OXO[i+1]) t_dgr[i+2] |= 0x001000;if(t_OOX[i+1]) t_dgr[i+3] |= 0x001000;if(t_XOO[i+7]) t_dgr[i+7] |= 0x001000;if(t_OXO[i+7]) t_dgr[i+8] |= 0x001000;if(t_OOX[i+7]+t_OOO[i+9]) t_dgr[i+9] |= 0x001000;}j=1; if(f>3) j=0;i=0x30; while(++i<0x38){if(t_OOO[i]>j) t_dgr[i] |= 0x001000;}}}}if(f>2 && red_so>=f){k=f; j=0;if(t_OOO[0x01]>1) ++k;else if(j<1 && t_OOO[0x01]) ++j;if(t_OOO[0x05]>1) ++k;else if(j<1 && t_OOO[0x05]) ++j;if(t_OOO[0x07]>1) ++k;else if(j<1 && t_OOO[0x07]) ++j;if(t_OOO[0x09]>1) ++k;else if(j<1 && t_OOO[0x09]) ++j;if(t_OOO[0x37]>1) ++k;else if(j<1 && t_OOO[0x37]) ++j;if(!_t_rule.yaku.benikujaku) j=k=0;if(k+j>4){if(t_OOO[0x01]) t_dgr[0x01] |= 0x0fff0000;if(t_OOO[0x05]) t_dgr[0x05] |= 0x0fff0000;if(t_OOO[0x07]) t_dgr[0x07] |= 0x0fff0000;if(t_OOO[0x09]) t_dgr[0x09] |= 0x0fff0000;if(t_OOO[0x37]) t_dgr[0x37] |= 0x0fff0000;}}if(_t_gamemode!=_T_GAMEMODE_REACH && _t_gamemode==_T_GAMEMODE_CHIP_MAHJONG){i=0x40; while(--i>-1){vDanger[i]+=t_dgr[i];}return(0);}if(f>=fenghuaxueyue){if(fenghuaxueyue>3){if(_t_rule.yaku.fenghuaxueyue){ yaku=256; fan=256; }}else if(fenghuaxueyue>1){k=f; j=_t[ej].menfeng;if(t_OOO[0x11]>1) ++k;if(t_OOO[0x15]>1) ++k;if(t_OOO[0x35]>1) ++k;if(t_OOO[   j]>1) ++k;if(!_t_rule.yaku.fenghuaxueyue) k=0;if(k>3){if(t_OOO[0x11]) t_dgr[0x11] |= 0x0fff0000;if(t_OOO[0x15]) t_dgr[0x15] |= 0x0fff0000;if(t_OOO[0x35]) t_dgr[0x35] |= 0x0fff0000;if(t_OOO[   j]) t_dgr[   j] |= 0x0fff0000;}}}i=-1; while(++i<ke_ctr-1){if(ke[i]>ke[i+1]){j=ke[i]; ke[i]=ke[i+1]; ke[i+1]=j;i=-1;}}i=ke[0];if((ke_ctr>2 && i<10 && i+0x10==ke[1] && (i+0x20==ke[2] || (ke_ctr>3 && i+0x20==ke[3]))) ||    (ke_ctr>3 && ke[3]<0x30 && ke[3]-0x10==ke[2] && (ke[3]-0x20==ke[1] || ke[3]-0x20==i))) ;else if(f>1 && f<4){if(((i<0x20 && i+0x10==ke[1]) || (f>2 && (i+0x10==ke[2] || ((i=ke[1])<0x20 && i+0x10==ke[2]))))){if(i<10) i+=0x20; else i-=0x10;if(t_OOO[i]>1) t_dgr[i] |= 0x0fff0000;}if((((i=ke[0])<10 && i+0x20==ke[1]) || (f>2 && (i+0x20==ke[2] || ((i=ke[1])<10 && i+0x20==ke[2]))))){if(t_OOO[i+0x10]>1) t_dgr[i+0x10] |= 0x0fff0000;}}l=2; m=256;j=k=0x0fff0000;if(!_t_rule.yaku.sanlianke) l=k=0;if(!_t_rule.yaku.silianke){ m=k; j=l; }if(ke_ctr>3 && i<0x30 && i+3==ke[3]) ;else if(f==3 && ke[1]<0x30 && i+2==ke[3]){if(t_OOO[i-1]>1) t_dgr[i-1] |= k;if(t_OOO[i+3]>1) t_dgr[i+3] |= k;}else if(f==3 && ke[1]<0x30 && i+3==ke[3]){if(i+1==ke[1]){if(t_OOO[i+2]>1) t_dgr[i+2] |= k;if((i & 0x0f)>1 && t_OOO[i-1]>1) t_dgr[i-1] |= j;}else {if(t_OOO[i+1]>1) t_dgr[i+1] |= k;if(t_OOO[i+4]>1) t_dgr[i+4] |= j;}}else if(f>1 && f<4){if(((i<0x30 && i+1==ke[1]) || (f>2 && (i+1==ke[2] || ((i=ke[1])<0x30 && i+1==ke[2]))))){if(t_OOO[i-1]>1) t_dgr[i-1] |= j;if(t_OOO[i+2]>1) t_dgr[i+2] |= j;}if(((i<0x30 && i+2==ke[1]) || (f>2 && (i+2==ke[2] || ((i=ke[1])<0x30 && i+2==ke[2]))))){if(t_OOO[i+1]>1) t_dgr[i+1] |= j;}}i=-1; while(++i<sh_ctr-1){if(sh[i]>sh[i+1]){j=sh[i]; sh[i]=sh[i+1]; sh[i+1]=j;i=-1;}}if(ke_ctr<1){l=5; m=0x004000; if(!_t_rule.yaku.shuanglongzhengzhu) l=m=0;if(sh_ctr>3 && sh[0]<10 && sh[0]+0x03==sh[1] && sh[0]+0x20==sh[2] && sh[0]+0x23==sh[3]){i=0x10; while(++i<0x1a){if(t_OOO[i]) t_dgr[i  ] |= m;}}else if(sh_ctr>2 && (i=sh[0])<10){j=-1;if(i+0x03==sh[1] && i+0x20==sh[2]) j=i+0x23;else if(i+0x03==sh[1] && i+0x23==sh[2]) j=i+0x20;else if(i+0x20==sh[1] && i+0x23==sh[2]) j=i+0x3;else if(i>3 && i+0x20-3==sh[1] && i+0x20==sh[2]) j=i-0x3;if(j>-1){if(t_XOO[j]) t_dgr[i  ] |= m;if(t_OXO[j]) t_dgr[i+1] |= m;if(t_OOX[j]) t_dgr[i+2] |= m;}}else if(sh_ctr>1){i=sh[0];x=y=z=w=-1;if(i<10 && i+0x03==sh[1]){ x=i+0x20; y=i+0x23; }else if(i+0x20==sh[1]){x=i+0x03; y=i+0x23;if(i>3){ z=i-0x03; w=i+0x20-3; }}else if(i>0x03 && i+0x20-0x03==sh[1]){ x=i-0x03; y=i+0x20; }else if(i+0x23==sh[1]){ x=i-0x03; y=i+0x20; }else if(i>0x20 && i+3==sh[1]){ x=i-0x20; y=i-0x20+3; }i=0x30; while(--i>-1) aa[i]=0;j=0; if(x>-1 && t_XOO[x]+t_OXO[x]+t_OOX[x]>0 && t_XOO[y]+t_OXO[y]+t_OOX[y]>0){if(t_XOO[x]) t_dgr[x  ] |= m;if(t_OXO[x]) t_dgr[x+1] |= m;if(t_OOX[x]) t_dgr[x+2] |= m;if(t_XOO[y]) t_dgr[y  ] |= m;if(t_OXO[y]) t_dgr[y+1] |= m;if(t_OOX[y]) t_dgr[y+2] |= m;j++;}if(z>-1 && t_XOO[z]+t_OXO[z]+t_OOX[z]>0 && t_XOO[w]+t_OXO[w]+t_OOX[w]>0){if(t_XOO[z]) t_dgr[z  ] |= m;if(t_OXO[z]) t_dgr[z+1] |= m;if(t_OOX[z]) t_dgr[z+2] |= m;if(t_XOO[w]) t_dgr[w  ] |= m;if(t_OXO[w]) t_dgr[w+1] |= m;if(t_OOX[w]) t_dgr[w+2] |= m;j++;}if(j){i=0x10; while(++i<0x20){if(t_OOO[i]) t_dgr[i] |= m;}}}}i=0x38; while(--i>-1){if(_t[ej].toripai[i]>0){ t_dgr[i]=0; continue; }if(t_dgr[i]>0x000fff) t_dgr[i] &= 0xfffff000;if(!mode && t_dgr[i]<0x10000) t_dgr[i]=0;}i=0x40; while(--i>-1){vDanger[i]+=t_dgr[i];}if(dr>2 || gang>2 || zipai>2) return(2);return(0);}function a0051(jia){var i, j, k, l, m, n, p=_t_dapai_buff & 0x3f, l1, l2;var mq_buff=_t[jia].menqian_flag;var fc_buff=_t[jia].fulou_ctr;var te_buff=new Array(20); i=20; while(--i>-1) te_buff[i]=_t[jia].shupai[i];var exp=new Object();exp.mxf=0;exp.mxfc=0;exp.avf=0;exp.opr=[0,0];var cdpp=[0,0];cdpp[0]=_t_cannot_dapai_pai1;cdpp[1]=_t_cannot_dapai_pai2;if(_t_gang_str=='' && (_t[jia].menqian_flag || _t[jia].fulou_ctr>0)) ;else if(_t_peng_ok) ;else if(((_t_dajia+1) & 3)==jia && (_t_dapai_buff & 0x3f)<0x30 && _t_chi_ctr) ;else return(0);i=0x40; while(--i>=0) vZpt[i]=_t[jia].zampai_table[i]+_t[jia].zampai_table[i+0x40];i=20; while(--i>-1) te_buff[i]=_t[jia].shupai[i];exp.flag=_t[jia].exp.flag;exp.mxf=_t[jia].exp.mxf;exp.mxfc=_t[jia].exp.mxfc;exp.avf=_t[jia].exp.avf;exp.cmd=-1;if(_t[jia].fulou_ctr>2 && exp.flag) return(-1);if(_t_gang_str=='' && (_t[jia].menqian_flag || _t[jia].fulou_ctr>0)){mq_buff=_t[jia].menqian_flag;fc_buff=_t[jia].fulou_ctr;k=_t[jia].fulou_ctr*5; j=0; n=0;i=20; while(--i>-1){l=_t[jia].shupai[i] & 0x3f;if(l==p){_t[jia].shupai[i]=0;_t[jia].fuloupai[k++]=l;if(++n==3) break;}}if(n==3){_t[jia].fuloupai[k++]=_t_dapai_buff & 0x7f;_t[jia].fuloupai[k]=0;_t[jia].menqian_flag=1; _t[jia].fulou_ctr++;if(a0053(jia, exp)) exp.cmd=21;}_t[jia].menqian_flag=mq_buff;_t[jia].fulou_ctr=fc_buff;i=20; while(--i>-1) _t[jia].shupai[i]=te_buff[i];}if(_t_peng_ok){mq_buff=_t[jia].menqian_flag;fc_buff=_t[jia].fulou_ctr;k=_t[jia].fulou_ctr*5; j=0; n=0;i=20; while(--i>-1){l=_t[jia].shupai[i] & 0x3f;if(p==l){exp.opr[n]=l;_t[jia].shupai[i]=0;_t[jia].fuloupai[k++]=l;if(++n>1) break;}}if(n==2){_t[jia].fuloupai[k++]=_t_dapai_buff & 0x7f;_t[jia].fuloupai[k++]=0;_t[jia].fuloupai[k]=0;_t[jia].menqian_flag=1; _t[jia].fulou_ctr++;_t_cannot_dapai_pai1=_t_cannot_dapai_pai2=0;_t_cannot_dapai_pai1=_t_dapai_buff & 0x3f;if(a0111_2(jia) && a0052(jia, exp)) exp.cmd=22;}_t[jia].menqian_flag=mq_buff;_t[jia].fulou_ctr=fc_buff;i=20; while(--i>-1) _t[jia].shupai[i]=te_buff[i];}if(((_t_dajia+1) & 3)==jia && (_t_dapai_buff & 0x3f)<0x30 && _t_chi_ctr){k=_t[jia].fulou_ctr*5; j=0;if((_t_dapai_buff & 0x0f)<8){mq_buff=_t[jia].menqian_flag;fc_buff=_t[jia].fulou_ctr;k=_t[jia].fulou_ctr*5; l1=l2=-1;p=(_t_dapai_buff & 0x3f)+1;i=20; while(--i>-1){l=_t[jia].shupai[i] & 0x3f;if(l==p){_t[jia].shupai[i]=0;l1=l;break;}}p=(_t_dapai_buff & 0x3f)+2;i=20; while(--i>-1){l=_t[jia].shupai[i] & 0x3f;if(l==p){_t[jia].shupai[i]=0;l2=l;break;}}if(l1>0 && l2>0){k=_t[jia].fulou_ctr*5;_t[jia].fuloupai[k++]=l1;_t[jia].fuloupai[k++]=l2;_t[jia].fuloupai[k++]=_t_dapai_buff & 0x7f;_t[jia].fuloupai[k++]=0;_t[jia].fuloupai[k]=0;_t[jia].menqian_flag=1; _t[jia].fulou_ctr++;_t_cannot_dapai_pai1=_t_cannot_dapai_pai2=0;if(_t[jia].fulou_ctr<4) _t_cannot_dapai_pai1=_t_dapai_buff & 0x3f;if(a0111_2(jia) && a0052(jia, exp)){exp.cmd=23;exp.opr[0]=l1;exp.opr[1]=l2;}}_t[jia].menqian_flag=mq_buff;_t[jia].fulou_ctr=fc_buff;i=20; while(--i>-1) _t[jia].shupai[i]=te_buff[i];}k=_t[jia].fulou_ctr*5; j=0;if((_t_dapai_buff & 0x0f)>1 && (_t_dapai_buff & 0x0f)<9){mq_buff=_t[jia].menqian_flag;fc_buff=_t[jia].fulou_ctr;k=_t[jia].fulou_ctr*5; l1=l2=-1;p=(_t_dapai_buff & 0x3f)-1;i=20; while(--i>-1){l=_t[jia].shupai[i] & 0x3f;if(l==p){_t[jia].shupai[i]=0;l1=l;break;}}p=(_t_dapai_buff & 0x3f)+1;i=20; while(--i>-1){l=_t[jia].shupai[i] & 0x3f;if(l==p){_t[jia].shupai[i]=0;l2=l;break;}}if(l1>0 && l2>0){k=_t[jia].fulou_ctr*5;_t[jia].fuloupai[k++]=l1;_t[jia].fuloupai[k++]=l2;_t[jia].fuloupai[k++]=_t_dapai_buff & 0x7f;_t[jia].fuloupai[k++]=0;_t[jia].fuloupai[k]=0;_t[jia].menqian_flag=1; _t[jia].fulou_ctr++;_t_cannot_dapai_pai1=_t_cannot_dapai_pai2=0;if(_t[jia].fulou_ctr<4) _t_cannot_dapai_pai1=_t_dapai_buff & 0x3f;if(a0111_2(jia) && a0052(jia, exp)){exp.cmd=23;exp.opr[0]=l1;exp.opr[1]=l2;}}_t[jia].menqian_flag=mq_buff;_t[jia].fulou_ctr=fc_buff;i=20; while(--i>-1) _t[jia].shupai[i]=te_buff[i];}k=0; j=0;if((_t_dapai_buff & 0x0f)>2){mq_buff=_t[jia].menqian_flag;fc_buff=_t[jia].fulou_ctr;k=_t[jia].fulou_ctr*5; l1=l2=-1;p=(_t_dapai_buff & 0x3f)-2;i=20; while(--i>-1){l=_t[jia].shupai[i] & 0x3f;if(l==p){_t[jia].shupai[i]=0;l1=l;break;}}p=(_t_dapai_buff & 0x3f)-1;i=20; while(--i>-1){l=_t[jia].shupai[i] & 0x3f;if(l==p){_t[jia].shupai[i]=0;l2=l;break;}}if(l1>0 && l2>0){k=_t[jia].fulou_ctr*5;_t[jia].fuloupai[k++]=l1;_t[jia].fuloupai[k++]=l2;_t[jia].fuloupai[k++]=_t_dapai_buff & 0x7f;_t[jia].fuloupai[k++]=0;_t[jia].fuloupai[k]=0;_t[jia].menqian_flag=1; _t[jia].fulou_ctr++;_t_cannot_dapai_pai1=_t_cannot_dapai_pai2=0;if(_t[jia].fulou_ctr<4) _t_cannot_dapai_pai1=_t_dapai_buff & 0x3f;if(a0111_2(jia) && a0052(jia, exp)){exp.cmd=23;exp.opr[0]=l1;exp.opr[1]=l2;}}_t[jia].menqian_flag=mq_buff;_t[jia].fulou_ctr=fc_buff;i=20; while(--i>-1) _t[jia].shupai[i]=te_buff[i];}}k=_t[jia].fulou_ctr*5;_t[jia].fuloupai[k]=_t[jia].fuloupai[k+1]=_t[jia].fuloupai[k+2]=_t[jia].fuloupai[k+3]=_t[jia].fuloupai[k+4]=0;_t_cannot_dapai_pai1=cdpp[0];_t_cannot_dapai_pai2=cdpp[1];if((i=exp.cmd)>-1){_t[jia].declare_command=i;if(i==22 || i==23){_t[jia].declare_param1=exp.opr[0];_t[jia].declare_param2=exp.opr[1];}}return(i);}function a0052(jia, exp2){var exp=new Object();var i;var mpch, yfa, flag=0;var hp, dpp, dp, dp2, dpf=new Array(0x40);i=0x40; while(--i>-1) dpf[i]=0;var ls=_t_lingshang_flag; _t_lingshang_flag=0;var zz=_t_zampai_ctr; _t_zampai_ctr=100;var rf=_t_ronghe_flag; _t_ronghe_flag=0;dpp=20; while(--dpp>-1){dp=_t[jia].shupai[dpp];if((dp2=dp & 0x3f)<1 || dp2>0x37) continue;if(_t_cannot_dapai_pai1==dp2) continue;if(dpf[dp2]) continue;_t[jia].shupai[dpp]=0; dpf[dp2]++;if(a0111_1(jia)){exp.mxf=exp2.mxf; mpch=yfa=0;exp.mxfc=exp2.mxfc;hp=0; while(++hp<0x38){if(!(hp & 0x0f) || (hp & 0x0f)>9) continue;if(mpcd[hp]<1 && mpcd[hp & 0x30]<1) continue;_t[jia].shupai[15]=hp;var keishikiHele=_t_yaku_judge(jia, 2, -1);if(keishikiHele>0){if(vZpt[hp]>0){mpch++;if(_t_yakufan_ctr>=exp.mxf){if(_t_yakufan_ctr>exp.mxf){exp.mxf=_t_yakufan_ctr; exp.mxfc=0;}exp.mxfc++;}}}else if(keishikiHele>-1){if(_t[jia].menqian_flag){if(_t_yakufan_ctr-_t_fan==1 && _t[jia].fulou_ctr<4){_t_yakufan_ctr+=7; yfa+=_t_yakufan_ctr;if(_t_yakufan_ctr>=exp.mxf){if(_t_yakufan_ctr>exp.mxf){exp.mxf=_t_yakufan_ctr; exp.mxfc=0;}exp.mxfc++;}}else if(_t_yakufan_ctr-_t_fan>3 && _t[jia].fulou_ctr==4 && !(_t[jia].fuloupai[4]+_t[jia].fuloupai[9]+_t[jia].fuloupai[14]+_t[jia].fuloupai[19])){_t_yakufan_ctr+=4; yfa+=_t_yakufan_ctr;if(_t_yakufan_ctr>=exp.mxf){if(_t_yakufan_ctr>exp.mxf){exp.mxf=_t_yakufan_ctr; exp.mxfc=0;}exp.mxfc++;}}}}_t[jia].shupai[15]=0;}if(mpch>0){i=Math.floor(yfa / mpch);if(exp.mxf>exp2.mxf || (exp.mxf==exp2.mxf && (exp.mxfc>exp2.mxfc || (exp.mxfc==exp2.mxfc || i>exp2.avf)))){exp2.mxf=exp.mxf; exp2.mxfc=exp.mxfc; exp2.avf=i;flag=1;}}}_t[jia].shupai[dpp]=dp;}_t_zampai_ctr=zz;_t_lingshang_flag=ls;_t_ronghe_flag=rf;return(flag);}function a0053(jia, exp2){var exp=new Object();var i;var mpch, yfa;var hp;var ls=_t_lingshang_flag; _t_lingshang_flag=0;var zz=_t_zampai_ctr; _t_zampai_ctr=100;var rf=_t_ronghe_flag; _t_ronghe_flag=0;exp.mxf=exp2.mxf;exp.mxfc=exp2.mxfc;hp=0; while(++hp<0x38){if(!(hp & 0x0f) && (hp & 0x0f)>9) continue;_t[jia].shupai[15]=hp;var keishikiHele=_t_yaku_judge(jia, 2, -1);if(keishikiHele>0){if(vZpt[hp]>0){if(_t_yakufan_ctr>=exp.mxf){if(_t_yakufan_ctr>exp.mxf){exp.mxf=_t_yakufan_ctr; exp.mxfc=0;}exp.mxfc++;}}}else if(keishikiHele>-1){if(_t[jia].menqian_flag){if(_t_yakufan_ctr-_t_fan==1 && _t[jia].fulou_ctr<4){_t_yakufan_ctr+=7; yfa+=_t_yakufan_ctr;if(_t_yakufan_ctr>=exp.mxf){if(_t_yakufan_ctr>exp.mxf){exp.mxf=_t_yakufan_ctr; exp.mxfc=0;}exp.mxfc++;}}else if(_t_yakufan_ctr-_t_fan>3 && _t[jia].fulou_ctr==4 && !(_t[jia].fuloupai[4]+_t[jia].fuloupai[9]+_t[jia].fuloupai[14]+_t[jia].fuloupai[19])){_t_yakufan_ctr+=4; yfa+=_t_yakufan_ctr;if(_t_yakufan_ctr>=exp.mxf){if(_t_yakufan_ctr>exp.mxf){exp.mxf=_t_yakufan_ctr; exp.mxfc=0;}exp.mxfc++;}}}}}_t_zampai_ctr=zz;_t_lingshang_flag=ls;_t_ronghe_flag=rf;_t[jia].shupai[15]=0;if(exp.mxfc<1) return(0);i=Math.floor(yfa / mpch);if(exp.mxf>exp2.mxf || (exp.mxf==exp2.mxf && (exp.mxfc>exp2.mxfc || (exp.mxfc==exp2.mxfc || i>exp2.avf)))){exp2.mxf=exp.mxf; exp2.mxfc=exp.mxfc; exp2.avf=i;}return(1);}function a0091(jia){var i, j, k, l, pxt;i=0x40; while(--i>-1) _t[jia].nq[i]=_t[jia].required[i]=vYaku[i]=vXOO[i]=vOXO[i]=vOOX[i]=vOOO[i]=vOOOO[i]=0;var nxt=a0000(jia, 1);_t[jia].neraiyaku=_t[jia].rm_2naki=0;if(_t_gamemode==_T_GAMEMODE_BOO || _t_gamemode==_T_GAMEMODE_ARSHIAR){if(a0129(jia, nxt)>0) ;else if(_t_gamemode==_T_GAMEMODE_BOO && a0130(jia, nxt)) ;else {if(a0120(jia));else if(a0121(jia));else if(a0122(jia)){a0080(jia, 0, -1, nxt);}else if(a0080(jia, 0, -1, nxt)){a0125(jia);}else if(a0125(jia));if(_t_gamemode==_T_GAMEMODE_BOO){ a0112(jia);a0126(jia);}else {a0126(jia);if((_t_zhuangjia==jia || _t[jia].score>200) && _t[jia].fulou_ctr<3) a0112(jia);}}}else if(_t_gamemode==_T_GAMEMODE_BEINUKI){if(a0129(jia, nxt)>0) ;else if(a0130(jia, nxt)) ;else {_t_shupai_move(jia);l=_t[jia].nukidora_ctr; i=_t_dora_disp_ctr; while(--i>-1){if(_t_bipai2[_t_dora[i]]>1) l++;}if(l>0) a0112(jia);}}else if(_t_gamemode==_T_GAMEMODE_GUOJI){ if(a0132(jia, nxt)>0) ;else if(a0133(jia, nxt)>0) ;else if(a0131(jia, nxt)) ;else if(a0120(jia)) ;else if(a0121(jia)) ;else if(a0122(jia)) ;else if(a0127(jia)) ;else if(a0128(jia)){a0123(jia); a0124(jia, 0, -1);}else if(a0172(jia, 0, -1)) ;else if(a0124(jia, 0, -1)) ;else if(a0135(jia)) ;}else if(_t_gamemode==_T_GAMEMODE_TAIWAN){a0112(jia);}else {a0114(jia);if((p=a0129(jia, nxt))>0) ;else if(a0130(jia, nxt)) ;else {if(a0120(jia));else if(a0121(jia)){a0172(jia, 0, -1);a0126(jia);}else if(a0122(jia)){a0080(jia, 0, -1);if(a0125(jia));else a0126(jia);}else if(a0123(jia)){if(a0172(jia, 0, -1));else a0080(jia, 0, -1);a0126(jia);a0175(jia);i=0x40; while(--i>-1){if(vYaku[i]>0x0300) break;}if(i<0){i=0x40; while(--i>-1) vXOO[i]=vOXO[i]=vOOX[i]=vOOO[i]=vOOOO[i]=0;}}else if(a0172(jia, 0, -1)){if(a0125(jia));else a0126(jia);a0175(jia);}else if(a0080(jia, 0, -1)){if(a0125(jia));else a0126(jia);a0175(jia);i=0x40; while(--i>-1){if(vYaku[i]>0x0300) break;}if(i<0){i=0x40; while(--i>-1) vXOO[i]=vOXO[i]=vOOX[i]=vOOO[i]=vOOOO[i]=0;}}else if(a0126(jia)){a0175(jia);}else if(a0125(jia)){a0175(jia);}}if(_t_gamemode!=_T_GAMEMODE_PENGLI){k=-5; l=0; i=_t[jia].fulou_ctr; while(--i>-1){k+=5;if((j=_t[jia].fuloupai[k] & 0x3f)!=(_t[jia].fuloupai[k+1] & 0x3f)) continue;if(j>0x34){ l++; continue; }if(j==_t_zhuangfeng[0] || j==_t_zhuangfeng[1]) l++;if(j==_t[jia].menfeng) l++;}if(_t_shibari<=l) a0112(jia);}else {i=3; while(--i>-1){if(i==jia) continue;if(_t[i].score>_t[jia].score) break;}if(i<0 && _t[jia].score>0) a0112(jia);}}_t_shupai_move(jia);j=0x30; while(++j<0x38){if(_t[jia].required[j]<1) _t[jia].required[j]=-32768;if(vOOOO[j]>vOOO[j] && _t_bipai2[j]==3) _t[jia].nq[j]=5;else if(vOOO[j]>0 && _t_bipai2[j]>1) _t[jia].nq[j]=4;}k=vXOO[0x21]; if(k>0 && _t_bipai2[0x22]>0 && _t_bipai2[0x23]>0) _t[jia].nq[0x21]=1;if(k<vOOO[0x21] && _t_bipai2[0x21]>1){k=vOOO[0x21]; _t[jia].nq[0x21]=4;}if(k<vOOOO[0x21] && _t_bipai2[0x21]==3) _t[jia].nq[0x21]=5;k=vOOX[0x29]; if(k>0 && _t_bipai2[0x27]>0 && _t_bipai2[0x28]>0) _t[jia].nq[0x29]=3;if(k<vOOO[0x29] && _t_bipai2[0x29]>1){k=vOOO[0x29]; _t[jia].nq[0x29]=4;}if(k<vOOOO[0x29] && _t_bipai2[0x29]==3) _t[jia].nq[0x29]=5;k=vXOO[0x11]; if(k>0 && _t_bipai2[0x12]>0 && _t_bipai2[0x13]>0) _t[jia].nq[0x11]=1;if(k<vOOO[0x11] && _t_bipai2[0x11]>1){k=vOOO[0x11]; _t[jia].nq[0x11]=4;}if(k<vOOOO[0x11] && _t_bipai2[0x11]==3) _t[jia].nq[0x11]=5;k=vOOX[0x19]; if(k>0 && _t_bipai2[0x17]>0 && _t_bipai2[0x18]>0) _t[jia].nq[0x19]=3;if(k<vOOO[0x19] && _t_bipai2[0x19]>1){k=vOOO[0x19]; _t[jia].nq[0x19]=4;}if(k<vOOOO[0x19] && _t_bipai2[0x19]==3) _t[jia].nq[0x19]=5;k=vXOO[0x01]; if(k>0 && _t_bipai2[0x02]>0 && _t_bipai2[0x03]>0) _t[jia].nq[0x01]=1;if(k<vOOO[0x01] && _t_bipai2[0x01]>1){k=vOOO[0x01]; _t[jia].nq[0x01]=4;}if(k<vOOOO[0x01] && _t_bipai2[0x01]==3) _t[jia].nq[0x01]=5;k=vOOX[0x09]; if(k>0 && _t_bipai2[0x07]>0 && _t_bipai2[0x08]>0) _t[jia].nq[0x09]=3;if(k<vOOO[0x09] && _t_bipai2[0x09]>1){k=vOOO[0x09]; _t[jia].nq[0x09]=4;}if(k<vOOOO[0x09] && _t_bipai2[0x09]==3) _t[jia].nq[0x09]=5;k=vXOO[0x22]; if(k>0 && _t_bipai2[0x23]>0 && _t_bipai2[0x24]>0) _t[jia].nq[0x22]=1;if(k<vOXO[0x22] && _t_bipai2[0x21]>0 && _t_bipai2[0x23]>0){k=vOXO[0x22]; _t[jia].nq[0x22]=2;}if(k<vOOO[0x22] && _t_bipai2[0x22]>1){k=vOOO[0x22]; _t[jia].nq[0x22]=4;}if(k<vOOOO[0x22] && _t_bipai2[0x22]==3) _t[jia].nq[0x22]=5;k=vOOX[0x28]; if(k>0 && _t_bipai2[0x26]>0 && _t_bipai2[0x27]>0) _t[jia].nq[0x28]=3;if(k<vOXO[0x28] && _t_bipai2[0x27]>0 && _t_bipai2[0x28+1]>0){k=vOXO[0x28]; _t[jia].nq[0x28]=2;}if(k<vOOO[0x28] && _t_bipai2[0x28]>1){k=vOOO[0x28]; _t[jia].nq[0x28]=4;}if(k<vOOOO[0x28] && _t_bipai2[0x28]==3) _t[jia].nq[0x28]=5;k=vXOO[0x12]; if(k>0 && _t_bipai2[0x13]>0 && _t_bipai2[0x14]>0) _t[jia].nq[0x12]=1;if(k<vOXO[0x12] && _t_bipai2[0x11]>0 && _t_bipai2[0x13]>0){k=vOXO[0x12]; _t[jia].nq[0x12]=2;}if(k<vOOO[0x12] && _t_bipai2[0x12]>1){k=vOOO[0x12]; _t[jia].nq[0x12]=4;}if(k<vOOOO[0x12] && _t_bipai2[0x12]==3) _t[jia].nq[0x12]=5;k=vOOX[0x18]; if(k>0 && _t_bipai2[0x16]>0 && _t_bipai2[0x17]>0) _t[jia].nq[0x18]=3;if(k<vOXO[0x18] && _t_bipai2[0x17]>0 && _t_bipai2[0x18+1]>0){k=vOXO[0x18]; _t[jia].nq[0x18]=2;}if(k<vOOO[0x18] && _t_bipai2[0x18]>1){k=vOOO[0x18]; _t[jia].nq[0x18]=4;}if(k<vOOOO[0x18] && _t_bipai2[0x18]==3) _t[jia].nq[0x18]=5;k=vXOO[0x02]; if(k>0 && _t_bipai2[0x03]>0 && _t_bipai2[0x04]>0) _t[jia].nq[0x02]=1;if(k<vOXO[0x02] && _t_bipai2[0x01]>0 && _t_bipai2[0x03]>0){k=vOXO[0x02]; _t[jia].nq[0x02]=2;}if(k<vOOO[0x02] && _t_bipai2[0x02]>1){k=vOOO[0x02]; _t[jia].nq[0x02]=4;}if(k<vOOOO[0x02] && _t_bipai2[0x02]==3) _t[jia].nq[0x02]=5;k=vOOX[0x08]; if(k>0 && _t_bipai2[0x06]>0 && _t_bipai2[0x07]>0) _t[jia].nq[0x08]=3;if(k<vOXO[0x08] && _t_bipai2[0x07]>0 && _t_bipai2[0x08+1]>0){k=vOXO[0x08]; _t[jia].nq[0x08]=2;}if(k<vOOO[0x08] && _t_bipai2[0x08]>1){k=vOOO[0x08]; _t[jia].nq[0x08]=4;}if(k<vOOOO[0x08] && _t_bipai2[0x08]==3) _t[jia].nq[0x08]=5;i=3; while(--i>0){k=vXOO[0x25+i]; if(k>0 && _t_bipai2[0x26+i]>0 && _t_bipai2[0x27+i]>0) _t[jia].nq[0x25+i]=1;if(k<vOXO[0x25+i] && _t_bipai2[0x24+i]>0 && _t_bipai2[0x26+i]>0){k=vOXO[0x25+i]; _t[jia].nq[0x25+i]=2;}if(k<vOOX[0x25+i] && _t_bipai2[0x23+i]>0 && _t_bipai2[0x24+i]>0){k=vOOX[0x25+i]; _t[jia].nq[0x25+i]=3;}if(k<vOOO[0x25+i] && _t_bipai2[0x25+i]>1){k=vOOO[0x25+i]; _t[jia].nq[0x25+i]=4;}if(k<vOOOO[0x25+i] && _t_bipai2[0x25+i]==3) _t[jia].nq[0x25+i]=5;k=vOOX[0x25-i]; if(k>0 && _t_bipai2[0x23-i]>0 && _t_bipai2[0x24-i]>0) _t[jia].nq[0x25-i]=3;if(k<vOXO[0x25-i] && _t_bipai2[0x24-i]>0 && _t_bipai2[0x26-i]>0){k=vOXO[0x25-i]; _t[jia].nq[0x25-i]=2;}if(k<vXOO[0x25-i] && _t_bipai2[0x26-i]>0 && _t_bipai2[0x27-i]>0){k=vXOO[0x25-i]; _t[jia].nq[0x25-i]=1;}if(k<vOOO[0x25-i] && _t_bipai2[0x25-i]>1){k=vOOO[0x25-i]; _t[jia].nq[0x25-i]=4;}if(k<vOOOO[0x25-i] && _t_bipai2[0x25-i]==3) _t[jia].nq[0x25-i]=5;k=vXOO[0x15+i]; if(k>0 && _t_bipai2[0x16+i]>0 && _t_bipai2[0x17+i]>0) _t[jia].nq[0x15+i]=1;if(k<vOXO[0x15+i] && _t_bipai2[0x14+i]>0 && _t_bipai2[0x16+i]>0){k=vOXO[0x15+i]; _t[jia].nq[0x15+i]=2;}if(k<vOOX[0x15+i] && _t_bipai2[0x13+i]>0 && _t_bipai2[0x14+i]>0){k=vOOX[0x15+i]; _t[jia].nq[0x15+i]=3;}if(k<vOOO[0x15+i] && _t_bipai2[0x15+i]>1){k=vOOO[0x15+i]; _t[jia].nq[0x15+i]=4;}if(k<vOOOO[0x15+i] && _t_bipai2[0x15+i]==3) _t[jia].nq[0x15+i]=5;k=vOOX[0x15-i]; if(k>0 && _t_bipai2[0x13-i]>0 && _t_bipai2[0x14-i]>0) _t[jia].nq[0x15-i]=3;if(k<vOXO[0x15-i] && _t_bipai2[0x14-i]>0 && _t_bipai2[0x16-i]>0){k=vOXO[0x15-i]; _t[jia].nq[0x15-i]=2;}if(k<vXOO[0x15-i] && _t_bipai2[0x16-i]>0 && _t_bipai2[0x17-i]>0){k=vXOO[0x15-i]; _t[jia].nq[0x15-i]=1;}if(k<vOOO[0x15-i] && _t_bipai2[0x15-i]>1){k=vOOO[0x15-i]; _t[jia].nq[0x15-i]=4;}if(k<vOOOO[0x15-i] && _t_bipai2[0x15-i]==3) _t[jia].nq[0x15-i]=5;k=vXOO[0x05+i]; if(k>0 && _t_bipai2[0x06+i]>0 && _t_bipai2[0x07+i]>0) _t[jia].nq[0x05+i]=1;if(k<vOXO[0x05+i] && _t_bipai2[0x04+i]>0 && _t_bipai2[0x06+i]>0){k=vOXO[0x05+i]; _t[jia].nq[0x05+i]=2;}if(k<vOOX[0x05+i] && _t_bipai2[0x03+i]>0 && _t_bipai2[0x04+i]>0){k=vOOX[0x05+i]; _t[jia].nq[0x05+i]=3;}if(k<vOOO[0x05+i] && _t_bipai2[0x05+i]>1){k=vOOO[0x05+i]; _t[jia].nq[0x05+i]=4;}if(k<vOOOO[0x05+i] && _t_bipai2[0x05+i]==3) _t[jia].nq[0x05+i]=5;k=vOOX[0x05-i]; if(k>0 && _t_bipai2[0x03-i]>0 && _t_bipai2[0x04-i]>0) _t[jia].nq[0x05-i]=3;if(k<vOXO[0x05-i] && _t_bipai2[0x04-i]>0 && _t_bipai2[0x06-i]>0){k=vOXO[0x05-i]; _t[jia].nq[0x05-i]=2;}if(k<vXOO[0x05-i] && _t_bipai2[0x06-i]>0 && _t_bipai2[0x07-i]>0){k=vXOO[0x05-i]; _t[jia].nq[0x05-i]=1;}if(k<vOOO[0x05-i] && _t_bipai2[0x05-i]>1){k=vOOO[0x05-i]; _t[jia].nq[0x05-i]=4;}if(k<vOOOO[0x05-i] && _t_bipai2[0x05-i]==3) _t[jia].nq[0x05-i]=5;}k=vXOO[0x25]; if(k>0 && _t_bipai2[0x26]>0 && _t_bipai2[0x27]>0) _t[jia].nq[0x25]=1;if(k<vOXO[0x25] && _t_bipai2[0x24]>0 && _t_bipai2[0x26]>0){k=vOXO[0x25]; _t[jia].nq[0x25]=2;}if(k<vOOX[0x25] && _t_bipai2[0x23]>0 && _t_bipai2[0x24]>0){k=vOOX[0x25]; _t[jia].nq[0x25]=3;}if(k<vOOO[0x25] && _t_bipai2[0x25]>1){k=vOOO[0x25]; _t[jia].nq[0x25]=4;}if(k<vOOOO[0x25] && _t_bipai2[0x25]==3) _t[jia].nq[0x25]=5;k=vXOO[0x15]; if(k>0 && _t_bipai2[0x16]>0 && _t_bipai2[0x17]>0) _t[jia].nq[0x15]=1;if(k<vOXO[0x15] && _t_bipai2[0x14]>0 && _t_bipai2[0x16]>0){k=vOXO[0x15]; _t[jia].nq[0x15]=2;}if(k<vOOX[0x15] && _t_bipai2[0x13]>0 && _t_bipai2[0x14]>0){k=vOOX[0x15]; _t[jia].nq[0x15]=3;}if(k<vOOO[0x15] && _t_bipai2[0x15]>1){k=vOOO[0x15]; _t[jia].nq[0x15]=4;}if(k<vOOOO[0x15] && _t_bipai2[0x15]==3) _t[jia].nq[0x15]=5;k=vXOO[0x05]; if(k>0 && _t_bipai2[0x06]>0 && _t_bipai2[0x07]>0 && _t_players!=3) _t[jia].nq[0x05]=1;if(k<vOXO[0x05] && _t_bipai2[0x04]>0 && _t_bipai2[0x06]>0){k=vOXO[0x05];if(_t_players!=3) _t[jia].nq[0x05]=2;}if(k<vOOX[0x05] && _t_bipai2[0x03]>0 && _t_bipai2[0x04]>0){k=vOOX[0x05];if(_t_players!=3) _t[jia].nq[0x05]=3;}if(k<vOOO[0x05] && _t_bipai2[0x05]>1){k=vOOO[0x05];_t[jia].nq[0x05]=4;}if(k<vOOOO[0x05] && _t_bipai2[0x05]==3) _t[jia].nq[0x05]=5;}function a0090(){var i, j, k, l, m, jia;_t[0].current_rank=_t[1].current_rank=_t[2].current_rank=_t[3].current_rank=-1;_t_current_top=-1; q=-1; y=-1;while(++q<_t_players){p=-65535; x=-1; j=_t_jijia; i=_t_players;do {if(_t[j].current_rank<0){if(_t[j].score>p){x=j; p=_t[j].score;}}if(++j>=_t_players) j=0;} while(j!=_t_jijia);if(x<0) break;_t[x].current_rank=q;if(q==0) _t_current_top=x;}jia=_t_players; while(--jia>-1){t_jd[jia].rsv=0;t_jd[jia].duanyaojiu=0;t_jd[jia].suit=-1;if(_t_gamemode==_T_GAMEMODE_BOO || _t_gamemode==_T_GAMEMODE_ARSHIAR){_t[jia].strategy=T_STRATEGY_NORMAL;if(_t_gamemode==_T_GAMEMODE_BOO){if(jia==_t_zhuangjia) _t[jia].strategy=T_STRATEGY_QUICK;else {i=_t_players; while(--i>-1){if(_t[i].score>_t[jia].score) break;}if(i<0) _t[jia].strategy=T_STRATEGY_QUICK;else {var sq=_t_players, smx=-99999; i=_t_players; while(--i>-1){if(_t[i].score<200){--sq;if(_t[i].score>smx) smx=_t[i].score;}}j=24+_t_tsumibo_ctr*30;if(_t[jia].score>200 && sq<3 && (smx<j || _t[jia].score>=400-j || _t_jushou_ctr>_t_players+_t_players-2)) _t[jia].strategy=T_STRATEGY_QUICK;if(_t[jia].score<200 && _t[jia].score>=200-j) _t[jia].strategy=T_STRATEGY_QUICK;if(smx-_t[jia].score>=j) _t[jia].strategy=T_STRATEGY_QUICK;}}}}else if(_t_gamemode==_T_GAMEMODE_BEINUKI){_t[jia].strategy=T_STRATEGY_QUICK;}else if(_t_gamemode==_T_GAMEMODE_GUOJI){_t[jia].strategy=T_STRATEGY_HEAVY;}else if(_t_gamemode==_T_GAMEMODE_TAIWAN){_t[jia].strategy=T_STRATEGY_QUICK;}else {_t[jia].strategy=T_STRATEGY_NORMAL;i=_t_players; k=-1; l=_t[0].score; while(--i>-1){if(k<_t[i].score) k=_t[i].score;}l=200; m=300;if(_t_gamemode==_T_GAMEMODE_CHIP_MAHJONG){ l=20; m=50; }if(_t_gamemode==_T_GAMEMODE_EASTERN_BOO){ l=80; m=80; }if((k>m && k<=_t[jia].score) || (jia==_t_zhuangjia && _t_shibari<2)) _t[jia].strategy=T_STRATEGY_QUICK;else if(_t[jia].score<l) _t[jia].strategy=T_STRATEGY_HEAVY;}}}function f9980(){var scc, a, b, c;var i, j, k, p,  x, y, z, l;var st=new Array(4);var mxtn=[0, 0, 0, 0];var mstn=[0, 0, 0, 0];k=0x38; while(--k>-1) _t_bipai2[k]=0;i=_t_players; while(--i>-1){mxtn[i]=a0138(0);st=[0, 0, 0, 0];k=0x38; while(--k>0x2f) _t_bipai2[k]=0;k=20; while(--k>0){l=_t[i].shupai[k] & 0x3f;if(l<1 || l>0x37) continue;st[l >> 4]++;_t_bipai2[l]++;}l=0; k=0x30; while(++k<0x38){if(_t_bipai2[k]>2){ l+=3; continue; }if(_t_bipai2[k]==2) l+=2;}if(_t_players==3 && _t_gamemode!=_T_GAMEMODE_PENGLI) st[2]=0;mstn[i]=Math.max(st[0], Math.max(st[1], st[2]))+l;}if(!_t_noMakeWin){if(_t_CPULevel>0){x=-1; y=100; i=_t_players; while(--i>0){if(mstn[i]==y){if(x>0 && _t[x].score>_t[i].score) x=i;continue;}if(mstn[i]>y) continue;x=i; y=mstn[i];}if(x>0){i=20; while(--i>-1){j=_t[x].shupai[i]; _t[x].shupai[i]=_t[0].shupai[i]; _t[0].shupai[i]=j;}}}}else {x=-1; y=-1; i=_t_players; while(--i>0){if(mxtn[i]==y){if(x>0 && mstn[x]>mstn[i]) x=i;continue;}if(mxtn[i]<y) continue;x=i; y=mxtn[i];}if(_t_gamemode!=_T_GAMEMODE_TAIWAN && x>0 && (z=mstn[x]-1)>6){i=_t_players; while(--i>0){if(mxtn[i]+1<y) continue;if(mstn[i]<z){z=mstn[i]; x=i;}}}if(x>0){i=20; while(--i>-1){j=_t[x].shupai[i]; _t[x].shupai[i]=_t[0].shupai[i]; _t[0].shupai[i]=j;}j=mxtn[x]; mxtn[x]=mxtn[0]; mxtn[0]=j;}j=-0x7fff; k=-1; i=_t_players; while(--i>0){if(_t[i].score==j){if(i==_t_zhuangjia) k=i;else if(k!=_t_zhuangjia) k=-1;continue;}if(_t[i].score>j){k=i; j=_t[i].score;}}if(k>0){x=k; y=mxtn[k];i=_t_players; while(--i>0){if(i==k) continue;if(mxtn[i]==y){if(x==_t_zhuangjia) x=i;else if(i==_t_zhuangjia) continue;}if(mxtn[i]<y){x=i; y=mxtn[i];}}if(x>0){i=20; while(--i>-1){j=_t[x].shupai[i]; _t[x].shupai[i]=_t[k].shupai[i]; _t[k].shupai[i]=j;}}}}}
