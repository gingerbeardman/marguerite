paiWidth_V=40;paiHeight_V=40;paiWidth_H=48;paiHeight_H=32;paiBottomHeight=16;paiHeight_UprightH=32;paiWidth_UprightH=16;paiWidth_Upright=40;paiHeight_Upright=48;paiHeight_Top=8;fulou_pos=new Array(3, 0, 1, 2);_t_wasuji=['', '一', '二', '三', '四', '五', '六', '七', '八', '九'];_t_disp_YOffset=0;_t_imageRate=1;_t_tableColor='#008020';_t_spb_timeout=null;_t_newIcon='<sub style="vertical-align: sup; font-size: 100%; "><img alt="" src="data:image\/gif;base64,R0lGODlhMwAXAKL\/AP\/\/\/\/\/dAP8AAAAAAMDAwAAAAAAAAAAAACH5BAEAAAQALAAAAAAzABcAAAOuSLKsLO41CWWclurNu19BGDAiKZYgKqinGT5tOsrxyr60O+eyfuOnWa1mQ\/2GxhgSRxMyia5mTwdTPlWVolRL9Y2OmqS4yiyWjlgxsEwMfq9BsvbMTrvR9beey+u5vTtzL3SBbYNxfXKEfGaKiI0Yi4tVEmo7UCaCb5EzDpZdFH9\/WRufTXZoC56ooHeFSzirea13ZHCxiWCnebediR\/AwaQZDxeqHQTGxxTJygQJADs=" style="width: 1.6em; heigh: 0.8em; "></sub>';function _t_leftText(n, x, y, w, h,  col, text){var e;newTextArea(n, x, y, w, h, 27, '#000', col);e=document.getElementById(n);e.style.textAlign='left';e.style.fontFamily='serif';e.style.verticalAlign='text-top';e.style.lineHeight='1em';e.style.color=col;e.innerHTML=text;}function _t_rightText(n, x, y, w, h,  col, text){var e;newTextArea(n, x, y, w, h, 27, '#000', col);e=document.getElementById(n);e.style.textAlign='right';e.style.fontFamily='serif';e.style.verticalAlign='text-top';e.style.lineHeight='1em';e.style.color=col;e.innerHTML=text;}function _t_centerText(n, x, y, w, h,  col, text){var e;newTextArea(n, x, y, w, h, 27, '#000', col);e=document.getElementById(n);e.style.textAlign='center';e.style.fontFamily='serif';e.style.verticalAlign='text-top';e.style.lineHeight="1em";e.style.color=col;e.innerHTML=text;}function _t_leftSmallText(n, x, y, w, h,  col, text){var e;newTextArea(n, x, y, w, h, 22, '#000', col);e=document.getElementById(n);e.style.textAlign='left';e.style.fontFamily='serif';e.style.verticalAlign='text-top';e.style.lineHeight="1em";e.style.color=col;e.innerHTML=text;}function _t_textWindow(n, x, y, w, h, col){var e, i;newTextArea(n, x, y, w, h, 29, '#000', '#fff');e=document.getElementById(n);e.style.textAlign='center';e.style.fontFamily='serif';e.style.color=col || '#fff';if((i=Math.floor(4*rRatio))<2) i=1;e.style.border=i+'px solid #ffffcc';}function _t_table_color(){_t_tableColor='#008020';if(_t_rule_sel['UI_table']==1) _t_tableColor='#0000c0';if(_t_rule_sel['UI_table']==0) _t_tableColor='#000000';initCanvas(_t_tableColor);removeAllOfTextArea();var i=5; while(--i>-1){createSprite('H5_SPRITE-'+i, -200, -200, 96, 96);_h5_sprite[i]=new Object();_h5_sprite[i].id='H5_SPRITE-'+i;}_t_status_left='';}function _t_pai2code(c){var i=c & 0x3f;if(i==0x35 && (_t_gamemode==_T_GAMEMODE_GUOJI || _t_gamemode==_T_GAMEMODE_TAIWAN)) return(0x37);if(i==0x37 && (_t_gamemode==_T_GAMEMODE_GUOJI || _t_gamemode==_T_GAMEMODE_TAIWAN)) return(0x38);if(i>0x37){if(i<0x3c && _t_gamemode!=_T_GAMEMODE_TAIWAN) return(0x39);return(0x40+(i-0x37));}if(c & 0x40){if((c & 0x0f)==3) return(i+7);if((c & 0x0f)==5) return(i+6);}return(i);}function _t_pai_V(code, x, y){var c=_t_pai2code(code);if(c==0) return;var sx, sy;var pf=_t_pai_color[(_t_pai_flag & 1)];if(code<0){sx=0; sy=497;if(pf=='_2') sx=108;else if(pf=='_3') sx=216;else if(pf=='_4') sx=325;putPartOfImage(image[0], sx, sy, 39, 55, x, y, 39*_t_imageRate, 55*_t_imageRate);return;}sx=0; sy=553;if(pf=='_2') sx=108;else if(pf=='_3') sx=216;else if(pf=='_4') sx=325;putPartOfImage(image[0], sx, sy, 39, 55, x, y, 39*_t_imageRate, 55*_t_imageRate);if(code & 0x80){sx=440-40*(c & 0x0f);if(sx<0) return;sy=432-48*(c >> 4);if(sy<0) return;}else {sx=-40+40*(c & 0x0f);sy=48*(c >> 4);}putPartOfImage(image[0], sx, sy, 39, 47, x, y, 39*_t_imageRate, 39*_t_imageRate);if(code & 0x6200) putRectangle(x, y, 39*_t_imageRate, 55*_t_imageRate, 'rgba(0, 0, 0, 0.20)');return;}function _t_pai_H(code, x, y){var c=_t_pai2code(code);if(c==0) return;var sx, sy;var pf=_t_pai_color[(_t_pai_flag & 1)];if(code<0){sx=440; sy=457;if(pf=='_2') sx=540;else if(pf=='_3') sx=640;else if(pf=='_4') sx=740;putPartOfImage(image[0], sx, sy, 47, 47, x, y, 47*_t_imageRate, 47*_t_imageRate);return;}sx=440; sy=505;if(pf=='_2') sx=540;else if(pf=='_3') sx=640;else if(pf=='_4') sx=740;putPartOfImage(image[0], sx, sy, 47, 47, x, y, 47*_t_imageRate, 47*_t_imageRate);if(code & 0x80){sx=872-48*(c >> 4);if(sx<0) return;sy=-40+40*(c & 0x0f);}else {sx=440+48*(c >> 4);if(sx<0) return;sy=440-40*(c & 0x0f);if(sy<0) return;}putPartOfImage(image[0], sx, sy, 47, 39, x, y, 47*_t_imageRate, 31*_t_imageRate);if(code & 0x6200) putRectangle(x, y, 47*_t_imageRate, 47*_t_imageRate, 'rgba(0, 0, 0, 0.20)');return;}function _t_pai_UR0(code, x, y){var c=_t_pai2code(code);if(c==0) return;var sx, sy;var pf=_t_pai_color[(_t_pai_flag & 1)];if(code==0xff){return;}if(code==-1){sx=40; sy=480;if(pf=='_2') sx=148;else if(pf=='_3') sx=256;else if(pf=='_4') sx=365;putPartOfImage(image[0], sx, sy, 39, 54, x, y, 39*_t_imageRate, 54*_t_imageRate);return;}if(code<-1){_t_pai_V(-1, x, y+24);return;}sx=40; sy=535;if(pf=='_2') sx=148;else if(pf=='_3') sx=256;else if(pf=='_4') sx=365;putPartOfImage(image[0], sx, sy, 39, 54, x, y, 39*_t_imageRate, 54*_t_imageRate);if(code & 0x80){sx=440-40*(c & 0x0f);if(sx<0) return;sy=432-48*(c >> 4);if(sy<0) return;}else {sx=-40+40*(c & 0x0f);sy=48*(c >> 4);}putPartOfImage(image[0], sx, sy, 39, 47, x, y+10, 39*_t_imageRate, 45*_t_imageRate);}function _t_pai_UR2(code, x, y){var c=_t_pai2code(code);if(c==0) return;var sx, sy;var pf=_t_pai_color[(_t_pai_flag & 1)];if(code==-1){sx=40; sy=590;if(pf=='_2') sx=148;else if(pf=='_3') sx=256;else if(pf=='_4') sx=365;putPartOfImage(image[0], sx, sy, 39, 47, x, y, 39*_t_imageRate, 47*_t_imageRate);return;}if(code<-1){_t_pai_V(-1, x, y-4);return;}sx=40; sy=638;if(pf=='_2') sx=148;else if(pf=='_3') sx=256;else if(pf=='_4') sx=365;putPartOfImage(image[0], sx, sy, 39, 47, x, y, 39*_t_imageRate, 47*_t_imageRate);if(code & 0x80){sx=440-40*(c & 0x0f);if(sx<0) return;sy=432-48*(c >> 4);if(sy<0) return;}else {sx=-40+40*(c & 0x0f);sy=48*(c >> 4);}putPartOfImage(image[0], sx, sy, 39, 47, x, y+9, 39*_t_imageRate, 37*_t_imageRate);}function _t_pai_UR1(code, x, y){var c=_t_pai2code(code);if(c==0) return;var sx, sy;var pf=_t_pai_color[(_t_pai_flag & 1)];if(code==-1){sx=80; sy=480;if(pf=='_2') sx=188;else if(pf=='_3') sx=296;else if(pf=='_4') sx=405;putPartOfImage(image[0], sx, sy, 16, 70, x, y+9, 16*_t_imageRate, 70*_t_imageRate);return;}if(code<-1){d1=_t_pai_H(-1, x+16*_t_imageRate, y+32);return;}_t_pai_H(code, x-32*_t_imageRate, y+32);return;}function _t_pai_UR3(code, x, y){var c=_t_pai2code(code);if(c==0) return;var sx, sy;var pf=_t_pai_color[(_t_pai_flag & 1)];if(code==-1){sx=80; sy=551;if(pf=='_2') sx=188;else if(pf=='_3') sx=296;else if(pf=='_4') sx=405;putPartOfImage(image[0], sx, sy, 16, 70, x, y+9, 16*_t_imageRate, 70*_t_imageRate);return;}if(code<-1){d1=_t_pai_H(-1, x-46*_t_imageRate, y+32);return;}_t_pai_H(code ^ 0x80, x+4*_t_imageRate, y+32);return;}function _t_yizhuang_V(upper, lower, inv, x, y){var pf=_t_pai_color[(_t_pai_flag & 1)];var sx, sy;if(lower<0 && upper<0){sx=0; sy=609;if(pf=='_2') sx=108;else if(pf=='_3') sx=216;else if(pf=='_4') sx=325;putPartOfImage(image[0], sx, sy, 39, 72, x, y, 39*_t_imageRate, 72*_t_imageRate);return;}if(lower<0 && upper==0){sx=0; sy=480;if(pf=='_2') sx=108;else if(pf=='_3') sx=216;else if(pf=='_4') sx=325;putPartOfImage(image[0], sx, sy, 39, 72, x, y, 39*_t_imageRate, 72*_t_imageRate);return;}if(lower<0 && upper>0){sx=0; sy=480;if(pf=='_2') sx=108;else if(pf=='_3') sx=216;else if(pf=='_4') sx=325;putPartOfImage(image[0], sx, sy, 39, 72, x, y, 39*_t_imageRate, 72*_t_imageRate);if(!inv) _t_pai_V(upper, x, y);else _t_pai_V(upper ^ 0x80, x, y);return;}if(lower>0 && upper!=0){if(!inv){_t_pai_V(upper, x, y-24);_t_pai_V(lower ^ 0x80, x, y+16);}else {_t_pai_V(lower, x, y-24);_t_pai_V(upper ^ 0x80, x, y+16);}return;}if(lower>0){if(!inv){_t_pai_V(lower ^ 0x80, x, y+16);}else {_t_pai_V(lower, x, y+16);}return;}if(upper!=0){if(!inv){_t_pai_V(lower ^ 0x80, x, y+4);}else {_t_pai_V(lower, x, y+4);}return;}return;}function _t_yizhuang_H(upper, lower, inv, x, y){var pf=_t_pai_color[(_t_pai_flag & 1)];if(lower<0 && upper<0){sx=440; sy=553;if(pf=='_2') sx=540;else if(pf=='_3') sx=640;else if(pf=='_4') sx=740;putPartOfImage(image[0], sx, sy, 47, 64, x, y, 47*_t_imageRate, 64*_t_imageRate);return;}if(lower<0 && upper==0){sx=440; sy=440;if(pf=='_2') sx=540;else if(pf=='_3') sx=640;else if(pf=='_4') sx=740;putPartOfImage(image[0], sx, sy, 47, 64, x, y, 47*_t_imageRate, 64*_t_imageRate);return;}if(lower<0 && upper>0){sx=440; sy=440;if(pf=='_2') sx=540;else if(pf=='_3') sx=640;else if(pf=='_4') sx=740;putPartOfImage(image[0], sx, sy, 47, 64, x, y, 47*_t_imageRate, 64*_t_imageRate);if(inv) _t_pai_H(upper, x, y);else _t_pai_H(upper ^ 0x80, x, y);return;}if(lower>0 && upper>0){if(inv){_t_pai_H(upper, x-24, y+16);_t_pai_H(lower ^ 0x80, x+24, y+16);}else {_t_pai_H(upper ^ 0x80, x-24, y+16);_t_pai_H(lower, x+24, y+16);}return;}if(lower>0){if(inv){_t_pai_H(lower ^ 0x80, x, y+16);}else {_t_pai_H(lower, x, y+16);}return;}return;}function _t_pai_SHNW(code, x, y){var c=_t_pai2code(code);if(c==0) return;var sx, sy;var pf=_t_pai_color[(_t_pai_flag & 1)];sx=54; sy=686;if(pf=='_2') sx=162;else if(pf=='_3') sx=270;else if(pf=='_4') sx=379;putPartOfImage(image[0], sx, sy, 53, 72, x, y, 53*_t_imageRate, 72*_t_imageRate);if(code & 0x80){sx=-40+40*(c & 0x0f);sy=48*(c >> 4);}else {sx=440-40*(c & 0x0f);if(sx<0) return;sy=432-48*(c >> 4);if(sy<0) return;}canvasContext.save();canvasContext.translate(  Math.floor((x+30)*rRatio)+xOffset,    Math.floor((y-1)*rRatio)+yOffset);canvasContext.rotate(Math.PI / 4);canvasContext.translate(-(Math.floor((x+30)*rRatio)+xOffset), -(Math.floor((y-1)*rRatio)+yOffset));putPartOfImage(image[0], sx, sy, 39, 47, x+30, y-1, 32*_t_imageRate, 40*_t_imageRate);canvasContext.restore();return;}function _t_pai_SHNE(code, x, y){var c=_t_pai2code(code);if(c==0) return;var sx, sy;var pf=_t_pai_color[(_t_pai_flag & 1)];sx=0; sy=686;if(pf=='_2') sx=108;else if(pf=='_3') sx=216;else if(pf=='_4') sx=325;putPartOfImage(image[0], sx, sy, 53, 72, x, y, 53*_t_imageRate, 72*_t_imageRate);if(code & 0x80){sx=-40+40*(c & 0x0f);sy=48*(c >> 4);}else {sx=440-40*(c & 0x0f);if(sx<0) return;sy=432-48*(c >> 4);if(sy<0) return;}canvasContext.save();canvasContext.translate(  Math.floor((x+30)*rRatio)+xOffset,    Math.floor(y*rRatio)+yOffset);canvasContext.rotate(-Math.PI / 4);canvasContext.translate(-(Math.floor((x+30)*rRatio)+xOffset), -(Math.floor(y*rRatio)+yOffset));putPartOfImage(image[0], sx, sy, 39, 47, x-6, y-5, 32*_t_imageRate, 40*_t_imageRate);canvasContext.restore();return;}function _t_pai_SHWNW(code, x, y){var c=_t_pai2code(code);if(c==0) return;var sx, sy;var pf=_t_pai_color[(_t_pai_flag & 1)];sx=440; sy=618;if(pf=='_2') sx=540;else if(pf=='_3') sx=640;else if(pf=='_4') sx=740;putPartOfImage(image[0], sx, sy, 52, 66, x, y, 52*_t_imageRate, 66*_t_imageRate);if(code & 0x80){sx=440-40*(c & 0x0f);if(sx<0) return;sy=432-48*(c >> 4);if(sy<0) return;}else {sx=-40+40*(c & 0x0f);sy=48*(c >> 4);}canvasContext.save();canvasContext.translate(  Math.floor((x+50)*rRatio)+xOffset,    Math.floor((y+17)*rRatio)+yOffset);canvasContext.rotate(Math.PI / 360 * 232);canvasContext.translate(-(Math.floor((x+50)*rRatio)+xOffset), -(Math.floor((y+17)*rRatio)+yOffset));putPartOfImage(image[0], sx, sy, 39, 47, x+50, y+17, 30*_t_imageRate, 40*_t_imageRate);canvasContext.restore();return;}function _t_pai_SHENE(code, x, y){var c=_t_pai2code(code);if(c==0) return;var sx, sy;var pf=_t_pai_color[(_t_pai_flag & 1)];sx=440; sy=685;if(pf=='_2') sx=540;else if(pf=='_3') sx=640;else if(pf=='_4') sx=740;putPartOfImage(image[0], sx, sy, 52, 66, x, y, 52*_t_imageRate, 66*_t_imageRate);if(code & 0x80){sx=-40+40*(c & 0x0f);sy=48*(c >> 4);}else {sx=440-40*(c & 0x0f);if(sx<0) return;sy=432-48*(c >> 4);if(sy<0) return;}canvasContext.save();canvasContext.translate(  Math.floor((x+37)*rRatio)+xOffset,    Math.floor((y)*rRatio)+yOffset);canvasContext.rotate(Math.PI / 360 * 128);canvasContext.translate(-(Math.floor((x+37)*rRatio)+xOffset), -(Math.floor((y)*rRatio)+yOffset));putPartOfImage(image[0], sx, sy, 39, 47, x+37, y, 30*_t_imageRate, 40*_t_imageRate);canvasContext.restore();return;}function _t_pai_SHNNW(code, x, y){var c=_t_pai2code(code);if(c==0) return;var sx, sy;var pf=_t_pai_color[(_t_pai_flag & 1)];sx=0; sy=759;if(pf=='_2') sx=110;else if(pf=='_3') sx=220;else if(pf=='_4') sx=330;putPartOfImage(image[0], sx, sy, 45, 65, x, y, 45*_t_imageRate, 65*_t_imageRate);if(code & 0x80){sx=440-40*(c & 0x0f);if(sx<0) return;sy=432-48*(c >> 4);if(sy<0) return;}else {sx=-40+40*(c & 0x0f);sy=48*(c >> 4);}canvasContext.save();canvasContext.translate(  Math.floor((x+44)*rRatio)+xOffset,    Math.floor((y+34)*rRatio)+yOffset);canvasContext.rotate(Math.PI / 360 * 328);canvasContext.translate(-(Math.floor((x+44)*rRatio)+xOffset), -(Math.floor((y+34)*rRatio)+yOffset));putPartOfImage(image[0], sx, sy, 39, 47, x+44, y+34, 36*_t_imageRate, 35*_t_imageRate);canvasContext.restore();return;}function _t_pai_SHNNE(code, x, y){var c=_t_pai2code(code);if(c==0) return;var sx, sy;var pf=_t_pai_color[(_t_pai_flag & 1)];sx=46; sy=759;if(pf=='_2') sx=156;else if(pf=='_3') sx=266;else if(pf=='_4') sx=376;putPartOfImage(image[0], sx, sy, 45, 65, x, y, 45*_t_imageRate, 65*_t_imageRate);if(code & 0x80){sx=-40+40*(c & 0x0f);sy=48*(c >> 4);}else {sx=440-40*(c & 0x0f);if(sx<0) return;sy=432-48*(c >> 4);if(sy<0) return;}canvasContext.save();canvasContext.translate(  Math.floor((x+9)*rRatio)+xOffset,    Math.floor((y+0)*rRatio)+yOffset);canvasContext.rotate(Math.PI / 360 * 31);canvasContext.translate(-(Math.floor((x+9)*rRatio)+xOffset), -(Math.floor((y+0)*rRatio)+yOffset));putPartOfImage(image[0], sx, sy, 39, 47, x+9, y+0, 36*_t_imageRate, 35*_t_imageRate);canvasContext.restore();return;}function _tm_pai_4dapai(code, x, y, dir){var c=code & 0x7f;var r=0;var a=(dir >> 1) & 7;if(a & 1) r=0x80;if(a==0) _t_pai_V(c ^ r, x, y);else if(a==1) _t_pai_H(c ^ r, x, y);else if(a==2) _t_pai_SHWNW(c ^ r, x, y);else if(a==3) _t_pai_SHENE(c ^ r, x, y);else if(a==4) _t_pai_SHNNW(c ^ r, x, y);else if(a==5) _t_pai_SHNNE(c ^ r, x, y);else if(a==6) _t_pai_SHNW(c ^ r, x, y);else _t_pai_SHNE(c ^ r, x, y);}function _t_fu_disp4menzi (jia, t, fu, x, y){var w, h;if(_t_gamemode==_T_GAMEMODE_BEINUKI || _t_gamemode==_T_GAMEMODE_CHIP_MAHJONG || _t_gamemode==_T_GAMEMODE_PENGLI || _t_gamemode==_T_GAMEMODE_TAIWAN) return;w=119; h=28;if(t==2) w=79;if(t==-3) w=127;if(t==4) w=159;if(t==-4) w=167;if(jia==0){putRectangle(x, y, w*_t_imageRate, h*_t_imageRate, "rgba(0,0,0,0.6)");putRectangle(x+2*_t_imageRate, y+14*_t_imageRate, 2*_t_imageRate, 14*_t_imageRate, "#fff");putRectangle(x+(w-4)*_t_imageRate, y+14*_t_imageRate, 2*_t_imageRate, 14*_t_imageRate, "#fff");putRectangle(x+2*_t_imageRate, y+14*_t_imageRate, (w-4)*_t_imageRate, 2*_t_imageRate, "#fff");putRectangle(x+(((w+1) >> 1)-14)*_t_imageRate, y, 28*_t_imageRate, 28*_t_imageRate, "#000");drawText(fu, x+(((w+1) >> 1))*_t_imageRate, y, 28*_t_imageRate, 28*_t_imageRate, true, 28*_t_imageRate, 28*_t_imageRate, '#000', '#fff', 'center');return;}if(_t_players==2 || (_t_players==4 && jia==2)){putRectangle(x, y, w*_t_imageRate, h*_t_imageRate, "rgba(0,0,0,0.6)");putRectangle(x+2*_t_imageRate, y, 2*_t_imageRate, 14*_t_imageRate, "#fff");putRectangle(x+(w-4)*_t_imageRate, y, 2*_t_imageRate, 14*_t_imageRate, "#fff");putRectangle(x+2*_t_imageRate, y+13*_t_imageRate, (w-4)*_t_imageRate, 2*_t_imageRate, "#fff");putRectangle(x+((w >> 1)-14)*_t_imageRate, y, 28*_t_imageRate, 28*_t_imageRate, "#000");drawText(fu, x+((w >> 1))*_t_imageRate, y, 28, 28, true, 28, 28, '#000', '#fff', 'center');return;}h=95; w=28;if(t==2) h=63;if(t==-3) h=103;if(t==4) h=127;if(t==-4) h=135;if(jia==1){putRectangle(x, y, w*_t_imageRate, h*_t_imageRate, "rgba(0,0,0,0.6)");putRectangle(x+14*_t_imageRate, y+2*_t_imageRate, 14*_t_imageRate, 2*_t_imageRate, "#fff");putRectangle(x+14*_t_imageRate, y+(h-4)*_t_imageRate, 14*_t_imageRate, 2*_t_imageRate, "#fff");putRectangle(x+14*_t_imageRate, y+2*_t_imageRate, 2*_t_imageRate, (h-4)*_t_imageRate, "#fff");putRectangle(x, y+(((h+1) >> 1)-12)*_t_imageRate, 28*_t_imageRate, 28*_t_imageRate, "#000");drawText(fu, x+14*_t_imageRate, y+(((h+1) >> 1)-14)*_t_imageRate, 28*_t_imageRate, 28*_t_imageRate, true, 28*_t_imageRate, 28*_t_imageRate, '#000', '#fff', 'center');return;}putRectangle(x, y, w*_t_imageRate, h*_t_imageRate, "rgba(0,0,0,0.6)");putRectangle(x, y+2*_t_imageRate, 14*_t_imageRate, 2*_t_imageRate, "#fff");putRectangle(x, y+(h-4)*_t_imageRate, 14*_t_imageRate, 2*_t_imageRate, "#fff");putRectangle(x+13*_t_imageRate, y+2*_t_imageRate, 2*_t_imageRate, (h-4)*_t_imageRate, "#fff");putRectangle(x, y+(((h+1) >> 1)-18)*_t_imageRate, 28*_t_imageRate, 28*_t_imageRate, "#000");drawText(fu, x+14*_t_imageRate, y+(((h+1) >> 1)-14)*_t_imageRate, 28*_t_imageRate, 28*_t_imageRate, true, 28*_t_imageRate, 28*_t_imageRate, '#000', '#fff', 'center');}function _t_h5_stick_disp(kind, dire, x, y, w, h){var sx, sy, sw=7, sh=118, wd, hd;if(dire){sw=118; sh=7;sx=789; sy=460;if(!kind) sy=470;}else {sx=790; sy=479;if(!kind) sx=800;}putPartOfImage(image[0], sx, sy, sw, sh, x, y, w, h);}function _t_h5_dice_disp(num, x, y, w, h){var n=num, sx, sy;if(n<1) n=Math.floor(Math.random()*6)+1;sx=920; sy=(n-1)*170;putPartOfImage(image[0], sx, sy, 120, 162, x, y, w, h);}function _t_pai_V_2sprite(spriteID, code){var c=_t_pai2code(code);if(c==0) return;var sx, sy;var pf=_t_pai_color[(_t_pai_flag & 1)];if(!spriteContext[spriteID]) return;clearSprite(spriteID);if(code<0){sx=0; sy=497;if(pf=='_2') sx=108;else if(pf=='_3') sx=216;else if(pf=='_4') sx=325;putPartOfImage2Sprite(spriteID, image[0], sx, sy, 39, 55, 0, 0, 39*_t_imageRate, 55*_t_imageRate);return;}sx=0; sy=553;if(pf=='_2') sx=108;else if(pf=='_3') sx=216;else if(pf=='_4') sx=325;putPartOfImage2Sprite(spriteID, image[0], sx, sy, 39, 55, 0, 0, 39*_t_imageRate, 55*_t_imageRate);if(code & 0x80){sx=440-40*(c & 0x0f);if(sx<0) return;sy=432-48*(c >> 4);if(sy<0) return;}else {sx=-40+40*(c & 0x0f);sy=48*(c >> 4);}putPartOfImage2Sprite(spriteID, image[0], sx, sy, 39, 47, 0, 0, 39*_t_imageRate, 39*_t_imageRate);return;}function _t_pai_H_2sprite(spriteID, code){var c=_t_pai2code(code);if(c==0) return;var sx, sy;var pf=_t_pai_color[(_t_pai_flag & 1)];if(!spriteContext[spriteID]) return;clearSprite(spriteID);if(code<0){sx=440; sy=457;if(pf=='_2') sx=540;else if(pf=='_3') sx=640;else if(pf=='_4') sx=740;putPartOfImage2Sprite(spriteID, image[0], sx, sy, 47, 47, 0, 0, 47*_t_imageRate, 47*_t_imageRate);return;}sx=440; sy=505;if(pf=='_2') sx=540;else if(pf=='_3') sx=640;else if(pf=='_4') sx=740;putPartOfImage2Sprite(spriteID, image[0], sx, sy, 47, 47, 0, 0, 47*_t_imageRate, 47*_t_imageRate);if(code & 0x80){sx=872-48*(c >> 4);if(sx<0) return;sy=-40+40*(c & 0x0f);}else {sx=440+48*(c >> 4);if(sx<0) return;sy=440-40*(c & 0x0f);if(sy<0) return;}putPartOfImage2Sprite(spriteID, image[0], sx, sy, 47, 39, 0, 0, 47*_t_imageRate, 31*_t_imageRate);return;}function _t_pai_UR0_2sprite(spriteID, code){var c=_t_pai2code(code);if(c==0) return;var sx, sy;var pf=_t_pai_color[(_t_pai_flag & 1)];clearSprite(spriteID);sx=40; sy=535;if(pf=='_2') sx=148;else if(pf=='_3') sx=256;else if(pf=='_4') sx=365;putPartOfImage2Sprite(spriteID, image[0], sx, sy, 39, 54, 0, 0, 39*_t_imageRate, 54*_t_imageRate);if(code & 0x80){sx=440-40*(c & 0x0f);if(sx<0) return;sy=432-48*(c >> 4);if(sy<0) return;}else {sx=-40+40*(c & 0x0f);sy=48*(c >> 4);}putPartOfImage2Sprite(spriteID, image[0], sx, sy, 39, 47, 0, 10, 39*_t_imageRate, 43*_t_imageRate);}function _t_pai_UR2_2sprite(spriteID, dummy){var sx, sy;var pf=_t_pai_color[(_t_pai_flag & 1)];clearSprite(spriteID);sx=40; sy=590;if(pf=='_2') sx=148;else if(pf=='_3') sx=256;else if(pf=='_4') sx=365;putPartOfImage2Sprite(spriteID, image[0], sx, sy, 39, 47, 0, 0, 39*_t_imageRate, 47*_t_imageRate);}function _t_pai_UR1_2sprite(spriteID, dummy){var sx, sy;var pf=_t_pai_color[(_t_pai_flag & 1)];clearSprite(spriteID);sx=80; sy=480;if(pf=='_2') sx=188;else if(pf=='_3') sx=296;else if(pf=='_4') sx=405;putPartOfImage2Sprite(spriteID, image[0], sx, sy, 16, 70, 0, 9, 16*_t_imageRate, 70*_t_imageRate);}function _t_pai_UR3_2sprite(spriteID, dummy){var sx, sy;var pf=_t_pai_color[(_t_pai_flag & 1)];clearSprite(spriteID);sx=80; sy=551;if(pf=='_2') sx=188;else if(pf=='_3') sx=296;else if(pf=='_4') sx=405;putPartOfImage2Sprite(spriteID, image[0], sx, sy, 16, 70, 0, 9, 16*_t_imageRate, 70*_t_imageRate);}function _t_h5_stick_disp_2sprite(spriteID, dire, dw, dh){var sx, sy, w=7, h=118, wd, hd;clearSprite(spriteID);if(dire){w=118; h=7;sx=789; sy=460;}else {sx=790; sy=479;}putPartOfImage2Sprite(spriteID, image[0], sx, sy, w, h, 0, 0, dw, dh);}function _t_h5_dice_disp_2sprite(spriteID, num, w, h){var n=num, sx, sy;clearSprite(spriteID);if(n<1) n=Math.floor(Math.random()*6)+1;sx=920; sy=(n-1)*170;putPartOfImage2Sprite(spriteID, image[0], sx, sy, 120, 162, 0, 0, w, h);}function _t_wait4next(){clearTimeout(_t_h5_next);var i=Math.random();_t_h5_next=setTimeout('_t_wait4next()', 20);}function _t_textButton(d, x, y, w, h, tex, keyname, keyval, mess){var e, t=tex, v=_t_rule_sel[keyname] || 0;_t_leftText('OPTION_'+d, x, y, w, h, '#999', '');e=document.getElementById('OPTION_'+d);if(v==keyval){e.style.color='#fff';e.style.fontWeight='bold';}else {e.style.fontWeight='normal';t='<a style="cursor: pointer; color: #aaa; text-decoration: none; display: block; margin: 0; width: '+Math.floor(w*rRatio)+'px; " onclick="_t_textButton_input(\''+keyname+'\', '+keyval+', null); return(false); ">'+tex+'</a>';}e.innerHTML=t;return(d+1);} 
function _t_textButton2(d, x, y, w, h, tex, label, mess){var e, t=tex;_t_leftText('OPTION_'+d, x, y, w, h, '#fff', '');e=document.getElementById('OPTION_'+d);e.style.fontWeight='bold';t='<a style="cursor: pointer; color: #fff; text-decoration: none; display: block; margin: 0; width: '+Math.floor(w*rRatio)+'px; " onclick="_t_textButton_input(\'\', 0, \''+label+'()\'); return(false); ">'+tex+'</a>';e.innerHTML=t;return(d+1);}_t_nextScreen='';function _t_textButton_input(keyname, keyval, d){var dest=d || _t_nextScreen;clearTimeout(_t_random);clearTimeout(_t_h5_next);if(keyname!='') _t_rule_sel[keyname]=keyval;_t_h5_next=setTimeout(dest, 10);if(keyname=='UI_noSprite'){_t_toggle_sprite_disp(0);}}function _t_gotoAndPlay(dest){clearTimeout(_t_random);clearTimeout(_t_h5_next);_t_h5_next=setTimeout(dest, 10);}function _t_h5_menu_ja(){_t_table_color();var cs=30; margin=16; blines=4; bcolumns=16;var ch=cs+blines;var w=cs*32+margin*2+bcolumns*3;var h=cs*24+blines*5+cs+margin*2;var xh=600-w/2, yh=450-h/2;clearTimeout(_t_h5_next);removeAllOfTextArea();_t_textWindow('SCREEN_FIELD', xh, yh, w, h, '#fff');var e=document.getElementById('SCREEN_FIELD');e.style.background='transparent';putRectangle(xh, yh, w, h, '#000');xh+=margin;yh+=margin;putPartOfImage(image[0], 0, 840, 240, 280, xh+w-252, yh+h-292, 240, 280);drawText('創作キャラクタ・堀北真希うさぎ '+String.fromCharCode(0x25B6), xh+w-260, yh+h-margin*2-6, 14*15, 14, true, 14, 14, 'transparent', '#eee', 'right');_t_leftSmallText('COPYRIGHT_CREDIT', xh, yh+ch*22, cs*24, 24, '#fff', 'Copyright'+String.fromCharCode(0xA9)+_t_copyright);_t_leftText('HEADINGS', xh, yh, cs*14, ch, '#fff', '<b>『しらぎく麻雀』</b>');_t_leftSmallText('HEADINGS_VERSION', xh, yh+ch+4, cs*30, 24, '#fff', _t_version);e=document.getElementById('COPYRIGHT_CREDIT');e.style.cursor='pointer';e.style.background='transparent';newAnchorArea('1', xh+w-252, yh+h-292, 240, 280, 'HORIKITA_ANCHOR', 10, 'transparent', '#fff');e=document.getElementById('HORIKITA_ANCHOR');e.setAttribute('ontouchstart', 'MENU_HORIKITA_MAKI_USAGI(); touched=1; return(false); ');e.setAttribute('onclick', 'if(!touched) MENU_HORIKITA_MAKI_USAGI(); return(false); ');}function MENU_HORIKITA_MAKI_USAGI(){var e;removeTextArea('MENU_ABOUT_4');removeTextArea('MENU_ABOUT_3');if((e=document.getElementById('MENU_HORIKITA_MAKI_USAGI_W'))!=null){e.parentNode.removeChild(e);return;}_t_textWindow('MENU_HORIKITA_MAKI_USAGI_W', 200, 470, 600, 240, '#fff');e=document.getElementById('MENU_HORIKITA_MAKI_USAGI_W');e.style.padding='1em';e.style.textAlign='left';e.style.fontFamily='monospace';e.innerHTML='<p style="margin: 0; ">『しらぎく麻雀』制作者の創作キャラクタ「<strong style="color: #ff0; font-weight: bold; ">堀北真希うさぎ</strong>」です。</p>'+'<p style="margin: 1em 0; ">※『しらぎく麻雀』には登場しません。</p>'+'<p style="margin: 2.5em 0; text-align: center !important; ">[<a style="color: #ff0; text-decoration: none; font-weight: bold;  " href="http:/'+'/www.marguerite.jp/Nihongo/Features/%E5%A0%80%E5%8C%97%E7%9C%9F%E5%B8%8C%E3%81%86%E3%81%95%E3%81%8E.html">堀北真希うさぎの詳細</a>]'+'';}function QUIT_GAME(){if(_t_lang=='en'){if(confirm('Are you sure to quit the current game to go back to Menu?')){if(_t_spb_timeout) SPEECH_BALOON_ERASE();clearTimeout(_t_h5_next);clearTimeout(_t_random);clearTimeout(_h5_sprite[0].timeout);clearTimeout(_h5_sprite[1].timeout);clearTimeout(_h5_sprite[2].timeout);clearTimeout(_h5_sprite[3].timeout);clearTimeout(_h5_sprite[4].timeout);_t_movie_ctr=0;MENU_EN();}return;}if(confirm('現在のゲームを終了して、菜単に戻りますか？')){if(_t_spb_timeout) SPEECH_BALOON_ERASE();clearTimeout(_t_h5_next);clearTimeout(_t_random);clearTimeout(_h5_sprite[0].timeout);clearTimeout(_h5_sprite[1].timeout);clearTimeout(_h5_sprite[2].timeout);clearTimeout(_h5_sprite[3].timeout);clearTimeout(_h5_sprite[4].timeout);_t_movie_ctr=0;MENU();}}function WAIT_MOVIE(nxt){clearTimeout(_t_h5_next);var i=Math.random();if(_t_movie_ctr<1){_t_h5_next=setTimeout(nxt+'(); ', 10);return;}_t_h5_next=setTimeout('WAIT_MOVIE("'+nxt+'"); ', 10);}function WAIT_MINICONSOLE(nxt){var i=Math.random();if(inputKey>0){inputKey=0;_t_h5_next=setTimeout(nxt+'(); ', 10);return;}_t_h5_next=setTimeout('WAIT_MINICONSOLE("'+nxt+'"); ', 10);}function SPEECH_BALOON(txt, voice, jia){var i;if(_t_spb_timeout){clearTimeout(_t_spb_timeout);}var n='SPB_'+jia;var e=document.getElementById(n);if(e) e.parentNode.removeChild(e);var ofs=0, alg='center';if(_t_gamemode==_T_GAMEMODE_GUOJI) ofs=36;var x, y, w, h=fs=40, ln=txt.length;if(txt.indexOf('<br>')>-1){fs=35; alg='left';var sa=txt.split('<br>');i=sa.length; h=fs*i;ln=0; while(--i>-1){if(ln<sa[i].length) ln=sa[i].length;}}w=fs*ln;if(_t_lang=='en') w=Math.floor(fs *ln / 2);if(jia==0){var x=296, y=615;if(_t_rule.chip.any || _t_rule.yakitori) y-=24;if(_t_gamemode==_T_GAMEMODE_PENGLI) x-=20;if(_t_gamemode==_T_GAMEMODE_GUOJI) x+=20;x+=ofs;y-=h+fs;}else if((jia==2 && _t_players==4) || (jia==1 && _t_players==2)){x=750, y=180;if(_t_players==3){ x=520; y=480; }if(_t_gamemode==_T_GAMEMODE_GUOJI) x-=20;x-=w+38;}else if(jia==1){var x=750, y=526;x+=ofs;if(_t_players==3) y-=20;else if(_t_gamemode==_T_GAMEMODE_GUOJI){y+=32;}else if(_t_gamemode==_T_GAMEMODE_TAIWAN){y+=20;}y-=h+fs;}else {x=296, y=284;if(_t_rule.chip.any || _t_rule.yakitori) y-=24;if(_t_players==3){y-=84;if(_t_gamemode==_T_GAMEMODE_PENGLI) y-=32;}else if(_t_gamemode==_T_GAMEMODE_GUOJI){y-=32;}else if(_t_gamemode==_T_GAMEMODE_TAIWAN){y-=40;}y+=52;}newTextArea(n, x, y, w, h, fs, '#000', '#FFF');e=document.getElementById(n);e.style.border='3px solid #ffc';e.style.padding=Math.floor(fs*0.3*rRatio)+'px';e.style.fontFamily='serif';e.style.lineHeight='1em';e.style.textAlign=alg;e.innerHTML=txt;if(voice!=''){_t_spb_timeout=setTimeout('SPEECH_BALOON2("'+voice+'"); ', 100);}else {_t_spb_timeout=setTimeout('SPEECH_BALOON_ERASE(); ', 900);}}function SPEECH_BALOON2(voice){clearTimeout(_t_spb_timeout);AUDIO_OUTPUT(voice, false);_t_spb_timeout=setTimeout('SPEECH_BALOON_ERASE(); ', 800);}function SPEECH_BALOON_ERASE(){clearTimeout(_t_spb_timeout);var i=4, e;while(--i>-1){e=document.getElementById('SPB_'+i);if(e) e.parentNode.removeChild(e);}_t_spb_timeout=null;}
