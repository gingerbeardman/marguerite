function HUANGPAI(){var i, j, k;if(_t_gamemode!=_T_GAMEMODE_TAIWAN || _t_nukidora_flag){_t_nukidora_flag=0;_t_h5_next=setTimeout('FURIKIRI(); ', 10);return;}_tm_dapai_erase(_t_jia);_tm_dapai2he(_t_jia);_t_h5_next=setTimeout('WAIT_MOVIE("FURIKIRI"); ', 10);}function FURIKIRI(){var i, j, k;_t_init_balance();_t_dajia_buff=_t_dajia;_t_jia=_t_zhuangjia;if(_t_dajia=_t_jia-1) _t_dajia=_t_players-1;_t_j='';i=_t_players; while(--i>=0) _t[i].declare_command=0;_t_yaojiu_furikiri=1;_t_ronghe_flag=0;_t_qianggang_flag=0;_t_dapai_buff=-1;_t_lingshang_flag=0;_t_anggang_flag=0;_t_pengchi_flag=0;if(!_t_reach_mahjong_rule || !_t_rule.yaku.yaojiu_furikiri){_t_h5_next=setTimeout('HUANGPAI_2(); ', 10);return;}_t_h5_next=setTimeout('FURIKIRI_2(); ', 10);}function FURIKIRI_2(){var i, j, k;if(_t[_t_jia].yaojiu_furikiri_flag){_t_h5_next=setTimeout('FURIKIRI_3(); ', 10);return;}var txt='流し満貫！';if(_t_lang=='en') txt='Mahjong!';SPEECH_BALOON(txt, 'furikiri'+_t_player_code[_t_jia], _t_jia);_t_score_disp(_t_jia, '#ff0');_t[_t_jia].declare_command=25;if(_t_i!='') _t_j+=', ';_t_j+=_t_seat[_t_jia];if(!_t_rule.liangjiahe){_t_h5_next=setTimeout('FURIKIRI_5(); ', 10);return;}_t_h5_next=setTimeout('FURIKIRI_3(); ', 10);}function FURIKIRI_3(){var i, j, k;if(++_t_jia>=_t_players) _t_jia=0;if(_t_jia==_t_zhuangjia){_t_h5_next=setTimeout('FURIKIRI_5(); ', 160);return;}_t_h5_next=setTimeout('FURIKIRI_2(); ', 10);}function FURIKIRI_5(){var i, j, k;if(_t_j==''){_t_h5_next=setTimeout('HUANGPAI_2(); ', 160);return;}_t_dajia=-1;str=_t_j+'の'+String.fromCharCode(0x4e48)+'九振切です。';if(_t_lang=='en'){str=_t_j+' won All Terminals and Honours Discard.';}_t_status_disp(str);var i=900; if(noAudio || silentMode) i=10;_t_h5_next=setTimeout('HELE(); ', i);}function HUANGPAI_2(){var txt='流局';if(_t_lang=='en') txt='Drawn.';SPEECH_BALOON(txt, 'pingju'+_t_player_code[_t_dajia_buff], _t_dajia_buff);_t_console_erase();str='荒牌です。';if(_t_lang=='en'){str='Exhaustive drawn.';}_t_status_disp(str);_t_h5_next=setTimeout('HUANGPAI_2_1(); ', 100);}function HUANGPAI_2_1(){if(!_t_rule_sel['UI_silence']){AUDIO_OUTPUT('Jingle_Drawn', false);}_t_h5_next=setTimeout('HUANGPAI_2_2(); ', 1000);}function HUANGPAI_2_2(){var i, j, k, str;i=_t_players; while(--i>=0) _t[i].declare_command=0;_t_jia=_t_zhuangjia;_t_open_mode=1;i=_t_players;_t_helejia_ctr=0;if((_t_reach_mahjong_rule || _t_gamemode==_T_GAMEMODE_BEINUKI) &&(_t_rule.notem_bappu ||(_t_players!=3 && (_t_rule.huangpai_lunzhuang==1 || _t_rule.huangpai_lunzhuang==2)))){_t_h5_next=setTimeout('HUANGPAI_2_2_1(); ', 800);return;}_t_open_mode=1;i=_t_players;while(--i>=0){_t[i].declare_command=0;if(_t[i].open) continue;_t_lipai(i);_t_shupai_disp(i);}_t_h5_next=setTimeout('HUANGPAI_5(); ', 10);}function HUANGPAI_2_2_1(){var i, j, k, str, txt;j=_t[_t_jia].helepai_ctr;if(_t_rule.kuitan_sakizuke>1 && _t[_t_jia].menqian_flag!=0){if(_t[_t_jia].min_yifan<_t_shibari) j=0;}if(j){_t[_t_jia].open=1;_t[_t_jia].declare_command=-1;_t_helejia_ctr++;i='#ff0'; str='tingpai';txt='テンパイ';if(_t_lang=='en') txt='Ready to Win!';}else {i='#0ff'; str='buting';txt='ノーテン';if(_t_lang=='en') txt='Not Ready...';}_t_score_disp(_t_jia, i);SPEECH_BALOON(txt, str+_t_player_code[_t_jia], _t_jia);_t_lipai(_t_jia);_t_shupai_disp(_t_jia);if(++_t_jia>=_t_players) _t_jia=0;if(_t_jia!=_t_zhuangjia){_t_h5_next=setTimeout('HUANGPAI_2_2_1(); ', 600);return;}if(!_t_rule.notem_bappu){_t_h5_next=setTimeout('HUANGPAI_5(); ', 10);return;}i=j=0;if(_t_players==4){if((_t_helejia_ctr & 3)!=0){i=-10; j=30;if(_t_helejia_ctr==2){ i=-15; j=15; }else if(_t_helejia_ctr==3){ i=-30; j=10; }++_t_impflag;}}else if(_t_players==3){if(_t_gamemode!=_T_GAMEMODE_REACH){if(_t_helejia_ctr && _t_helejia_ctr!=3){i=-3; j=6;if(_t_helejia_ctr==2){ i=-6; j=3; }++_t_impflag;}}else {if(_t_helejia_ctr!=3){i=-15; j=30;if(_t_helejia_ctr==2){ i=-30; j=15; }if(_t_helejia_ctr==0){ i=-10; j=0;  _t_reach_bo_ctr+=30; }++_t_impflag;}}}else {if(_t_helejia_ctr!=2){i=-30; j=30;if(!_t_helejia_ctr){ i=-15; j=0; _t_reach_bo_ctr+=30; ++_t_impflag; }}}k=_t_players;while(--k>=0){if(_t[k].helepai_ctr){_t[k].balance_point=j; _t[k].balance_total=j;}else {_t[k].balance_point=i; _t[k].balance_total=i;}_t[k].score_after_balance=_t[k].score+_t[k].balance_total;}inputKey=0;_t_mini_console_disp();_t_h5_next=setTimeout('WAIT_MINICONSOLE("HUANGPAI_4"); ', 10);}function HUANGPAI_4(){_t_balance_disp(1);_t_h5_next=setTimeout('HUANGPAI_5(); ', 10);}function HUANGPAI_5(){inputKey=0;_t_mini_console_disp();_t_h5_next=setTimeout('WAIT_MINICONSOLE("HUANGPAI_6"); ', 10);}function HUANGPAI_6(){var i, j, k, str;_t_status_erase();_t_console_erase();++_t_pai_flag;++_t_jitsukyokusu_ctr;_t_result_after_balance();i=_t_players; while(--i>=0){_t[i].score=_t[i].score_after_balance;_t[i].current_result=_t[i].result_after_balance;_t[i].current_rank=_t[i].rank_after_balance;}_t_current_top=_t_top_jia;_t_current_shizumi_ctr=_t_shizumi_ctr;i=_t_players; while(--i>=0) _t[i].liangzhuang_ctr=-1;if(_t_rule.kyokusu>-1){++_t_tsumibo_ctr;++_t_bajushou_ctr;++_t_jushou_ctr;if((_t_ko_flag && _t_rule.knockOut) || _t_jushou_ctr>_t_rule.kyokusu-1){_t_h5_next=setTimeout('AFTER_BANZHUANG(); ', 10);return;}}else if(_t_gamemode==_T_GAMEMODE_EASTERN_BOO || _t_gamemode==_T_GAMEMODE_BOO){if(_t_ko_flag || _t[_t_top_jia].score>=_t_genten+_t_genten || _t_bm_yakuman_jia>-1){_t_h5_next=setTimeout('AFTER_BANZHUANG(); ', 10);return;}else {++_t_tsumibo_ctr;++_t_jushou_ctr;if(++_t_bajushou_ctr==_t_players){++_t_ba_ctr;_t_bajushou_ctr=0;if(_t_ba_ctr>=_t_rule.basu){_t_h5_next=setTimeout('AFTER_BANZHUANG(); ', 10);return;}}if(++_t_zhuangjia>=_t_players) _t_zhuangjia=0;}}else if(_t_gamemode==_T_GAMEMODE_ARSHIAR){_t_tsumibo_ctr=0;++_t_jushou_ctr;if(++_t_bajushou_ctr==_t_players){++_t_ba_ctr;_t_bajushou_ctr=0;if(_t_ba_ctr>=_t_rule.basu){_t_h5_next=setTimeout('AFTER_BANZHUANG(); ', 10);return;}}if(++_t_zhuangjia>=_t_players) _t_zhuangjia=0;}else if(_t_gamemode==_T_GAMEMODE_TAIWAN){++_t_tsumibo_ctr;}else if(_t_gamemode==_T_GAMEMODE_GUOJI){_t_tsumibo_ctr=0;if(++_t_zhuangjia>=_t_players) _t_zhuangjia=0;++_t_jushou_ctr;if(++_t_bajushou_ctr==_t_players){++_t_ba_ctr;_gm_seat_change();_t_bajushou_ctr=0;if(_t_ba_ctr>=_t_rule.basu){_t_h5_next=setTimeout('AFTER_BANZHUANG(); ', 10);return;}}}else {++_t_tsumibo_ctr;j=0;if(_t_ko_flag && _t_rule.knockOut) j=1;if(_t_ba_ctr>3 && _t[_t_top_jia].score>=310) ++j;if(_t_rule.huangpai_lunzhuang){if(_t_rule.pingju_lunzhuang2==0 ||    (_t_rule.pingju_lunzhuang2==1 && !_t_final) ||    (_t_rule.pingju_lunzhuang2==2 && !_t_ba_ctr)){if(_t_rule.huangpai_lunzhuang==3 ||   (!_t[_t_zhuangjia].helepai_ctr &&    (_t_rule.huangpai_lunzhuang==2 || _t_helejia_ctr))){++_t_jushou_ctr;if(++_t_zhuangjia>=_t_players) _t_zhuangjia=0;if(++_t_bajushou_ctr==_t_players){++_t_ba_ctr;_t_bajushou_ctr=0;if(_t_ba_ctr>=_t_rule.basu){if(_t_rule.zhuangfeng || _t[_t_top_jia].score>=310) ++j;}}}}}if(j){_t_h5_next=setTimeout('AFTER_BANZHUANG(); ', 10);return;}}_t_h5_next=setTimeout('YIJU(); ', 10);}function PINGJU(){var i, j, k, str;if(_t_gamemode!=_T_GAMEMODE_TAIWAN){_t_h5_next=setTimeout('PINGJU_0(); ', 10);return;}_tm_dapai2he(_t_jia);_t_h5_next=setTimeout('WAIT_MOVIE("PINGJU_0"); ', 10);}function PINGJU_0(){var txt='流局';if(_t_lang=='en') txt='Drawn.';SPEECH_BALOON(txt, 'pingju'+_t_player_code[_t_dajia_buff], _t_dajia_buff);_t_console_erase();_t_h5_next=setTimeout('PINGJU_0_1(); ', 100);}function PINGJU_0_1(){var i, j, str;if(!_t_rule_sel['UI_silence']){AUDIO_OUTPUT('Jingle_Drawn', false);}_t_init_balance();_t_open_mode=1;i=_t_players;while(--i>=0){_t[i].declare_command=0;if(_t[i].open) continue;_t_lipai(i);_t_shupai_disp(i);}inputKey=0;str='平局です。';if(_t_lang=='en'){str='Abortive Drawn.';}_t_status_disp(str);_t_h5_next=setTimeout('PINGJU_2_2(); ', 1500);}function PINGJU_2_2(){_t_mini_console_disp();inputKey=0;_t_h5_next=setTimeout('WAIT_MINICONSOLE("PINGJU_3"); ', 10);}function PINGJU_3(){_t_status_erase();_t_hele_disp(-1 ,_t_game_status);_t_mini_console_disp();inputKey=0;_t_h5_next=setTimeout('WAIT_MINICONSOLE("PINGJU_4"); ', 10);}function PINGJU_4(){var i, j, k;_t_status_erase();_t_console_erase();++_t_pai_flag;++_t_jitsukyokusu_ctr;i=_t_players; while(--i>=0){_t[i].score=_t[i].score_after_balance;_t[i].current_result=_t[i].result_after_balance;_t[i].current_rank=_t[i].rank_after_balance;}_t_current_top=_t_top_jia;_t_current_shizumi_ctr=_t_shizumi_ctr;i=_t_players; while(--i>=0) _t[i].liangzhuang_ctr=-1;if(_t_rule.kyokusu>-1){++_t_tsumibo_ctr;++_t_bajushou_ctr;++_t_jushou_ctr;if((_t_ko_flag && _t_rule.knockOut) || _t_jushou_ctr>_t_rule.kyokusu-1){_t_h5_next=setTimeout('AFTER_BANZHUANG(); ', 10);return;}}else if(_t_gamemode==_T_GAMEMODE_EASTERN_BOO || _t_gamemode==_T_GAMEMODE_BOO){if(_t_ko_flag || _t[_t_top_jia].score>=_t_genten+_t_genten || _t_bm_yakuman_jia>-1){_t_h5_next=setTimeout('AFTER_BANZHUANG(); ', 10);return;}else {++_t_tsumibo_ctr;++_t_jushou_ctr;if(++_t_bajushou_ctr==_t_players){++_t_ba_ctr;_t_bajushou_ctr=0;if(_t_ba_ctr>=_t_rule.basu){_t_h5_next=setTimeout('AFTER_BANZHUANG(); ', 10);return;}}if(++_t_zhuangjia>=_t_players) _t_zhuangjia=0;}}else if(_t_gamemode==_T_GAMEMODE_ARSHIAR){_t_tsumibo_ctr=0;++_t_jushou_ctr;if(++_t_bajushou_ctr==_t_players){++_t_ba_ctr;_t_bajushou_ctr=0;if(_t_ba_ctr>=_t_rule.basu){_t_h5_next=setTimeout('AFTER_BANZHUANG(); ', 10);return;}}if(++_t_zhuangjia>=_t_players) _t_zhuangjia=0;}else if(_t_gamemode==_T_GAMEMODE_TAIWAN){++_t_tsumibo_ctr;}else if(_t_gamemode==_T_GAMEMODE_GUOJI){_t_tsumibo_ctr=0;if(++_t_zhuangjia>=_t_players) _t_zhuangjia=0;++_t_jushou_ctr;if(++_t_bajushou_ctr==_t_players){++_t_ba_ctr;_t_bajushou_ctr=0;if(_t_ba_ctr>=_t_rule.basu){_t_h5_next=setTimeout('AFTER_BANZHUANG(); ', 10);return;}}}else {if(_t_reach_bo_ctr>0) ++_t_impflag;++_t_tsumibo_ctr;j=0;if(_t_ko_flag && _t_rule.knockOut) j=1;if(_t_ba_ctr>3 && _t[_t_top_jia].score>=310) ++j;if(_t_rule.pingju_lunzhuang1){if(_t_rule.pingju_lunzhuang2==0 ||    (_t_rule.pingju_lunzhuang2==1 && !_t_final) ||    (_t_rule.pingju_lunzhuang2==2 && !_t_ba_ctr)){++_t_jushou_ctr;if(++_t_zhuangjia>=_t_players) _t_zhuangjia=0;if(++_t_bajushou_ctr==_t_players){++_t_ba_ctr;_t_bajushou_ctr=0;if(_t_ba_ctr>=_t_rule.basu){if(_t_rule.zhuangfeng || _t[_t_top_jia].score>=310) ++j;}}}}if(j){_t_h5_next=setTimeout('AFTER_BANZHUANG(); ', 10);return;}}_t_h5_next=setTimeout('YIJU(); ', 10);}function RONGHE(){var i, j, k, str;_t_score_disp(_t_dajia, '#0ff');if(_t_qianggang_flag && !_t_nukidora_flag){_t_h5_arrowY=_t_h5_paiY;_t_h5_arrowX=_t_h5_paiX;}_t_h5_arrow(0, _t_h5_arrowD, _t_h5_arrowX, _t_h5_arrowY);i=''; j=_t_dajia;do {if(_t[j].declare_command==25){if(i!='') i+=', ';i+=_t_seat[j];if(!_t_rule.liangjiahe) break;}else _t[j].declare_command=0;if(++j>=_t_players) j=0;} while(j!=_t_dajia);j='栄和'; if(_t_qianggang_flag) j='搶槓和';str=i+'の'+j+'です。';if(_t_lang=='en'){str=i+' won on a discard.';}_t_status_disp(str);if(_t_helejia_ctr>1 && !_t_rule.liangjiahe){i=_t_dajia; k=-1;do {if(--i<0) i=_t_players-1;if(_t[i].declare_command==25){if(k>-1){_t[k].declare_command=0;_t_score_disp(k, '#880');}k=i;}} while(i!=_t_dajia);_t_helejia_ctr=1;}_t_h5_next=setTimeout('HELE(); ', 10);}function HELE(){var i, j, k, str;if(_t_ox>-1){if(_t_jia==0){_t_imageRate=1.2;_t_pai_V(i & 0x7f, _t_ox, _t_oy);_t_imageRate=1;}else if((_t_jia==2 && _t_players==4) || _t_players==2){_t_pai_V((i & 0x7f) | 0x80, _t_ox, _t_oy);}else if(_t_jia==1){_t_pai_H(i & 0x7f, _t_ox, _t_oy);}else  {_t_pai_H((i & 0x7f) | 0x80, _t_ox, _t_oy);}}i='Jingle_CPUWin';if(_t[0].declare_command==25) i='Jingle_PlayerWin';else if(_t_dajia==0) i='Jingle_PlayerLose';else if(_t_dajia>0)  i='Jingle_CPUWin2';if(!_t_rule_sel['UI_silence']){AUDIO_OUTPUT(i, false);}_t_open_mode=1;i=_t_players;while(--i>=0){if(_t[i].open) continue;_t_lipai(i);_t_shupai_disp(i);}if(_t_gamemode==_T_GAMEMODE_TAIWAN && _t_dajia==0 && !_t_qianggang_flag){_t_dapai_disp(0);}_t_h5_next=setTimeout('HELE_2(); ', 10);}function HELE_2(){var i, j, k, str;if(!_t_dora_disp()){_t_h5_next=setTimeout('HELE_3(); ', 10);return;}_t_h5_next=setTimeout('HELE_2(); ', 10);}function HELE_3(){var i, j, k, str;_t_i=0;i=_t_players;while(--i>=0){if(_t[i].declare_command==25 && _t[i].reach_flag) _t_i=1;}if(_t_i){_t_h5_next=setTimeout('HELE_3_2(); ', 10);return;}_t_h5_next=setTimeout('HELE_3_3(); ', 10);}function HELE_3_2(){if(!_t_uradora_disp()){_t_h5_next=setTimeout('HELE_3_3(); ', 10);return;}_t_h5_next=setTimeout('HELE_3_2(); ', 10);}function HELE_3_3(){var i, j, k, str;if(!_t_lingshang_dora_disp()){_t_h5_next=setTimeout('HELE_4(); ', 10);return;}_t_h5_next=setTimeout('HELE_3_3(); ', 10);}function HELE_4(){inputKey=0;_t_mini_console_disp();_t_h5_next=setTimeout('WAIT_MINICONSOLE("HELE_5"); ', 10);}function HELE_5(){_t_status_erase();hideSprite(_h5_sprite[0].id);_t_init_balance();i=_t_players; _t_helejia_ctr=0;while(--i>=0){if(_t[i].declare_command==25) ++_t_helejia_ctr;}_t_jia_buff=_t_dajia;if(_t_jia_buff<0) _t_jia_buff=_t_zhuangjia;if(_t_gamemode!=_T_GAMEMODE_TAIWAN || _tm_baxianguohai<=0){_t_jia=_t_jia_buff;do {if(--_t_jia<0) _t_jia=_t_players-1;if(_t[_t_jia].declare_command==25){_t_yaku_judge(_t_jia, 0, -1);i=-1; while(++i<10) _t[_t_jia].fu[i]=_t_y_shupai_fu[i];i=-1; while(++i<20) _t[_t_jia].shupai[i]=_t_y_shupai[i];_t_hele_balance(_t_jia, _t_dajia);if(_t_helejia_ctr==1) _t_hele_disp(-1 ,'');else _t_hele_disp(_t_jia ,'');if(_t[_t_jia].shupai[14]==0) _t[_t_jia].shupai[14]=_t[_t_jia].shupai[15] | 0x4000;_t[_t_jia].open=2;_t_h5_dapai_erase(_t_jia);_t_shupai_disp(_t_jia);}} while(_t_jia!=_t_jia_buff);_t_result_after_balance();}else  {i=_t_players; while(--i>=0){if(_t[i].nukidora_ctr>7) _t_jia=i;}_tm_yaku_judge(_t_jia, 3, 0);_t_hele_balance(_t_jia, -1);_t_hele_disp(-1 ,'');_t_result_after_balance();}_t_h5_next=setTimeout('HELE_6(); ', 10);}function HELE_6(){inputKey=0;_t_mini_console_disp();_t_h5_next=setTimeout('WAIT_MINICONSOLE("HELE_7"); ', 10);}function HELE_7(){_t_balance_disp(0);inputKey=0;_t_mini_console_disp();_t_h5_next=setTimeout('WAIT_MINICONSOLE("HELE_8"); ', 10);}function HELE_8(){var i, j, k;_t_status_erase();_t_console_erase();++_t_pai_flag;++_t_impflag;++_t_jitsukyokusu_ctr;i=_t_players; while(--i>=0){if(_t_rule.chip) _t[i].chip+=_t[i].chip_balance;_t[i].score=_t[i].score_after_balance;_t[i].current_result=_t[i].result_after_balance;_t[i].current_rank=_t[i].rank_after_balance;if(_t[i].declare_command==25){_t[i].yakitori_flag=0;if(_t[i].liangzhuang_ctr<0) _t[i].liangzhuang_ctr=1;else _t[i].liangzhuang_ctr++;}else _t[i].liangzhuang_ctr=-1;}_t_current_top=_t_top_jia;_t_current_shizumi_ctr=_t_shizumi_ctr;_t_reach_bo_ctr=0;i=_t_jijia; j=_t_players; while(--j>=0){if(_t[i].declare_command==25){ _t_last_helejia=i; break; }if(++i>=_t_players) i=0;}if(_t_rule.kyokusu>-1){++_t_tsumibo_ctr;++_t_bajushou_ctr;++_t_jushou_ctr;if((_t_ko_flag && _t_rule.knockOut) || _t_jushou_ctr>_t_rule.kyokusu-1){_t_h5_next=setTimeout('AFTER_BANZHUANG(); ', 10);return;}else if(_t[_t_zhuangjia].declare_command!=25){_t_tsumibo_ctr=0;i=_t_zhuangjia; do {if(_t[i].declare_command==25){_t_zhuangjia=i;break;}if(++i>=3) i=0;} while(i!=_t_zhuangjia);}}else if(_t_gamemode==_T_GAMEMODE_EASTERN_BOO || _t_gamemode==_T_GAMEMODE_BOO){if(_t_ko_flag || _t[_t_top_jia].score>=_t_genten+_t_genten || _t_bm_yakuman_jia>-1){_t_h5_next=setTimeout('AFTER_BANZHUANG(); ', 10);return;}else {++_t_tsumibo_ctr;if(_t[_t_zhuangjia].declare_command!=25){_t_tsumibo_ctr=0;if(++_t_zhuangjia>=_t_players) _t_zhuangjia=0;++_t_jushou_ctr;if(++_t_bajushou_ctr==_t_players){++_t_ba_ctr;_t_bajushou_ctr=0;if(_t_ba_ctr>=_t_rule.basu){_t_h5_next=setTimeout('AFTER_BANZHUANG(); ', 10);return;}}}}}else if(_t_gamemode==_T_GAMEMODE_ARSHIAR){_t_tsumibo_ctr=0;if(_t[_t_zhuangjia].declare_command!=25){_t_tsumibo_ctr=0;if(++_t_zhuangjia>=_t_players) _t_zhuangjia=0;++_t_jushou_ctr;if(++_t_bajushou_ctr==_t_players){++_t_ba_ctr;_t_bajushou_ctr=0;if(_t_ba_ctr>=_t_rule.basu){_t_h5_next=setTimeout('AFTER_BANZHUANG(); ', 10);return;}}}}else if(_t_gamemode==_T_GAMEMODE_TAIWAN){++_t_tsumibo_ctr;if(_t[_t_zhuangjia].declare_command!=25){_t_tsumibo_ctr=0;if(++_t_zhuangjia>=_t_players) _t_zhuangjia=0;++_t_jushou_ctr;if(++_t_bajushou_ctr==_t_players){++_t_ba_ctr;_t_bajushou_ctr=0;if(_t_ba_ctr>=_t_rule.basu){_t_h5_next=setTimeout('AFTER_BANZHUANG(); ', 10);return;}}}}else if(_t_gamemode==_T_GAMEMODE_GUOJI){_t_tsumibo_ctr=0;if(++_t_zhuangjia>=_t_players) _t_zhuangjia=0;++_t_jushou_ctr;if(++_t_bajushou_ctr==_t_players){++_t_ba_ctr;_gm_seat_change();_t_bajushou_ctr=0;if(_t_ba_ctr>=_t_rule.basu){_t_h5_next=setTimeout('AFTER_BANZHUANG(); ', 10);return;}}}else {if(_t_ko_flag && _t_rule.knockOut){_t_h5_next=setTimeout('AFTER_BANZHUANG(); ', 10);return;}else if(_t_ba_ctr>3 && _t[_t_top_jia].score>=310){_t_h5_next=setTimeout('AFTER_BANZHUANG(); ', 10);return;}else if(_t[_t_zhuangjia].declare_command==25){++_t_tsumibo_ctr;if(_t_rule.agariyame && _t_ba_ctr+1>=_t_rule.basu && _t_bajushou_ctr+1==_t_players && _t_top_jia==_t_zhuangjia){if(_t_rule.zhuangfeng || _t[_t_top_jia].score>=310){_t_h5_next=setTimeout('AFTER_BANZHUANG(); ', 10);return;}}}else {_t_tsumibo_ctr=0;if(++_t_zhuangjia>=_t_players) _t_zhuangjia=0;++_t_jushou_ctr;if(++_t_bajushou_ctr==_t_players){++_t_ba_ctr;_t_bajushou_ctr=0;if(_t_ba_ctr>=_t_rule.basu){if(_t_rule.zhuangfeng || _t[_t_top_jia].score>=310){_t_h5_next=setTimeout('AFTER_BANZHUANG(); ', 10);return;}}}}}_t_h5_next=setTimeout('YIJU(); ', 10);}function AFTER_BANZHUANG(){var i, j, k;_t_init_balance();i=_t_players;while(--i>=0){_t[i].result[_t_game_ctr]=_t[i].current_result;_t[i].total_result+=_t[i].current_result;}_t_i=_t_score_card_disp();_t_h5_next=setTimeout('AFTER_BANZHUANG_2(); ', 10);}function AFTER_BANZHUANG_2(){var i, j, k;var cs=28, margin=16, blines=4, bcolumns=16;var w=cs*32+margin*2+bcolumns*3;var h=cs*24+blines*5+cs+margin*2;var xh=600-w/2, yh=450-h/2;xh+=margin;yh+=margin;d=10;str=String.fromCharCode(9655)+'終了';if(_t_lang=='en') str=String.fromCharCode(9655)+'Quit.';d=_t_textButton2(d, xh+cs*26,yh,cs*3,cs,str,'GAME_OVER');str=String.fromCharCode(9655)+'次戦';if(_t_lang=='en') str=String.fromCharCode(9655)+'Next.';if(_t_game_ctr<7) d=_t_textButton2(d, xh+cs*30,yh,cs*3,cs,str,'AFTER_BANZHUANG_3');}function AFTER_BANZHUANG_3(){if(++_t_game_ctr>=7){_t_h5_next=setTimeout('GAME_OVER(); ', 10);return;}_t_h5_next=setTimeout('BANZHUANG(); ', 10);}function GAME_OVER(){if(_t_lang=='ja' || _t_lang==''){_t_h5_next=setTimeout('MENU(); ', 10);return;}_t_h5_next=setTimeout('MENU_EN(); ', 10);}function ATRACT(){var e, str, y, i, j;try {_t_lang=_t_syslang;}catch(e){ _t_lang='ja'; }SHOW_AUDIOMODE();_t_toggle_sprite_disp(0);putPartOfImage(image[1], 0, 0, 1199, 899, 0, 0, 1200, 900);putPartOfImage(image[0], 250, 840, 200, 40, 940, 20, 240, 48);y=890; if(_t_lang=='en') y+=70;putPartOfImage(image[0], 250,   y, 290, 60, 858, 254, 290, 60);str='しらぎく麻雀';if(_t_lang=='en') str='Mahjong';newTextArea('TITLE1', 0, 82, 1196, 128, 128, 'transparent', '#000');e=document.getElementById('TITLE1');e.style.fontStyle='italic';e.style.fontWeight='bold';e.style.fontFamily='serif';e.style.textAlign='center';e.style.lineHeight='1em';e.style.verticalAlign='text-top';e.innerHTML=str;newTextArea('TITLE2', 2, 84, 1196, 128, 128, 'transparent', '#060');e=document.getElementById('TITLE2');e.style.fontStyle='italic';e.style.fontWeight='bold';e.style.fontFamily='serif';e.style.textAlign='center';e.style.lineHeight='1em';e.style.verticalAlign='text-top';e.innerHTML=str;newTextArea('TITLE3', 4, 86, 1196, 128, 128, 'transparent', '#060');e=document.getElementById('TITLE3');e.style.fontStyle='italic';e.style.fontWeight='bold';e.style.fontFamily='serif';e.style.textAlign='center';e.style.lineHeight='1em';e.style.verticalAlign='text-top';e.innerHTML=str;str='Copyright &copy; '+_t_copyright_year+' さいたま・しらぎくさいと';if(_t_lang=='en') str='&nbsp;&copy; '+_t_copyright_year_en+' Marguerite Site, Saitama, Japan.';newTextArea('CREDIT_TXT', 0, 860, 624, 32, 24, '#efe', '#060');e=document.getElementById('CREDIT_TXT');e.style.fontWeight='bold';e.style.fontFamily='serif';e.style.textAlign='left';e.style.lineHeight='1em';e.style.verticalAlign='text-top';e.innerHTML=str;str='画面をクリック/タップして下さい。';if(_t_lang=='en') str='Please Click/Tap this Screen.';newTextArea('TX1', 0, 640, 1200, 40, 40, 'transparent', '#000');e=document.getElementById('TX1');e.style.fontWeight='bold';e.style.fontFamily='serif';e.style.textAlign='center';e.style.lineHeight='1em';e.style.verticalAlign='text-top';e.innerHTML=str;newTextArea('TX2', -1, 639, 1202, 40, 40, 'transparent', '#060');e=document.getElementById('TX2');e.style.fontWeight='bold';e.style.fontFamily='serif';e.style.textAlign='center';e.style.lineHeight='1em';e.style.verticalAlign='text-top';e.innerHTML=str;newTextArea('TX3', -2, 638, 1204, 40, 40, 'transparent', '#060');e=document.getElementById('TX3');e.style.fontWeight='bold';e.style.fontFamily='serif';e.style.textAlign='center';e.style.lineHeight='1em';e.style.verticalAlign='text-top';e.innerHTML=str;i=1; j=2;if(_t_lang=='en'){i=2; j=1;}newAnchorArea(i, 0, 0, 1200, 800, 'ATRACT_START1', 12, 'transparent', '#fff');newAnchorArea(j, 858, 254, 290, 60, 'ATRACT_START2', 36, 'transparent', '#060');_t_i=0; inputKey=0;_t_h5_next=setTimeout('ATRACT2(); ', 10);}function ATRACT2(){var i, e;i=Math.random();if(++_t_i>96){_t_i=0;e=document.getElementById('TX1');e.style.display='block';e=document.getElementById('TX2');e.style.display='block';e=document.getElementById('TX3');e.style.display='block';}else if(_t_i==64){e=document.getElementById('TX1');e.style.display='none';e=document.getElementById('TX2');e.style.display='none';e=document.getElementById('TX3');e.style.display='none';}if(inputKey==1){H5_SOUND_SET();_t_h5_next=setTimeout('MENU(); ', 10);return;}if(inputKey==2){H5_SOUND_SET();_t_h5_next=setTimeout('MENU_EN(); ', 10);return;}_t_h5_next=setTimeout('ATRACT2(); ', 10);}function H5_SOUND_SET(){var i, j;if(noAudio) return;j=4; while(--j>-1){i='dapai'+j;audioObj[i].volume=0;audioObj[i].play();i='mopai'+j;audioObj[i].volume=0;audioObj[i].play();i='dice'+j;audioObj[i].volume=0;audioObj[i].play();}}
