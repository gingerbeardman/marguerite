function a0128(jia){var suit=[0, 0, 0, 0, 0], pb=new Array();var i, j, k, l, m, n, s, t;var OOO=new Array(11), XOO=new Array(11), OXO=new Array(11), OOX=new Array(11);k=-5; i=_t[jia].fulou_ctr; while(--i>=0){k+=5; if((j=_t[jia].fuloupai[k] & 0x3f)>0x34) j=0x40;j=Math.floor(j / 10);if(suit[j]) return(0);suit[j]++;}i=0x40; while(--i>=0) pb[i]=0;i=20; while(--i>=0){if((j=_t[jia].shupai[i] & 0x3f)<1 || j>0x37) continue;pb[j]++;}l=0; if(_t[jia].mopai_ctr>5) l++;if(suit[4] ||    (pb[0x35]>1 && pb[0x35]+vZpt[0x35]>2) ||    (pb[0x36]>1 && pb[0x36]+vZpt[0x36]>2) ||    (pb[0x37]>1 && pb[0x37]+vZpt[0x37]>2)){if(suit[3] ||    (pb[0x31]>l && pb[0x31]+vZpt[0x31]>1) ||    (pb[0x32]>l && pb[0x32]+vZpt[0x32]>1) ||    (pb[0x33]>l && pb[0x33]+vZpt[0x33]>1) ||    (pb[0x34]>l && pb[0x34]+vZpt[0x34]>1)) ;else return(0);}else if(suit[3] ||    (pb[0x31]>1 && pb[0x31]+vZpt[0x31]>2) ||    (pb[0x32]>1 && pb[0x32]+vZpt[0x32]>2) ||    (pb[0x33]>1 && pb[0x33]+vZpt[0x33]>2) ||    (pb[0x34]>1 && pb[0x34]+vZpt[0x34]>2)){if(suit[4] ||    (pb[0x35]>l && pb[0x35]+vZpt[0x35]>1) ||    (pb[0x36]>l && pb[0x36]+vZpt[0x36]>1) ||    (pb[0x37]>l && pb[0x37]+vZpt[0x37]>1)) ;else return(0);}else return(0);n=0; s=-1; t=-0x10; while(++s<3){t+=0x10;if(suit[s]){n+=3; continue;}l=m=0; i=0; k=t; while(++i<10){++k; m+=pb[k];if(l>2) continue;if(pb[k]>2 || (i<8 && pb[k]>0 && pb[k+1]>0 && pb[k+2]>0)){l=3; continue;}if(l>1) continue;if((pb[k]>1 && pb[k]+vZpt[k]>2) ||    (i<9 && pb[k]>0 && pb[k+1]>0 && vZpt[k-1]+vZpt[k+2]>0) ||    (i<8 && pb[k]>0 && pb[k+2]>0 && vZpt[k+1]>0)){l=2; continue;}if(l) continue;if((pb[k]>0 && pb[k]+vZpt[k]>2) ||    (i<9 && pb[k]>0 && vZpt[k-1]+vZpt[k+1]>0) ||    (i<8 && pb[k]>0 && vZpt[k+1]+vZpt[k+2]>0) ||    (i<2 && pb[k]>0 && vZpt[k-1]+vZpt[k-2]>0)) l=1;}n+=l;}if(n<5) return(0);if(!suit[4]){i=0x34; while(++i<0x38){if(pb[i]>2){if(pb[i]==3) vYaku[i]+=0x0800;break;}}if(i>0x37){i=0x34; m=0; while(++i<0x38){if(pb[i]==2) m++;}if(m>0){i=0x34; j=-1; k=-1; while(++i<0x38){if(pb[i]!=2 || vZpt[i]<1) continue;if(vZpt[i]>j){j=vZpt[i]; k=i;}}if(j>0){vOOO[j]+=0x0800;vYaku[j]+=0x0800;}else {i=0x34; while(++i<0x38){if(pb[i]!=2) continue;vOOO[i]+=0x0800;if(m<2) vYaku[i]+=0x0800;}}}else {i=0x34; while(++i<0x38){if(pb[i]>0 && vZpt[i]>0){vYaku[i]+=0x0600;_t[jia].required[i]+=0x0600;}}}}}if(!suit[3]){i=0x30; while(++i<35){if(pb[i]>2){if(pb[i]==3) vYaku[i]+=0x0700;break;}}if(i>0x34){i=0x30; m=0; while(++i<35){if(pb[i]==2) m++;}if(m>0){i=0x30; j=-1; k=-1; while(++i<35){if(pb[i]!=2 || vZpt[i]<1) continue;if(vZpt[i]>j){j=vZpt[i]; k=i;}}if(j>0){vOOO[j]+=0x0700;vYaku[j]+=0x0700;}else {i=0x30; while(++i<35){if(pb[i]!=2) continue;vOOO[i]+=0x0700;if(m<2) vYaku[i]+=0x0700;}}}}}s=-1; t=-0x10; while(++s<3){t+=0x10; if(suit[s]>0) continue;k=t; i=0; while(++i<10){++k; if(pb[k]>2) break;if(i<8 && pb[k]>0 && pb[k+1]>0 && pb[k+2]>0) break;}if(i<10){if(pb[t+1]+pb[t+2]+pb[t+3]+pb[t+4]+pb[t+5]+pb[t+6]+pb[t+7]+pb[t+8]+pb[t+9]<4){vYaku[k]+=0x0600;if(pb[k]<3){vYaku[k+1]+=0x0600;vYaku[k+2]+=0x0600;}}continue;}k=t; i=0; l=0; m=0; n=0; while(++i<10){++k; if(pb[k]>1 && vZpt[k]>0){ l=0; m++; n=k; }else if(pb[k]>0 && pb[k+1]>0){if((i<8 && vZpt[k+2]>0) || (i<8 && vZpt[k-1]>0)){ l=1; m++; n=k; }}else if(i<8 && pb[k]>0 && pb[k+2]>0 && vZpt[k+1]>0){ l=2; m++; n=k; }}if(m==1 && pb[t+1]+pb[t+2]+pb[t+3]+pb[t+4]+pb[t+5]+pb[t+6]+pb[t+7]+pb[t+8]+pb[t+9]<3){if(l<1) vYaku[n]+=0x0600;else if(l<2){vYaku[n]+=0x0600; vYaku[n+1]+=0x0600;}else {vYaku[n]+=0x0600; vYaku[n+2]+=0x0600;}}else if(pb[t+1]+pb[t+2]+pb[t+3]+pb[t+4]+pb[t+5]+pb[t+6]+pb[t+7]+pb[t+8]+pb[t+9]<3){vYaku[t+1]+=0x0600;vYaku[t+2]+=0x0600;vYaku[t+3]+=0x0600;vYaku[t+4]+=0x0600;vYaku[t+5]+=0x0600;vYaku[t+6]+=0x0600;vYaku[t+7]+=0x0600;vYaku[t+8]+=0x0600;vYaku[t+9]+=0x0600;}i=11; while(--i>-1) XOO[i]=OXO[i]=OOX[i]=OOO[i]=0;k=t; i=0; while(++i<10){k++;if(pb[k]==2 && vZpt[k]){j=6; if(!(i-1) & 7) ++j;OOO[i]+=j;}if(i<9 && pb[k]>0 && pb[k+1]>0){XOO[i-1]++; OOX[i+2]++;}if(i<8 && pb[k]>0 && pb[k+2]>0){OXO[i+1]++;}}k=t; i=0; while(++i<10){++k;if(OOO[i]) vOOO[k]+=0x0600;if(XOO[i]) vXOO[k]+=0x0600;if(OXO[i]) vOXO[k]+=0x0600;if(OOX[i]) vOOX[k]+=0x0600;}}_t[jia].neraiyaku+=6;return(6);}function a0127(jia){var lo=hi=ct=c5=0;var mn, ddp, ldp, qdp, ddd=new Array(), ldd=new Array(), qdd=new Array();var pb=new Array();var i, j, k, s;k=-5; i=_t[jia].fulou_ctr; while(--i>=0){k+=5; if((j=_t[jia].fuloupai[k] & 0x3f)>0x30) return(0);if(j!=(_t[jia].fuloupai[k+1] & 0x3f)){j=Math.floor((j+(_t[jia].fuloupai[k+1] & 0x3f)+(_t[jia].fuloupai[k+2] & 0x3f)) / 3) & 0x0f;if(j==2 || j==3) lo++;else if(j==8 || j==7) hi++;else {c5++;if(j==5) ct++;}continue;}if((j & 0x0f)<5) lo++;else if(j>5) hi++;if(j>3 && j<7){ct++;if(j==5) c5++;}}_t_shupai_move(jia);if(ct==_t[jia].fulou_ctr){i=0x30; while(--i>=0) pb[i]=_t_bipai2[i];mn=ct; ddp=ldp=ldp2=qdp=0;s=-0x10; while((s+=0x10)<0x30){while(pb[s+4]>0 && pb[s+5]>0 && pb[s+6]>0){pb[s+4]--; pb[s+5]--; pb[s+6]--; mn++;}if(pb[s+4]>0 && pb[s+6]>0 && vZpt[s+5]>0){pb[s+4]--; pb[s+6]--; qdd[qdp++]=s+4;}if(pb[s+4]>0 && pb[s+5]>0 && vZpt[s+6]>0){pb[s+4]--; pb[s+5]--; ldd[ldp++]=s+4;}if(pb[s+5]>0 && pb[s+6]>0 && vZpt[s+4]>0){pb[s+4]--; pb[s+5]--; ldd[ldp++]=s+5;}if(pb[s+4]>2) mn++;else if(pb[s+4]>1) ddd[ddp++]=s+4;if(pb[s+5]>2) mn++;else if(pb[s+5]>1) ddd[ddp++]=s+5;if(pb[s+6]>2) mn++;else if(pb[s+6]>1) ddd[ddp++]=s+6;}if(mn+ddp+ldp+qdp>4){s=-0x10; while((s+=0x10)<0x30){vYaku[s+1]+=0x1800;vYaku[s+2]+=0x1800;vYaku[s+3]+=0x1800;}while(--ddp>-1){j=ddd[ddp];_t[jia].required[j]+=0x1800;vOOO[j]+=0x1800;}while(--ldp>-1){j=ldd[ldp];if((j & 0x0f)==4){_t[jia].required[j+2]+=0x1800;vOOX[j+2]+=0x1800;continue;}_t[jia].required[j-1]+=0x1800;vXOO[j-1]+=0x1800;}while(--qdp>-1){j=qdd[qdp];_t[jia].required[j+1]+=0x1800;vOXO[j+1]+=0x1800;}_t[jia].neraiyaku+=24;return(24);}}var m2, l2p, q2p, ld2=new Array(), p2=new Array();if(hi==_t[jia].fulou_ctr){i=0x30; while(--i>=0) pb[i]=_t_bipai2[i];mn=m2=c5; ddp=ldp=qdp=d2p=l2p=q2p=0;s=-0x10; while((s+=0x10)<0x30){while(pb[s+3]>0 && pb[s+4]>0 && pb[s+5]>0){pb[s+3]--; pb[s+4]--; pb[s+5]--; mn++;}while(pb[s+4]>0 && pb[s+5]>0 && pb[s+6]>0){pb[s+4]--; pb[s+5]--; pb[s+6]--; mn++;}while(pb[s+5]>0 && pb[s+6]>0 && pb[s+7]>0){pb[s+5]--; pb[s+6]--; pb[s+7]--; mn++;}if(pb[s+4]>0 && pb[s+5]>0 && vZpt[s+3]+vZpt[s+6]>0){pb[s+4]--; pb[s+5]--; ldd[ldp++]=s+4;}if(pb[s+5]>0 && pb[s+6]>0 && vZpt[s+4]+vZpt[s+7]>0){pb[s+5]--; pb[s+6]--; ldd[ldp++]=s+5;}if(pb[s+3]>0 && pb[s+5]>0 && vZpt[s+4]>0){pb[s+3]--; pb[s+5]--; qdd[qdp++]=s+3;}if(pb[s+4]>0 && pb[s+6]>0 && vZpt[s+5]>0){pb[s+4]--; pb[s+6]--; qdd[qdp++]=s+4;}if(pb[s+5]>0 && pb[s+7]>0 && vZpt[s+6]>0){pb[s+5]--; pb[s+7]--; qdd[qdp++]=s+5;}if(pb[s+3]>0 && pb[s+4]>0 && vZpt[s+5]>0){pb[s+3]--; pb[s+4]--; ldd[ldp++]=s+3;}if(pb[s+6]>0 && pb[s+7]>0 && vZpt[s+5]>0){pb[s+6]--; pb[s+7]--; ldd[ldp++]=s+6;}if(pb[s+5]>2) mn++;while(p2[s+7]>0 && p2[s+6]>0 && p2[s+5]>0){p2[s+7]--; p2[s+6]--; p2[s+5]--; m2++;}while(p2[s+6]>0 && p2[s+5]>0 && p2[s+4]>0){p2[s+6]--; p2[s+5]--; p2[s+4]--; m2++;}while(p2[s+5]>0 && p2[s+4]>0 && p2[s+3]>0){p2[s+5]--; p2[s+4]--; p2[s+3]--; m2++;}if(p2[s+6]>0 && p2[s+5]>0 && vZpt[s+4]+vZpt[s+7]>0){p2[s+6]--; p2[s+5]--; ld2[l2p++]=s+5;}if(p2[s+5]>0 && p2[s+4]>0 && vZpt[s+3]+vZpt[s+6]>0){p2[s+5]--; p2[s+4]--; ld2[l2p++]=s+4;}if(p2[s+7]>0 && p2[s+5]>0 && vZpt[s+6]>0){p2[s+7]--; p2[s+5]--; qd2[q2p++]=s+5;}if(p2[s+4]>0 && p2[s+6]>0 && vZpt[s+5]>0){p2[s+4]--; p2[s+6]--; qd2[q2p++]=s+4;}if(p2[s+5]>0 && p2[s+3]>0 && vZpt[s+4]>0){p2[s+5]--; p2[s+3]--; qd2[q2p++]=s+3;}if(p2[s+7]>0 && p2[s+6]>0 && vZpt[s+5]>0){p2[s+7]--; p2[s+6]--; ld2[l2p++]=s+6;}if(p2[s+4]>0 && p2[s+3]>0 && vZpt[s+5]>0){p2[s+4]--; p2[s+3]--; ld2[l2p++]=s+3;}if(p2[s+5]>2) m2++;}if((i=mn+ldp+qdp)<4){i=mn=ddp=qdp=0;pb[3]=pb[13]=pb[23]=pb[7]=pb[17]=pb[27]=255;pb[4]=pb[14]=pb[24]=pb[6]=pb[16]=pb[26]=255;}if((j=m2+l2p+q2p)<4){j=m2=d2p=q2p=0;p2[3]=p2[13]=p2[23]=p2[7]=p2[17]=p2[27]=255;p2[4]=p2[14]=p2[24]=p2[6]=p2[16]=p2[26]=255;}if(i>4 || j>4){s=-0x10; while((s+=0x10)<0x30){if(pb[s+3]<1 || p2[s+3]<1) vYaku[s+3]+=0x1000;if(pb[s+4]<1 || p2[s+4]<1) vYaku[s+4]+=0x1000;vYaku[s+5]+=0x1000;if(pb[s+6]<1 || p2[s+6]<1) vYaku[s+6]+=0x1000;if(pb[s+7]<1 || p2[s+7]<1) vYaku[s+7]+=0x1000;}i=ldp; while(--i>-1){j=ldd[i];if((j & 0x0f)>3){_t[jia].required[j-1]+=0x1000;vXOO[j-1]+=0x1000;}if((j & 0x0f)<6){_t[jia].required[j+2]+=0x1000;vOOX[j+2]+=0x1000;}}i=l2p; while(--i>-1){j=ld2[i];if((j & 0x0f)>3){_t[jia].required[j-1]+=0x1000;vXOO[j-1]+=0x1000;}if((j & 0x0f)<6){_t[jia].required[j+2]+=0x1000;vOOX[j+2]+=0x1000;}}i=qdp; while(--i>-1){j=qdd[i];_t[jia].required[j+1]+=0x1000;vOXO[j+1]+=0x1000;}i=q2p; while(--i>-1){j=qd2[i];_t[jia].required[j+1]+=0x1000;vOXO[j+1]+=0x1000;}_t[jia].neraiyaku+=16;return(16);}}if(lo==_t[jia].fulou_ctr){i=0x30; while(--i>=0) pb[i]=_t_bipai2[i];mn=lo; ddp=ldp=qdp=0;s=-0x10; while((s+=0x10)<0x30){while(pb[s+1]>0 && pb[s+2]>0 && pb[s+3]>0){pb[s+1]--; pb[s+2]--; pb[s+3]--; mn++;}if(pb[s+1]>0 && pb[s+2]>0 && vZpt[s+3]>0){pb[s+1]--; pb[s+2]--; ldd[ldp++]=s+1;}if(pb[s+1]>0 && pb[s+3]>0 && vZpt[s+2]>0){pb[s+1]--; pb[s+3]--; qdd[qdp++]=s+1;}if(pb[s+1]>2) mn++;else if(pb[s+1]>1) ddd[ddp++]=s+1;while(pb[s+2]>0 && pb[s+3]>0 && pb[s+4]>0){pb[s+2]--; pb[s+3]--; pb[s+4]--; mn++;}if(pb[s+2]>0 && pb[s+3]>0 && vZpt[s+1]+vZpt[s+4]>0){pb[s+2]--; pb[s+3]--; ldd[ldp++]=s+2;}if(pb[s+2]>0 && pb[s+4]>0 && vZpt[s+3]>0){pb[s+2]--; pb[s+4]--; qdd[qdp++]=s+2;}if(pb[s+3]>0 && pb[s+4]>0 && vZpt[s+2]>0){pb[s+2]--; pb[s+3]--; ldd[ldp++]=s+3;}if(pb[s+2]>2) mn++;else if(pb[s+2]>1) ddd[ddp++]=s+2;if(pb[s+3]>2) mn++;else if(pb[s+3]>1) ddd[ddp++]=s+3;if(pb[s+4]>2) mn++;else if(pb[s+4]>1) ddd[ddp++]=s+4;}if(mn+ddp+ldp+qdp>4){s=-0x10; while((s+=0x10)<0x30){vYaku[s+1]+=0x0c00;vYaku[s+2]+=0x0c00;vYaku[s+3]+=0x0c00;vYaku[s+4]+=0x0c00;}while(--ddp>-1){j=ddd[ddp];_t[jia].required[j]+=0x0c00;vOOO[j]+=0x0c00;}while(--ldp>-1){j=ldd[ldp];_t[jia].required[j-1]+=0x0c00;vXOO[j-1]+=0x0c00;if((j & 0x0f)==3) continue;_t[jia].required[j+2]+=0x0c00;vOOX[j+2]+=0x0c00;}while(--qdp>-1){j=qdd[qdp];_t[jia].required[j+1]+=0x0c00;vOXO[j+1]+=0x0c00;}_t[jia].neraiyaku+=12;return(12);}}if(hi==_t[jia].fulou_ctr){i=0x30; while(--i>=0) pb[i]=_t_bipai2[i];mn=hi; ddp=ldp=qdp=0;s=-0x10; while((s+=0x10)<0x30){while(pb[s+9]>0 && pb[s+8]>0 && pb[s+7]>0){pb[s+9]--; pb[s+8]--; pb[s+7]--; mn++;}if(pb[s+9]>0 && pb[s+8]>0 && vZpt[s+7]>0){pb[s+9]--; pb[s+8]--; ldd[ldp++]=s+8;}if(pb[s+9]>0 && pb[s+7]>0 && vZpt[s+8]>0){pb[s+9]--; pb[s+7]--; qdd[qdp++]=s+7;}if(pb[s+9]>2) mn++;else if(pb[s+9]>1) ddd[ddp++]=s+9;while(pb[s+8]>0 && pb[s+7]>0 && pb[s+6]>0){pb[s+8]--; pb[s+7]--; pb[s+6]--; mn++;}if(pb[s+8]>0 && pb[s+7]>0 && vZpt[s+9]+vZpt[s+6]>0){pb[s+8]--; pb[s+7]--; ldd[ldp++]=s+7;}if(pb[s+8]>0 && pb[s+6]>0 && vZpt[s+7]>0){pb[s+8]--; pb[s+6]--; qdd[qdp++]=s+6;}if(pb[s+7]>0 && pb[s+6]>0 && vZpt[s+8]>0){pb[s+8]--; pb[s+7]--; ldd[ldp++]=s+6;}if(pb[s+8]>2) mn++;else if(pb[s+8]>1) ddd[ddp++]=s+8;if(pb[s+7]>2) mn++;else if(pb[s+7]>1) ddd[ddp++]=s+7;if(pb[s+6]>2) mn++;else if(pb[s+6]>1) ddd[ddp++]=s+6;}if(mn+ddp+ldp+qdp>4){s=-0x10; while((s+=0x10)<0x30){vYaku[s+9]+=0x0c00;vYaku[s+8]+=0x0c00;vYaku[s+7]+=0x0c00;vYaku[s+6]+=0x0c00;}while(--ddp>-1){j=ddd[ddp];_t[jia].required[j]+=0x0c00;vOOO[j]+=0x0c00;}while(--ldp>-1){j=ldd[ldp];_t[jia].required[j+2]+=0x0c00;vOOX[j+2]+=0x0c00;if((j & 0x0f)==6) continue;_t[jia].required[j-1]+=0x0c00;vXOO[j-1]+=0x0c00;}while(--qdp>-1){j=qdd[qdp];_t[jia].required[j+1]+=0x0c00;vOXO[j+1]+=0x0c00;}_t[jia].neraiyaku+=12;return(12);}}return(0);}function a0135(jia){var v=new Array(0x40);var p1=new Array(0x40);var p2=new Array(0x40);var i, j, k, y;var sn=new Array(0x40);var ke=new Array(0x40);var snf=0;if(!_t[jia].menqian_flag) return;_t_shupai_move(jia);i=0x40; while(--i>-1) sn[i]=ke[i]=vXOO[i]=vOXO[i]=vOOX[i]=vOOO[i]=vOOOO[i]=0;k=-5; y=0; i=_t[jia].fulou_ctr; while(--i>-1){k+=5; if(_t[jia].fuloupai[k+4]) break;if(_t[jia].fuloupai[k+3]) y++;if((j=_t[jia].fuloupai[k] & 0x3f)==(_t[jia].fuloupai[k+1] & 0x3f)){if(j>0x34) y+=2;else if(j>0x30){if(j==_t_zhuangfeng[0] || j==_t[jia].menfeng) y+=2;else y++;}else {if((j & 0x0f)==1 || (j & 0x0f)==9) y++;ke[j]++;}continue;}j=Math.floor((j+(_t[jia].fuloupai[k+1] & 0x3f)+(_t[jia].fuloupai[k+2] & 0x3f)) / 3)-1;sn[j]++; snf++;}if(_t[jia].fulou_ctr>0 && i<0){if(snf==_t[jia].fulou_ctr){i=0; while(++i<28){if((i & 0x0f)<8){if(_t_bipai2[i]>0 && _t_bipai2[i+1]>0 && vZpt[i+2]) vOOX[i+2]+=0x0600;}if((i & 0x0f)>1){if(_t_bipai2[i]>0 && _t_bipai2[i+1]>0 && vZpt[i-1]) vXOO[i-1]+=0x0600;}if((i & 0x0f)<8 && (i & 0x0f)>0){if(_t_bipai2[i]>0 && _t_bipai2[i+2]>0 && vZpt[i+1]) vOXO[i+1]+=0x0600;}}}i=0x38; while(--i>0x30){if(ke[i]) break;}if(i<0x31 && ke[1]+ke[9]+ke[11]+ke[19]+ke[21]+ke[29]<1 &&    sn[1]+sn[7]+sn[11]+sn[17]+sn[21]+sn[27]<1){i=0; while(++i<28){if((i & 0x0f)>1 && (i & 0x0f)<9){if(_t_bipai2[i]>2 && vZpt[i+2]) vOOOO[i]+=0x0600;else if(_t_bipai2[i]>1 && vZpt[i+2]) vOOO[i]+=0x0600;}if((i & 0x0f)==2){if(_t_bipai2[i]>0 && _t_bipai2[i+1]>0 && vZpt[i+2]) vOOX[i+2]+=0x0600;if(_t_bipai2[i]>0 && _t_bipai2[i+2]>0 && vZpt[i+1]) vOXO[i+1]+=0x0600;continue;}if((i & 0x0f)==7){if(_t_bipai2[i]>0 && _t_bipai2[i+1]>0 && vZpt[i-1]) vXOO[i-1]+=0x0600;if(_t_bipai2[i]>0 && _t_bipai2[i+2]>0 && vZpt[i+1]) vOXO[i+1]+=0x0600;continue;}if((i & 0x0f)<3 || (i & 0x0f)>6) continue;if(_t_bipai2[i]>0 && _t_bipai2[i+1]>0 && vZpt[i+2]) vOOX[i+2]+=0x0600;if(_t_bipai2[i]>0 && _t_bipai2[i+1]>0 && vZpt[i-1]) vXOO[i-1]+=0x0600;}}i=10; while(--i>0){if((ke[i] && (ke[i+0x10] || ke[i+0x20])) ||    (ke[i+0x10] && ke[i+0x20])) y+=2;}i=0; while(++i<0x38){if(sn[i]>2) y+=24;else if(sn[i]>1) y++;}if(sn[1] && sn[7]) y++;if(sn[11] && sn[17]) y++;if(sn[21] && sn[27]) y++;i=0; while(++i<5){if(sn[i] && sn[i+3]) y++;if(sn[i+0x10] && sn[i+13]) y++;if(sn[i+0x20] && sn[i+23]) y++;}i=0; while(++i<7){if((sn[i] && (sn[i+0x10] || sn[i+0x20])) ||    (sn[i+0x10] && sn[i+0x20])) y++;}if(y>1 && _t[jia].fulou_ctr<4){i=0x40; while(--i>-1){_t[jia].required[i]=0;vXOO[i]=vOXO[i]=vOOX[i]=vOOO[i]=vOOOO[i]=0;}i=0; while(++i<28){if((i & 0x0f)<8){if(_t_bipai2[i]>0 && _t_bipai2[i+1]>0 && vZpt[i+2]) vOOX[i+2]+=0x0600;}if((i & 0x0f)>1){if(_t_bipai2[i]>0 && _t_bipai2[i+1]>0 && vZpt[i-1]) vXOO[i-1]+=0x0600;}if((i & 0x0f)<8 && (i & 0x0f)>0){if(_t_bipai2[i]>0 && _t_bipai2[i+2]>0 && vZpt[i+1]) vOXO[i+1]+=0x0600;}}i=0; while(++i<0x38){if(_t_bipai2[i]>2 && vZpt[i]) vOOOO[i]+=0x0600;else if(_t_bipai2[i]>1 && vZpt[i]) vOOO[i]+=0x0600;}return;}}if(_t[jia].fulou_ctr>3) return;i=0x40; while(--i>-1){v[i]=0;p1[i]=p2[i]=_t_bipai2[i];}i=0; while(++i<28){j=Math.min(p1[i], Math.min(p1[i+1], p1[i+2]));p1[i]-=j;p1[i+1]-=j;p1[i+2]-=j;}i=0; while(++i<28){if((i & 0x0f)>1 && (i & 0x0f)<8 && p1[i]>0 && p1[i+1]>0){v[i-1]++; v[i+2]++;}else if((i & 0x0f)<8 && p1[i]>0 && p1[i+2]>0){v[i+1]+=4;}else if(p1[i]>0){v[i]+=2;}}i=0; while(++i<0x38){if(p1[i]==2){v[i]++;}}i=0x30; while(--i>2){j=Math.min(p2[i], Math.min(p2[i-1], p2[i-2]));p2[i]-=j;p2[i-1]-=j;p2[i-2]-=j;}i=0x30; while(--i>1){if((i & 0x0f)>2 && (i & 0x0f)<9 && p2[i]>0 && p2[i-1]>0){v[i-2]++; v[i+1]++;}else if((i & 0x0f)>2 && p2[i]>0 && p2[i-2]>0){v[i-1]+=4;}else if(p1[i]>0){v[i]+=2;}}i=0; while(++i<0x38){if(p2[i]==2){v[i]++;}}i=0x40; while(--i>-1){_t[jia].required[i]=v[i];vXOO[i]=vOXO[i]=vOOX[i]=vOOO[i]=vOOOO[i]=0;}return;}function a0137(jia){var i;i=_t[jia].menfeng; while(--i>0x30){if(i==_t_zhuangfeng[0]) continue;if(_t_bipai2[i]>0) return(i);}i=0x34; while(--i>_t[jia].menfeng){if(i==_t_zhuangfeng[0]) continue;if(_t_bipai2[i]>0) return(i);}i=0x38; while(--i>0x30){if(_t_bipai2[i]>0) return(i);}i=-1; while(++i<5){if(_t_bipai2[0x25+i]>0) return(0x25+i);if(_t_bipai2[0x25-i]>0) return(0x25-i);if(_t_bipai2[0x15+i]>0) return(0x15+i);if(_t_bipai2[0x15-i]>0) return(0x15-i);if(_t_bipai2[0x05+i]>0) return(0x05+i);if(_t_bipai2[0x05-i]>0) return(0x05-i);}return(0);}var dpf=new Array(0x40);var dqf=new Array(0x40);var th_prev_neraiyaku, th_dora;function a0115(jia){var i, j, k, s, t;var ji2;var st=[0, 0, 0, 0];ai_ndrq=[0,0,0,0];th_prev_neraiyaku=_t[jia].neraiyaku;_t[jia].neraiyaku=th_dora=0;_t_reach_declare_flag=0;_t[jia].declare_command=0;_t[jia].declare_param1=14;_t[jia].declare_param2=0;i=0x40; while(--i>=0){vZpt[i]=_t[jia].zampai_table[i]+_t[jia].zampai_table[i+0x40];noDapai_tbl[i]=vXOO[i]=vOXO[i]=vOOX[i]=vOOO[i]=vOOOO[i]=_t[jia].required[i]=_t[jia].nq[i]=vDanger[i]=vYaku[i]=0;}vPtn_ctr=0;if(_t_pengchi_flag){noDapai_tbl[_t_nukidora[0]]++;noDapai_tbl[_t_nukidora[1]]++;noDapai_tbl[_t_nukidora[2]]++;noDapai_tbl[_t_cannot_dapai_pai1 & 0x3f]++;noDapai_tbl[_t_cannot_dapai_pai2 & 0x3f]++;}if(_t_gamemode==_T_GAMEMODE_BOO || _t_gamemode==_T_GAMEMODE_EASTERN_BOO) return;t_marked=[0,0,0,0];if(_t[jia].current_rank<1 ||    _t[jia].score>=_t_genten ||    (_t[0].current_rank<1 && _t[jia].current_rank==1)){i=_t_players; while(--i>0){if(i==jia) continue;if(_t[i].reach_flag || _t[i].fulou_ctr>2 || (_t[i].fulou_ctr>1 && _t_zampai_ctr / _t_players<10)) t_marked[i]=1;}}if(_t[0].reach_flag || _t[0].fulou_ctr>1) t_marked[0]=1;_t_shupai_move(jia);if(_t_gamemode==_T_GAMEMODE_REACH){a0031();ji2=_t_players; k=0; while(--ji2>-1){if(ji2==jia) continue;a0032(jia, ji2, t_marked[ji2]);}}if(_t_gamemode==_T_GAMEMODE_GUOJI || _t_gamemode==_T_GAMEMODE_ARSHIAR){a0031();ji2=_t_players; while(--ji2>-1){if(ji2==jia) continue;a0032(jia, ji2, 0);}i=0x40; while(--i>-1){if(vDanger[i]<0x10000) vDanger[i]=0;}}}function a0112(jia){var i, j, l;var pp=new Array(0x40);if(_t_gamemode!=_T_GAMEMODE_TAIWAN && _t[jia].fulou_ctr>3) return;if(_t_gamemode==_T_GAMEMODE_TAIWAN && _t[jia].fulou_ctr>4) return;i=0x40; while(--i>-1) pp[i]=0;a0000(jia, 1);l=t_ptCtr; while(--l>-1){if(t_pt[l].attr) continue;i=t_pt[l].qianzhang_ctr; while(--i>-1){j=t_pt[l].qianzhang[i] & 0x3f;vOXO[j+1]++; pp[j+1]++;}i=t_pt[l].liangmen_ctr; while(--i>-1){j=t_pt[l].liangmen[i] & 0x3f;vOOX[j+2]++; pp[j+2]++;vXOO[j-1]++; pp[j-1]++;}i=t_pt[l].bianzhang_ctr; while(--i>-1){j=t_pt[l].bianzhang[i] & 0x3f;if((j & 0x0f)==1){ vOOX[j+2]+=4; pp[j+2]+=4; }else { vXOO[j-1]+=4; pp[j-1]+=4; }}i=t_pt[l].duizi_ctr; while(--i>-1){j=t_pt[l].duizi[i] & 0x3f;vOOO[j]++; pp[j]++;}}l=-1; i=0x38; while(--i>-1){if(l<pp[i]) l=pp[i];}i=0x38; while(--i>-1){if(l>=pp[i]) _t[jia].required[j]++;}}function a0000(jia){var i, j, k, l, m, n;var i0, i1, i2;var mp, flag, mz, da, du;var pn=new Array(20);var pc=new Array(20);var pt=new Array(MAX_PTNS);var mC=new Array(MAX_PTNS);var ms=8, ms2=5;var ptc=0;t_ptCtr=0;i=0x40; while(--i>=0){vZpt[i]=_t[jia].zampai_table[i]+_t[jia].zampai_table[i+0x40];}if(_t_gamemode==_T_GAMEMODE_TAIWAN){ ms=10; ms2=6; }i=MAX_PTNS; while(--i>=0) mC[i]=new Array(20);i=20; while(--i>=0) pn[i]=pc[i]=0;_t_shupai_move(jia);i=j=0; while(++j<0x40){if((k=_t_bipai2[j])<1) continue;pn[i]=k; pc[i]=j;i++;}t_xian=255; t_ptCtr=0; k=0;if(_t[jia].fulou_ctr<1 && _t_gamemode!=_T_GAMEMODE_ARSHIAR && _t_gamemode!=_T_GAMEMODE_TAIWAN){du=da=0;if(_t_gamemode==_T_GAMEMODE_GUOJI){i=-1; while(++i<0x38){if(pn[i]<1) break;if(pn[i]>3){ du+=2; continue; }if(pn[i]>1) du++;if(pn[i]==2) continue;if(vZpt[pc[i]]>0) da++;}}else {i=-1; while(++i<0x38){if(pn[i]<1) break;if(pn[i]>1){ du++; continue; }if(vZpt[pc[i]]>0) da++;}}if(du+da>7) da=7-du;k=13-du-du-da;if(k<3 && t_xian>=k){if(t_xian>k) t_ptCtr=0;t_xian=k;pt[t_ptCtr]=1;if(_t_gamemode==_T_GAMEMODE_GUOJI){k=0; i=-1; while(++i<0x38){if(pn[i]>3){mC[t_ptCtr][k++]=pc[i] | THINK_DUIZI;mC[t_ptCtr][k++]=pc[i] | THINK_DUIZI;continue;}if(pn[i]>2){mC[t_ptCtr][k++]=pc[i] | THINK_DUIZI;if(vZpt[pc[i]]>0) mC[t_ptCtr][k++]=pc[i] | THINK_ISOLATED;else mC[t_ptCtr][k++]=pc[i] | THINK_USELESS;continue;}if(pn[i]>1){mC[t_ptCtr][k++]=pc[i] | THINK_DUIZI;continue;}if(pn[i]<1) break;if(vZpt[pc[i]]>0) mC[t_ptCtr][k++]=pc[i] | THINK_ISOLATED;else mC[t_ptCtr][k++]=pc[i] | THINK_USELESS;}}else {k=0; i=-1; while(++i<0x38){if(pn[i]>1){mC[t_ptCtr][k++]=pc[i] | THINK_DUIZI;if(pn[i]>2) mC[t_ptCtr][k++]=pc[i] | THINK_ISOLATED;continue;}if(pn[i]<1) break;if(vZpt[pc[i]]>0) mC[t_ptCtr][k++]=pc[i] | THINK_ISOLATED;else mC[t_ptCtr][k++]=pc[i] | THINK_USELESS;}}mC[t_ptCtr][k]=0; t_ptCtr++;}}i=MAX_PTNS; while(--i>-1){t_pt_s[0][i]=new Array(20);t_pt_s[1][i]=new Array(20);t_pt_s[2][i]=new Array(20);t_pt_s[3][i]=new Array(20);}t_pt_s[0].ctr=t_pt_s[1].ctr=t_pt_s[2].ctr=t_pt_s[3].ctr=0;a0001(3); a0001(2); a0001(1); a0001(0);i0=-1; while(++i0<t_pt_s[0].ctr){i1=-1; while(++i1<t_pt_s[1].ctr){i2=-1; while(++i2<t_pt_s[2].ctr){mz=_t[jia].fulou_ctr+   t_pt_s[0].d[i0].mzCtr+t_pt_s[1].d[i1].mzCtr+t_pt_s[2].d[i2].mzCtr+t_pt_s[3].d[0].mzCtr;du=t_pt_s[0].d[i0].duCtr+t_pt_s[1].d[i1].duCtr+t_pt_s[2].d[i2].duCtr+t_pt_s[3].d[0].duCtr;da=t_pt_s[0].d[i0].daCtr+t_pt_s[1].d[i1].daCtr+t_pt_s[2].d[i2].daCtr;l=ms; m=mz; if((n=du)>0){ --l; --n; }n+=da; if(m+n>ms2) n=ms2-m;l-=m+m+n;if(l<0) l=0;if(l>t_xian) continue;if(l<t_xian) t_ptCtr=0;t_xian=l;pt[t_ptCtr]=0;if(t_ptCtr>=MAX_PTNS) continue;m=0;l=-1; while(++l<20){if(!t_pt_s[0].d[i0].dat[l]) break;mC[t_ptCtr][m++]=t_pt_s[0].d[i0].dat[l];}l=-1; while(++l<20){if(!t_pt_s[1].d[i1].dat[l]) break;mC[t_ptCtr][m++]=t_pt_s[1].d[i1].dat[l];}l=-1; while(++l<20){if(!t_pt_s[2].d[i2].dat[l]) break;mC[t_ptCtr][m++]=t_pt_s[2].d[i2].dat[l];}l=-1; while(++l<20){if(!t_pt_s[3].d[0].dat[l]) break;mC[t_ptCtr][m++]=t_pt_s[3].d[0].dat[l];}mC[t_ptCtr][m]=0;t_ptCtr++;}}}mp=-1; while(++mp<t_ptCtr){t_pt[mp].shunzi_ctr=t_pt[mp].kezi_ctr=t_pt[mp].duizi_ctr=t_pt[mp].liangmen_ctr=t_pt[mp].qianzhang_ctr=t_pt[mp].bianzhang_ctr=t_pt[mp].isolated_ctr=0;t_pt[mp].attr=0;if(pt[mp]==1){t_pt[mp].attr=1;i=-1; while(++i<20){if(!(j=mC[mp][i])) break;k=j & 0xf000; j &= 0xff;if(k==THINK_DUIZI){t_pt[mp].duizi[t_pt[mp].duizi_ctr++]=j;continue;}if(k==THINK_USELESS){t_pt[mp].useless[t_pt[mp].useless_ctr++]=j;continue;}t_pt[mp].isolated[t_pt[mp].isolated_ctr++]=j;}continue;}i=-1; while(++i<20){if(!(j=mC[mp][i])) break;k=j & 0xf000; j &= 0xff;if(k==THINK_SHUNZI){t_pt[mp].shunzi[t_pt[mp].shunzi_ctr++]=j;continue;}if(k==THINK_LIANGMEN){if((j & 0x0f)>7 || (j & 0x0f)<2){t_pt[mp].bianzhang[t_pt[mp].bianzhang_ctr++]=j;continue;}t_pt[mp].liangmen[t_pt[mp].liangmen_ctr++]=j;continue;}if(k==THINK_BIANZHANG){t_pt[mp].bianzhang[t_pt[mp].bianzhang_ctr++]=j;continue;}if(k==THINK_QIANZHANG || k==THINK_QIANZHANG2){t_pt[mp].qianzhang[t_pt[mp].qianzhang_ctr++]=j;continue;}if(k==THINK_KEZI){t_pt[mp].kezi[t_pt[mp].kezi_ctr++]=j;continue;}if(k==THINK_DUIZI){t_pt[mp].duizi[t_pt[mp].duizi_ctr++]=j;continue;}t_pt[mp].isolated[t_pt[mp].isolated_ctr++]=j;}}xianting[jia]=t_xian;return(t_xian);}function a0001(suit){var i, j, k, l;var mpctr, flag, mzc, dac, duc;var mbf=new Array(20);var pbf=new Array(12);var pcd=new Array(12);var ptc=0;var xt=255;var ms=8, ms2=4;if(_t_gamemode==_T_GAMEMODE_TAIWAN){ ms=10; ms2=5; }i=12; while(--i>-1) pbf[i]=pcd[i]=0;j=suit << 4;i=k=0; while(++i<10){if((l=_t_bipai2[++j])<1) continue;pcd[k]=j;pbf[k++]=l;}mpctr=flag=0; mzc=dac=duc=0;i=-1; do {while(++i<10){if((j=pcd[i])==0) break;if(flag<THINK_SHUNZI && i<8 && j<0x30 && j+2==pcd[i+2] && (k=Math.min(pbf[i], Math.min(pbf[i+1], pbf[i+2])))>0){pbf[i]-=k; pbf[i+1]-=k; pbf[i+2]-=k;mzc+=k;while(--k>=0){mbf[mpctr]=i | THINK_SHUNZI;mpctr++;}}if(flag<THINK_LIANGMEN && j<0x30 && j+1==pcd[i+1] && (k=Math.min(pbf[i], Math.min(pbf[i+1], vZpt[j-1]+vZpt[j+2])))>0){pbf[i]-=k; pbf[i+1]-=k;dac+=k;while(--k>=0){mbf[mpctr]=i | THINK_LIANGMEN;mpctr++;}}if(flag<THINK_QIANZHANG && j<0x30 && (j+2!=pcd[i+1] || j+3!=pcd[i+2] || j+5!=pcd[i+3])){if(j+2==pcd[i+1] && (k=Math.min(pbf[i], Math.min(pbf[i+1], vZpt[j+1])))>0){pbf[i]-=k; pbf[i+1]-=k;dac+=k;while(--k>=0){mbf[mpctr]=i | THINK_QIANZHANG;mpctr++;}}else if(j+2==pcd[i+2] && (k=Math.min(pbf[i], Math.min(pbf[i+2], vZpt[j+1])))>0){pbf[i]-=k; pbf[i+2]-=k;dac+=k;while(--k>=0){mbf[mpctr]=i | THINK_QIANZHANG2;mpctr++;}}}if(flag<THINK_KEZI && pbf[i]>2){pbf[i]-=3;mzc++;mbf[mpctr]=i | THINK_KEZI;mpctr++;}if(pbf[i]>1){pbf[i]-=2;duc++;mbf[mpctr]=i | THINK_DUIZI;mpctr++;}flag=0;}k=ms; if((j=duc)>0){ --j; --k; }j+=dac; if(mzc+j>ms2) j=ms2-mzc;k-=mzc+mzc+j;if(k<=xt){if(k<xt){ ptc=0; }xt=k;if(ptc<MAX_PTNS){t_pt_s[suit].d[ptc].mzCtr=mzc;t_pt_s[suit].d[ptc].duCtr=duc;t_pt_s[suit].d[ptc].daCtr=dac;i=-1; while(++i<mpctr){t_pt_s[suit].d[ptc].dat[i]=pcd[mbf[i] & 0x3f] | (mbf[i] & 0xf000);}l=0; j=-1; while(++j<10){if(pbf[j]<1) continue;t_pt_s[suit].d[ptc].dat[i]=pcd[j] | THINK_ISOLATED;i++; l++;}t_pt_s[suit].d[ptc].dat[i]=0;ptc++;}}for(;;){if(--mpctr<0) break;flag=i=mbf[mpctr]; flag &= 0xf000; i &= 0xff;if(flag!=THINK_DUIZI) break;duc--; pbf[i]+=2;}if(mpctr<0) break;if(flag==THINK_KEZI){mzc--; pbf[i]+=3;}else if(flag==THINK_LIANGMEN){dac--; pbf[i]++; pbf[i+1]++;}else if(flag==THINK_QIANZHANG){dac--; pbf[i]++; pbf[i+1]++;}else if(flag==THINK_QIANZHANG2){dac--; pbf[i]++; pbf[i+2]++;flag=THINK_QIANZHANG;}else {mzc--; pbf[i]++; pbf[i+1]++; pbf[i+2]++;}--i;} while(mpctr>-1);t_pt_s[suit].ctr=ptc;if(ptc>0) return;t_pt_s[suit].d[0].mzCtr=t_pt_s[suit].d[0].duCtr=t_pt_s[suit].d[0].daCtr=0;}function a0114(jia){var i, j, k, l, m, n, ss;var pps, p, x, y=new Array(), z;var p1=new Array(0x40);var ev=new Array(0x40);var nI=new Array(0x40);var nB=new Array(0x40);var nQ=new Array(0x40);var nQ2=new Array(0x40);var nL=new Array(0x40);var nT=new Array(0x40);var nD=new Array(0x40);var nK=new Array(0x40);var nS=new Array(0x40);var st=new Array(0x40);var p2=new Array(0x40);var m4=4;var vx=-1;if(_t_gamemode==_T_GAMEMODE_TAIWAN) m4++;a0000(jia, 0);l=t_ptCtr; while(--l>-1){y[l]=1;i=t_pt[l].shunzi_ctr+t_pt[l].kezi_ctr+t_pt[l].duizi_ctr+t_pt[l].liangmen_ctr+t_pt[l].qianzhang_ctr+t_pt[l].bianzhang_ctr;if(t_pt[l].duizi_ctr>0){if(i<m4+1) y[l]=4;}else {if(i<m4) y[l]=4;}}i=0x40; while(--i>-1){ev[i]=p1[i]=nI[i]=nB[i]=nQ2[i]=nQ[i]=nL[i]=nT[i]=nD[i]=nK[i]=nS[i]=0;st[i]='';}i=0x40; while(--i>-1){ p1[i]=-1; }pps=20; while(--pps>0){if((p=_t[jia].shupai[pps] & 0x3f)<1 || p>0x37 || p1[p]>-1) continue;p1[p]=1;l=t_ptCtr; while(--l>-1){if(t_pt[l].attr){i=t_pt[l].useless_ctr; while(--i>-1){j=t_pt[l].useless[i] & 0x3f;if(p==j) break;}if(i>-1){ nI[p]++; continue; }i=t_pt[l].isolated_ctr; while(--i>-1){j=t_pt[l].isolated[i] & 0x3f;if(p==j) break;}if(i>-1) nI[p]++;continue;}i=t_pt[l].isolated_ctr; while(--i>-1){j=t_pt[l].isolated[i] & 0x3f;if(p==j) break;}if(i>-1){ nI[p]++; continue; }i=t_pt[l].bianzhang_ctr; while(--i>-1){j=t_pt[l].bianzhang[i] & 0x3f;if(j==p || j==p+1) break;}if(i>-1){ nB[p]++; continue; }i=t_pt[l].bianzhang_ctr; while(--i>-1){j=t_pt[l].bianzhang[i] & 0x3f;if((j==p || j==p+1) && (vZpt[j-1]<1 || vZpt[j+2]<1))break;}if(i>-1){ nB[p]++; continue; }i=t_pt[l].qianzhang_ctr; while(--i>-1){j=t_pt[l].qianzhang[i] & 0x3f;if(j!=p && j!=p+2) continue;if((j & 0x0f)==1 && vZpt[j+2]<1) break;if((j & 0x0f)==7 && vZpt[j-1]<1) break;if(vZpt[j+2]<1 && vZpt[j-1]<1) break;}i=t_pt[l].qianzhang_ctr; while(--i>-1){j=t_pt[l].qianzhang[i] & 0x3f;if(j!=p && j!=p+2) continue;if((j & 0x0f)==1  || (j & 0x0f)==7) break;if(vZpt[j+2]<1 || vZpt[j-1]<1) break;}if(i>-1){ nQ2[p]++; continue; }i=t_pt[l].qianzhang_ctr; while(--i>-1){j=t_pt[l].qianzhang[i] & 0x3f;if(j==p || j==p+2) break;}if(i>-1){ nQ[p]++; continue; }i=t_pt[l].liangmen_ctr; while(--i>-1){j=t_pt[l].liangmen[i] & 0x3f;if(j==p || j==p+1) break;}if(i>-1){ nL[p]++; continue; }i=t_pt[l].duizi_ctr; while(--i>-1){j=t_pt[l].duizi[i] & 0x3f;if(j==p) break;}if(i>-1){if(vZpt[p]>0) nD[p]++;else nT[p]++;continue;}i=t_pt[l].kezi_ctr; while(--i>-1){j=t_pt[l].kezi[i] & 0x3f;if(j==p) break;}if(i>-1){ nK[p]++; continue; }i=t_pt[l].shunzi_ctr; while(--i>-1){j=t_pt[l].shunzi[i] & 0x3f;if(j==p && (j & 0x0f)!=7) break;if(j==p-2 && (j & 0x0f)!=3) break;}if(i>-1){ nS[p]++; continue; }}}l=20; while(--l>0){i=_t[jia].shupai[l] & 0x3f;if(i<1 || i>0x37 || st[i]!='') continue;k='*';if((j=nI[i])<1) j=0;if(j>254) j=255;j=j.toString(16);if(j.length<2) j='0'+j;k+=j;if((j=nB[i])<1) j=0;if(j>254) j=255;j=j.toString(16);if(j.length<2) j='0'+j;k+=j;if((j=nQ2[i])<1) j=0;if(j>254) j=255;j=j.toString(16);if(j.length<2) j='0'+j;k+=j;if((j=nQ[i])<1) j=0;if(j>254) j=255;j=j.toString(16);if(j.length<2) j='0'+j;k+=j;if((j=nL[i])<1) j=0;if(j>254) j=255;j=j.toString(16);if(j.length<2) j='0'+j;k+=j;if((j=nT[i])<1) j=0;if(j>254) j=255;j=j.toString(16);if(j.length<2) j='0'+j;k+=j;if((j=nD[i])<1) j=0;if(j>254) j=255;j=j.toString(16);if(j.length<2) j='0'+j;k+=j;if((j=nK[i])<1) j=0;if(j>254) j=255;j=j.toString(16);if(j.length<2) j='0'+j;k+=j;if((j=nS[i])<1) j=0;if(j>254) j=255;j=j.toString(16);if(j.length<2) j='0'+j;st[i]=k+j;ev[i]=-1;}vx=0; for(;;){ss='*'; i=20; while(--i>0){if((p=_t[jia].shupai[i] & 0x3f)<1 || p>0x37 || ev[p]>-1) continue;if(ss<st[p]) ss=st[p];}if(ss=='*') break;vx++;i=20; while(--i>0){if((p=_t[jia].shupai[i] & 0x3f)<1 || p>0x37 || ev[p]>-1) continue;if(ss==st[p]) ev[p]=vx;}}i=0x40; while(--i>-1){ p1[i]=-1; }vPtn_ctr=0; pps=20; while(--pps>0){if((p=_t[jia].shupai[pps] & 0x3f)<1 || p>0x37 || p1[p]>-1) continue;p1[p]=1;i=0x40; while(--i>-1) p2[i]=0;l=t_ptCtr; while(--l>-1){if(t_pt[l].attr){p1[p]=0;i=t_pt[l].isolated_ctr; while(--i>-1){j=t_pt[l].isolated[i] & 0x3f;if(p==j) continue;p2[j] |= 4;}continue;}k=0; i=20; while(--i>-1){if((_t[jia].shupai[i] & 0x3f)==p) k++;}i=t_pt[l].liangmen_ctr; while(--i>-1){j=t_pt[l].liangmen[i] & 0x3f;if((p==j || p==j+1) && k<2) continue;p2[j-1] |= 4;p2[j+2] |= 4;}i=t_pt[l].qianzhang_ctr; while(--i>-1){j=t_pt[l].qianzhang[i] & 0x3f;if((p==j || p==j+2) && k<2) continue;p2[j+1] |= 4;}i=t_pt[l].duizi_ctr; while(--i>-1){j=t_pt[l].duizi[i] & 0x3f;if(p==j && k<3) continue;p2[j] |= 4;}i=t_pt[l].isolated_ctr; while(--i>-1){j=t_pt[l].isolated[i] & 0x3f;if(j==p) continue;if(y[l]>1 && j<0x30){if((j & 0x0f)>1 && (j & 0x0f)<8 && vZpt[j+1]>0 && vZpt[j-1]+vZpt[j+2]>0) p2[j+1] |= y[l];if((j & 0x0f)>2 && (j & 0x0f)<9 && vZpt[j-1]>0 && vZpt[j-2]+vZpt[j+1]>0) p2[j-1] |= y[l];}if(vZpt[j]>0) p2[j] |= y[l];}}vPtn[vPtn_ctr].pi=p;vPtn[vPtn_ctr].xt=ev[p];i=0x38; j=0; while(--i>0){if(!(i & 0x0f)) continue;if(p2[i]<1 || vZpt[i]<1) continue;if(p2[i] & 4) j+=vZpt[i] << 8;else if(p2[i] & 4) j+=vZpt[i];}vPtn[vPtn_ctr].value=j;vPtn_ctr++;}if(_t_gamemode==_T_GAMEMODE_BEINUKI || _t_gamemode==_T_GAMEMODE_PENGLI || _t_gamemode==_T_GAMEMODE_TAIWAN) return;if(_t_gamemode!=_T_GAMEMODE_ARSHIAR && _t_gamemode!=_T_GAMEMODE_GUOJI){i=0x40; while(--i>-1) p2[i]=st[i]=0;k=_t_dora_disp_ctr; while(--k>-1) p2[_t_dora[k] & 0x3f]++;i=20; while(--i>0){j=_t[jia].shupai[i] & 0x3f; if(j<0x40) continue;if(st[j]) continue;st[j]=1;k=20; while(--k>-1){if((_t[jia].shupai[i] & 0x7f)<0x40 && (_t[jia].shupai[i] & 0x3f)==j) break;}if(k<0) p2[j]++;}if(_t[jia].strategy==T_STRATEGY_HEAVY){i=vPtn_ctr; while(--i>-1){j=vPtn[i].pi;if(p2[j]>0) vPtn[i].xt=vx+p2[j];}return;}i=vPtn_ctr; while(--i>-1){if(vPtn[i].xt==vx){vx+=6;continue;}j=vPtn[i].pi;if(p2[j]>0) vPtn[i].xt=vx+p2[j];}}if(_t_gamemode!=_T_GAMEMODE_BOO && _t_gamemode!=_T_GAMEMODE_EASTERN_BOO){_t_shupai_move(jia);i=vPtn_ctr; while(--i>-1){vPtn[i].xt <<= 3;j=vPtn[i].pi;if(_t_bipai2[j]+vZpt[j]<3) continue;if(j>0x34 || j==_t[jia].menfeng) vPtn[i].xt++;if(j==_t_zhuangfeng[0] || j==_t_zhuangfeng[1]) vPtn[i].xt++;}}}function a0099(jia){var i, j, k, pi;try{a0115(jia);if(_t_gamemode==_T_GAMEMODE_BOO || _t_gamemode==_T_GAMEMODE_ARSHIAR){pi=a0102(jia);}else if(_t_gamemode==_T_GAMEMODE_BEINUKI){pi=a0103(jia);}else if(_t_gamemode==_T_GAMEMODE_GUOJI){pi=a0105(jia);}else if(_t_gamemode==_T_GAMEMODE_TAIWAN){pi=a0104(jia);}else pi=a0101(jia);return(pi);} catch(e){console.log(e);return(0);}}t_tgwcp=new Array(0x40);function a0101(jia){var ex= ex1= ex2=    ey= ey1= ey2=    ez= ez1= ez2=-1;    nt1=0;var sb= sb1= sb2=    fr= fr1= fr2=    nt= nt1= nt2=    ad= ad1= ad2=-1;    nt2=0;var exPos1=exPos2=-1;var mc=0,    mt=0,    ev=0,    mx=0,    mxc=0;    var mcc=0;var qt=qt1=qt2=0;var dlim=0;var tmp=0;var i, j, k, l, m, n, o, p;var dpp, dp, dp2;var nm, dpq, dq, dq2;var ls=_t_lingshang_flag;var zz=_t_zampai_ctr;var tppf=0, tpppb2=0;var fssuit=-1;var finalHand=0;if(_t_players==3 && _t_gamemode!=_T_GAMEMODE_REACH){if(_t_jushou_ctr+1>=_t_rule.kyokusu) finalHand=1;}else if(_t_ba_ctr>3 ||         (_t_ba_ctr>_t_rule.basu-2 && _t_jushou_ctr % _t_players==_t_players-1)) finalHand=1;p=0;_t_shupai_move(jia);i=_t[jia].fulou_ctr*5;while(--i>=0){k=_t[jia].fuloupai[i] & 0x7f;if(k==0) continue;if(k & 0x40){++p; k &= 0x3f;}_t_bipai2[k]++;}i=20; while(--i>0){if(_t[jia].shupai[i] & 0x40) ++p;}p=i=_t[jia].nukidora_ctr; while(--i>-1){if((j=_t[jia].nukidora[i])>0x37) _t_bipai2[0x38]++;else _t_bipai2[j & 0x3f]++;if(j & 0x40) ++p;}p+=(i=_t_dora_disp_ctr); while(--i>=0) p+=_t_bipai2[_t_dora[i]];th_dora=p;th_prev_neraiyaku+=p;i=0x40; while(--i>-1) t_tgwcp[i]=0;i=15; while(--i>-1) t_tgwcp[_t[jia].shupai[i] & 0x3f]++;j=t_tgwcp[0x01]+t_tgwcp[0x09]+  t_tgwcp[0x11]+t_tgwcp[0x19]+  t_tgwcp[0x21]+t_tgwcp[0x29]+  t_tgwcp[0x31]+t_tgwcp[0x32]+t_tgwcp[0x33]+t_tgwcp[0x34]+  t_tgwcp[0x35]+t_tgwcp[0x36]+t_tgwcp[0x37];i=_t_nukidora.length; while(--i>-1){k=_t_nukidora[i] & 0x3f;if(k>0x30 || !((k-1) & 7)) j-=t_tgwcp[k];}if(j>=Math.floor(_t_zampai_ctr / _t_players) && !_t[jia].yaojiu_furikiri_flag && _t_rule.yaku.yaojiu_furikiri){i=0x38; while(--i>0x30){if(t_tgwcp[i]) break;}if(i<0x31){i=-1; j=0x30; while((j-=0x10)>-1){if(t_tgwcp[j+1]){i=j+1; break;}if(t_tgwcp[j+9]){i=j+9; break;}}}if(i>-1){_t[jia].declare_command=0;_t[jia].declare_param1=14;j=15; while(--j>0){if((_t[jia].shupai[j] & 0x3f)==i){_t[jia].declare_param1=j;return(0);}}}}var gsp=0;i=0x38; while(--i>0x30){if(vZpt[i]<1) break;}if(i<31){i=31; while((i-=8)>-1){if(vZpt[i]<1) break;}if(i<0) gsp=1;}var xt;xt=i=a0138(jia);if((i>0 && (Math.floor(_t_zampai_ctr / _t_players)<i 
))){i=0x40; while(--i>-1){dpf[i]=k=0;if(i>0x30 && !gsp && vZpt[i]<1){continue;}j=_t_players; while(--j>-1){if(_t[j].toripai[i]<1) continue;k++;if(j==0) k+=8;if(_t[j].reach_flag) k+=8;}dpf[i]=k;}_t[jia].declare_command=0;_t[jia].declare_param1=14;j=-1; k=-1; i=0x38; while(--i>0){if(!t_tgwcp[i]) continue;if(noDapai_tbl[i]) continue;if(dpf[i]>k){j=i; k=dpf[i];}}if(j>0){i=15; while(--i>0){if((_t[jia].shupai[i] & 0x3f)==j){_t[jia].declare_param1=i;return(0);}}}}var tyk=0;var xx=new Array(0x40), pq=new Array(0x40), dr=new Array(0x40), evl=new Object();i=0x40; while(--i>-1){xx[i]=pq[i]=dr[i]=0;}k=0; j=_t_players; while(--j>-1){if(j==jia) continue;if(_t[j].fulou_ctr>2 || (_t[j].fulou_ctr>1 && (_t_zampai_ctr / _t_players)< 6) || _t[j].reach_flag || (j<1 && _t_takingCare)){t_marked[j]=1; k++;if(_t[j].open_reach_flag){if(_t[j].reach_minogashi_flag){if(_t[j].helepai_ctr<12 && !_t_rule.furiten_guoshi) continue;}k+=32;}}}j=_t_players; while(--j>-1){if(j==jia) continue;if(_t[j].score>=_t[jia].score) break;}if(j>-1){if((finalHand || _t_tsumibo_ctr>3) && _t_zhuangjia!=jia) tyk=2;else if(jia==_t_zhuangjia) tyk=1;else {p=th_prev_neraiyaku;if(_t_bipai2[0x35]>2) p++;if(_t_bipai2[0x36]>2) p++;if(_t_bipai2[0x37]>2) p++;if(_t_bipai2[_t_zhuangfeng[0]]>2) p++;if(_t_zhuangfeng[1]>0 && _t_bipai2[_t_zhuangfeng[1]]>2) p++;if(_t_bipai2[_t[jia].menfeng]>2) p++;if(p>2 && xt<1) tyk=1;}}if(tyk){j=0x00010000; if(tyk<2) j=0x00004000;i=0x40; while(--i>0){if(vDanger[i]<j) vDanger[i]=0;}}if(_t_gamemode==_T_GAMEMODE_EASTERN_BOO) k=-1;p=0;if((th_prev_neraiyaku<4 || xt>0) && k>0){p=1; i=20; while(--i>0){l=0; k=_t[jia].shupai[i] & 0x3f;if(k<1 || k>0x37 || noDapai_tbl[k] || pq[k]) continue;pq[k]=1;j=_t_players; while(--j>-1){if(j==jia) continue;if(!t_marked[j]){if(j>0 || _t_zampai_ctr / _t_players>6) continue;}if(_t[j].fusipai[k]>0 || _t[j].toripai[k]>0) continue;if(k>0x30 && !gsp && vZpt[k]<1) continue;if(_t[j].open_reach_flag){if(_t[j].reach_minogashi_flag){if(_t[j].helepai_ctr<12 || !_t_rule.furiten_guoshi) continue;}n=_t[j].helepai_ctr; while(--n>-1){if((_t[j].helepai[n] & 0x3f)==k) break;}if(n<0) continue;xx[k]=0x0fff0000;break;}if(j<1 && !_t_takingCare) continue;if(tyk>1 && j>1) continue;p=0;if(k>0x30){if(tyk && vZpt[k]<2) continue;if(vZpt[k]<1) continue;p=15;}else if(_t[j].fulou_ctr>3){if(vZpt[k]<1) continue;p=15;}else {p=15;m=k & 0x0f;if(m<4){if(_t[j].fusipai[k+3]>0 || _t[j].toripai[k+3]>0){p &= 14;}}else if(m>6){if(_t[j].fusipai[k-3]>0 || _t[j].toripai[k-3]>0){p &= 14;}}else {if((_t[j].fusipai[k-3]>0 || _t[j].toripai[k-3]>0) &&    (_t[j].fusipai[k+3]>0 || _t[j].toripai[k+3]>0)){p &= 13;}}if(m<3){if(vZpt[k+1]<1 || vZpt[k+2]<1){if(vZpt[k]<1) p=0;else p &= 7;}else if(vZpt[k+1]<2 || vZpt[k+2]<2){p &= 11;}}else if(m<8){if((vZpt[k-1]<1 && (vZpt[k+1]<1 || vZpt[k+2]<1)) ||    (vZpt[k+1]<1 && (vZpt[k-1]<1 || vZpt[k-2]<1))){if(vZpt[k]<1) p=0;else p &= 7
}else if((vZpt[k-1]<2 && (vZpt[k+1]<2 || vZpt[k+2]<2)) ||         (vZpt[k+1]<2 && (vZpt[k-1]<2 || vZpt[k-2]<2))){p &= 11;}}else {if(vZpt[k-1]<1 || vZpt[k-2]<1){if(vZpt[k]<1) p=0;else p &= 7;}else if(vZpt[k-1]<2 || vZpt[k-2]<2){p &= 11;}}}if(j<1) p <<= 2;xx[k]+=p;}}}if(_t_gamemode!=_T_GAMEMODE_PENGLI && (p || _t_zampai_ctr / _t_players<7)){j=-1; while(++j<_t_dora_disp_ctr){k=_t_dora[j];if(k>0x30){if(vZpt[k]<1) continue;}else {l=vZpt[k]; n=k & 0x0f;if(n>2) l+=vZpt[k-2]*vZpt[k-1];if(n<8) l+=vZpt[k+1]*vZpt[k+2];if(n>1 && n<9) l+=vZpt[k-1]*vZpt[k+1];if(l<1) continue;}xx[k]+=0x4000;}}evl=new Object(); pq=new Array(); p=0;i=20; while(--i>0){k=_t[jia].shupai[i] & 0x3f;if(k<1 || k>0x37 || noDapai_tbl[k]) continue;if((j=xx[k])>0x0fff0000) j=xx[k]=0x0fff0000;if(j<1) continue;if(evl[j]) continue;evl[j]=-1;pq[p++]=j;}i=-1; while(++i<p-1){if(pq[i]>pq[i+1]){j=pq[i]; pq[i]=pq[i+1]; pq[i+1]=j;i=-1;}}i=-1; while(++i<p){evl[pq[i]]=0x4000 * (i+1);}l=-1; i=20; while(--i>0){k=_t[jia].shupai[i] & 0x3f;if(k<1 || k>0x37 || noDapai_tbl[k]) continue;if(l<0 || l>xx[k]) l=xx[k];}if(l<0) l=0;k=0x40; while(--k>0){if(xx[k]>l && evl[xx[k]]) vDanger[k]+=evl[xx[k]];}dpf[0]=dpf[1]=dpf[2]=dpf[3]=0;i=0x38; while(--i>-1) dpf[i >> 4]+=_t[jia].fusipai[i];if(dpf[0]>dpf[1]+2 && dpf[0]>dpf[2]+2) fssuit=0;else if(dpf[1]>dpf[0]+2 && dpf[0]>dpf[2]+2) fssuit=1;else if(dpf[2]>dpf[0]+2 && dpf[2]>dpf[1]+2) fssuit=2;_t_zampai_ctr=100;_t_lingshang_flag=0;i=0x40; while(--i>-1) t_tgwcp[i]=dpf[i]=0;dlim=0x0fff;if(_t_gamemode==_T_GAMEMODE_PENGLI) _t[jia].reach_flag++;var min_fans=0, to_be_care=0;if(zz / _t_players < 16 || _t_reach_jia_ctr>0){if(_t[jia].score>_t_genten || jia == _t_top_jia){min_fans=5; to_be_care=2;}}if(to_be_care<1 && zz / _t_players < 8){min_fans=5; to_be_care=1;}dpp=20; while(--dpp>-1){dp=_t[jia].shupai[dpp];if((dp2=dp & 0x3f)<1 || dp2>0x37) continue;if(noDapai_tbl[dp2]) continue;if(vDanger[dp2]>dlim) continue;if(dpf[dp2]) continue;_t[jia].shupai[dpp]=0; dpf[dp2]++;if(a0111(jia)){ex=ey=ez=sb=nt=fr=0;mc=mt=av=ml=ev=mx=mxc=ad=qt=0;hp=0; while(++hp<0x38){if(!(hp & 0x0f) || (hp & 0x0f)>9) continue;if(mpcd[hp]<1 && mpcd[hp & 0x30]<1) continue;_t[jia].shupai[15]=hp;var keishikiHele=_t_yaku_judge(jia, 2, -1);if(keishikiHele>0){if(_t[jia].fusipai[hp]>0) fr=1;if(_t_yj_qiduizi) qt=1;if(vZpt[hp]>0){mc++;ad=hp;ev+=vZpt[hp]*_t_yaku_result_point;if(_t_yaku_result_point>=mx){if(_t_yaku_result_point>mx){mx=_t_yaku_result_point; mxc=0;}mxc++;}}}else if(keishikiHele>-1){if(_t[jia].fusipai[hp]>0) fr=1;if(_t_rule.kuitam_sakizuke==2 && _t[jia].menqian_flag) fr=255;}_t[jia].shupai[15]=0;}if(mc>0){if(_t[jia].strategy==T_STRATEGY_HEAVY){if(fr<1 || exPos1<0){if(ex1<mx || (ex1==mx && ey1<mxc)){ex1=mx; ey1=mxc;exPos1=dpp;mcc=mc;ad1=ad;fr1=fr;qt1=qt;}}}else {if(fr<1 || exPos1<0){if(ex1<ev || (ex1==ev && ey1<mx)){ex1=ev; ey1=mx;exPos1=dpp;mcc=mc;ad1=ad;fr1=fr;qt1=qt;}}}}nm=0x30; while(--nm>0){if(!(nm & 0x0f) || (nm & 0x0f)>9) continue;if(nm==dp2 || t_tgwcp[nm]<1 || vZpt[nm]<1) continue;_t[jia].shupai[dpp]=nm;vZpt[nm]--;tgf=0; ex2=-1; i=0x40; while(--i>=0) dqf[i]=0;dqp=20; while(--dqp>-1){dq=_t[jia].shupai[dqp];if((dq2=dq & 0x3f)<1 || dq2>0x37) continue;if(dq2==nm || dqf[dq2]) continue;if(th_dched[dp2+'.'+dq2+'-'+nm] || th_dched[dq2+'.'+dp2+'-'+nm]){continue;}th_dched[dp2+'.'+dq2+'-'+nm]=1;_t[jia].shupai[dqp]=0; dqf[dq2]++;if(a0111(jia)){ex=ey=ez=sb=nt=0;mc=mt=av=ml=ev=mx=mxc=ad=qt=0;hp=0; while(++hp<0x38){if(!(hp & 0x0f) || (hp & 0x0f)>9) continue;if(dp2==hp) continue;_t[jia].shupai[15]=hp;var keishikiHele=_t_yaku_judge(jia, 2, -1);if(keishikiHele>0){if(_t[jia].fusipai[hp]>0) fr=1;if(vZpt[hp]>0){mc++; ad2=hp;ev+=vZpt[hp]*_t_yaku_result_point;if(_t_yaku_result_point>=mx){if(_t_yaku_result_point>mx){mx=_t_yaku_result_point; mxc=0;}mxc++;}}}else if(keishikiHele>-1){if(_t[jia].fusipai[hp]>0) fr=1;if(_t_rule.kuitam_sakizuke==2 && _t[jia].menqian_flag) fr=255;}_t[jia].shupai[15]=0;}}_t[jia].shupai[dqp]=dq;}if(mc>0){if(_t[jia].strategy==T_STRATEGY_HEAVY){if(fr<1){if(ex2<mx || (ex2==mx && ey2<mxc)){ex2=mx; ey2=mxc;exPos2=dpp;mcc=mc;ad2=ad;nt2=nt;qt2=qt;}}}else {if(fr<1){if(ex2<ev || (ex2==ev && ey2<mx)){ex2=ev; ey2=mx;exPos2=dpp;mcc=mc;ad2=ad;nt2=nt;qt2=qt;}}}}_t[jia].shupai[dpp]=0;vZpt[nm]++;}}_t[jia].shupai[dpp]=dp;}_t_zampai_ctr=zz;_t_lingshang_flag=ls;_t[jia].reach_flag=0;if(exPos1>0 && _t[jia].shupai[exPos1]>0){tmp=0;if(_t_yixun_flag){if((ex2>ex1*3 && _t_zampai_ctr>_t_players*7) ||    (ex2>ex1 && (_t_zampai_ctr>_t_players*11 || (!qt1 && mcc<2)))){exPos1=exPos2;tmp=1;}}_t[jia].declare_command=0;_t[jia].declare_param1=exPos1;p=_t[jia].shupai[exPos1] & 0x7f;if(p>0x40){i=20; while(--i>0){if((_t[jia].shupai[i] & 0x7f)==(p & 0x3f)){_t[jia].declare_param1=i; p=_t[jia].shupai[i] & 0x7f;break;}}}if((_t[jia].shupai[14] & 0x7f)==p) _t[jia].declare_param1=14;j=p & 0x3f; i=_t_gangpai_ctr; while(--i>=0){if((_t_gangpai[i] & 0x3f)==j) break;}if(i>-1){if(j>0x30){_t[jia].declare_command=21;_t[jia].declare_param1=p;return(21);}i=20; while(--i>0){if((k=_t[jia].shupai[i] & 0x3f)<1) continue;if((k ^ j) & 0x30) continue;if(k-j==1 || k-j==-1 || k-j==2 || k-j==-2) break;}if(i<1){_t[jia].declare_command=21;_t[jia].declare_param1=p;return(21);}i=_t[jia].fulou_ctr; k=-5;while(--i>=0){k+=5;m=_t[jia].fuloupai[k] & 0x3f;n=_t[jia].fuloupai[k+1] & 0x3f;if(m==n && m==j) break;}if(i>-1){_t[jia].declare_command=21;_t[jia].declare_param1=p;return(21);}}if(tmp || fr1>0){return(0);}if(_t_gamemode==_T_GAMEMODE_PENGLI){_t_reach_declare_flag=1;return(0);}if(!_t_yixun_flag){_t_reach_declare_flag=1;return(0);}if(!_t[jia].menqian_flag && _t_zampai_ctr>_t_players*4){if(mcc<2 && a0101_01(jia, ad1)<6){return(0);}_t_reach_declare_flag=1;i=0x40; while(--i>-1){if(vDanger[i]>0x08000) break;}if(i>-1)  _t_reach_declare_flag=0;}return(0);}i=_t_players; while(--i>-1){if(i==jia) continue;if(_t[i].reach_ippatsu_flag){dlim=35; break;}}var nxt=a0000(jia, 1);a0114(jia); p=-1;if((p=a0129(jia, nxt))>0) ;else if(a0130(jia, nxt)){p=a0106(jia, 0, dlim);}else {if(a0120(jia));else if(a0121(jia)){a0172(jia, 0, -1);a0126(jia);}else if(a0122(jia)){a0080(jia, 0, -1, nxt);if(a0125(jia));else a0126(jia);}else if(a0123(jia)){if(a0172(jia, 0, -1));else a0080(jia, 0, -1, nxt);a0126(jia);a0175(jia);}else if(a0172(jia, 0, -1)){if(a0125(jia));else a0126(jia);a0175(jia);}else if(a0080(jia, 0, -1, nxt)){if(a0125(jia));else a0126(jia);a0175(jia);}else if(a0126(jia)){a0175(jia);}else if(a0125(jia)){a0175(jia);}else {a0175(jia);}}if(p<1){i=20; k=-1; while(--i>0){j=_t[jia].shupai[i] & 0x3f;if(j<1 || j>0x37 || noDapai_tbl[j]) continue;if(k<vYaku[j]) k=vYaku[j];}if(k>0x00ff) p=a0109(jia, dlim);else p=a0106(jia, dlim);}_t[jia].declare_command=0;_t[jia].declare_param1=14;i=20; while(--i>0){if((_t[jia].shupai[i] & 0x7f)==p){_t[jia].declare_param1=i; break;}}if(i<1){i=20; while(--i>0){if((_t[jia].shupai[i] & 0x3f)==p){_t[jia].declare_param1=i; p=_t[jia].shupai[i] & 0x7f; break;}}}if((_t[jia].shupai[14] & 0x7f)==p) _t[jia].declare_param1=14;j=p & 0x3f; i=_t_gangpai_ctr; while(--i>=0){if((_t_gangpai[i] & 0x3f)==j) break;}if(i>-1){if(j>0x30){_t[jia].declare_command=21;_t[jia].declare_param1=p;return(21);}i=20; while(--i>0){if((k=_t[jia].shupai[i] & 0x3f)<1) continue;if((k ^ j) & 0x30) continue;if(k-j==1 || k-j==-1 || k-j==2 || k-j==-2) break;}if(i<1){_t[jia].declare_command=21;_t[jia].declare_param1=p;return(21);}i=_t[jia].fulou_ctr; k=-5;while(--i>=0){k+=5;m=_t[jia].fuloupai[k] & 0x3f;n=_t[jia].fuloupai[k+1] & 0x3f;if(m==n && m==j) break;}if(i>-1){_t[jia].declare_command=21;_t[jia].declare_param1=p;return(21);}}var ppp=_t[jia].shupai[_t[jia].declare_param1]; _t[jia].shupai[_t[jia].declare_param1]=0;a0091(jia);_t[jia].shupai[_t[jia].declare_param1]=ppp;return(0);}function a0101_01(jia, pc){var p=pc & 0x3f, sc=0, st=p & 0x30, i, j, pb;var i=_t_dora_disp_ctr;while(--i>=0){if(p==_t_dora[i]) break;}if(i>-1) return(0);if(p>0x30){return(15);}i=p & 0x0f; pb=p & 0x30;if(_t[jia].fusipai[p+1]>0){if(i==4 && _t[jia].fusipai[p+7]>0) sc+=6;sc++;}if(_t[jia].fusipai[p+2]>0){if(i==5 && _t[jia].fusipai[p+8]>0) sc+=6;sc++;}if(_t[jia].fusipai[p+3]>0){if(i==6 && _t[jia].fusipai[p+9]>0) sc+=6;sc++;}if(_t[jia].fusipai[p+4]>0){if(i==1 || i==7) sc+=4;sc++;}if(_t[jia].fusipai[p+5]>0){if(i==2 || i==8) sc+=4;sc++;}if(_t[jia].fusipai[p+6]>0){if(i==3 || i==9) sc+=4;sc++;}if(_t[jia].fusipai[p+7]>0) sc++;if(_t[jia].fusipai[p+8]>0) sc++;if(_t[jia].fusipai[p+9]>0) sc++;return(sc);}function a0102(jia){var mxf =mxf2=mxfc =mxfc2=tgw =mny =mny2=    mpch =mpch2=mpct =mpct2=    yfa =avf = avf2=nrc =nrc2= frt = frt2=    ntt =ntt2=sbt =sbt2=ex =ex2=0;var exT=mpchT=mpctT=frtT=sbtT=avfT=tgwT=0;var mny =mny2=-1;var max_ex_pos=max_ex_posT=-1;var i, j, k, l, m, n, o, p;var dpp, dp, dp2;var nm, dpq, dq, dq2;var ls=_t_lingshang_flag; _t_lingshang_flag=0;var zz=_t_zampai_ctr; _t_zampai_ctr=100;i=0x40; while(--i>-1) dpf[i]=0;dpp=20; while(--dpp>-1){dp=_t[jia].shupai[dpp];if((dp2=dp & 0x3f)<1 || dp2>0x37) continue;if(noDapai_tbl[dp2]) continue;if(vDanger[dp2]>400) continue;if(dpf[dp2]) continue;_t[jia].shupai[dpp]=0; dpf[dp2]++;if(a0111(jia)){mxc =mxfc =tgrf =mpch =mpct =yfa =avf =nrc =frt =ntt =sbt =ex =0;mny =-1;hp=0; while(++hp<0x38){if(!(hp & 0x0f) || (hp & 0x0f)>9) continue;if(mpcd[hp]<1 && mpcd[hp & 0x30]<1) continue;_t[jia].shupai[15]=hp;if(_t_yaku_judge(jia, 2, -1)>0){if(vZpt[hp]>0){mpch++;yfa+=_t_yaku_result_point;mpct+=vZpt[hp];i=vZpt[hp]*(_t_yaku_result_point+_t_yaku_dora*30);if(_t[jia].fusipai[hp]>0) i >>= 2;ex+=i;if(mny<0 || _t_yakufan_ctr<mny) mny=_t_yakufan_ctr;if(_t_yakufan_ctr>=mxf){if(_t_yakufan_ctr>mxf){mxf=_t_yakufan_ctr; mxfc=0;}mxfc++;}}}_t[jia].shupai[15]=0;}if(mpch>0){i=Math.floor(yfa / mpch);if(frt<1 || mpch>3 || max_ex_pos<0){if(ex>ex2 || (ex==ex2 && (mpch>mpch2 || (mpch==mpch2 && mpct>mpct2)))){ex2=ex; mpch2=mpch; mpct2=mpct;tgw=0; max_ex_pos=dpp;frt2=frt; sbt2=sbt; avf=i;if(ex2>exT || (ex2==exT && (mpch2>mpchT || (mpch2==mpchT && mpct2>mpctT)))) tgwT=0;}}}nm=0x30; while(--nm>0){if(!(nm & 0x0f) || (nm & 0x0f)>9) continue;if(nm==dp2 || vZpt[nm]<1) continue;_t[jia].shupai[dpp]=nm;vZpt[nm]--;tgf=0; ex2=-1; i=0x40; while(--i>=0) dqf[i]=0;dqp=20; while(--dqp>-1){if((dq=_t[jia].shupai[dqp])<1) continue;dq2=dq & 0x3f;if(dq2==nm || dqf[dq2]) continue;if(th_dched[dp2+'.'+dq2+'-'+nm] || th_dched[dq2+'.'+dp2+'-'+nm]){continue;}th_dched[dp2+'.'+dq2+'-'+nm]=1;_t[jia].shupai[dqp]=0; dqf[dq2]++;if(a0111(jia)){mxc =mxfc =tgrf =mpch =mpct =yfa =avf =nrc =frt =ntt =sbt =ex =0;mny =-1;hp=0; while(++hp<0x38){if(!(hp & 0x0f) || (hp & 0x0f)>9) continue;if(mpcd[hp]<1 && mpcd[hp & 0x30]<1) continue;if(dp2==hp) continue;_t[jia].shupai[15]=hp;if(_t_yaku_judge(jia, 2, -1)){if(vZpt[hp]>0){mpch++;yfa+=_t_yaku_result_point;mpct+=vZpt[hp];i=vZpt[hp]*(_t_yaku_result_point+_t_yaku_dora*30);if(_t[jia].fusipai[hp]>0) i >>= 2;ex+=i;if(mny<0 || _t_yakufan_ctr<mny) mny=_t_yakufan_ctr;if(_t_yakufan_ctr>=mxf){if(_t_yakufan_ctr>mxf){mxf=_t_yakufan_ctr; mxfc=0;}mxfc++;}}}_t[jia].shupai[15]=0;}}_t[jia].shupai[dqp]=dq;}if(mpch>0){i=Math.floor(yfa / mpch);if(frt<1 || mpch>3 || max_ex_pos<0){if(ex>exT || (ex==exT && (mpch>mpchT || (mpch==mpchT && mpct>mpctT)))){exT=ex; mpchT=mpch; mpctT=mpct;tgwT+=vZpt[nm]; max_ex_posT=dpp;frtT=frt; sbtT=sbt; avfT=i;}}}_t[jia].shupai[dpp]=0;vZpt[nm]++;}}_t[jia].shupai[dpp]=dp;}_t_zampai_ctr=zz;_t_lingshang_flag=ls;if(_t_zampai_ctr / _t_players>6 && tgwT>0 && (exT>ex2 || (exT==ex2 && (mpchT>mpch2 || (mpchT==mpch2 && mpctT>mpct2))))){ex2=exT; mpch2=mpchT; mpct2=mpctT;tgw=tgwT; max_ex_pos=max_ex_posT;frt2=frtT; sbt2=sbtT; avf2=avfT;}if(max_ex_pos>0 && _t[jia].shupai[max_ex_pos]>0){_t[jia].declare_command=0;_t[jia].declare_param1=max_ex_pos;p=_t[jia].shupai[max_ex_pos] & 0x7f;if(p>0x40){i=20; while(--i>0){if((_t[jia].shupai[i] & 0x7f)==(p & 0x3f)){_t[jia].declare_param1=i; p=_t[jia].shupai[i] & 0x3f;break;}}}if((_t[jia].shupai[14] & 0x7f)==p) _t[jia].declare_param1=14;j=p & 0x3f; i=_t_gangpai_ctr; while(--i>=0){if((_t_gangpai[i] & 0x3f)==j) break;}if(i>-1){if(j>0x30){_t[jia].declare_command=21;_t[jia].declare_param1=p;return(21);}i=20; while(--i>0){if((k=_t[jia].shupai[i] & 0x3f)<1) continue;if((k ^ j) & 0x30) continue;if(k-j==1 || k-j==-1 || k-j==2 || k-j==-2) break;}if(i<1){_t[jia].declare_command=21;_t[jia].declare_param1=p;return(21);}i=_t[jia].fulou_ctr; k=-5;while(--i>=0){k+=5;m=_t[jia].fuloupai[k] & 0x3f;n=_t[jia].fuloupai[k+1] & 0x3f;if(m==n && m==j) break;}if(i>-1){_t[jia].declare_command=21;_t[jia].declare_param1=p;return(21);}}if(frt2 || sbt2) return(0);if(_t_gamemode==_T_GAMEMODE_BOO && !_t[jia].menqian_flag && _t_zampai_ctr>_t_players*5){if(tgw<5 || _t_zampai_ctr / _t_players>12) _t_reach_declare_flag=1;}return(0);}dlim=60;var f=0;var nxt=a0000(jia, 1);if((p=a0129(jia, nxt))>0) ;else if(_t_gamemode==_T_GAMEMODE_BOO && a0130(jia, nxt)){a0114(jia);p=a0106(jia, dlim);}else {if(a0120(jia)) f=1;else if(a0121(jia)) f=1;else if(a0122(jia)){f=1;a0080(jia, 0, -1, nxt);a0126(jia);}else if(a0080(jia, 0, -1, nxt)){f=1;if(a0125(jia));else a0126(jia);}else if(a0125(jia)) f=1;else if(a0126(jia)) f=1;a0114(jia);}if(p<1){i=20; k=-1; while(--i>0){j=_t[jia].shupai[i] & 0x3f;if(j<1 || j>0x37 || noDapai_tbl[j]) continue;if(k<vYaku[j]) k=vYaku[j];}if(k>0x00ff) p=a0109(jia, dlim);else p=a0107(jia, 0, dlim);}_t[jia].declare_command=0;i=20; while(--i>0){if((_t[jia].shupai[i] & 0x7f)==p){_t[jia].declare_param1=i; break;}}if(i<1){i=20; while(--i>0){if((_t[jia].shupai[i] & 0x3f)==p){_t[jia].declare_param1=i; p=_t[jia].shupai[i]; break;}}}if((_t[jia].shupai[14] & 0x7f)==p) _t[jia].declare_param1=14;j=p & 0x3f; i=_t_gangpai_ctr; while(--i>=0){if((_t_gangpai[i] & 0x3f)==j) break;}if(i>-1){if(j>0x30){_t[jia].declare_command=21;_t[jia].declare_param1=p;return(21);}i=20; while(--i>0){if((k=_t[jia].shupai[i] & 0x3f)<1) continue;if((k ^ j) & 0x30) continue;if(k-j==1 || k-j==-1 || k-j==2 || k-j==-2) break;}if(i<1){_t[jia].declare_command=21;_t[jia].declare_param1=p;return(21);}i=_t[jia].fulou_ctr; k=-5;while(--i>=0){k+=5;m=_t[jia].fuloupai[k] & 0x3f;n=_t[jia].fuloupai[k+1] & 0x3f;if(m==n && m==j) break;}if(i>-1){_t[jia].declare_command=21;_t[jia].declare_param1=p;return(21);}}var ppp=_t[jia].shupai[_t[jia].declare_param1]; _t[jia].shupai[_t[jia].declare_param1]=0;a0091(jia);_t[jia].shupai[_t[jia].declare_param1]=ppp;return(0);}function a0103(jia){var mxf =mxf2=mxfc =mxfc2=tgw =mny =mny2=    mpch =mpch2=mpct =mpct2=    yfa =avf = avf2=nrc =nrc2= frt = frt2=    ntt =ntt2=sbt =sbt2=ex =ex2=0;var exT=mpchT=mpctT=frtT=sbtT=avfT=tgwT=0;var mny =mny2=-1;var max_ex_pos=max_ex_posT=-1;var i, j, k, l, m, n, o, p;var dpp, dp, dp2;var nm, dpq, dq, dq2;var ls=_t_lingshang_flag; _t_lingshang_flag=0;var zz=_t_zampai_ctr; _t_zampai_ctr=100;i=0x40; while(--i>-1) dpf[i]=0;dpp=20; while(--dpp>-1){dp=_t[jia].shupai[dpp];if((dp2=dp & 0x3f)<1 || dp2>0x37) continue;if(noDapai_tbl[dp2]) continue;if(vDanger[dp2]>20) continue;if(dpf[dp2]) continue;_t[jia].shupai[dpp]=0; dpf[dp2]++;if(a0111(jia)){mxc =mxfc =tgrf =mpch =mpct =yfa =avf =nrc =frt =ntt =sbt =ex =0;mny =-1;hp=0; while(++hp<0x38){if(!(hp & 0x0f) || (hp & 0x0f)>9) continue;if(mpcd[hp]<1 && mpcd[hp & 0x30]<1) continue;_t[jia].shupai[15]=hp;var keishikiHele=_t_yaku_judge(jia, 2, -1);if(keishikiHele>0){if(_t_dandiao){i=16; j=0; while(--i>=0){if((_t[jia].shupai[i] & 0x3f)==hp) j++;}if(j>2) ntt++;}if(vZpt[hp]>0){mpch++;yfa+=_t_yakufan_ctr;mpct+=vZpt[hp];ex+=vZpt[hp]*_t_yakufan_ctr;if(mny<0 || _t_yakufan_ctr<mny) mny=_t_yakufan_ctr;if(_t_yakufan_ctr>=mxf){if(_t_yakufan_ctr>mxf){mxf=_t_yakufan_ctr; mxfc=0;}mxfc++;}}}if(keishikiHele>-1){if(_t[jia].fusipai[hp]>0) frt=1;}_t[jia].shupai[15]=0;}if(mpch>0){i=Math.floor(yfa / mpch);if(max_ex_pos<0){if(mpch>mpch2 || (mpch==mpch2 && mpct>mpct2)){mpch2=mpch; mpct2=mpct;tgw=0; max_ex_pos=dpp;frt2=frt; sbt2=sbt; avf=i;}}}}_t[jia].shupai[dpp]=dp;}_t_zampai_ctr=zz;_t_lingshang_flag=ls;if(max_ex_pos>0 && _t[jia].shupai[max_ex_pos]>0){_t[jia].declare_command=0;_t[jia].declare_param1=max_ex_pos;p=_t[jia].shupai[max_ex_pos] & 0x7f;if(p>0x40){i=20; while(--i>0){if((_t[jia].shupai[i] & 0x7f)==(p & 0x3f)){_t[jia].declare_param1=i; p=_t[jia].shupai[i] & 0x3f;break;}}}if((_t[jia].shupai[14] & 0x7f)==p) _t[jia].declare_param1=14;j=p & 0x3f; i=_t_gangpai_ctr; while(--i>=0){if((_t_gangpai[i] & 0x3f)==j) break;}if(i>-1){if(j>0x30){_t[jia].declare_command=21;_t[jia].declare_param1=p;return(21);}i=20; while(--i>0){if((k=_t[jia].shupai[i] & 0x3f)<1) continue;if((k ^ j) & 0x30) continue;if(k-j==1 || k-j==-1 || k-j==2 || k-j==-2) break;}if(i<1){_t[jia].declare_command=21;_t[jia].declare_param1=p;return(21);}i=_t[jia].fulou_ctr; k=-5;while(--i>=0){k+=5;m=_t[jia].fuloupai[k] & 0x3f;n=_t[jia].fuloupai[k+1] & 0x3f;if(m==n && m==j) break;}if(i>-1){_t[jia].declare_command=21;_t[jia].declare_param1=p;return(21);}}if(!_t[jia].menqian_flag && _t_zampai_ctr>_t_players*5) _t_reach_declare_flag=1;return(0);}dlim=60;var nxt=a0000(jia, 1);if((p=a0129(jia, nxt))>0) ;else if(a0130(jia, nxt)){a0114(jia);p=a0107(jia, 0, dlim);}else {a0114(jia);p=a0107(jia, i, 0);}_t[jia].declare_command=0;i=20; while(--i>0){if((_t[jia].shupai[i] & 0x7f)==p){_t[jia].declare_param1=i; break;}}if(i<1){i=20; while(--i>0){if((_t[jia].shupai[i] & 0x3f)==p){_t[jia].declare_param1=i; p=_t[jia].shupai[i]; break;}}}if((_t[jia].shupai[14] & 0x7f)==p) _t[jia].declare_param1=14;j=p & 0x3f; i=_t_gangpai_ctr; while(--i>=0){if((_t_gangpai[i] & 0x3f)==j) break;}if(i>-1){if(j>0x30){_t[jia].declare_command=21;_t[jia].declare_param1=p;return(21);}i=20; while(--i>0){if((k=_t[jia].shupai[i] & 0x3f)<1) continue;if((k ^ j) & 0x30) continue;if(k-j==1 || k-j==-1 || k-j==2 || k-j==-2) break;}if(i<1){_t[jia].declare_command=21;_t[jia].declare_param1=p;return(21);}i=_t[jia].fulou_ctr; k=-5;while(--i>=0){k+=5;m=_t[jia].fuloupai[k] & 0x3f;n=_t[jia].fuloupai[k+1] & 0x3f;if(m==n && m==j) break;}if(i>-1){_t[jia].declare_command=21;_t[jia].declare_param1=p;return(21);}}var ppp=_t[jia].shupai[_t[jia].declare_param1]; _t[jia].shupai[_t[jia].declare_param1]=0;a0091(jia);_t[jia].shupai[_t[jia].declare_param1]=ppp;return(0);}
