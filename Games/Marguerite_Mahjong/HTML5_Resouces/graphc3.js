_t_charMode=0;_t_overflow=0;chip_data=new Array('ippatsu', 'uradora', 'hanapai', 'akapai', 'yakuman', 'gang', 'yakibuta');function _t_hele_disp(jia ,str){var cs=29, csfg=22, w, h, margin=24, blines=4, bcolumns=16, e, n, dlim;var i, j, k,o, x, y, x1, y1, xh, yh, f;_t_charMode=0;if(_t_lang!='ja' && _t_lang!=''){_i18n_t_hele_disp(jia ,str);return;}if(jia>-1){cs=24; csfg=20; margin=16; blines=4; bcolumns=12;++_t_charMode;}w=cs*12+margin*2+bcolumns*3;if(_t_gamemode==_T_GAMEMODE_GUOJI) w=cs*14+margin*2+bcolumns*3;h=cs*7+blines*5+cs+margin*2;;if(jia<0 || _t_players==2){ xh=600-w/2; yh=270; }else if(_t_players==4){xh=600-w/2; yh=270;if(_t[3].declare_command!=25){if(jia==0){ xh=600-w-2; yh=194+h; }if(jia==2){ xh=600-w-2; yh=194; }if(jia==1){ xh=600+2; yh=194+h/2; }if(_t[1].declare_command!=25) xh+=100;}else if(_t[1].declare_command!=25){if(jia==0){ xh=600+2; yh=194+h; }if(jia==2){ xh=600+2; yh=194; }if(jia==3){ xh=600-w-2; yh=194+h/2; }}else if(_t[2].declare_command!=25){if(jia==0){ xh=540-w / 2; yh=198+h; }if(jia==1){ xh=600+2; yh=194; }if(jia==3){ xh=600-w-2; yh=194; }if(_t[0].declare_command!=25) yh+=h / 2;}else if(_t[0].declare_command!=25){if(jia==2){ xh=600-w / 2; yh=190; }if(jia==1){ xh=600+2; yh=194+h; }if(jia==3){ xh=600-2-w; yh=194+h; }}}else {if(_t[1].declare_command!=25){if(jia==0){ xh=800-w; yh=170+h+2; }if(jia==2){ xh=670-2-w; yh=170-2; }}else if(_t[2].declare_command!=25){if(jia==0){ xh=800-w; yh=170+h+2; }if(jia==1){ xh=530+2; yh=170-2; }}else  {if(jia==2){ xh=600-w-2; yh=170+h; }if(jia==1){ xh=600+2; yh=170+h; }}}if(_t_players==3) yh-=100;n='YAKU_DETAILS';if(jia>-1) n+='-'+jia;else n+='-A';e=document.getElementsByTagName('div');i=e.length; while(--i>=0){if(!e[i].getAttribute('data-bylib')) continue;if(!(j=e[i].getAttribute('id'))) continue;if(j.indexOf(n)!=0) continue;e[i].parentNode.removeChild(e[i]);}_t_textWindow(n, xh, yh, w, h, '#fff');x=xh+margin; y=yh+margin; x1=0; y1=0;if(str!=''){_t_leftText4Yaku(n+'-TEXT', x, y, (cs*6+bcolumns)*2+bcolumns, (cs+blines)*6+cs, '#0ff', str);}else if(_t_gamemode==_T_GAMEMODE_BEINUKI && _t_yakuman_name_ctr<1 && _t_yaku_name_ctr<1){_t_leftText4Yaku(n+'-NAME1', x, y, cs*7+bcolumns, cs+blines, '#f00', 'カラス');x=xh+margin; y=yh+margin+cs*7+blines*5;_t_leftText4Yaku(n+'-RESULT', x, y, cs*3+bcolumns, cs+blines, '#0ff', '罰点');x=xh+margin+cs*6+bcolumns;_t_rightText4Yaku(n+'-RESULT_VAL', x, y, cs*6, cs+blines, '#fff', '-6');_t_leftText4Yaku(n+'-RESULT_VALUNIT', x+cs*6, y, cs*6, cs+blines, '#ff0', '点');}else {if(_t_yakuman_name_ctr>0){i=-1; dlim=Math.min(5, _t_yakuman_name_ctr);while(++i<dlim){_t_leftText4Yaku(n+'-YAKUNAME_'+i, x, y, cs*14+bcolumns, cs+blines, '#0ff', _t_yakuman_name[i]);y+=cs+blines;}x=xh+margin; y=yh+h+4-cs-margin;_t_leftText4Yaku(n+'-FU_MANGANNAME', x, y, cs*3+bcolumns, cs+blines, '#0ff', _t_yaku_manguan);}else {f='翻';if(_t_gamemode==_T_GAMEMODE_TAIWAN) f='台';else if(_t_gamemode==_T_GAMEMODE_GUOJI) f='分';if(_t_yakuman_name_ctr<1 && _t_yaku_name_ctr<1){_t_leftText4Yaku(n+'-YAKUNAME', x, y, cs*7+bcolumns, cs+blines, '#0ff', '役無し');}else {i=-1; dlim=Math.min(12, _t_yaku_name_ctr);j=4; if(_t_gamemode==_T_GAMEMODE_GUOJI) j++;while(++i<dlim){_t_leftText4Yaku(n+'-YAKUNAME_'+i, x, y, cs*j+bcolumns, cs+blines, '#0ff', _t_yaku_name[i]);_t_rightText4Yaku(n+'-YAKUVAL_'+i, x+cs*(j), y, cs*2.5, cs+blines, '#fff', ' '+_t_yaku_fansu[i]+'</span><span style="color: #FF0; ">'+f+'</span>');y+=cs+blines;if(++y1>5){y1=0; x=xh+w-cs*6-margin-4; y=yh+margin;if(_t_gamemode==_T_GAMEMODE_GUOJI) x=xh+w-cs*7-margin-4;}}}x=xh+margin; y=yh+h+4-cs-margin;if(_t_fu<0 && _t_fu_guide!=''){_t_fu_guide=_t_fu_guide.split('\n').join('<br/>');_t_fu_guide=_t_fu_guide.split(' ').join('&nbsp;');newTextArea(n+'-FU_GUIDE', xh+w-csfg*7-margin, yh+margin, csfg*7+8, cs*9, csfg, 'rgba(0,0,0,0)', '#FFF');e=document.getElementById(n+'-FU_GUIDE');e.style.lineHeight='1.1em';e.style.textAlign='left';e.style.fontFamily='monospace';e.style.color='#ccc';e.innerHTML=_t_fu_guide;}else if(_t_fu!=0){if(_t_fu_guide!=''){_t_fu_guide=_t_fu_guide.split('\n').join('<br/>');_t_fu_guide=_t_fu_guide.split(' ').join('&nbsp;');newTextArea(n+'-FU_GUIDE', xh+w-csfg*7-margin, yh+margin, csfg*7+8, cs*9, csfg, 'rgba(0,0,0,0)', '#FFF');e=document.getElementById(n+'-FU_GUIDE');e.style.lineHeight='1.1em';e.style.verticalAlign='text-top';e.style.textAlign='left';e.style.fontFamily='monospace';e.style.whiteSpace='nowrap';e.style.color='#ccc';e.innerHTML='符明細<br />──────<br />'+_t_fu_guide;}j=0;if(_t_fu>0){_t_leftText4Yaku(n+'-FU_TOTAL', x, y, cs*3, cs+blines, '#fff', _t_fu+'<span style="color: #ffff00">符</span>');j=cs*2.5;if(_t_fu>99) j+=cs*0.5;}x+=j;}i=_t_yakufan_ctr+'<span style="color: #ffff00">'+f+'</span>';_t_leftText4Yaku(n+'-FAN_TOTAL', x, y, cs*3, cs+blines, '#fff', i);if(_t_yakufan_ctr>99) x+=cs*0.5;if(_t_yakufan_ctr>9) x+=cs*0.5;x+=cs*2;_t_leftText4Yaku(n+'-FU_MANGANNAME', x, y, cs*4+bcolumns, cs+blines, '#0ff', _t_yaku_manguan);}x=xh+w-cs*11.5;_t_rightText4Yaku(n+'-POINT_RESULT', x, y, cs*11, cs+blines, '#fff', _t_point_string(_t_yaku_result_point)+'<span style="color: #ffff00">点</span>');}}function _t_leftText4Yaku(n, x, y, w, h, color, str){var e, s=27;if(_t_charMode) s=22;newTextArea(n, x, y, w, h, s, 'rgba(0,0,0,0)', '#FFF');e=document.getElementById(n);e.style.color=color;e.style.textAlign='left';e.style.fontFamily='serif';e.style.verticalAlign='text-top';e.style.lineHeight="1em";e.innerHTML=str;}function _t_rightText4Yaku(n, x, y, w, h, color, str){var e, s=27;if(_t_charMode) s=22;newTextArea(n, x, y, w, h, s, 'rgba(0,0,0,0)', '#FFF');e=document.getElementById(n);e.style.color=color;e.style.textAlign='right';e.style.fontFamily='serif';e.style.verticalAlign='text-top';e.style.lineHeight="1em";e.innerHTML=str;}function _t_balance_disp(btype){i=_t_players;while(--i>=0) _t_balance_disp2(i, btype);}function _t_balance_disp2(jia, btype){var cs2=29, w, h, margin=16, blines=4, bcolumns=16, e, n='BALANCE-'+jia;var i, j, k,o, x, y, xh, yh, w2;var str='';if(_t_lang!='ja' && _t_lang!=''){_i18n_t_balance_disp2(jia, btype);return;}w=cs2*9+margin*2;h=cs2*6+blines*6+margin*2;w2=cs2*9;if(_t_rule.chip.any) w+=bcolumns+29*7;xh=600-w/2; yh=250+h+3;if(_t_players!=3){if(_t_rule.chip.any){xh=530-w/2; yh=200+h/2+h+6;if(jia==2){ xh=600-w/2; yh=200-h/2; }if(jia==1){ xh=603; yh=200+h/2+3; }if(jia==3){ xh=600-w; yh=200+h/2+3; }}else {yh=200+h+3;if(jia==2){ xh=600-w/2; yh=200; }if(jia==1){ xh=600+2+w/2+3; yh=200+h/2+3; }if(jia==3){ xh=600-2-w-w/2-3; yh=200+h/2+3; }}}else {yh=290+h+3;if(jia==2){ xh=600-w; yh=290; }if(jia==1){ xh=603; yh=290; }if(_t_rule.chip.any && jia==0){xh=530-w/2;}if(_t_rule.unlimited) yh-=29;}if(_t_players==3) yh-=100;e=document.getElementsByTagName('div');i=e.length; while(--i>=0){if(!e[i].getAttribute('data-bylib')) continue;if(!(j=e[i].getAttribute('id'))) continue;if(j.indexOf('YAKU_')!=0) continue;e[i].parentNode.removeChild(e[i]);}_t_textWindow(n, xh, yh, w, h, '#fff');if(btype==2){_t_overflow=j=0;i=_t[jia].score;if(i<0){ j=1; i=-i; }str=_t_point_string2(i);y=yh+((h-29) >> 1);if(_t_overflow) y-=(29+blines) >> 1;_t_leftText(n+'_MOCHITEN', xh+margin, y, 29*6, 29+blines, '#00ffff', '持点');if(_t_overflow){y+=29+blines;if(j){y+=29+blines;if(j) _t_rightText(n+'_MOCHITEN-SIGN', xh+margin, y, 29, 29+blines, '#ffffff', '&#65293;');_t_rightText(n+'_MOCHITEN-NUM', xh+w-margin-29*12, y, 29*12, 29+blines, '#ffffff', str+'<span style="color: #ffff00">点</span>');}}else {if(j) _t_leftText(n+'_MOCHITEN-SIGN', xh+w-margin-29*5, y, 29, 29+blines, '#ffffff', '&#65293;');_t_rightText(n+'_MOCHITEN-NUM', xh+w-margin-29*5, y, 29*5, 29+blines, '#ffffff', str+'<span style="color: #ffff00">点</span>');}}else if(!_t[jia].balance_point && !_t[jia].balance_kyotaku){_t_overflow=j=0;i=_t[jia].score;if(i<0){ j=1; i=-i; }str=_t_point_string2(i)+'<span style="color: #ffff00">点</span>';y=yh+((h-29-blines) >> 1)+3;if(_t_overflow) y=yh+(h >> 1)-29-blines;_t_leftText(n+'_CURRENT', xh+margin+4, y, 29*6, 29, '#0ff', '現在');_t_point_output(n+'_CURRENT_NUM', j, str, xh+margin, y, w2, blines);if(_t_rule.chip.any){_t_leftText(n+'_CURRENT_CHIP_H', xh+29*11, y, 29*3, 29, '#0ff', 'チップ');if(_t_overflow) y+=29+blines;if((k=_t[jia].chip+_t[jia].chip_balance)<0){_t_leftText(n+'_CURRENT_CHIP', xh+29*14, y, 29, 29, '#fff', ' -');k=-k;}_t_rightText(n+'_CURRENT_CHiP_NUM', xh+29*15, y, 29*2, 29, '#fff', '   '+k+'<span style="color: #ffff00">枚</span>');}}else {y=yh+margin-(29+blines)+5;if(_t[jia].balance_point!=0){y+=29+blines;var nm='和了点';if(btype){nm='不聴罰'; if(_t[jia].balance_point>0) nm='聴牌料';}i=_t[jia].balance_point;_t_overflow=j=0; if(i<0){ j=1; i=-i; }str=_t_point_string2(i)+'<span style="color: #ffff00">点</span>';_t_leftText(n+'_HELETEN_H', xh+margin+4, y, 29*6, 29+blines, '#0ff', nm);_t_point_output(n+'_HELETEN_NUM', j, str, xh+margin, y, w2, blines);if(_t_overflow) y+=29+blines;}if(_t_gamemode==_T_GAMEMODE_TAIWAN && (i=_t[jia].balance_zhuangjia)!=0){y+=29+blines;_t_overflow=j=0; if(i<0){ j=1; i=-i; }str=_t_point_string2(i)+'<span style="color: #ffff00">点</span>';_t_leftText(n+'_ZHUANGJIATEN_H', xh+margin+4, y, 29*6, 29+blines, '#0ff', '荘家点');_t_point_output(n+'_ZHUANGJIATEN_NUM', j, str, xh+margin, y, w2, blines);if(_t_overflow) y+=29+blines;}if(_t_gamemode==_T_GAMEMODE_BOO && (i=_t[jia].balance_menqian)!=0){y+=29+blines;_t_overflow=j=0; if(i<0){ j=1; i=-i; }str=_t_point_string2(i)+'<span style="color: #ffff00">点</span>';_t_leftText(n+'_MENQIANTEN_H', xh+margin+4, y, 29*6, 29+blines, '#0ff', '門前点');_t_point_output(n+'_MENQIANTEN_NUM', j, str, xh+margin, y, w2, blines);if(_t_overflow) y+=29+blines;}if(_t[jia].balance_tsumi!=0){y+=29+blines;var nm='積棒'; if(_t_gamemode==_T_GAMEMODE_TAIWAN){nm='連荘点';if(_t[_t_zhuangjia].declare_command!=25) nm='拉荘点';}i=_t[jia].balance_tsumi;_t_overflow=j=0; if(i<0){ j=1; i=-i; }str=_t_point_string2(i)+'<span style="color: #ffff00">点</span>';_t_leftText(n+'_LIANZHUANGTEN_H', xh+margin+4, y, 29*6, 29+blines, '#0ff', nm);_t_point_output(n+'_LIANZHUANGTEN_NUM', j, str, xh+margin, y, w2, blines);if(_t_overflow) y+=29+blines;}if(_t_gamemode==_T_GAMEMODE_BOO && _t_yaku_dora>0 && (_t[jia].balance_point>0 || _t[jia].balance_dora!=0)){y+=29+blines;i=_t[jia].balance_dora;_t_overflow=j=0; if(i<0){ j=1; i=-i; }str=_t_point_string2(i)+'<span style="color: #ffff00">点</span>';_t_leftText(n+'_DORA_H', xh+margin+4, y, 29*6, 29+blines, '#0ff', 'ドラ '+_t_yaku_dora);if(!i){str='<span style="color: #ff0000">無効</span>';_t_overflow=0;}_t_point_output(n+'_DORA_NUM', j, str, xh+margin, y, w2, blines);if(_t_overflow) y+=29+blines;}if(_t[jia].balance_kyotaku!=0){y+=29+blines;i=_t[jia].balance_kyotaku;_t_overflow=j=0; if(i<0){ j=1; i=-i; }str=_t_point_string2(i)+'<span style="color: #ffff00">点</span>';_t_leftText(n+'_KYOTAKUTEN_H', xh+margin+4, y, 29*6, 29+blines, '#0ff', '供託点');_t_point_output(n+'_KYOTAKUTEN_NUM', j, str, xh+margin, y, w2, blines);if(_t_overflow) y+=29+blines;}i=_t[jia].score_after_balance;_t_overflow=j=0; if(i<0){ j=1; i=-i; }str=_t_point_string2(i)+'<span style="color: #ffff00">点</span>';y=yh+h-margin-29;if(_t_overflow) y-=29+blines;_t_leftText(n+'_TOTAL_H', xh+margin+4, y, 29*6, 29+blines, '#0ff', '収支後');_t_point_output(n+'_TOTAL_NUM', j, str, xh+margin, y, w2, blines);if(_t_rule.chip.any){y=yh+margin-(29+blines); var ct=0;i=-1; while(++i<chip_data.length){j=chip_data[i];if(!(k=_t[jia].chip_detail[j])) continue;y+=29+blines;_t_leftText(n+'_CHIP_'+j.toUpperCase()+'_H', xh+29*9+bcolumns*3, y, 29*3, 29+blines, '#0ff', _t_chip_name[j]);if(k<0){_t_leftText(n+'_CHIP_'+j.toUpperCase()+'_SIGN', xh+29*14, y, 29, 29+blines, '#fff', '-');k=-k;}_t_rightText(n+'_CHIP_'+j.toUpperCase()+'_NUM', xh+29*15, y, 29*2, 29+blines, '#fff', '   '+k+'<span style="color: #ffff00">枚</span>');if(++ct>5) break;}y=yh+h-margin-29;_t_leftText(n+'_CHIP_TOTAL_H', xh+29*11, y, 29*3, 29, '#0ff', 'チップ');if((k=_t[jia].chip+_t[jia].chip_balance)<0){_t_leftText(n+'_CHIP_TOTAL_SIGN', xh+29*14, y, 29, 29+blines, '#fff', ' -');k=-k;}_t_rightText(n+'_CHIP_TOTAL_JUM', xh+29*15, y, 29*2, 29+blines, '#fff', '   '+k+'<span style="color: #ffff00">枚</span>');}}}function _t_point_string(s){var i=s, j;if(!s) return('                 0');if(s<0) i=-i;j=''; i=i.toString(10);if(_t_gamemode==_T_GAMEMODE_REACH || _t_gamemode==_T_GAMEMODE_EASTERN_BOO) i=i+'00';else if(_t_gamemode==_T_GAMEMODE_BOO || _t_gamemode==_T_GAMEMODE_ARSHIAR) i=i+'0';while(i.length>3){k=i.substring(i.length-3, i.length);i=i.substring(0, i.length-3);if(j=='') j=k; else j=k+','+j;}if(i>0){if(j=='') j=i; else j=i+','+j;}j='                  '+j;j=j.substring(j.length-18, j.length);return(j);}function _t_point_string2(s){var i=s, j, sg=' ';_t_overflow=0;if(!s) return('      0');if(s<0){ sg='-'; i=-i; }i=i.toString(10);if(_t_gamemode==_T_GAMEMODE_REACH || _t_gamemode==_T_GAMEMODE_EASTERN_BOO) i=i+'00';else if(_t_gamemode==_T_GAMEMODE_BOO || _t_gamemode==_T_GAMEMODE_ARSHIAR) i=i+'0';if(i.length>5) _t_overflow=1;j=''; while(i.length>3){k=i.substring(i.length-3, i.length);i=i.substring(0, i.length-3);if(j=='') j=k; else j=k+','+j;}if(i>0){if(j=='') j=i; else j=i+','+j;}if(!_t_overflow){j='          '+j;j=j.substring(j.length-6, j.length);}else {j='                '+j;j=j.substring(j.length-16, j.length);}return(sg+j);}function _t_point_output(n, sig, str, x, y, w, blines){var e;if(_t_overflow){if(sig) _t_leftText(n+'-SIGN', x, y+29+blines, 29, 27, '#fff', '&#65293;');_t_rightText(n+'VAL', x+29, y+29+blines, w-29, 27, '#fff', str);return;}if(sig) _t_leftText(n+'-SIGN', x+29*4, y, 29, 27, '#fff', '&#65293;');_t_rightText(n+'VAL', x+29*5, y, w-29*5, 27, '#fff', str);}function _i18n_t_hele_disp(jia ,str){var cs=29, csfg=24, w, h, margin=16, blines=4, bcolumns=16, e;var f, i, j, k, l, m, o, x, y, x1, y1, xh, yh, f, str, n, dlim;_t_charMode=0;n='YAKU_DETAILS';if(jia>-1) n+='-'+jia;else n+='-A';w=cs*28+margin*2+bcolumns*3;h=cs*7+blines*5+cs+margin*2;xh=600-w/2; yh=270;if(jia>-1){i=9 / 10;cs=Math.floor(cs*i);csfg=Math.floor(csfg*i);margin=Math.floor(margin*i);blines=Math.floor(blines*i);bcolumns=Math.floor(bcolumns*i);w=cs*14+bcolumns*2;h=cs*7+blines*5+cs+margin*2;if(_t_dajia==0){if(jia==2){xh=600-w-4; yh=150;if(_t[1].declare_command!=25) xh=600-(w >> 1)-2;}if(jia==1){ xh=600; yh=150+(h >> 1); }if(jia==3){ xh=600-w-4; yh=150+h+2; }if(_t[2].declare_command!=25) yh=150+2+(h >> 1);}else if(_t_dajia==1){if(jia==2){xh=600+2; yh=150-2;if(_t[0].declare_command!=25) xh=600-4-(w >> 1);}if(jia==3){xh=600-w-4; yh=150-2;if(_t[0].declare_command!=25) yh=150+h;}if(jia==0){ xh=700-w; yh=150+h+2; }}else if(_t_dajia==2){if(jia==1){ xh=600+2; yh=150-2; }if(jia==3){ xh=600-w-4; yh=150-2; }if(jia==0){ xh=700-w; yh=150+h+2; }if(_t[0].declare_command!=25) yh=150+(h >> 1);}else {if(jia==1){ xh=600; yh=150+(h >> 1); }if(jia==2){ xh=600-w-4; yh=150; }if(jia==0){ xh=600-w-4; yh=150+h+2; }}}e=document.getElementsByTagName('div');i=e.length; while(--i>=0){if(!e[i].getAttribute('data-bylib')) continue;if(!(j=e[i].getAttribute('id'))) continue;if(j.indexOf(n)!=0) continue;e[i].parentNode.removeChild(e[i]);}_t_textWindow(n, xh, yh, w, h, '#fff');var _i18n_text_fu='Minipoints';var _i18n_text_fan='Fan';var _i18n_text_ten=' Points.';var fontSize=Math.floor(cs*rRatio)+'px';if(_t_lang=='en'){_i18n_text_fu=' Minipoints';_i18n_text_fan=' Fan';_i18n_text_ten=' Points.';i=cs-4;fontSize=Math.floor(i*rRatio)+'px';if(jia>-1){_i18n_text_fu=' M.P.';_i18n_text_fan=' Fan';}}x=xh+4+margin; y=4+yh+margin; x1=0; y1=0;if(jia>-1) y-=4;if(str!=''){_t_leftText4Yaku(n+'-TEXT', x, y, cs*24, (cs+blines)*6+cs, '#0ff', '<span style="font-size: '+fontSize+'">'+str+'</span>');}else {if(_t_yakuman_name_ctr>0){i=-1; dlim=Math.min(6, _t_yakuman_name_ctr);while(++i<dlim){_t_leftText4Yaku(n+'-YAKUNAME_'+i, x, y, cs*7+bcolumns, cs+blines, '#0ff', '<span style="font-size: '+fontSize+'">'+_t_yakuman_name[i]+'</span>');y+=cs+blines;}str='<span style="color: #00ffff; font-size: '+fontSize+'">'+_t_yaku_manguan+'</span>';}else {j=13; i=-1; dlim=Math.min(10, _t_yaku_name_ctr);if(jia>-1) dlim=Math.min(6, _t_yaku_name_ctr);while(++i<dlim){_t_leftText4Yaku(n+'-YAKUNAME_'+i, x, y, cs*j+bcolumns, cs+blines, '#0ff', '<span style="font-size: '+fontSize+'">'+_t_yaku_name[i]+'</span>');_t_rightText4Yaku(n+'-YAKUVAL_'+i, x+cs*j-cs, y, cs*2, cs+blines, '#fff', '<span style="font-size: '+fontSize+'"> '+_t_yaku_fansu[i]+'</span>');y+=cs+blines;if(++y1>5){y1=0; x=xh+margin+cs*14+bcolumns*2; y=4+yh+margin;}}str='';if(_t_fu!=0){if(_t_fu_guide!='' && jia<0){_t_fu_guide=_t_fu_guide.split('\n').join('<br/>');_t_fu_guide=_t_fu_guide.split(' ').join('&nbsp;');newTextArea(n+'-FU_GUIDE', xh+w+4-csfg*15-margin, 4+yh+margin, csfg*15, cs*9, csfg, 'rgba(0,0,0,0)', '#FFF');e=document.getElementById(n+'-FU_GUIDE');e.style.textAlign='left';e.style.verticalAlign='text-top';e.style.fontFamily='monospace';e.style.whiteSpace='nowrap';e.style.color='#ccc';e.innerHTML=_t_fu_guide;}j=0;if(_t_fu>0){str=_t_fu+'<span style="color: #ffff00">'+_i18n_text_fu+'</span>, ';}}str+=(_t_yakufan_ctr-2)+'<span style="color: #ffff00" size="'+fontSize+'">'+_i18n_text_fan+'</span> ';if(_t_yaku_manguan!='') str+=String.fromCharCode(0x00a0)+'<span style="color: #00ffff" size="'+fontSize+'">'+_t_yaku_manguan+'</span>';}x=xh+4+margin; y=yh+h+4-cs-margin;if(_t_gamemode!=_T_GAMEMODE_GUOJI) _t_leftText4Yaku(n+'-FAN_TOTAL', x, y, cs*20, cs+blines, '#fff', '<span style="font-size: '+fontSize+'">'+str+'</span>');else _t_leftText4Yaku(n+'-FAN_TOTAL', x, y, cs*6, cs+blines, '#0ff', '<span style="font-size: '+fontSize+'">Total</span>');i=cs*30; if(jia>-1) i=cs*14;_t_rightText4Yaku(n+'-POINT_RESULT', xh+margin, y, i, cs+blines, '#fff', '<span style="font-size: '+fontSize+'">'+_t_point_string(_t_yaku_result_point)+'<span style="color: #ffff00">'+_i18n_text_ten+'</span></span>');}}function _i18n_t_balance_disp2(jia, btype){var cs=29, w, h, margin=16, blines=4, bcolumns=16, e, n='BALANCE-'+jia;var i, j, k,o, x, y, xh, yh;var str='';w=margin*2+29*16;h=blines*6+29*5+margin*2;xh=600-w/2; yh=250+h/2+h+6;if(jia==2){ xh=600-w/2; yh=250-h/2; }if(jia==1){ xh=603; yh=250+h/2+3; }if(jia==3){ xh=600-w; yh=250+h/2+3; }var _i18n_text_score='Current Score';var _i18n_text_hele='Points';var _i18n_text_buting='Not-Ready Penalty';var _i18n_text_tingpai='Ready-to-Win Bonus';var _i18n_text_reach_bet='Riich Bets';var _i18n_text_tsumi='Counted';var _i18n_text_total='Score after Balance';var _i18n_text_ten='Pts.';var fontSize=Math.floor(cs*rRatio)+'px';if(_t_lang=='en'){_i18n_text_score='Current Score';_i18n_text_hele='Points';_i18n_text_buting='Not-Ready Penalty';_i18n_text_tingpai='Ready-to-Win Bonus';_i18n_text_reach_bet='Riich Bets';_i18n_text_tsumi='Counted';_i18n_text_total='Score after Balance';_i18n_text_ten='Pts.';i=cs-4;fontSize=Math.floor(i*rRatio)+'px';}e=document.getElementsByTagName('div');i=e.length; while(--i>=0){if(!e[i].getAttribute('data-bylib')) continue;if(!(j=e[i].getAttribute('id'))) continue;if(j.indexOf('YAKU_')!=0) continue;e[i].parentNode.removeChild(e[i]);}_t_textWindow(n, xh, yh, w, h, '#fff');if(btype==2){_t_overflow=j=0;i=_t[jia].score;if(i<0){ j=1; i=-i; }str=_t_point_string2(i);y=yh+((h-29) >> 1);if(_t_overflow) y-=(29+blines) >> 1;_t_leftText(n+'_MOCHITEN', xh+margin, y, 29*10, 29+blines, '#0ff', _i18n_text_score);if(j) _t_leftText(n+'_MOCHITEN-SIGN', xh+w-margin-29*5, y, 29, 29+blines, '#fff', '<span style="font-size: '+fontSize+'">-</span>');_t_rightText(n+'_MOCHITEN-NUM', xh+w-margin-29*5, y, 29*5, 29+blines, '#fff', '<span style="font-size: '+fontSize+'">'+str+'<span style="color: #ffff00">'+_i18n_text_ten+'</span></span>');}else if(!_t[jia].balance_point && !_t[jia].balance_kyotaku){_t_overflow=j=0;i=_t[jia].score;if(i<0){ j=1; i=-i; }str=_t_point_string2(i)+'<span style="color: #ffff00">'+_i18n_text_ten+'</span>';y=yh+((h-29) >> 1);_t_leftText(n+'_CURRENT', xh+margin, y, 29*10, 29+blines, '#0ff', '<span style="font-size: '+fontSize+'">'+_i18n_text_score+'</span>');_i18n_point_output(n+'_CURRENT-NUM', j, str, xh+margin*2, y, fontSize, blines);}else {y=yh+margin-(29+blines);if(_t[jia].balance_point!=0){y+=29+blines;var nm=_i18n_text_hele;if(btype){nm=_i18n_text_buting; if(_t[jia].balance_point>0) nm=_i18n_text_tingpai;}i=_t[jia].balance_point;str=_t_point_string2(i)+'<span style="color: #ffff00">'+_i18n_text_ten+'</span>';_t_leftText(n+'_HELETEN_H', xh+margin, y, 29*10, 29+blines, '#0ff', '<span style="font-size: '+fontSize+'">'+nm+'</span>');_i18n_point_output(n+'_HELETEN_NUM', j, str, xh+margin*2, y, fontSize, blines);}if(_t[jia].balance_tsumi!=0){y+=29+blines;i=_t[jia].balance_tsumi;str=_t_point_string2(i)+'<span style="color: #ffff00">'+_i18n_text_ten+'</span>';_t_leftText(n+'_LIANZHUANGTEN_H', xh+margin, y, 29*10, 29+blines, '#0ff', '<span style="font-size: '+fontSize+'">'+_i18n_text_tsumi+'</span>');_i18n_point_output(n+'_LIANZHUANGTEN_NUM', j, str, xh+margin*2, y, fontSize, blines);}if(_t[jia].balance_kyotaku!=0){y+=29+blines;i=_t[jia].balance_kyotaku;str=_t_point_string2(i)+'<span style="color: #ffff00">'+_i18n_text_ten+'</span>';_t_leftText(n+'_KYOTAKUTEN_H', xh+margin, y, 29*10, 29+blines, '#0ff', '<span style="font-size: '+fontSize+'">'+_i18n_text_reach_bet+'</span>');_i18n_point_output(n+'_KYOTAKUTEN_NUM', j, str, xh+margin*2, y, fontSize, blines);}i=_t[jia].score_after_balance;str=_t_point_string2(i)+'<span style="color: #ffff00">'+_i18n_text_ten+'</span>';y=yh+h-margin-29;_t_leftText(n+'_TOTAL_H', xh+margin, y, 29*10, 29+blines, '#0ff', '<span style="font-size: '+fontSize+'">'+_i18n_text_total+'</span>');_i18n_point_output(n+'_TOTAL_NUM', j, str, xh+margin*2, y, fontSize, blines);}}function _i18n_point_output(n, j, str, x, y, fontSize, blines){var e;if(j) _t_leftText(n+'SIGN', x+29*10, y, 29, 29+blines, '#fff', '<span style="font-size: '+fontSize+'">-</span>');_t_rightText(n+'VAL', x+29*10, y, 29*6, 29+blines, '#fff', '<span style="font-size: '+fontSize+'">'+str+'</span>');return;}
